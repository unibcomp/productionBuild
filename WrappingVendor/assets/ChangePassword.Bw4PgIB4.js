import{f as P,e as p,n as S,j as e}from"./index.BqXm1Fu4.js";import{u as q,a as C}from"./useProfile.BKSLRBqa.js";import{m as g}from"./proxy.DnvbgybC.js";const E=()=>{const{user:t}=P(),[i,a]=p.useState(1),[n,h]=p.useState("mobile"),{mutate:f,isPending:c}=q(),{mutate:y,isPending:m}=C(),{register:d,handleSubmit:b,watch:w,formState:{errors:r}}=S(),u=["Verify Identity","Set New Password"],j=()=>{t&&f({...n==="email"&&{email:t?.email},...n==="mobile"&&{email:t?.phone}},{onSuccess:()=>a(2)})},N=()=>a(1),v=s=>{t&&y({otp:s.otp,password:s?.password,confirm_password:s?.confirmPassword},{onSuccess:()=>{a(1)}})};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-r from-indigo-50 to-purple-50 p-6",children:e.jsxs(g.div,{className:"w-full max-w-md bg-white rounded-3xl shadow-2xl p-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"Change Password"}),e.jsx("div",{className:"flex items-center justify-center mb-10 w-full relative",children:u.map((s,o)=>{const l=i>o+1,x=i===o+1;return e.jsxs("div",{className:"flex-1 flex items-center",children:[e.jsxs("div",{className:"flex flex-col items-center relative w-full",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold z-10 transition-colors ${l?"bg-green-500":x?"bg-indigo-600":"bg-gray-300"}`,children:l?"âœ“":o+1}),e.jsx("span",{className:`mt-4 text-sm font-medium ${l?"text-green-500":x?"text-indigo-600":"text-gray-400"}`,children:s})]}),o<u.length-1&&e.jsx("div",{className:`h-1 flex-1 mt-5 ${i>o+1?"bg-indigo-600":"bg-gray-300"}`})]},s)})}),i===1&&e.jsxs(g.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},className:"space-y-6",children:[e.jsx("p",{className:"text-gray-600 text-center",children:"Choose how you want to verify your identity:"}),e.jsx("div",{className:"space-y-4",children:["mobile","email"].map(s=>e.jsxs("label",{className:"flex items-center space-x-3 p-3 border rounded-xl cursor-pointer hover:shadow-md transition-shadow",children:[e.jsx("input",{type:"radio",name:"method",value:s,checked:n===s,onChange:()=>h(s),className:"accent-indigo-500"}),e.jsxs("span",{className:"text-gray-700",children:[s==="mobile"?"Mobile":"Email",":"," ",e.jsx("span",{className:"font-medium",children:s==="mobile"?t?.phone||"Not Provided":t?.email||"Not Provided"})]})]},s))}),e.jsx("button",{onClick:j,disabled:c,className:"w-full bg-indigo-600 text-white py-3 rounded-2xl hover:bg-indigo-700 transition-colors text-lg font-medium disabled:opacity-50",children:c?"Requesting OTP...":"Next"})]},"step1"),i===2&&e.jsxs("form",{onSubmit:b(v),className:"space-y-6",children:[e.jsx("p",{className:"text-gray-600 text-center",children:"Enter the OTP and new password:"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:"OTP",...d("otp",{required:"OTP is required"}),className:"w-full border border-gray-300 rounded-2xl p-3 focus:outline-none focus:ring-2 focus:ring-indigo-500"}),r.otp&&e.jsx("p",{className:"text-red-500 text-sm",children:r.otp.message}),e.jsx("input",{type:"password",placeholder:"New Password",...d("password",{required:"Password is required",minLength:{value:6,message:"Min 6 characters"}}),className:"w-full border border-gray-300 rounded-2xl p-3 focus:outline-none focus:ring-2 focus:ring-indigo-500"}),r.password&&e.jsx("p",{className:"text-red-500 text-sm",children:r.password.message}),e.jsx("input",{type:"password",placeholder:"Confirm Password",...d("confirmPassword",{required:"Confirm password is required",validate:s=>s===w("password")||"Passwords do not match"}),className:"w-full border border-gray-300 rounded-2xl p-3 focus:outline-none focus:ring-2 focus:ring-indigo-500"}),r.confirmPassword&&e.jsx("p",{className:"text-red-500 text-sm",children:r.confirmPassword.message})]}),e.jsxs("div",{className:"flex justify-between items-center space-x-4",children:[e.jsx("button",{type:"button",onClick:N,className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-2xl hover:bg-gray-400 transition-colors text-lg font-medium",children:"Back"}),e.jsx("button",{type:"submit",disabled:m,className:"flex-1 bg-indigo-600 text-white py-3 rounded-2xl hover:bg-indigo-700 transition-colors text-lg font-medium disabled:opacity-50",children:m?"Submitting...":"Submit"})]})]})]})})};export{E as default};
