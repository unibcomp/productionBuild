import{n as b,x as u,j as e,u as y,m as j,a as g,z as p}from"./index.saRe6un4.js";const N=({defaultValues:n,onSubmit:r})=>{const{register:s,control:c,handleSubmit:h}=b({defaultValues:n||{}}),o=u({control:c,name:"payment_settings.payment_gateways"}),m=u({control:c,name:"commission_settings.category_wise_commission"}),x=u({control:c,name:"shipping_settings.shipping_providers"}),l="bg-white dark:bg-gray-800 shadow-md rounded-lg p-6 space-y-4 w-full",t="border border-gray-300 dark:border-gray-700 rounded-md p-2 w-full focus:ring-2 focus:ring-blue-400 focus:outline-none",i="flex items-center space-x-2";return e.jsxs("form",{onSubmit:h(r),className:"space-y-8 p-4 max-w-7xl mx-auto",children:[e.jsxs("div",{className:l,children:[e.jsx("h2",{className:"font-bold text-xl mb-2",children:"Platform Settings"}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx("input",{...s("platform.name"),placeholder:"Platform Name",className:t}),e.jsx("input",{...s("platform.currency"),placeholder:"Currency",className:t}),e.jsx("input",{...s("platform.timezone"),placeholder:"Timezone",className:t}),e.jsx("input",{...s("platform.default_language"),placeholder:"Default Language",className:t}),e.jsx("input",{...s("platform.support_email"),placeholder:"Support Email",className:t}),e.jsxs("label",{className:i,children:[e.jsx("input",{type:"checkbox",...s("platform.maintenance_mode"),className:"w-5 h-5"}),e.jsx("span",{children:"Maintenance Mode"})]})]})]}),e.jsxs("div",{className:l,children:[e.jsx("h2",{className:"font-bold text-xl mb-2",children:"Payment Settings"}),e.jsxs("label",{className:i,children:[e.jsx("input",{type:"checkbox",...s("payment_settings.cash_on_delivery"),className:"w-5 h-5"}),e.jsx("span",{children:"Cash on Delivery"})]}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Payment Gateways"}),o.fields.map((d,a)=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsx("input",{...s(`payment_settings.payment_gateways.${a}.name`),placeholder:"Gateway Name",className:"flex-1 border p-2 rounded"}),e.jsxs("label",{className:i,children:[e.jsx("input",{type:"checkbox",...s(`payment_settings.payment_gateways.${a}.enabled`),className:"w-5 h-5"}),"Enabled"]}),e.jsx("button",{type:"button",onClick:()=>o.remove(a),className:"text-red-600 font-semibold hover:text-red-800 transition",children:"Remove"})]},d.id)),e.jsx("button",{type:"button",onClick:()=>o.append({name:"",enabled:!1}),className:"text-blue-600 font-semibold hover:text-blue-800 transition",children:"+ Add Gateway"})]})]}),e.jsxs("div",{className:l,children:[e.jsx("h2",{className:"font-bold text-xl mb-2",children:"Commission Settings"}),e.jsx("input",{...s("commission_settings.default_commission_percent"),type:"number",placeholder:"Default Commission %",className:t}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Category-wise Commission"}),m.fields.map((d,a)=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsx("input",{...s(`commission_settings.category_wise_commission.${a}.category_id`),placeholder:"Category ID",className:"flex-1 border p-2 rounded"}),e.jsx("input",{...s(`commission_settings.category_wise_commission.${a}.commission_percent`),type:"number",placeholder:"Commission %",className:"flex-1 border p-2 rounded"}),e.jsx("button",{type:"button",onClick:()=>m.remove(a),className:"text-red-600 font-semibold hover:text-red-800 transition",children:"Remove"})]},d.id)),e.jsx("button",{type:"button",onClick:()=>m.append({category_id:"",commission_percent:0}),className:"text-blue-600 font-semibold hover:text-blue-800 transition",children:"+ Add Category Commission"})]})]}),e.jsxs("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:l,children:[e.jsx("h2",{className:"font-bold text-xl mb-2",children:"Tax Settings"}),e.jsxs("label",{className:i,children:[e.jsx("input",{type:"checkbox",...s("tax_settings.gst_enabled"),className:"w-5 h-5"}),e.jsx("span",{children:"GST Enabled"})]}),e.jsx("input",{...s("tax_settings.gst_percent"),type:"number",placeholder:"GST %",className:t}),e.jsxs("label",{className:i,children:[e.jsx("input",{type:"checkbox",...s("tax_settings.tax_inclusive"),className:"w-5 h-5"}),e.jsx("span",{children:"Tax Inclusive"})]})]}),e.jsxs("div",{className:l,children:[e.jsx("h2",{className:"font-bold text-xl mb-2",children:"Order Settings"}),e.jsx("input",{...s("order_settings.auto_cancel_days"),type:"number",placeholder:"Auto Cancel Days",className:t}),e.jsx("input",{...s("order_settings.return_window_days"),type:"number",placeholder:"Return Window Days",className:t}),e.jsx("input",{...s("order_settings.auto_settlement_days"),type:"number",placeholder:"Auto Settlement Days",className:t})]}),e.jsxs("div",{className:l,children:[e.jsx("h2",{className:"font-bold text-xl mb-2",children:"Shipping Settings"}),e.jsx("input",{...s("shipping_settings.free_shipping_above"),type:"number",placeholder:"Free Shipping Above",className:t}),e.jsx("input",{...s("shipping_settings.default_shipping_fee"),type:"number",placeholder:"Default Shipping Fee",className:t}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("h3",{className:"font-semibold",children:"Shipping Providers"}),x.fields.map((d,a)=>e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center",children:[e.jsx("input",{...s(`shipping_settings.shipping_providers.${a}.name`),placeholder:"Provider Name",className:"flex-1 border p-2 rounded"}),e.jsxs("label",{className:i,children:[e.jsx("input",{type:"checkbox",...s(`shipping_settings.shipping_providers.${a}.enabled`),className:"w-5 h-5"}),"Enabled"]}),e.jsx("button",{type:"button",onClick:()=>x.remove(a),className:"text-red-600 font-semibold hover:text-red-800 transition",children:"Remove"})]},d.id)),e.jsx("button",{type:"button",onClick:()=>x.append({name:"",enabled:!1}),className:"text-blue-600 font-semibold hover:text-blue-800 transition",children:"+ Add Provider"})]})]}),e.jsxs("div",{className:l,children:[e.jsx("h2",{className:"font-bold text-xl mb-2",children:"Withdraw Settings"}),e.jsxs("label",{className:i,children:[e.jsx("input",{type:"checkbox",...s("withdraw_settings.enabled"),className:"w-5 h-5"}),e.jsx("span",{children:"Withdraw Enabled"})]}),e.jsxs("label",{className:i,children:[e.jsx("input",{type:"checkbox",...s("withdraw_settings.auto_approve"),className:"w-5 h-5"}),e.jsx("span",{children:"Auto Approve Withdrawals"})]}),e.jsx("input",{...s("withdraw_settings.minimum_amount"),type:"number",placeholder:"Minimum Withdraw Amount",className:t}),e.jsx("input",{...s("withdraw_settings.maximum_amount"),type:"number",placeholder:"Maximum Withdraw Amount",className:t}),e.jsx("input",{...s("withdraw_settings.charges_fixed"),type:"number",placeholder:"Fixed Charges",className:t}),e.jsx("input",{...s("withdraw_settings.charges_percent"),type:"number",placeholder:"Percent Charges (%)",className:t}),e.jsx("input",{...s("withdraw_settings.processing_days"),type:"number",placeholder:"Processing Days",className:t})]})]}),e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-md w-full sm:w-auto transition",children:"Save Settings"})]})},f=async()=>(await g.get("/admin-settings")).data.data,_=async n=>(await g.post("/admin-settings",n)).data,w=()=>{const n=y({queryKey:["admin-settings"],queryFn:f}),r=j({mutationFn:_});return{...n,saveSettings:r.mutateAsync}},S=()=>{const{data:n,isLoading:r,refetch:s,isRefetching:c}=w();if(r)return e.jsx("p",{children:"Loading settings..."});const h=async()=>{try{p.success("Settings saved successfully!")}catch(m){p.error(m?.message||"Failed to save settings!")}},o=async()=>{p.loading("Refreshing settings..."),await s(),p.dismiss()};return e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Admin Settings"}),e.jsx("button",{onClick:o,disabled:c,className:"bg-gray-700 text-white px-4 py-2 rounded",children:c?"Refreshing...":"Refetch Settings"})]}),n&&e.jsx(N,{defaultValues:n,onSubmit:h})]})};export{S as default};
