import{m as f,a as y,j as e,e as o,k as w,E as B}from"./index.k0Ozj0_e.js";import{u as C,P as S}from"./usePagination.pMw6jCVp.js";import{b as F,u as P}from"./useCreateProduct.Lat5lvH9.js";import{X as k}from"./x.svkAsTWD.js";import{K as h}from"./transition.B6P8kqfi.js";import{h as j}from"./dialog.BlFiF9TA.js";const L=async a=>{const s=new FormData;return s.append("name",a.name),s.append("category",a.category),s.append("image",a.image),(await y.post("/create-brand",s,{headers:{"Content-Type":"multipart/form-data"}})).data},A=()=>f({mutationFn:L}),T=async({id:a,data:s})=>(await y.put(`/update-brand/${a}`,s)).data,z=()=>f({mutationFn:T}),E=({brands:a,startItem:s,refetch:l})=>{const{mutate:c,isPending:i}=z(),d=(t,n)=>{c({id:t,data:{isActive:!n}},{onSuccess:()=>{l()}})};return a.length===0?e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center p-4 text-gray-500",children:"No Brands Found"})})}):e.jsx("tbody",{children:a.map((t,n)=>e.jsxs("tr",{className:"border-t hover:bg-gray-50 text-center transition",children:[e.jsx("td",{className:"p-3 border text-sm font-medium",children:s+n}),e.jsx("td",{className:"p-3 border",children:t.image?e.jsx("img",{src:t.image,alt:t.name,className:"h-10 w-20 object-contain mx-auto"}):e.jsx("span",{className:"text-gray-400 text-sm",children:"No Image"})}),e.jsx("td",{className:"p-3 border text-sm",children:t.name}),e.jsx("td",{className:"p-3 border text-sm",children:t.description||"-"}),e.jsx("td",{className:"p-3 border text-sm",children:e.jsx("button",{type:"button",onClick:()=>d(t._id,t.isActive),disabled:i,className:`relative w-11 h-6 rounded-full transition-colors duration-300 ${t.isActive?"bg-green-500":"bg-gray-300"} ${i?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:e.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform duration-300 ${t.isActive?"translate-x-5":""}`})})})]},t._id))})},D=({isOpen:a,onClose:s,categories:l,isCategoriesLoading:c,onSubmit:i})=>{const[d,t]=o.useState(""),[n,m]=o.useState(null),[u,x]=o.useState("");o.useEffect(()=>{a||(t(""),m(null),x(""))},[a]);const p=r=>{if(r.preventDefault(),!n||!u){alert("Please select category and image");return}i({name:d,category:u,image:n})};return e.jsx(h,{appear:!0,show:a,as:o.Fragment,children:e.jsxs(j,{as:"div",className:"relative z-50",onClose:s,children:[e.jsx(h.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/40"})}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsx(h.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(j.Panel,{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx(j.Title,{className:"text-lg font-semibold",children:"Add New Brand"}),e.jsx("button",{type:"button",onClick:s,className:"rounded-full p-1 hover:bg-gray-100",children:e.jsx(k,{size:20})})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Brand Name"}),e.jsx("input",{type:"text",value:d,onChange:r=>t(r.target.value),className:"w-full border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter brand name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category"}),c?e.jsx("p",{className:"text-gray-500 text-sm",children:"Loading categories..."}):e.jsxs("select",{value:u,onChange:r=>x(r.target.value),className:"w-full border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:"Select category"}),l.map(r=>e.jsx("option",{value:r._id,children:r.name},r._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Brand Logo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:r=>m(r.target.files?.[0]||null),className:"w-full border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-purple-500",required:!0}),n&&e.jsx("img",{src:URL.createObjectURL(n),alt:"Preview",className:"w-20 h-20 object-cover rounded-lg mt-2 border"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Add Brand"})]})]})]})})})]})})},q=()=>{const{startItem:a,handlePageChange:s,handlePageSizeChange:l,pageNumber:c,pageSizeValue:i}=C(),{data:d,isLoading:t,error:n,refetch:m}=F({pageNumber:c,pageSize:i}),{data:u,isLoading:x}=P(),{mutate:p}=A(),[r,g]=o.useState(!1);if(t)return e.jsx(w,{});if(n)return e.jsx(B,{message:"Failed to load brands",onRetry:m});const b=d?.results??[],N=d?.pagination?.total??b.length;return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center px-4 py-3 border-b border-gray-200",children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:"Brands"}),e.jsx("button",{onClick:()=>g(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md font-medium transition",children:"+ Add Brand"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm text-gray-700",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-center font-semibold",children:"S.No"}),e.jsx("th",{className:"p-3 text-center font-semibold",children:"Logo"}),e.jsx("th",{className:"p-3 text-center font-semibold",children:"Brand"}),e.jsx("th",{className:"p-3 text-center font-semibold",children:"Description"}),e.jsx("th",{className:"p-3 text-center font-semibold",children:"Status"})]})}),e.jsx(E,{brands:b,startItem:a,refetch:m})]})})]}),e.jsx("div",{className:"mt-4",children:e.jsx(S,{currentPage:c,handlePageChange:s,pageSize:i,handlePageSizeChange:l,totalCount:N})}),e.jsx(D,{isOpen:r,onClose:()=>g(!1),categories:u?.results??[],isCategoriesLoading:x,onSubmit:v=>p(v,{onSuccess:()=>{m(),g(!1)}})})]})};export{q as default};
