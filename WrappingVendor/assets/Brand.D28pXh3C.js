import{m as b,a as y,j as e,e as l,i as w,E as C}from"./index.CiDKljiW.js";import{u as B,P as S}from"./usePagination.C-C2FNTU.js";import{b as F,u as k}from"./useCreateProduct.C7j_S_kq.js";import{X as P}from"./x.D_PkhF9k.js";import{K as h}from"./transition.XzcnYbDF.js";import{h as j}from"./dialog.CF2BtVuw.js";import{H as L,I as T,T as A,a as I,C as z}from"./tag.BrI0gq7m.js";import{C as E}from"./circle-x.Bl7GC8oO.js";const D=async t=>{const a=new FormData;return a.append("name",t.name),a.append("category",t.category),a.append("image",t.image),(await y.post("/create-brand",a,{headers:{"Content-Type":"multipart/form-data"}})).data},M=()=>b({mutationFn:D}),O=async({id:t,data:a})=>(await y.put(`/update-brand/${t}`,a)).data,R=()=>b({mutationFn:O}),_=({brands:t,startItem:a,refetch:i})=>{const{mutate:d,isPending:c}=R(),o=(s,n)=>{d({id:s,data:{isActive:!n}},{onSuccess:()=>{i()}})};return t.length===0?e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center p-4 text-gray-500",children:"No Brands Found"})})}):e.jsx("tbody",{children:t.map((s,n)=>e.jsxs("tr",{className:"border-t hover:bg-gray-50 transition-colors text-center",children:[e.jsx("td",{className:"p-3 border text-sm font-medium",children:a+n}),e.jsx("td",{className:"p-3 border",children:s.image?e.jsx("img",{src:s.image,alt:s.name,className:"h-10 w-20 object-contain mx-auto"}):e.jsx("span",{className:"text-gray-400 text-sm",children:"No Image"})}),e.jsx("td",{className:"p-3 border text-sm",children:s.name}),e.jsx("td",{className:"p-3 border text-sm",children:s.description||"-"}),e.jsx("td",{className:"p-3 border text-sm text-center",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("button",{type:"button",onClick:()=>o(s._id,s?.isActive),disabled:c,className:`relative w-11 h-6 rounded-full transition-colors duration-300 ${s.isActive?"bg-green-500":"bg-gray-300"} ${c?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:e.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform duration-300 ${s.isActive?"translate-x-5":""}`})})})})]},s._id))})},$=({isOpen:t,onClose:a,categories:i,isCategoriesLoading:d,onSubmit:c})=>{const[o,s]=l.useState(""),[n,m]=l.useState(null),[x,u]=l.useState("");l.useEffect(()=>{t||(s(""),m(null),u(""))},[t]);const g=r=>{if(r.preventDefault(),!n||!x){alert("Please select category and image");return}c({name:o,category:x,image:n})};return e.jsx(h,{appear:!0,show:t,as:l.Fragment,children:e.jsxs(j,{as:"div",className:"relative z-50",onClose:a,children:[e.jsx(h.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/40"})}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsx(h.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(j.Panel,{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx(j.Title,{className:"text-lg font-semibold",children:"Add New Brand"}),e.jsx("button",{type:"button",onClick:a,className:"rounded-full p-1 hover:bg-gray-100",children:e.jsx(P,{size:20})})]}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Brand Name"}),e.jsx("input",{type:"text",value:o,onChange:r=>s(r.target.value),className:"w-full border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter brand name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category"}),d?e.jsx("p",{className:"text-gray-500 text-sm",children:"Loading categories..."}):e.jsxs("select",{value:x,onChange:r=>u(r.target.value),className:"w-full border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:"Select category"}),i.map(r=>e.jsx("option",{value:r._id,children:r.name},r._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Brand Logo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:r=>m(r.target.files?.[0]||null),className:"w-full border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-purple-500",required:!0}),n&&e.jsx("img",{src:URL.createObjectURL(n),alt:"Preview",className:"w-20 h-20 object-cover rounded-lg mt-2 border"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Add Brand"})]})]})]})})})]})})},Q=()=>{const{startItem:t,handlePageChange:a,handlePageSizeChange:i,pageNumber:d,pageSizeValue:c}=B(),{data:o,isLoading:s,error:n,refetch:m}=F({pageNumber:d,pageSize:c}),{data:x,isLoading:u}=k(),{mutate:g}=M(),[r,p]=l.useState(!1);if(s)return e.jsx(w,{});if(n)return e.jsx(C,{message:"Failed to load brands",onRetry:m});const f=o?.results??[],N=o?.pagination?.total??f.length;return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-md overflow-hidden border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center  m-4",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"Brands"}),e.jsx("button",{onClick:()=>p(!0),className:"bg-orange-200 hover:bg-orange-700 text-black px-4 py-2 rounded-lg font-medium transition",children:"+ Add Brand"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm text-gray-700",children:[e.jsx("thead",{className:"bg-orange-100 text-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(L,{className:"w-4 h-4 text-gray-700"}),e.jsx("span",{children:"S.No"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(T,{className:"w-4 h-4 text-gray-700"}),e.jsx("span",{children:"Logo"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(A,{className:"w-4 h-4 text-gray-700"}),e.jsx("span",{children:"Brand"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(I,{className:"w-4 h-4 text-gray-700"}),e.jsx("span",{children:"Description"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(z,{className:"w-4 h-4 text-green-600"}),e.jsx(E,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{children:"Status"})]})})]})}),e.jsx(_,{brands:f,startItem:t,refetch:m})]})})]}),e.jsx("div",{className:"mt-4",children:e.jsx(S,{currentPage:d,handlePageChange:a,pageSize:c,handlePageSizeChange:i,totalCount:N})}),e.jsx($,{isOpen:r,onClose:()=>p(!1),categories:x?.results??[],isCategoriesLoading:u,onSubmit:v=>g(v,{onSuccess:()=>{m(),p(!1)}})})]})};export{Q as default};
