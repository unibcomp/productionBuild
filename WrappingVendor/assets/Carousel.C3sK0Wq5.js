import{u as C,m as j,a as h,n as k,e as N,j as e}from"./index.B52VTIO0.js";import{h as b}from"./queryToast.YcZVnmOS.js";import{u as D}from"./useCreateProduct.BdWCbWfv.js";import{C as I}from"./ConfirmationModal.CB1k6RVv.js";import"./x._2yihMph.js";const M=async()=>h.get("/carousel").then(l=>l.data),q=()=>C({queryKey:["carousel"],queryFn:M}),O=async l=>h.post("/carousel",l,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>a.data),_=()=>j({mutationFn:O}),F=async({id:l,formData:a})=>h.put(`/carousel/${l}`,a,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i.data),S=()=>j({mutationFn:F}),E=async l=>h.delete(`/carousel/${l}`).then(a=>a.data),A=()=>j({mutationFn:E}),T=({isOpen:l,onClose:a,data:i,isUpdate:o,refetch:c})=>{const d=t=>({title:t?.title||"",category:t?.category||"",description:t?.description||""}),{register:r,handleSubmit:m,reset:u,formState:{errors:s}}=k({defaultValues:d(i)}),{data:v}=D(),y=_(),f=S(),n=f.isPending||y.isPending;N.useEffect(()=>{u(d(i))},[i,u]);const w=async t=>{const p=new FormData;Object.entries(t).forEach(([g,x])=>{g==="image"||g==="mobileImage"?x instanceof FileList&&x.length>0&&p.append(g,x[0]):typeof x=="string"&&p.append(g,x)}),o&&i?._id?f.mutate({id:i._id,formData:p},b(c,a)):y.mutate(p,b(c,a))};return l?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"w-[95vw] max-w-3xl bg-white rounded-xl shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold",children:o?"Edit Image":"Add Image"}),e.jsx("button",{onClick:a,type:"button",className:"px-2 py-1 text-gray-600 hover:text-gray-900",disabled:n,children:"✕"})]}),e.jsxs("form",{onSubmit:m(w),className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Title"}),e.jsx("input",{className:"border p-2 rounded w-full",disabled:n,...r("title",{required:"Title is required"})}),s.title&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:s.title.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category"}),e.jsxs("select",{className:"border p-2 rounded w-full",disabled:n,...r("category",{required:"Category is required"}),children:[e.jsx("option",{value:"",children:"Select Category"}),v?.results?.map(t=>e.jsx("option",{value:t._id,children:t.name},t._id))]}),s.category&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:s.category.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),e.jsx("textarea",{className:"border p-2 rounded w-full",disabled:n,...r("description",{required:"Description is required"})}),s.description&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:s.description.message})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium",children:["Desktop Image"," ",e.jsx("span",{className:"text-gray-500 text-xs",children:"(1920 × 465 px)"})]}),e.jsx("input",{type:"file",accept:"image/*",className:"border p-2 rounded w-full",disabled:n,...r("image",{validate:t=>o||t&&t.length>0||"Mobile image required"})}),s.image&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:s.image.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium",children:["Mobile Image"," ",e.jsx("span",{className:"text-gray-500 text-xs",children:"(390 × 150 px)"})]}),e.jsx("input",{type:"file",accept:"image/*",className:"border p-2 rounded w-full",disabled:n,...r("mobileImage",{validate:t=>o||t&&t.length>0||"Mobile image required"})}),s.mobileImage&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:s.mobileImage.message})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-60",disabled:n,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white disabled:opacity-60",disabled:n,children:n?"Saving...":o?"Update Image":"Add Image"})]})]})]})}):null},V=()=>{const{data:l,isLoading:a,refetch:i}=q(),o=A(),[c,d]=N.useState({isOpen:!1,data:null,isUpdate:!1,isDelete:!1}),r=l?.data||[],m=()=>{d({isOpen:!1,data:null,isUpdate:!1,isDelete:!1})},u=()=>{const s=c.data?._id;s&&o.mutate(s,b(i,m))};return a?e.jsx("p",{className:"text-center mt-10",children:"Loading..."}):e.jsxs("div",{className:"max-w-7xl mx-auto p-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:"Carousel"}),e.jsx("button",{onClick:()=>{d({isOpen:!0})},className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md font-medium transition",children:"+ Add Image"})]}),e.jsxs("div",{className:"p-4 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-800",children:"Desktop Images"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.length===0&&e.jsx("div",{className:"text-sm text-gray-500",children:"No desktop images yet."}),r.map(s=>e.jsxs("div",{className:"bg-white rounded-md border border-gray-200 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"relative w-full aspect-[16/6] bg-gray-50",children:[e.jsx("img",{src:s.image,alt:s.title,className:"absolute inset-0 w-full h-full object-contain"}),e.jsx("span",{className:"absolute top-2 left-2 text-[10px] bg-black/60 text-white px-2 py-0.5 rounded",children:"Desktop"})]}),e.jsxs("div",{className:"p-3 space-y-1",children:[e.jsx("div",{className:"font-medium",children:s.title}),e.jsx("div",{className:"text-xs text-gray-600",children:s.category||""}),e.jsx("div",{className:"text-sm text-gray-700 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>d({isOpen:!0,data:s,isUpdate:!0}),className:"bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded",children:"Edit"}),e.jsx("button",{onClick:()=>d({isDelete:!0,data:s}),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded",children:"Delete"})]})]})]},`desktop-${s._id}`))]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-800",children:"Mobile Images"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.length===0&&e.jsx("div",{className:"text-sm text-gray-500",children:"No mobile images yet."}),r.map(s=>e.jsxs("div",{className:"bg-white rounded-md border border-gray-200 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"relative w-full aspect-[9/4] bg-gray-50",children:[e.jsx("img",{src:s.mobileImage,alt:s.title,className:"absolute inset-0 w-full h-full object-contain"}),e.jsx("span",{className:"absolute top-2 left-2 text-[10px] bg-black/60 text-white px-2 py-0.5 rounded",children:"Mobile"})]}),e.jsxs("div",{className:"p-3 space-y-1",children:[e.jsx("div",{className:"font-medium",children:s.title}),e.jsx("div",{className:"text-xs text-gray-600",children:s.category||""}),e.jsx("div",{className:"text-sm text-gray-700 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>d({isOpen:!0,data:s,isUpdate:!0}),className:"bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded",children:"Edit"}),e.jsx("button",{onClick:()=>d({isDelete:!0,data:s}),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded",children:"Delete"})]})]})]},`mobile-${s._id}`))]})]})]})]}),e.jsx(T,{isOpen:c?.isOpen||!1,data:c?.data||null,isUpdate:c?.isUpdate||!1,refetch:i,onClose:m}),e.jsx(I,{isOpen:c.isDelete||!1,message:"Are You Sure Want To Delete",onConfirm:u,onClose:m,isLoading:o.isPending})]})};export{V as default};
