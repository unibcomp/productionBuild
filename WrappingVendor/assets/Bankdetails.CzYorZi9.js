import{u as y,o as k,m as j,z as u,a as x,e as m,j as e,i as C}from"./index.BotYvSpe.js";import{C as N}from"./credit-card.CvZ5dNhg.js";import{U as v,B}from"./user-pen.CBIZp0kV.js";import{U as w}from"./user.CmunlM5W.js";const D=async()=>{const{data:a}=await x.get("/bank-deatils");return a.results},S=()=>y({queryKey:["bank-details"],queryFn:D,staleTime:300*1e3,refetchInterval:300*1e3,refetchOnWindowFocus:!1}),E=()=>{const a=k();return j({mutationFn:async t=>{const{data:r}=await x.put("/bank-update",t);return r},onSuccess:async t=>{u.success(t.message||"Bank details updated successfully!"),await a.invalidateQueries({queryKey:["bank-details"]})},onError:t=>{u.error(t?.response?.data?.error||t?.response?.data?.message||"Something went wrong!")}})},c=({label:a,icon:t,disabled:r,value:i,onChange:n})=>e.jsxs("div",{className:"flex items-center border rounded-lg p-3 bg-gray-50 focus-within:ring-2 focus-within:ring-purple-500",children:[e.jsx("span",{className:"text-gray-400 mr-3",children:t}),e.jsx("input",{type:"text",placeholder:a,disabled:r,value:i,onChange:n,className:`flex-1 bg-transparent outline-none ${r?"text-gray-500 cursor-not-allowed":"text-gray-900"}`})]}),I=()=>{const{data:a,isLoading:t}=S(),{mutate:r,isPending:i}=E(),[n,d]=m.useState(!1),[l,g]=m.useState({accountNumber:"",ifscCode:"",bankName:"",UserName:""});m.useEffect(()=>{a&&g(a)},[a]);const o=(s,h)=>{g(f=>({...f,[s]:h}))},p=()=>{r(l,{onSuccess:()=>{u.success("Bank details updated successfully!"),d(!1)},onError:s=>{u.error(s?.response?.data?.message||"Failed to update bank details")}})},b=()=>{g(a||l),d(!1)};return t?e.jsx(C,{}):e.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Bank Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(c,{label:"Account Number",icon:e.jsx(N,{size:20}),disabled:!n,value:l.accountNumber,onChange:s=>o("accountNumber",s.target.value)}),e.jsx(c,{label:"IFSC Code",icon:e.jsx(v,{size:20}),disabled:!n,value:l.ifscCode,onChange:s=>o("ifscCode",s.target.value)}),e.jsx(c,{label:"Bank Name",icon:e.jsx(B,{size:20}),disabled:!n,value:l.bankName,onChange:s=>o("bankName",s.target.value)}),e.jsx(c,{label:"Account Holder Name",icon:e.jsx(w,{size:20}),disabled:!n,value:l.UserName,onChange:s=>o("UserName",s.target.value)}),e.jsx("div",{className:"pt-4 flex gap-2",children:n?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",disabled:i,onClick:p,className:"flex-1 py-2 rounded-lg bg-green-600 hover:bg-green-700 text-white transition",children:i?"Saving...":"Save Changes"}),e.jsx("button",{type:"button",onClick:b,className:"flex-1 py-2 rounded-lg bg-gray-300 hover:bg-gray-400 text-black transition",children:"Cancel"})]}):e.jsx("button",{type:"button",onClick:()=>d(!0),className:"flex-1 py-2 rounded-lg bg-purple-700 hover:bg-purple-800 text-white transition",children:a?"Edit Bank Details":"Add Bank Details"})})]})]})};export{I as default};
