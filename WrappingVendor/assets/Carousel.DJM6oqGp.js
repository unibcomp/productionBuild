import{u as w,m as j,a as h,n as D,e as N,j as e}from"./index.C5c8hNqh.js";import{h as b}from"./queryToast.hq6MJtIG.js";import{u as k}from"./useCreateProduct.D9SvBiiW.js";import{C as I}from"./ConfirmationModal.BY0eLM49.js";import"./x.CfKtRlsU.js";const q=async()=>h.get("/carousel").then(l=>l.data),M=()=>w({queryKey:["carousel"],queryFn:q}),F=async l=>h.post("/carousel",l,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>a.data),O=()=>j({mutationFn:F}),S=async({id:l,formData:a})=>h.put(`/carousel/${l}`,a,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i.data),_=()=>j({mutationFn:S}),E=async l=>h.delete(`/carousel/${l}`).then(a=>a.data),A=()=>j({mutationFn:E}),T=({isOpen:l,onClose:a,data:i,isUpdate:d,refetch:n})=>{const c=t=>({title:t?.title||"",category:t?.category||"",description:t?.description||""}),{register:o,handleSubmit:m,reset:u,formState:{errors:s}}=D({defaultValues:c(i)}),{data:v}=k(),f=O(),y=_(),r=y.isPending||f.isPending;N.useEffect(()=>{u(c(i))},[i,u]);const C=async t=>{const p=new FormData;Object.entries(t).forEach(([g,x])=>{g==="image"||g==="mobileImage"?x instanceof FileList&&x.length>0&&p.append(g,x[0]):typeof x=="string"&&p.append(g,x)}),d&&i?._id?y.mutate({id:i._id,formData:p},b(n,a)):f.mutate(p,b(n,a))};return l?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"w-[95vw] max-w-3xl bg-white rounded-xl shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold",children:d?"Edit Image":"Add Image"}),e.jsx("button",{onClick:a,type:"button",className:"px-2 py-1 text-gray-600 hover:text-gray-900",disabled:r,children:"✕"})]}),e.jsxs("form",{onSubmit:m(C),className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Title"}),e.jsx("input",{className:"border p-2 rounded w-full",disabled:r,...o("title",{required:"Title is required"})}),s.title&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:s.title.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category"}),e.jsxs("select",{className:"border p-2 rounded w-full",disabled:r,...o("category",{required:"Category is required"}),children:[e.jsx("option",{value:"",children:"Select Category"}),v?.results?.map(t=>e.jsx("option",{value:t._id,children:t.name},t._id))]}),s.category&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:s.category.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),e.jsx("textarea",{className:"border p-2 rounded w-full",disabled:r,...o("description",{required:"Description is required"})}),s.description&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:s.description.message})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium",children:["Desktop Image"," ",e.jsx("span",{className:"text-gray-500 text-xs",children:"(1920 × 465 px)"})]}),e.jsx("input",{type:"file",accept:"image/*",className:"border p-2 rounded w-full",disabled:r,...o("image",{validate:t=>d||t&&t.length>0||"Mobile image required"})}),s.image&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:s.image.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium",children:["Mobile Image"," ",e.jsx("span",{className:"text-gray-500 text-xs",children:"(390 × 150 px)"})]}),e.jsx("input",{type:"file",accept:"image/*",className:"border p-2 rounded w-full",disabled:r,...o("mobileImage",{validate:t=>d||t&&t.length>0||"Mobile image required"})}),s.mobileImage&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:s.mobileImage.message})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-60",disabled:r,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white disabled:opacity-60",disabled:r,children:r?"Saving...":d?"Update Image":"Add Image"})]})]})]})}):null},$=()=>{const{data:l,isLoading:a,refetch:i}=M(),d=A(),[n,c]=N.useState({isOpen:!1,data:null,isUpdate:!1,isDelete:!1}),o=l?.data||[],m=()=>{c({isOpen:!1,data:null,isUpdate:!1,isDelete:!1})},u=()=>{const s=n.data?._id;s&&d.mutate(s,b(i,m))};return a?e.jsx("p",{className:"text-center mt-10",children:"Loading..."}):e.jsxs("div",{className:"max-w-6xl mx-auto p-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:"Carousel"}),e.jsx("button",{onClick:()=>{c({isOpen:!0})},className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md font-medium transition",children:"+ Add Image"})]}),e.jsx("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold mb-3",children:"Desktop Images"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.map(s=>e.jsxs("div",{className:"bg-white rounded shadow border overflow-hidden",children:[e.jsxs("div",{className:"relative h-40",children:[e.jsx("img",{src:s.image,alt:s.title,className:"w-full h-full object-contain"}),e.jsx("span",{className:"absolute top-2 left-2 text-[10px] bg-black/60 text-white px-2 py-0.5 rounded",children:"Desktop"})]}),e.jsxs("div",{children:[e.jsx("img",{src:s.mobileImage,alt:s.title,className:"w-full h-full object-contain"}),e.jsx("span",{className:"absolute top-2 left-2 text-[10px] bg-black/60 text-white px-2 py-0.5 rounded",children:"Mobile"})]}),e.jsxs("div",{className:"p-3 space-y-1",children:[e.jsx("div",{className:"font-medium",children:s.title}),e.jsx("div",{className:"text-xs text-gray-600",children:s.category||""}),e.jsx("div",{className:"text-sm text-gray-700 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>{c({isOpen:!0,data:s,isUpdate:!0})},className:"bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded",children:"Edit"}),e.jsx("button",{onClick:()=>c({isDelete:!0,data:s}),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded",children:"Delete"})]})]})]},s._id)),o.length===0&&e.jsx("div",{className:"text-sm text-gray-500",children:"No desktop images yet."})]})]})})]}),e.jsx(T,{isOpen:n?.isOpen||!1,data:n?.data||null,isUpdate:n?.isUpdate||!1,refetch:i,onClose:m}),e.jsx(I,{isOpen:n.isDelete||!1,message:"Are You Sure Want To Delete",onConfirm:u,onClose:m,isLoading:d.isPending})]})};export{$ as default};
