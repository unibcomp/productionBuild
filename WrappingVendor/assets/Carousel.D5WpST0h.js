import{u as C,m as y,a as b,n as k,e as v,j as e,x as D}from"./index.DlsZ5bxu.js";import{h as j}from"./queryToast.Dg3-Eyj2.js";import{u as I}from"./useCreateProduct.Bh7u6Crb.js";import{C as M}from"./ConfirmationModal.H4t9BasN.js";import"./x.DtgYVvYY.js";const q=async a=>b.get("/carousel",{params:{domain:a}}).then(l=>l.data),_=a=>C({queryKey:["carousel",a],queryFn:()=>q(a)}),O=async a=>b.post("/carousel",a,{headers:{"Content-Type":"multipart/form-data"}}).then(l=>l.data),F=()=>y({mutationFn:O}),S=async({id:a,formData:l})=>b.put(`/carousel/${a}`,l,{headers:{"Content-Type":"multipart/form-data"}}).then(d=>d.data),E=()=>y({mutationFn:S}),A=async a=>b.delete(`/carousel/${a}`).then(l=>l.data),T=()=>y({mutationFn:A}),L=({isOpen:a,onClose:l,data:d,isUpdate:o,refetch:u})=>{const c=t=>({title:t?.title||"",category:t?.category||"",description:t?.description||""}),{register:i,handleSubmit:m,reset:x,formState:{errors:r}}=k({defaultValues:c(d)}),{data:s}=I(),f=F(),N=E(),n=N.isPending||f.isPending;v.useEffect(()=>{x(c(d))},[d,x]);const w=async t=>{const g=new FormData;Object.entries(t).forEach(([h,p])=>{h==="image"||h==="mobileImage"?p instanceof FileList&&p.length>0&&g.append(h,p[0]):typeof p=="string"&&g.append(h,p)}),o&&d?._id?N.mutate({id:d._id,formData:g},j(u,l)):f.mutate(g,j(u,l))};return a?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"w-[95vw] max-w-3xl bg-white rounded-xl shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold",children:o?"Edit Image":"Add Image"}),e.jsx("button",{onClick:l,type:"button",className:"px-2 py-1 text-gray-600 hover:text-gray-900",disabled:n,children:"✕"})]}),e.jsxs("form",{onSubmit:m(w),className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Title"}),e.jsx("input",{className:"border p-2 rounded w-full",disabled:n,...i("title",{required:"Title is required"})}),r.title&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:r.title.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category"}),e.jsxs("select",{className:"border p-2 rounded w-full",disabled:n,...i("category",{required:"Category is required"}),children:[e.jsx("option",{value:"",children:"Select Category"}),s?.results?.map(t=>e.jsx("option",{value:t._id,children:t.name},t._id))]}),r.category&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:r.category.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),e.jsx("textarea",{className:"border p-2 rounded w-full",disabled:n,...i("description",{required:"Description is required"})}),r.description&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:r.description.message})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium",children:["Desktop Image"," ",e.jsx("span",{className:"text-gray-500 text-xs",children:"(1920 × 465 px)"})]}),e.jsx("input",{type:"file",accept:"image/*",className:"border p-2 rounded w-full",disabled:n,...i("image",{validate:t=>o||t&&t.length>0||"Mobile image required"})}),r.image&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:r.image.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium",children:["Mobile Image"," ",e.jsx("span",{className:"text-gray-500 text-xs",children:"(390 × 150 px)"})]}),e.jsx("input",{type:"file",accept:"image/*",className:"border p-2 rounded w-full",disabled:n,...i("mobileImage",{validate:t=>o||t&&t.length>0||"Mobile image required"})}),r.mobileImage&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:r.mobileImage.message})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 rounded border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-60",disabled:n,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white disabled:opacity-60",disabled:n,children:n?"Saving...":o?"Update Image":"Add Image"})]})]})]})}):null},z=()=>{const{website_id:a}=D(),{data:l,isLoading:d,refetch:o}=_(a),u=T(),[c,i]=v.useState({isOpen:!1,data:null,isUpdate:!1,isDelete:!1}),m=l?.data||[],x=()=>{i({isOpen:!1,data:null,isUpdate:!1,isDelete:!1})},r=()=>{const s=c.data?._id;s&&u.mutate(s,j(o,x))};return d?e.jsx("p",{className:"text-center mt-10",children:"Loading..."}):e.jsxs("div",{className:"max-w-7xl mx-auto p-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:"Carousel"}),e.jsx("button",{onClick:()=>i({isOpen:!0}),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md font-medium transition",children:"+ Add Image"})]}),e.jsxs("div",{className:"p-4 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-800",children:"Desktop Images"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[m.length===0&&e.jsx("div",{className:"text-sm text-gray-500",children:"No desktop images yet."}),m.map(s=>e.jsxs("div",{className:"bg-white rounded-md border border-gray-200 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"relative w-full aspect-[16/6] bg-gray-50",children:[e.jsx("img",{src:s.image,alt:s.title,className:"absolute inset-0 w-full h-full object-contain"}),e.jsx("span",{className:"absolute top-2 left-2 text-[10px] bg-black/60 text-white px-2 py-0.5 rounded",children:"Desktop"})]}),e.jsxs("div",{className:"p-3 space-y-1",children:[e.jsx("div",{className:"font-medium",children:s.title}),e.jsx("div",{className:"text-xs text-gray-600",children:s.category||""}),e.jsx("div",{className:"text-sm text-gray-700 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>i({isOpen:!0,data:s,isUpdate:!0}),className:"bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded",children:"Edit"}),e.jsx("button",{onClick:()=>i({isDelete:!0,data:s}),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded",children:"Delete"})]})]})]},`desktop-${s._id}`))]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-base font-semibold text-gray-800",children:"Mobile Images"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[m.length===0&&e.jsx("div",{className:"text-sm text-gray-500",children:"No mobile images yet."}),m.map(s=>e.jsxs("div",{className:"bg-white rounded-md border border-gray-200 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"relative w-full aspect-[9/4] bg-gray-50",children:[e.jsx("img",{src:s.mobileImage,alt:s.title,className:"absolute inset-0 w-full h-full object-contain"}),e.jsx("span",{className:"absolute top-2 left-2 text-[10px] bg-black/60 text-white px-2 py-0.5 rounded",children:"Mobile"})]}),e.jsxs("div",{className:"p-3 space-y-1",children:[e.jsx("div",{className:"font-medium",children:s.title}),e.jsx("div",{className:"text-xs text-gray-600",children:s.category||""}),e.jsx("div",{className:"text-sm text-gray-700 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>i({isOpen:!0,data:s,isUpdate:!0}),className:"bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded",children:"Edit"}),e.jsx("button",{onClick:()=>i({isDelete:!0,data:s}),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded",children:"Delete"})]})]})]},`mobile-${s._id}`))]})]})]})]}),e.jsx(L,{isOpen:c.isOpen||!1,data:c.data||null,isUpdate:c.isUpdate||!1,refetch:o,onClose:x}),e.jsx(M,{isOpen:c.isDelete||!1,message:"Are You Sure Want To Delete",onConfirm:r,onClose:x,isLoading:u.isPending})]})};export{z as default};
