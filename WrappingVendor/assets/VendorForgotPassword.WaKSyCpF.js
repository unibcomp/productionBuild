import{m as z,a as T,b as F,e as o,n as f,j as e,z as a}from"./index.CSCVunL6.js";import{u as k,A as g,a as y}from"./useAuth.DZN3nazJ.js";import{B as q}from"./box.BpqeKph5.js";import{T as A}from"./truck.-BRnoNdM.js";import{C as _}from"./credit-card.7afxsVJL.js";import{U as B}from"./users.Ds93tUo7.js";import"./iconBase.D6jdJ06z.js";const I=()=>({sendOtp:z({mutationFn:async n=>(await T.post("/forget",n)).data}).mutateAsync}),Y=()=>{const i=F(),[n,l]=o.useState(1),[m,j]=o.useState(null),[p,w]=o.useState(""),[c,b]=o.useState(!1),[d,N]=o.useState(!1),{sendOtp:v}=I(),{verifyOtp:P}=k(),{register:S,handleSubmit:O,formState:{errors:x}}=f(),{register:u,handleSubmit:C,formState:{errors:r}}=f(),h=async t=>{try{const s=await v(t);a.success(s.message||"OTP sent successfully!"),s?.results?.vendor?._id&&j(s.results.vendor._id),w(t.emailOrPhone),l(2)}catch(s){a.error(s?.message||"Failed to send OTP")}},E=async t=>{if(!m){a.error("Vendor ID missing!");return}if(t.password!==t.confirm_password){a.error("Passwords do not match!");return}try{await P({...t,vendor_id:m}),a.success("Password reset successfully!"),i("/signin")}catch(s){a.error(s?.message||"Failed to reset password")}};return e.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row bg-gray-100",children:[e.jsxs("div",{className:"hidden md:flex w-1/2 bg-purple-100 p-12 flex-col justify-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-purple-800 mb-6",children:"Manage Your Vendor Business with Ease"}),e.jsxs("ul",{className:"space-y-3 text-gray-700 text-lg",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(q,{size:20,className:"text-purple-700"})," List unlimited products"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(A,{size:20,className:"text-purple-700"})," Easy shipping with fast delivery"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(_,{size:20,className:"text-purple-700"})," Secure & timely payments"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(B,{size:20,className:"text-purple-700"})," Access to 1000+ customers"]})]}),e.jsxs("div",{className:"mt-10",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"All you need to sell on Unibcomp:"}),e.jsxs("ul",{className:"list-disc list-inside text-gray-600",children:[e.jsx("li",{children:"Tax Details (GST)"}),e.jsx("li",{children:"Bank Account"}),e.jsx("li",{children:"Business Documents"})]})]})]}),e.jsx("div",{className:"w-full md:w-1/2 flex items-start justify-center pt-10 px-8",children:e.jsxs("div",{className:"w-full max-w-md bg-white shadow-xl rounded-3xl p-10 space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 text-center",children:"Forgot Password"}),e.jsx("p",{className:"text-sm text-gray-600 text-center mb-4",children:"Reset your password to access your vendor dashboard"}),n===1&&e.jsxs("form",{onSubmit:O(h),className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Email or Phone",...S("emailOrPhone",{required:"Email or phone is required"}),className:"w-full border border-gray-300 p-4 rounded-2xl focus:outline-none focus:ring-2 focus:ring-purple-500"}),x.emailOrPhone&&e.jsx("p",{className:"text-red-500 text-sm",children:x.emailOrPhone.message}),e.jsx("button",{type:"submit",className:"w-full bg-purple-700 text-white py-3 rounded-2xl hover:bg-purple-800 transition font-medium",children:"Get OTP"})]}),n===2&&e.jsxs("form",{onSubmit:C(E),className:"space-y-4",children:[e.jsx("input",{type:"text",value:p,disabled:!0,className:"w-full border border-gray-200 p-4 rounded-2xl bg-gray-100 text-gray-500 cursor-not-allowed"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Enter OTP",...u("otp",{required:"OTP is required"}),className:"flex-1 border border-gray-300 p-4 rounded-2xl focus:outline-none focus:ring-2 focus:ring-purple-500"}),e.jsx("button",{type:"button",onClick:()=>h({emailOrPhone:p}),className:"px-4 py-2 bg-purple-100 text-purple-700 rounded-2xl hover:bg-purple-200 transition text-sm font-medium",children:"Resend OTP"})]}),r.otp&&e.jsx("p",{className:"text-red-500 text-sm",children:r.otp.message}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:c?"text":"password",placeholder:"New Password",...u("password",{required:"Password is required",minLength:{value:6,message:"Min 6 characters"}}),className:"w-full border border-gray-300 p-4 rounded-2xl focus:outline-none focus:ring-2 focus:ring-purple-500 pr-10"}),e.jsx("span",{className:"absolute right-3 top-3 cursor-pointer text-gray-500",onClick:()=>b(!c),children:c?e.jsx(g,{size:20}):e.jsx(y,{size:20})})]}),r.password&&e.jsx("p",{className:"text-red-500 text-sm",children:r.password.message}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:d?"text":"password",placeholder:"Confirm Password",...u("confirm_password",{required:"Confirm your password"}),className:"w-full border border-gray-300 p-4 rounded-2xl focus:outline-none focus:ring-2 focus:ring-purple-500 pr-10"}),e.jsx("span",{className:"absolute right-3 top-3 cursor-pointer text-gray-500",onClick:()=>N(!d),children:d?e.jsx(g,{size:20}):e.jsx(y,{size:20})})]}),r.confirm_password&&e.jsx("p",{className:"text-red-500 text-sm",children:r.confirm_password.message}),e.jsxs("div",{className:"flex justify-between space-x-4",children:[e.jsx("button",{type:"button",onClick:()=>l(1),className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-2xl hover:bg-gray-400 transition font-medium",children:"Back"}),e.jsx("button",{type:"submit",className:"flex-1 bg-green-600 text-white py-3 rounded-2xl hover:bg-green-700 transition font-medium",children:"Reset Password"})]})]}),e.jsx("div",{className:"text-center mt-2",children:e.jsx("button",{onClick:()=>i("/signin"),className:"text-sm text-purple-700 hover:underline",children:"Remembered your password? Sign In"})})]})})]})};export{Y as default};
