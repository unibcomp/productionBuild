import{k as N,e as v,j as e,r as n,s as w,E as C}from"./index.BExXVMiE.js";import{u as S,P as B}from"./usePagination.BKxWHthg.js";import{b as k,u as F}from"./useCreateProduct.kU-is9Fx.js";import{X as L}from"./x.DzmYYptH.js";import{K as h}from"./transition.RZOn65c-.js";import{h as b}from"./dialog.DI7auN66.js";const P=async t=>{const s=new FormData;return s.append("name",t.name),s.append("category",t.category),s.append("image",t.image),(await v.post("/create-brand",s,{headers:{"Content-Type":"multipart/form-data"}})).data},z=()=>N({mutationFn:P}),E=({brands:t,startItem:s})=>t.length===0?e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center p-4 text-gray-500",children:"No Brands Found"})})}):e.jsx("tbody",{children:t.map((r,l)=>e.jsxs("tr",{className:"border-t hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"p-3 border text-center text-sm",children:s+l}),e.jsx("td",{className:"p-3 border text-center",children:r.image?e.jsx("img",{src:r.image,alt:r.name,className:"h-10 w-20 object-contain mx-auto"}):e.jsx("span",{className:"text-gray-400",children:"No Image"})}),e.jsx("td",{className:"p-3 border text-sm",children:r.name}),e.jsx("td",{className:"p-3 border text-sm",children:r.description||"-"}),e.jsx("td",{className:"p-3 border text-center text-sm",children:e.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r.isActive,readOnly:!0}),e.jsx("div",{className:"w-11 h-6 bg-gray-300 rounded-full peer-checked:bg-green-500 transition-all relative",children:e.jsx("div",{className:"absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow transform peer-checked:translate-x-5 transition"})})]})})]},r._id))}),T=({isOpen:t,onClose:s,categories:r,isCategoriesLoading:l,onSubmit:m})=>{const[i,u]=n.useState(""),[o,d]=n.useState(null),[c,x]=n.useState("");n.useEffect(()=>{t||(u(""),d(null),x(""))},[t]);const p=a=>{if(a.preventDefault(),!o||!c){alert("Please select category and image");return}m({name:i,category:c,image:o})};return e.jsx(h,{appear:!0,show:t,as:n.Fragment,children:e.jsxs(b,{as:"div",className:"relative z-50",onClose:s,children:[e.jsx(h.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/40"})}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsx(h.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(b.Panel,{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx(b.Title,{className:"text-lg font-semibold",children:"Add New Brand"}),e.jsx("button",{type:"button",onClick:s,className:"rounded-full p-1 hover:bg-gray-100",children:e.jsx(L,{size:20})})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Brand Name"}),e.jsx("input",{type:"text",value:i,onChange:a=>u(a.target.value),className:"w-full border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter brand name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category"}),l?e.jsx("p",{className:"text-gray-500 text-sm",children:"Loading categories..."}):e.jsxs("select",{value:c,onChange:a=>x(a.target.value),className:"w-full border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:"Select category"}),r.map(a=>e.jsx("option",{value:a._id,children:a.name},a._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Brand Logo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:a=>d(a.target.files?.[0]||null),className:"w-full border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-purple-500",required:!0}),o&&e.jsx("img",{src:URL.createObjectURL(o),alt:"Preview",className:"w-20 h-20 object-cover rounded-lg mt-2 border"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Add Brand"})]})]})]})})})]})})},q=()=>{const{startItem:t,handlePageChange:s,handlePageSizeChange:r,pageNumber:l,pageSizeValue:m}=S(),{data:i,isLoading:u,error:o,refetch:d}=k({pageNumber:l,pageSize:m}),{data:c,isLoading:x}=F(),{mutate:p}=z(),[a,g]=n.useState(!1);if(u)return e.jsx(w,{});if(o)return e.jsx(C,{message:"Failed to load brands",onRetry:d});const j=i?.results??[],f=i?.pagination?.total??j.length;return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Brands"}),e.jsx("button",{onClick:()=>g(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-medium transition",children:"+ Add Brand"})]}),e.jsx("div",{className:"overflow-x-auto overflow-y-auto border rounded-lg shadow-sm bg-white",children:e.jsxs("table",{className:"min-w-full border border-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-700 sticky top-0 z-10 shadow-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 border font-semibold",children:"S.No"}),e.jsx("th",{className:"p-3 border font-semibold",children:"Logo"}),e.jsx("th",{className:"p-3 border font-semibold",children:"Brand"}),e.jsx("th",{className:"p-3 border font-semibold",children:"Description"}),e.jsx("th",{className:"p-3 border font-semibold",children:"Status"})]})}),e.jsx(E,{brands:j,startItem:t})]})}),e.jsx(B,{currentPage:l,handlePageChange:s,pageSize:m,handlePageSizeChange:r,totalCount:f}),e.jsx(T,{isOpen:a,onClose:()=>g(!1),categories:c?.results??[],isCategoriesLoading:x,onSubmit:y=>p(y,{onSuccess:()=>{d(),g(!1)}})})]})};export{q as default};
