import{u as _,m as y,a as d,e as n,j as t}from"./index.BqXm1Fu4.js";import{u as k}from"./useCreateProduct.D_R1Lwh9.js";import{h as x}from"./queryToast.CZg4jQVJ.js";const T=async()=>d.get("/carousel").then(a=>a.data),A=()=>_({queryKey:["carousel"],queryFn:T}),M=async a=>d.post("/carousel",a,{headers:{"Content-Type":"multipart/form-data"}}).then(r=>r.data),q=()=>y({mutationFn:M}),L=async({id:a,formData:r})=>d.put(`/carousel/${a}`,r,{headers:{"Content-Type":"multipart/form-data"}}).then(l=>l.data),R=()=>y({mutationFn:L}),U=async a=>d.delete(`/carousel/${a}`).then(r=>r.data),$=()=>y({mutationFn:U}),P=()=>{const{data:a,isLoading:r,refetch:l}=A(),{data:j}=k(),v=q(),w=R(),N=$(),[i,c]=n.useState(""),[u,p]=n.useState(""),[m,h]=n.useState(""),[g,C]=n.useState(null),[o,f]=n.useState(null),b=()=>{c(""),p(""),h(""),C(null),f(null)},D=async e=>{if(e.preventDefault(),!i||!u||!m||!g&&!o)return alert("Please fill all fields");const s=new FormData;s.append("title",i),s.append("category",u),s.append("description",m),g&&s.append("images",g);try{o?w.mutate({id:o._id,formData:s},x(l)):v.mutate(s,x(l)),b()}catch(E){console.error(E)}},S=e=>{f(e),c(e.title),p(e.category),h(e.description)},F=async e=>{if(window.confirm("Are you sure you want to delete this carousel?"))try{N.mutate(e,x(l))}catch(s){console.error(s)}};return r?t.jsx("p",{className:"text-center mt-10",children:"Loading..."}):t.jsxs("div",{className:"max-w-5xl mx-auto p-4",children:[t.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Carousel Manager"}),t.jsxs("form",{onSubmit:D,className:"bg-white p-4 rounded shadow mb-8 space-y-4",children:[t.jsx("input",{type:"text",placeholder:"Title",value:i,onChange:e=>c(e.target.value),className:"border p-2 rounded w-full"}),t.jsxs("select",{value:u,onChange:e=>p(e.target.value),className:"border p-2 rounded w-full",children:[t.jsx("option",{value:"",children:"Select Category"}),j?.results.map(e=>t.jsx("option",{value:e._id,children:e.name},e._id))]}),t.jsx("textarea",{placeholder:"Description",value:m,onChange:e=>h(e.target.value),className:"border p-2 rounded w-full"}),t.jsx("input",{type:"file",onChange:e=>C(e.target.files?.[0]||null),className:"border p-2 rounded w-full"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:o?"Update Carousel":"Add Carousel"}),o&&t.jsx("button",{type:"button",onClick:b,className:"bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500",children:"Cancel"})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a?.data.map(e=>t.jsxs("div",{className:"bg-white rounded shadow overflow-hidden",children:[t.jsx("img",{src:e.image,alt:e.title,className:"h-48 w-full object-cover"}),t.jsxs("div",{className:"p-4",children:[t.jsx("h2",{className:"font-bold text-lg",children:e.title}),t.jsx("p",{className:"text-sm text-gray-600",children:e.category}),t.jsx("p",{className:"mt-2 text-gray-700",children:e.description}),t.jsxs("div",{className:"mt-4 flex gap-2",children:[t.jsx("button",{onClick:()=>S(e),className:"bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600",children:"Edit"}),t.jsx("button",{onClick:()=>F(e._id),className:"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600",children:"Delete"})]})]})]},e._id))})]})};export{P as default};
