import{a as g,r as x,m as h,j as e,s as f,z as u}from"./index.BExXVMiE.js";import{b as p}from"./useProfile.CNbqc055.js";import{U as N}from"./user.BOir2XvK.js";import{M as j,P as y}from"./phone.DOr8I-Ym.js";import{S as w,a as v}from"./star.Qp6e1-ki.js";import{F as S}from"./file-text.DvAg_SY1.js";import{H as z}from"./house.qDCZ-3Au.js";const q=()=>{const{user:s}=g(),[r,o]=x.useState(!1),{register:a,handleSubmit:d,reset:n}=h(),{mutate:b,isPending:m}=p();if(x.useEffect(()=>{s&&n({name:s.name,shopName:s.shopName,gstNumber:s.gstNumber,address:s.address,email:s.email,phone:s.phone})},[s,n]),!s)return e.jsx(f,{});const c=async t=>{try{const l={};if(t.name!==s.name&&(l.name=t.name),t.shopName!==s.shopName&&(l.shopName=t.shopName),t.gstNumber!==s.gstNumber&&(l.gstNumber=t.gstNumber),t.address!==s.address&&(l.address=t.address),Object.keys(l).length===0){u.success("No changes to update");return}b(l),o(!1)}catch(l){u.error(l.response?.data?.message||"Failed to update profile")}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-r from-gray-100 to-gray-200 p-6 flex flex-col items-center mt-12",children:[e.jsxs("div",{className:"relative w-full max-w-2xl flex flex-col items-center",children:[e.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden shadow-xl border-4 border-white -mt-16 mb-4",children:e.jsx("img",{src:`https://api.dicebear.com/7.x/initials/svg?seed=${s.name}`,alt:s.name,className:"w-full h-full object-cover"})}),e.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 mb-1",children:s.name}),e.jsxs("p",{className:"text-gray-500 mb-4",children:[s.role," | ",s.shopName]})]}),e.jsxs("form",{onSubmit:d(c),className:"w-full max-w-2xl bg-white rounded-2xl shadow-lg p-6 mt-6 space-y-4",children:[e.jsx(i,{icon:e.jsx(N,{size:24}),label:"Name",disabled:!r,...a("name",{required:!0})}),e.jsx(i,{icon:e.jsx(j,{size:24}),label:"Email",disabled:!0,...a("email")}),e.jsx(i,{icon:e.jsx(y,{size:24}),label:"Phone",disabled:!0,...a("phone")}),e.jsx(i,{icon:e.jsx(w,{size:24}),label:"Shop Name",disabled:!r,...a("shopName",{required:!0})}),e.jsx(i,{icon:e.jsx(S,{size:24}),label:"GST Number",disabled:!r,...a("gstNumber")}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-gradient-to-br from-indigo-400 to-purple-600 text-white rounded-full mr-4 shadow-md",children:e.jsx(z,{size:24})}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Address"}),e.jsx("textarea",{...a("address"),disabled:!r,rows:3,className:`mt-1 border rounded-md p-2 focus:outline-none focus:ring-2 ${r?"border-gray-300 focus:ring-blue-400":"border-gray-200 bg-gray-100 cursor-not-allowed"}`})]})]}),e.jsx(i,{icon:e.jsx(v,{size:24}),label:"Role",disabled:!0,value:s.role}),e.jsx("div",{className:"pt-4 flex gap-2",children:r?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",disabled:m,onClick:d(c),className:"flex-1 py-2 rounded-lg bg-green-600 hover:bg-green-700 text-white transition",children:"Save Changes"}),e.jsx("button",{type:"button",onClick:()=>{n({name:s.name,shopName:s.shopName,gstNumber:s.gstNumber,address:s.address,email:s.email,phone:s.phone}),o(!1)},className:"flex-1 py-2 rounded-lg bg-gray-300 hover:bg-gray-400 text-black transition",children:"Cancel"})]}):e.jsx("button",{type:"button",disabled:m,onClick:()=>o(!0),className:"flex-1 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white transition",children:"Edit Profile"})})]})]})},i=({icon:s,label:r,disabled:o,...a})=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-gradient-to-br from-indigo-400 to-purple-600 text-white rounded-full mr-4 shadow-md",children:s}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("label",{className:"text-sm text-gray-500",children:r}),e.jsx("input",{...a,disabled:o,className:`mt-1 border rounded-md p-2 focus:outline-none focus:ring-2 ${o?"border-gray-200 bg-gray-100 cursor-not-allowed":"border-gray-300 focus:ring-blue-400"}`})]})]});export{q as default};
