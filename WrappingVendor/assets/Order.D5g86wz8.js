import{q as o,i as c,r as x,j as e,p as m}from"./index.Cj5zF2mn.js";import{u as h,P as g}from"./usePagination.BIsRk35W.js";const p=async a=>(await c.get("/orders/details/",{params:a})).data,j=({pageSize:a=10,pageNumber:n=1,status:r})=>o({queryKey:["order",a,n,r],queryFn:()=>p({pageSize:a,pageNumber:n,status:r}),staleTime:1e3*60}),u=({orders:a,startItem:n})=>{const[r,l]=x.useState(!1);return a.length===0?e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center p-4 text-gray-500",children:"No Orders Found"})})}):e.jsx("tbody",{children:a.map((s,d)=>e.jsxs("tr",{className:"border-t hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"p-3 border text-center text-sm align-middle",children:d+n}),e.jsx("td",{className:"p-3 border font-mono text-xs sm:text-sm text-gray-800 break-words align-middle",children:s._id}),e.jsx("td",{className:"p-3 border text-sm align-middle",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"break-words",children:[e.jsx("strong",{children:"ID:"})," ",s.user._id]}),e.jsxs("div",{className:"break-words",children:[e.jsx("strong",{children:"Name:"})," ",s.user.username]}),e.jsxs("div",{className:"break-words",children:[e.jsx("strong",{children:"Email:"})," ",s.user.email]})]})}),e.jsxs("td",{className:"p-3 border font-semibold text-gray-900 align-middle text-center",children:["₹ ",s.totalAmount]}),e.jsx("td",{className:"p-3 border text-center align-middle",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.paymentStatus==="Paid"?"bg-green-100 text-green-700":s.paymentStatus==="Pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:s.paymentStatus})}),e.jsx("td",{className:"p-3 border text-center align-middle",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.orderStatus==="Delivered"?"bg-green-100 text-green-700":s.orderStatus==="Pending"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:s.orderStatus})}),e.jsxs("td",{className:"p-3 border text-xs sm:text-sm text-center align-middle",children:[e.jsx("button",{onClick:()=>l(!r),className:"px-3 py-1 rounded-md bg-indigo-50 text-indigo-600 hover:bg-indigo-100 text-xs font-medium transition",children:r?"Hide Items":`View Items (${s.items.length})`}),r&&e.jsx("div",{className:"mt-3 flex flex-col gap-3",children:s.items.map(t=>e.jsxs("div",{className:"border rounded-md p-3 bg-gray-50 flex flex-col items-center text-center",children:[t.productDetails.images.length>0&&e.jsx("img",{src:t.productDetails.images[0],alt:t.name,className:"w-20 h-20 object-cover rounded border mb-2"}),e.jsx("div",{className:"font-semibold text-gray-900 text-sm break-words",children:t.name}),e.jsxs("div",{className:"text-gray-600 text-xs mt-1",children:[t.quantity," pcs · ₹",t.size.sell_price," each"]}),e.jsxs("div",{className:"text-gray-500 text-xs break-words",children:["Color: ",t.color," | Size: ",t.size.sizeName]}),e.jsxs("div",{className:"text-gray-800 text-xs font-medium mt-1",children:["Total: ₹",t.total]})]},t._id))})]}),e.jsx("td",{className:"p-3 border text-xs sm:text-sm align-middle",children:e.jsxs("div",{className:"flex flex-col gap-1 text-gray-700 break-words",children:[e.jsxs("span",{children:[e.jsx("strong",{children:"Name:"})," ",s.shippingAddress?.name]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Address:"})," ",s.shippingAddress?.addressLine1,","," ",s.shippingAddress?.addressLine2]}),e.jsxs("span",{children:[e.jsx("strong",{children:"City:"})," ",s.shippingAddress?.city]}),e.jsxs("span",{children:[e.jsx("strong",{children:"State:"})," ",s.shippingAddress?.state]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Postal Code:"})," ",s.shippingAddress?.postalCode]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Country:"})," ",s.shippingAddress?.country]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Phone:"})," ",s.shippingAddress?.phone]})]})})]},s._id))})},f=({status:a})=>{const{startItem:n,handlePageChange:r,handlePageSizeChange:l,pageNumber:s,pageSizeValue:d}=h(),{data:t,isLoading:i}=j({pageSize:d,pageNumber:s,...a!=="All"&&{status:a}});return i?e.jsx(m,{}):e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"overflow-x-auto overflow-y-auto border rounded-lg shadow-sm bg-white",children:e.jsxs("table",{className:"min-w-full border border-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-700 sticky top-0 z-10 shadow-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 border font-semibold",children:"S.No"}),e.jsx("th",{className:"p-3 border font-semibold",children:"Order ID"}),e.jsx("th",{className:"p-3 border font-semibold",children:"User"}),e.jsx("th",{className:"p-3 border font-semibold",children:"Total Amount"}),e.jsx("th",{className:"p-3 border font-semibold",children:"Payment Status"}),e.jsx("th",{className:"p-3 border font-semibold",children:"Order Status"}),e.jsx("th",{className:"p-3 border font-semibold",children:"Items"}),e.jsx("th",{className:"p-3 border font-semibold",children:"Shipping Address"})]})}),e.jsx(u,{orders:t?.results||[],startItem:n})]})}),e.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row items-center justify-between gap-3",children:[e.jsxs("span",{className:"text-gray-600 text-sm",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:t?.results?.length||0})," of"," ",e.jsx("span",{className:"font-medium",children:t?.pagination?.total||0})," ","orders"]}),e.jsx(g,{currentPage:s,handlePageChange:r,pageSize:d,handlePageSizeChange:l,totalCount:t?.pagination?.total||0})]})]})};export{f as default};
