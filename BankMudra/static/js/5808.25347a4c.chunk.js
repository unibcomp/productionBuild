"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[5808],{75808:(e,l,a)=>{a.r(l),a.d(l,{default:()=>T});var s=a(65043),t=a(72777),o=a(22019),n=a(94434),d=a(73575),i=a(27108),r=a(94516),c=a(67784),u=a(53193),p=a(18356),m=a(72221),v=a(32143),h=a(94496),x=a(59135),b=a(14282),j=a(35475),N=a(85369),g=a(25284),y=a(64196),_=a(11238),f=a(39574),C=a(70579);const T=e=>{let{title:l}=e;const a=(new Date).toISOString().split("T")[0],{startDate:T,endDate:S}=(0,f.x)(),[w,k]=(0,s.useState)(!1),[A,I]=(0,s.useState)(null),[B,R]=(0,s.useState)(1),[D,M]=(0,s.useState)([]),[E,O]=(0,s.useState)(null),[F,z]=(0,s.useState)(0),[P,L]=(0,s.useState)(!1),[U,W]=(0,s.useState)([]),[H,q]=(0,s.useState)(10),[V,G]=(0,s.useState)({customer_mobile:"",response:"",start_date:T,end_date:S,txn_id:"",batch_id:"",bank:"",addhar_no:""}),J=e=>{const{name:l,value:a}=e.target;G((e=>({...e,[l]:a})))},K=(e,l)=>{G((a=>({...a,[l]:e})))};(0,s.useEffect)((()=>{(async()=>{try{var e;let a=await(0,d.EpH)();var l;!1===(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.error)?M((null===(l=a.data)||void 0===l?void 0:l.data)||[]):M([])}catch(a){console.error(a),M([])}})()}),[]);(0,s.useEffect)((()=>{(async()=>{k(!0);try{var e;const i=await(0,d.pTr)({...V,retailer_id:(null===E||void 0===E?void 0:E._id)||"",page:B,limit:H});var l,a,s,t,n;!1===(null===i||void 0===i||null===(e=i.data)||void 0===e?void 0:e.error)?(W((null===(l=i.data)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.dmtTxns)||[]),z((null===(s=i.data)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.totalTxns)||0)):(W([]),z(0),o.Ay.error((null===(n=i.data)||void 0===n?void 0:n.message)||"Something went wrong"))}catch(i){}finally{k(!1)}})()}),[P,B,H]);const Q=Math.ceil(F/H);return(0,C.jsxs)(C.Fragment,{children:[w&&(0,C.jsx)(t.A,{}),l&&(0,C.jsx)("h3",{className:"mt-3 mb-3",style:{color:"var(--bs-primary2)",fontWeight:700,borderBottom:"1px solid var(--bs-primary2)",paddingBottom:"8px"},children:l}),(0,C.jsx)("div",{className:"card",children:(0,C.jsx)("div",{className:"card-body",children:(0,C.jsx)("form",{children:(0,C.jsxs)("div",{className:"form-row",style:{alignItems:"end"},children:[(0,C.jsxs)("div",{className:"form-group col-md-4",children:[(0,C.jsx)("label",{children:"Start Date"}),(0,C.jsx)("input",{type:"date",name:"start_date",className:"form-control",max:a,value:V.start_date,onChange:J})]}),(0,C.jsxs)("div",{className:"form-group col-md-4",children:[(0,C.jsx)("label",{children:"End Date"}),(0,C.jsx)("input",{type:"date",name:"end_date",className:"form-control",max:a,value:V.end_date,onChange:J})]}),(0,C.jsxs)("div",{className:"form-group col-md-4",children:[(0,C.jsx)("label",{children:"Customer Mobile"}),(0,C.jsx)("input",{type:"number",name:"customer_mobile",className:"form-control",placeholder:"Enter Customer Mobile",value:V.customer_mobile,onChange:J})]}),(0,C.jsxs)("div",{className:"form-group col-md-4",children:[(0,C.jsx)("label",{children:"Txn Id"}),(0,C.jsx)("input",{type:"text",name:"txn_id",className:"form-control",placeholder:"Enter Txn Id",value:V.txn_id,onChange:J})]}),(0,C.jsxs)("div",{className:"form-group col-md-4",children:[(0,C.jsx)("label",{children:"Batch Id"}),(0,C.jsx)("input",{type:"text",name:"batch_id",className:"form-control",placeholder:"Enter Batch Id",value:V.batch_id,onChange:J})]}),(0,C.jsxs)("div",{className:"form-group col-md-4",children:[(0,C.jsx)("label",{children:"Bank"}),(0,C.jsx)(n.A,{style:{width:"100%"},value:V.bank,onChange:e=>K(e,"bank"),options:[{value:"",label:"All"},{value:"bank1",label:"Bank 1"},{value:"bank2",label:"Bank 2"}]})]}),(0,C.jsxs)("div",{className:"form-group col-md-4",children:[(0,C.jsx)("label",{children:"Status"}),(0,C.jsx)(n.A,{style:{width:"100%"},value:V.response,onChange:e=>K(e,"response"),options:[{value:"",label:"All"},{value:"1",label:"Pending"},{value:"2",label:"Success"},{value:"3",label:"Failed"},{value:"4",label:"Refunded"}]})]}),(0,C.jsxs)("div",{className:"form-group col-md-4",children:[(0,C.jsx)("label",{children:"Select Retailer"}),(0,C.jsx)(i.A,{options:D,getOptionLabel:e=>e.name||"",value:null!==E&&void 0!==E?E:null,size:"small",onChange:(e,l)=>O(l),renderOption:(e,l)=>(0,s.createElement)("li",{...e,key:l.retailer_id},(0,C.jsx)(r.A,{sx:{fontSize:"13px"},children:l.name})),renderInput:e=>(0,C.jsx)(c.A,{...e,label:"Select Retailer",InputLabelProps:{sx:{"&.MuiInputLabel-root:not(.MuiInputLabel-shrink)":{top:"-3px"}}},sx:{"& label.Mui-focused":{color:"#8b8b8bff"},"& .MuiInputBase-root":{backgroundColor:"#fff"},"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#ced4da"},"&.Mui-focused fieldset":{borderColor:"#ced4da"}}}})})]}),(0,C.jsxs)("div",{className:"form-group col-md-12",children:[(0,C.jsx)("button",{type:"button",className:"btn btn-primary mr-3 text-black",onClick:()=>{R(1),L((e=>!e))},children:"Search"}),(0,C.jsx)("button",{type:"button",className:"btn btn-light",onClick:()=>{G({customer_mobile:"",response:"",start_date:"",end_date:"",txn_id:"",batch_id:"",bank:"",addhar_no:""}),O(null),L((e=>!e)),q(10),R(1)},children:"Reset"})]})]})})})}),(0,C.jsx)("div",{className:"card mt-4",style:{overflow:"auto"},children:(0,C.jsxs)("div",{className:"card-body",children:[(0,C.jsxs)("div",{id:"myTable_wrapper",className:"dataTables_wrapper no-footer",children:[(0,C.jsx)("div",{className:"d-flex  justify-content-end align-items-center",children:(0,C.jsx)("div",{className:"dataTables_length mb-3",id:"myTable_length",children:(0,C.jsx)(b.A,{className:"btn btn-success cusxel",onClick:async()=>{try{var e,l,a;k(!0);const i=await(0,d.ELn)({...V,retailer_id:(null===E||void 0===E?void 0:E._id)||""});if((null===i||void 0===i||null===(e=i.data)||void 0===e||null===(l=e.data)||void 0===l||null===(a=l.dmtTxns)||void 0===a?void 0:a.length)>0){var s,t,n;const e=null===i||void 0===i||null===(s=i.data)||void 0===s||null===(t=s.data)||void 0===t||null===(n=t.dmtTxns)||void 0===n?void 0:n.map(((e,l)=>({"Sr. No":l+1,"Date / Time":(null===e||void 0===e?void 0:e.createdAt)||"","Transaction ID":(null===e||void 0===e?void 0:e.txn_id)||"","Batch ID":(null===e||void 0===e?void 0:e.batchId)||"","Transaction Mode":(null===e||void 0===e?void 0:e.txn_mode)||"",Amount:(null===e||void 0===e?void 0:e.amount)||"",Charges:(null===e||void 0===e?void 0:e.charges)||"",TDS:(null===e||void 0===e?void 0:e.tds)||"",Commission:(null===e||void 0===e?void 0:e.commission)||"","Distributor Commission":(null===e||void 0===e?void 0:e.distributor_commission)||"","Super Distributor Commission":(null===e||void 0===e?void 0:e.master_dist_commission)||"","Opening Balance":(null===e||void 0===e?void 0:e.o_bal)||"","Closing Balance":(null===e||void 0===e?void 0:e.c_bal)||"",Status:2===(null===e||void 0===e?void 0:e.response)?"Success":1===(null===e||void 0===e?void 0:e.response)?"Pending":3===(null===e||void 0===e?void 0:e.response)?"Failed":4===(null===e||void 0===e?void 0:e.response)?"Refund":"Unknown",UTR:(null===e||void 0===e?void 0:e.utr)||"","Beneficiary Name":(null===e||void 0===e?void 0:e.beneficiary_name)||"","Customer Name":(null===e||void 0===e?void 0:e.customer_name)||"","Customer Mobile":(null===e||void 0===e?void 0:e.customer_mobile)||"","Bank Name":(null===e||void 0===e?void 0:e.bank_name)||"","IFSC Code":(null===e||void 0===e?void 0:e.ifsc_code)||"","Account Number":(null===e||void 0===e?void 0:e.account_number)||"","Retailer Name":(null===e||void 0===e?void 0:e.retailer_name)||"","Retailer Mobile":(null===e||void 0===e?void 0:e.retailer_mobile)||"","Retailer Refer ID":(null===e||void 0===e?void 0:e.retailer_refer_id)||"","Created By Name":(null===e||void 0===e?void 0:e.CreatedBy_name)||"","Created By Mobile":(null===e||void 0===e?void 0:e.CreatedBy_mobile)||"","Created By Refer ID":(null===e||void 0===e?void 0:e.CreatedBy_refer_id)||"","Status Update Time":(null===e||void 0===e?void 0:e.status_update_time)||""}))),l=_.Wp.json_to_sheet(e),a=_.Wp.book_new();_.Wp.book_append_sheet(a,l,"Bank Transfer Report"),_._h(a,"BankTransfer_Report_".concat((new Date).toLocaleDateString(),".xlsx"))}else o.Ay.error("No data available to export!")}catch(i){o.Ay.error("Failed to download Excel. Please try again.")}finally{k(!1)}},children:"Download Excel sheet"})})}),(0,C.jsx)("div",{className:"table-responsive",style:{maxHeight:"60vh",overflow:"auto",borderRadius:"10px",border:"1px solid #eaeaea"},children:(0,C.jsxs)("table",{className:"table table-hover table-bordered mb-0",style:{whiteSpace:"nowrap"},children:[(0,C.jsx)("thead",{style:{position:"sticky",top:0,zIndex:2,background:"#f8f9fa"},children:(0,C.jsxs)("tr",{role:"row",children:[(0,C.jsx)("th",{className:"sorting",children:"S.No"}),(0,C.jsx)("th",{className:"sorting",children:"Txn Date"}),(0,C.jsx)("th",{className:"sorting",children:"Batch ID"}),(0,C.jsx)("th",{className:"sorting",children:"Txn Id"}),(0,C.jsx)("th",{className:"sorting",children:"UTR No "}),(0,C.jsx)("th",{className:"sorting",children:"Bank Name"}),(0,C.jsx)("th",{className:"sorting",children:"Amount"}),(0,C.jsx)("th",{className:"sorting",children:"Txn Status"}),(0,C.jsx)("th",{className:"sorting",children:"View"}),(0,C.jsx)("th",{className:"sorting",children:"Txn. Mode"}),(0,C.jsx)("th",{className:"sorting",children:"Retailer Name"}),(0,C.jsx)("th",{className:"sorting",children:"Retailer Code"}),(0,C.jsx)("th",{className:"sorting",children:"Retailer Number"}),(0,C.jsx)("th",{className:"sorting",children:"Status Update At"}),(0,C.jsx)("th",{className:"sorting",children:"Enquiry"}),(0,C.jsx)("th",{className:"sorting",children:"Invoice"}),(0,C.jsx)("th",{className:"sorting",children:"Dispute"})]})}),(0,C.jsxs)("tbody",{children:[null===U||void 0===U?void 0:U.map(((e,l)=>(0,C.jsxs)("tr",{className:"odd",children:[(0,C.jsx)("td",{valign:"top",className:"dataTables_empty",children:l+1+(B-1)*H}),(0,C.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.createdAt}),(0,C.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.batchId}),(0,C.jsx)("td",{valign:"top",className:"dataTables_empty",children:(null===e||void 0===e?void 0:e.txn_id)||"---"}),(0,C.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.utr}),(0,C.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.bank}),(0,C.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.amount}),(0,C.jsxs)("td",{valign:"top",className:"dataTables_empty",children:[1==(null===e||void 0===e?void 0:e.response)?(0,C.jsx)("button",{className:"btn btn-warning",style:{width:"130px"},children:"Pending"}):"",2==(null===e||void 0===e?void 0:e.response)?(0,C.jsx)("button",{className:"btn btn-success",style:{width:"130px"},children:"Success"}):"",3==(null===e||void 0===e?void 0:e.response)?(0,C.jsx)("button",{className:"btn btn-danger",style:{width:"130px"},children:"Failed"}):"",4==(null===e||void 0===e?void 0:e.response)?(0,C.jsx)("button",{className:"btn btn-light",style:{width:"130px"},children:"Refunded"}):"",5==(null===e||void 0===e?void 0:e.response)?(0,C.jsx)("button",{className:"btn btn-light",style:{width:"130px"},children:"Not Initiated"}):""]}),(0,C.jsx)("td",{valign:"top",className:"dataTables_empty text-center",children:(0,C.jsx)(N.Ny1,{className:"eyeiconreport",onClick:()=>(e=>{I(e)})(e)})}),(0,C.jsx)("td",{valign:"top",className:"dataTables_empty",children:"1"==(null===e||void 0===e?void 0:e.txn_mode)?"NEFT":"2"==(null===e||void 0===e?void 0:e.txn_mode)?"IMPS":null===e||void 0===e?void 0:e.txn_mode}),(0,C.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.retailer_name}),(0,C.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.retailer_refer_id}),(0,C.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.retailer_mobile}),(0,C.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.status_update_time}),(0,C.jsx)("td",{valign:"top",className:"dataTables_empty",children:(0,C.jsx)(b.A,{onClick:()=>(async e=>{k(!0);try{var l;let t=await(0,d.aM0)(e);var a,s;!1===(null===t||void 0===t||null===(l=t.data)||void 0===l?void 0:l.error)?(o.Ay.success(null===(a=t.data)||void 0===a?void 0:a.message),L((e=>!e))):o.Ay.error(null===(s=t.data)||void 0===s?void 0:s.message)}catch(t){}finally{k(!1)}})(null===e||void 0===e?void 0:e._id),disabled:w||1==(null===e||void 0===e?void 0:e.response)&&0==(null===e||void 0===e?void 0:e.tx_status)||2==(null===e||void 0===e?void 0:e.response)||4==(null===e||void 0===e?void 0:e.response)||5==(null===e||void 0===e?void 0:e.response),children:"Enquiry"})}),(0,C.jsx)("td",{valign:"top",className:"dataTables_empty",children:(0,C.jsx)(j.N_,{className:"btn btn-primary",to:"/details/".concat(null===e||void 0===e?void 0:e.batchId),children:"Invoice"})}),(0,C.jsx)("td",{valign:"top",className:"dataTables_empty",children:(0,C.jsx)(j.N_,{className:"btn btn-primary",to:"/add-ticket/".concat(null===e||void 0===e?void 0:e._id),state:{item:e,serviceId:"65f9484a26eb74e182c640fc"},children:(0,C.jsx)("span",{style:{color:"#fff"},children:"Dispute"})})})]},null===e||void 0===e?void 0:e._id))),0===(null===U||void 0===U?void 0:U.length)&&(0,C.jsx)("td",{style:{textAlign:"center"},colSpan:17,valign:"top",className:"dataTables_empty",children:"No Record Found"})]})]})})]}),(0,C.jsxs)(r.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2,flexWrap:"wrap",gap:2,children:[(0,C.jsxs)(r.A,{display:"flex",alignItems:"center",gap:2,children:[(0,C.jsxs)(u.A,{size:"small",sx:{width:"150px"},children:[(0,C.jsx)(p.A,{children:"Rows per page"}),(0,C.jsx)(m.A,{value:H,onChange:e=>{q(e.target.value),R(1)},label:"Rows per page",sx:{fontSize:"14px","& .MuiOutlinedInput-notchedOutline":{borderColor:"#ccc"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"var(--bs-primary1)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"var(--bs-primary1)"}},children:[5,10,25,50].map((e=>(0,C.jsx)(v.A,{value:e,children:e},e)))})]}),(0,C.jsxs)(h.A,{variant:"body2",sx:{fontSize:"14px",color:"#555"},children:["Total Entries: ",F]})]}),(0,C.jsx)(x.A,{count:Q,page:B,onChange:(e,l)=>{R(l)},shape:"rounded",showFirstButton:!0,showLastButton:!0,sx:{"& .MuiPaginationItem-root":{color:"var(--bs-primary1)",borderRadius:"8px"},"& .MuiPaginationItem-root.Mui-selected":{backgroundColor:"var(--bs-primary1)",color:"#fff",fontWeight:"bold","&:hover":{backgroundColor:"var(--bs-primary1)"}}}})]})]})}),A&&(0,C.jsxs)(g.A,{show:!!A,onHide:()=>I(null),centered:!0,className:"transaction-modal",children:[(0,C.jsx)(g.A.Header,{closeButton:!0,className:"bg-primary text-white",children:(0,C.jsxs)(g.A.Title,{children:["Transaction ID # ",A.txn_id]})}),(0,C.jsx)(g.A.Body,{className:"bg-white",children:(0,C.jsx)(y.A,{borderless:!0,style:{border:"none"},children:(0,C.jsxs)("tbody",{children:[(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"trportpopup",children:"Beneficiary Name:"}),(0,C.jsx)("td",{className:"trportpopup",children:null===A||void 0===A?void 0:A.beneficiary_name})]}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"trportpopup",children:"Account No:"}),(0,C.jsx)("td",{className:"trportpopup",children:null===A||void 0===A?void 0:A.account_number})]}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"trportpopup",children:"Transaction Date:"}),(0,C.jsx)("td",{className:"trportpopup",children:null===A||void 0===A?void 0:A.createdAt.split(" ")[0]})]}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"trportpopup",children:"Bank Name:"}),(0,C.jsx)("td",{className:"trportpopup",children:null===A||void 0===A?void 0:A.bank_name})]}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"trportpopup",children:"Beneficiary Name:"}),(0,C.jsx)("td",{className:"trportpopup",children:null===A||void 0===A?void 0:A.beneficiary_name})]}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"trportpopup",children:"IFSC Code:"}),(0,C.jsx)("td",{className:"trportpopup",children:null===A||void 0===A?void 0:A.ifsc_code})]}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"trportpopup",children:"Remitter Mobile No:"}),(0,C.jsx)("td",{className:"trportpopup",children:null===A||void 0===A?void 0:A.customer_mobile})]}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"trportpopup",children:"Amount:"}),(0,C.jsxs)("td",{className:"trportpopup",children:["\u20b9",null===A||void 0===A?void 0:A.amount]})]}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"trportpopup",children:"Charges:"}),(0,C.jsxs)("td",{className:"trportpopup",children:["\u20b9",null===A||void 0===A?void 0:A.charges]})]}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"trportpopup",children:"Commissions:"}),(0,C.jsxs)("td",{className:"trportpopup",children:["\u20b9",null===A||void 0===A?void 0:A.commission]})]}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"trportpopup",children:"TDS:"}),(0,C.jsxs)("td",{className:"trportpopup",children:["\u20b9",null===A||void 0===A?void 0:A.tds]})]}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"trportpopup",children:"UTR No/RRN No:"}),(0,C.jsx)("td",{className:"trportpopup",children:null===A||void 0===A?void 0:A.utr})]}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"trportpopup",children:"Opening Balance:"}),(0,C.jsx)("td",{className:"trportpopup",children:null===A||void 0===A?void 0:A.o_bal})]}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"trportpopup",children:"Closing Balance:"}),(0,C.jsx)("td",{className:"trportpopup",children:null===A||void 0===A?void 0:A.c_bal})]}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"trportpopup",children:"Status:"}),(0,C.jsxs)("td",{className:"trportpopup",children:[1==(null===A||void 0===A?void 0:A.response)&&(0,C.jsx)("span",{className:"badge bg-warning",style:{fontSize:"12px"},children:"Pending"}),2==(null===A||void 0===A?void 0:A.response)&&(0,C.jsx)("span",{className:"badge bg-success",style:{fontSize:"12px"},children:"Success"}),3==(null===A||void 0===A?void 0:A.response)&&(0,C.jsx)("span",{className:"badge bg-danger",style:{fontSize:"12px"},children:"Failed"}),4===(null===A||void 0===A?void 0:A.response)&&(0,C.jsx)("span",{className:"",style:{fontSize:"12px",background:"#e9ecef",padding:"1%"},children:"Refunded"})]})]})]})})}),(0,C.jsx)(g.A.Footer,{children:(0,C.jsx)(b.A,{variant:"secondary",onClick:()=>I(null),children:"Close"})})]})]})}},39574:(e,l,a)=>{a.d(l,{x:()=>t});var s=a(73216);const t=()=>{const{search:e}=(0,s.zy)(),l=new URLSearchParams(e),a=e=>{if(l.has(e)){const a=l.get(e);return""===a?"":a}return(new Date).toISOString().split("T")[0]};return{startDate:a("start-date"),endDate:a("end-date")}}}}]);
//# sourceMappingURL=5808.25347a4c.chunk.js.map