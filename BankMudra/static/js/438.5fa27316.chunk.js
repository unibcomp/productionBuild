"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[438],{50438:(e,a,t)=>{t.r(a),t.d(a,{default:()=>u});var l=t(65043),n=t(73216),s=t(35475),d=t(73575),i=t(22019),r=t(76245),o=t(72777),c=t(70579);const m=function(){const e=(0,n.g)();console.log(e);const[a,t]=(0,l.useState)(!1),[m,u]=(0,l.useState)(10),[h,v]=(0,l.useState)(0),[p,x]=(0,l.useState)(null),[g,b]=(0,l.useState)(null),[_,j]=(0,l.useState)(null),[y,N]=(0,l.useState)(null),[S,f]=(0,l.useState)(null),[w,I]=(0,l.useState)(null),[T,C]=(0,l.useState)({user_id:"",count:"",page:"",end_date:"",start_date:"",txn_id:"",status:"",department_id:"",priority:"",service_id:"",sortType:""}),D=e=>{const{name:a,value:t}=e.target;C((e=>({...e,[a]:t})))},k=async e=>{t(!0);const a={...T,count:m,page:e,min_amt:+T.min_amt,max_amt:+T.max_amt,user_id:window.localStorage.getItem("userIdToken")};try{var l,n,s,i;const e=await(0,d.vPP)(a);console.log(e),x(null===e||void 0===e||null===(l=e.data)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.totalCount),f(null===e||void 0===e||null===(s=e.data)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.data),R()}catch(r){}t(!1)},[A,F]=(0,l.useState)(),[P,U]=(0,l.useState)(1),R=async()=>{T.min_amt,T.max_amt,window.localStorage.getItem("userIdToken")},E=(new Date).toISOString().split("T")[0];return(0,l.useEffect)((()=>{(async()=>{try{var e;const a=await(0,d.LiJ)();b(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.data)}catch(a){}})(),(async()=>{try{var e;const a=await(0,d.CDu)();j(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.data)}catch(a){}})(),(async()=>{try{var e;const a=await(0,d.UvC)();N(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.data)}catch(a){}})()}),[]),(0,l.useEffect)((()=>{R(),k(0)}),[]),(0,c.jsxs)(c.Fragment,{children:[a&&(0,c.jsx)(o.A,{}),(0,c.jsx)("div",{className:"PageHeading",children:(0,c.jsx)("h1",{children:"List Tickets"})}),(0,c.jsxs)("div",{className:"ContentArea",children:[(0,c.jsxs)("div",{className:"card",children:[(0,c.jsx)("div",{className:"card-header",children:" "}),(0,c.jsx)("div",{className:"card-body",children:(0,c.jsxs)("form",{action:"",method:"post",name:"frmReport",id:"frmReport",children:[(0,c.jsx)("input",{type:"hidden",id:"hidID",name:"hidID"}),(0,c.jsxs)("div",{className:"form-row",style:{alignItems:"end"},children:[(0,c.jsxs)("div",{className:"form-group col-md-4",children:[(0,c.jsx)("label",{htmlFor:"txtUserId",children:"Start Date"}),(0,c.jsx)("input",{type:"date",name:"start_date",id:"account_no",max:E,value:T.start_date,className:"form-control input-white-bg",onChange:e=>{const{value:a}=e.target;C((e=>({...e,start_date:a,end_date:e.end_date&&a>e.end_date?a:e.end_date})))}})]}),(0,c.jsxs)("div",{className:"form-group col-md-4",children:[(0,c.jsx)("label",{htmlFor:"txtUserId",children:"End Date"}),(0,c.jsx)("input",{type:"date",name:"end_date",id:"account_no",max:E,min:T.start_date||void 0,className:"form-control input-white-bg",value:T.end_date,onChange:D,onBlur:()=>{T.start_date&&T.end_date&&10===T.start_date.length&&10===T.end_date.length&&T.end_date<T.start_date&&(i.Ay.error("End date cannot be earlier than Start date"),C((e=>({...e,end_date:e.start_date}))))}})]}),(0,c.jsxs)("div",{className:"form-group col-md-4",children:[(0,c.jsx)("label",{htmlFor:"txtUserId",children:"Ticket Number"}),(0,c.jsx)("input",{type:"text",name:"txn_id",id:"account_no",className:"form-control",value:null===T||void 0===T?void 0:T.txn_id,placeholder:"Enter Ticket Number",onChange:D})]}),(0,c.jsxs)("div",{className:"form-group col-md-4",children:[(0,c.jsx)("label",{htmlFor:"txtUserId",children:"Department "}),(0,c.jsxs)("select",{class:"form-select",name:"department_id",value:null===T||void 0===T?void 0:T.department_id,onChange:D,children:[(0,c.jsx)("option",{selected:!0,children:"Select Department"}),g&&(null===g||void 0===g?void 0:g.map((e=>(0,c.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.department}))))]})]}),(0,c.jsxs)("div",{className:"form-group col-md-4",children:[(0,c.jsx)("label",{htmlFor:"txtUserId",children:"Priority "}),(0,c.jsxs)("select",{class:"form-select",name:"priority",value:null===T||void 0===T?void 0:T.priority,onChange:D,children:[(0,c.jsx)("option",{selected:!0,children:"Select Priority"}),_&&(null===_||void 0===_?void 0:_.map((e=>(0,c.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.priority}))))]})]}),(0,c.jsxs)("div",{className:"form-group col-md-4",children:[(0,c.jsx)("label",{htmlFor:"txtUserId",children:"Status"}),(0,c.jsxs)("select",{class:"form-select",name:"status",value:null===T||void 0===T?void 0:T.status,onChange:D,children:[(0,c.jsx)("option",{selected:!0,children:"Select Status"}),y&&(null===y||void 0===y?void 0:y.map((e=>(0,c.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.name}))))]})]}),(0,c.jsxs)("div",{className:"form-group col-md-12 ",children:[(0,c.jsx)("label",{children:"\xa0"}),(0,c.jsx)("button",{type:"button",className:"btn btn-secondary mr-3",onClick:()=>{const{start_date:e,end_date:a}=T;e&&a&&10===e.length&&10===a.length&&new Date(e)>new Date(a)?i.Ay.error("End date cannot be earlier than Start date"):(v(0),k(0))},children:"Search"}),(0,c.jsx)("button",{type:"button",className:"btn btn-light",onClick:async()=>{t(!0);const e={count:10,page:0,end_date:"",start_date:"",txn_id:"",status:"",department_id:"",priority:"",service_id:"",sortType:"",user_id:window.localStorage.getItem("userIdToken")};try{var a,l,n,s;const t=await(0,d.vPP)(e);x(null===t||void 0===t||null===(a=t.data)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.totalCount),f(null===t||void 0===t||null===(n=t.data)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.data),C({end_date:"",start_date:"",txn_id:"",status:"",department_id:"",priority:"",service_id:""}),v(0)}catch(i){}t(!1)},children:"Reset"})]})]})]})})]}),(0,c.jsx)("div",{className:"card mt-2",style:{overflow:"auto"},children:(0,c.jsx)("div",{className:"card-body",children:(0,c.jsx)("div",{className:"GridUi no-header-footer-grid mt-3",id:"all_transaction",children:(0,c.jsx)("div",{id:"rechargehistorytbl_wrapper",className:"dataTables_wrapper",children:(0,c.jsxs)("table",{id:"rechargehistorytbl",className:"table table-striped table-bordered table-hover display fixed_headers dataTable",style:{width:1250},role:"grid","aria-describedby":"rechargehistorytbl_info",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{role:"row",children:[(0,c.jsx)("th",{className:"sorting",tabIndex:0,"aria-controls":"rechargehistorytbl",rowSpan:1,colSpan:1,"aria-label":"Recharge ID: activate to sort column ascending",children:"S.No"}),(0,c.jsx)("th",{className:"sorting",tabIndex:0,"aria-controls":"rechargehistorytbl",rowSpan:1,colSpan:1,"aria-label":"Recharge ID: activate to sort column ascending",children:"Creation Date"}),(0,c.jsx)("th",{className:"sorting",tabIndex:0,"aria-controls":"rechargehistorytbl",rowSpan:1,colSpan:1,"aria-label":"Company Name: activate to sort column ascending",children:"Ticket No"}),(0,c.jsx)("th",{className:"sorting",tabIndex:0,"aria-controls":"rechargehistorytbl",rowSpan:1,colSpan:1,"aria-label":"Mobile No: activate to sort column ascending",children:"Subject"}),(0,c.jsx)("th",{className:"sorting",tabIndex:0,"aria-controls":"rechargehistorytbl",rowSpan:1,colSpan:1,"aria-label":"Amount: activate to sort column ascending",children:"Department"}),(0,c.jsx)("th",{className:"sorting",tabIndex:0,"aria-controls":"rechargehistorytbl",rowSpan:1,colSpan:1,"aria-label":"Amount: activate to sort column ascending",children:"Priority"}),(0,c.jsx)("th",{className:"sorting",tabIndex:0,"aria-controls":"rechargehistorytbl",rowSpan:1,colSpan:1,"aria-label":"Amount: activate to sort column ascending",children:"Status"}),(0,c.jsx)("th",{className:"sorting",tabIndex:0,"aria-controls":"rechargehistorytbl",rowSpan:1,colSpan:1,"aria-label":"Amount: activate to sort column ascending",children:"Reply"})]})}),(0,c.jsx)("tbody",{children:S&&(null===S||void 0===S?void 0:S.map(((e,a)=>(0,c.jsxs)("tr",{className:"odd",children:[(0,c.jsx)("td",{valign:"top",className:"dataTables_empty",children:a+1+h*m}),(0,c.jsx)("td",{valign:"top",className:"dataTables_empty",children:null!==e&&void 0!==e&&e.createdAt?new Date(e.createdAt).toLocaleString("en-GB"):""}),(0,c.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.refer_code}),(0,c.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.subject}),(0,c.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.department_id}),(0,c.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.priority}),(0,c.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.status}),(0,c.jsxs)("td",{valign:"top",className:"dataTables_empty",children:[" ",(0,c.jsx)(s.N_,{to:"/list-ticket-user/".concat(null===e||void 0===e?void 0:e._id),className:"btn btn-secondary",children:(0,c.jsx)("span",{style:{color:"#fff"},children:"Reply"})})," "]})]},null===e||void 0===e?void 0:e._id))))})]})})})})}),(0,c.jsxs)("div",{className:"dataTables_info_page",children:[(0,c.jsxs)("div",{className:"dataTables_info",id:"empoloyees-tblwrapper_info",role:"status","aria-live":"polite",children:["Total ",p," entries"]}),(0,c.jsx)("div",{className:"dataTables_paginate paging_simple_numbers",id:"empoloyees-tblwrapper_paginate",children:(0,c.jsx)(r.A,{defaultCurrent:1,current:h+1,onChange:e=>{console.log(e-1),v(e-1),k(e-1)},total:p})})]})]})]})};const u=function(){return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(m,{})})}}}]);
//# sourceMappingURL=438.5fa27316.chunk.js.map