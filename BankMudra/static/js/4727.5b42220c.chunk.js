"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[4727],{44727:(e,a,t)=>{t.r(a),t.d(a,{default:()=>h});var i=t(65043),n=t(94516),r=t(94496),s=t(68903),c=t(67784),o=t(32143),l=t(11906),d=t(90035),u=t(26600),m=t(35316),f=t(29347),b=t(54358),p=t(73575),y=t(70579);const v=["IMPS","NEFT","RTGS","BANKTRANSFER"],A=["SAVINGS","CURRENT"],h=()=>{const[e,a]=(0,i.useState)(!1),[t,h]=(0,i.useState)(!1),[_,g]=(0,i.useState)(!1),[x,C]=(0,i.useState)(""),[j,k]=(0,i.useState)({transfer_mode:"",bank_account_number:"",bank_ifsc:"",beneficiary_name:"",beneficiary_account_name:"",beneficiary_account_type:"",beneficiary_email:"",beneficiary_mobile:"",beneficiary_add:"",beneficiary_city:"",beneficiary_state:"",beneficiary_pin_code:"",transfer_amount:""}),N=(e,a)=>{k((t=>({...t,[e]:a})))},S=()=>{a(!1),g(!1),C(""),k({transfer_mode:"",bank_account_number:"",bank_ifsc:"",beneficiary_name:"",beneficiary_account_name:"",beneficiary_account_type:"",beneficiary_email:"",beneficiary_mobile:"",beneficiary_add:"",beneficiary_city:"",beneficiary_state:"",beneficiary_pin_code:"",transfer_amount:""})};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(n.A,{p:3,bgcolor:"#fff",borderRadius:2,children:[(0,y.jsx)(r.A,{variant:"h6",mb:2,children:"B2B Bank Transfer"}),(0,y.jsxs)(s.Ay,{container:!0,spacing:2,children:[(0,y.jsx)(s.Ay,{item:!0,xs:12,md:4,children:(0,y.jsx)(c.A,{select:!0,fullWidth:!0,className:"mui-autofill-fix",label:"Transfer Mode",value:j.transfer_mode,disabled:t,onChange:e=>N("transfer_mode",e.target.value),children:v.map((e=>(0,y.jsx)(o.A,{value:e,children:e},e)))})}),(0,y.jsx)(s.Ay,{item:!0,xs:12,md:4,children:(0,y.jsx)(c.A,{fullWidth:!0,label:"Account Number",className:"mui-autofill-fix",value:j.bank_account_number,disabled:e||t,onChange:e=>N("bank_account_number",e.target.value)})}),(0,y.jsx)(s.Ay,{item:!0,xs:12,md:4,children:(0,y.jsx)(c.A,{fullWidth:!0,className:"mui-autofill-fix",label:"IFSC Code",value:j.bank_ifsc,disabled:e||t,onChange:e=>N("bank_ifsc",e.target.value.toUpperCase())})}),!e&&(0,y.jsx)(s.Ay,{item:!0,xs:12,children:(0,y.jsx)(l.A,{variant:"outlined",onClick:async()=>{if(j.bank_account_number&&j.bank_ifsc)try{var e;h(!0);const n=await(0,p.XTZ)({accountNumber:j.bank_account_number,bankIfsc:j.bank_ifsc});if(null!==n&&void 0!==n&&null!==(e=n.data)&&void 0!==e&&e.success){var t;const e=null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.data;if(null===e||void 0===e||!e.name)return void(0,b.A)(!0,"Unable to fetch account holder name");k((a=>{var t;return{...a,beneficiary_name:e.name,beneficiary_account_name:(null===(t=e.ifscDetails)||void 0===t?void 0:t.bankName)||""}})),a(!0),(0,b.A)(!1,"Account Verified Successfully")}else{var i;(0,b.A)(!0,(null===n||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||"Verification failed")}}catch{(0,b.A)(!0,"Verification error")}finally{h(!1)}else(0,b.A)(!0,"Account number and IFSC are required")},disabled:t,children:t?"Verifying...":"Verify Account"})}),e&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(s.Ay,{item:!0,xs:12,md:4,children:[(0,y.jsx)(c.A,{fullWidth:!0,label:"Account Holder Name",className:"mui-autofill-fix",value:j.beneficiary_name,disabled:!0}),(0,y.jsx)(r.A,{variant:"caption",color:"success.main",children:"\u2714 Verified"})]}),(0,y.jsx)(s.Ay,{item:!0,xs:12,md:4,children:(0,y.jsx)(c.A,{fullWidth:!0,label:"Bank Name",className:"mui-autofill-fix",value:j.beneficiary_account_name,disabled:!0})}),[["beneficiary_email","Email"],["beneficiary_mobile","Mobile"],["beneficiary_add","Address"],["beneficiary_city","City"],["beneficiary_state","State"],["beneficiary_pin_code","PIN Code"]].map((e=>{let[a,i]=e;return(0,y.jsx)(s.Ay,{item:!0,xs:12,md:4,children:(0,y.jsx)(c.A,{fullWidth:!0,className:"mui-autofill-fix",label:i,value:j[a],disabled:t,onChange:e=>N(a,e.target.value)})},a)})),(0,y.jsx)(s.Ay,{item:!0,xs:12,md:4,children:(0,y.jsx)(c.A,{select:!0,fullWidth:!0,label:"Account Type",className:"mui-autofill-fix",value:j.beneficiary_account_type,disabled:t,onChange:e=>N("beneficiary_account_type",e.target.value),children:A.map((e=>(0,y.jsx)(o.A,{value:e,children:e},e)))})}),(0,y.jsx)(s.Ay,{item:!0,xs:12,md:4,children:(0,y.jsx)(c.A,{fullWidth:!0,type:"number",className:"mui-autofill-fix",label:"Amount",value:j.transfer_amount,disabled:t,onChange:e=>N("transfer_amount",e.target.value)})})]})]}),e&&(0,y.jsx)(n.A,{mt:3,children:(0,y.jsx)(l.A,{variant:"contained",onClick:()=>g(!0),disabled:t||!j.transfer_mode,children:"Submit"})})]}),(0,y.jsxs)(d.A,{open:_,onClose:()=>g(!1),children:[(0,y.jsx)(u.A,{align:"center",children:"Enter TPIN"}),(0,y.jsx)(m.A,{children:(0,y.jsx)(c.A,{fullWidth:!0,type:"password",className:"mui-autofill-fix",value:x,disabled:t,inputProps:{maxLength:4},onChange:e=>/^\d{0,4}$/.test(e.target.value)&&C(e.target.value)})}),(0,y.jsxs)(f.A,{children:[(0,y.jsx)(l.A,{onClick:()=>g(!1),disabled:t,children:"Cancel"}),(0,y.jsx)(l.A,{onClick:async()=>{if(e)if(["IMPS","NEFT","RTGS","BANKTRANSFER"].includes(j.transfer_mode))if(/^\d{4}$/.test(x))if(!j.transfer_amount||Number(j.transfer_amount)<=0)(0,b.A)(!0,"Enter valid amount");else try{var a;h(!0);const e=await(0,p.IJ8)({...j,transfer_amount:Number(j.transfer_amount),tpin:x});var t;if(null!==e&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.success)(0,b.A)(!1,e.data.message||"Payout Successful"),S();else(0,b.A)(!0,(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Payout Failed")}catch{(0,b.A)(!0,"Server error")}finally{h(!1)}else(0,b.A)(!0,"Invalid TPIN");else(0,b.A)(!0,"transfer_mode must be one of IMPS, NEFT, RTGS, BANKTRANSFER");else(0,b.A)(!0,"Please verify bank account first")},disabled:t,children:t?"Processing...":"Confirm"})]})]})]})}},54358:(e,a,t)=>{t.d(a,{A:()=>n});var i=t(91036);function n(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"something went wrong";!1===e?i.oR.success(a):i.oR.error(a)}},5658:(e,a,t)=>{t.d(a,{A:()=>s,K:()=>r});var i=t(92532),n=t(72372);function r(e){return(0,n.Ay)("MuiDivider",e)}const s=(0,i.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"])},71424:(e,a,t)=>{t.d(a,{A:()=>s,f:()=>r});var i=t(92532),n=t(72372);function r(e){return(0,n.Ay)("MuiListItemIcon",e)}const s=(0,i.A)("MuiListItemIcon",["root","alignItemsFlexStart"])},28052:(e,a,t)=>{t.d(a,{A:()=>s,b:()=>r});var i=t(92532),n=t(72372);function r(e){return(0,n.Ay)("MuiListItemText",e)}const s=(0,i.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"])},32143:(e,a,t)=>{t.d(a,{A:()=>j});var i=t(65043),n=t(58387),r=t(98610),s=t(46596),c=t(61475),o=t(34535),l=t(66870),d=t(98206),u=t(51347),m=t(97467),f=t(55013),b=t(95849),p=t(5658),y=t(71424),v=t(28052),A=t(92532),h=t(72372);function _(e){return(0,h.Ay)("MuiMenuItem",e)}const g=(0,A.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var x=t(70579);const C=(0,o.Ay)(m.A,{shouldForwardProp:e=>(0,c.A)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:t}=e;return[a.root,t.dense&&a.dense,t.divider&&a.divider,!t.disableGutters&&a.gutters]}})((0,l.A)((e=>{let{theme:a}=e;return{...a.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(a.vars||a).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(g.selected)]:{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / ").concat(a.vars.palette.action.selectedOpacity,")"):(0,s.X4)(a.palette.primary.main,a.palette.action.selectedOpacity),["&.".concat(g.focusVisible)]:{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / calc(").concat(a.vars.palette.action.selectedOpacity," + ").concat(a.vars.palette.action.focusOpacity,"))"):(0,s.X4)(a.palette.primary.main,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)}},["&.".concat(g.selected,":hover")]:{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / calc(").concat(a.vars.palette.action.selectedOpacity," + ").concat(a.vars.palette.action.hoverOpacity,"))"):(0,s.X4)(a.palette.primary.main,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / ").concat(a.vars.palette.action.selectedOpacity,")"):(0,s.X4)(a.palette.primary.main,a.palette.action.selectedOpacity)}},["&.".concat(g.focusVisible)]:{backgroundColor:(a.vars||a).palette.action.focus},["&.".concat(g.disabled)]:{opacity:(a.vars||a).palette.action.disabledOpacity},["& + .".concat(p.A.root)]:{marginTop:a.spacing(1),marginBottom:a.spacing(1)},["& + .".concat(p.A.inset)]:{marginLeft:52},["& .".concat(v.A.root)]:{marginTop:0,marginBottom:0},["& .".concat(v.A.inset)]:{paddingLeft:36},["& .".concat(y.A.root)]:{minWidth:36},variants:[{props:e=>{let{ownerState:a}=e;return!a.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:a}=e;return a.divider},style:{borderBottom:"1px solid ".concat((a.vars||a).palette.divider),backgroundClip:"padding-box"}},{props:e=>{let{ownerState:a}=e;return!a.dense},style:{[a.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:e=>{let{ownerState:a}=e;return a.dense},style:{minHeight:32,paddingTop:4,paddingBottom:4,...a.typography.body2,["& .".concat(y.A.root," svg")]:{fontSize:"1.25rem"}}}]}}))),j=i.forwardRef((function(e,a){const t=(0,d.b)({props:e,name:"MuiMenuItem"}),{autoFocus:s=!1,component:c="li",dense:o=!1,divider:l=!1,disableGutters:m=!1,focusVisibleClassName:p,role:y="menuitem",tabIndex:v,className:A,...h}=t,g=i.useContext(u.A),j=i.useMemo((()=>({dense:o||g.dense||!1,disableGutters:m})),[g.dense,o,m]),k=i.useRef(null);(0,f.A)((()=>{s&&k.current&&k.current.focus()}),[s]);const N={...t,dense:j.dense,divider:l,disableGutters:m},S=(e=>{const{disabled:a,dense:t,divider:i,disableGutters:n,selected:s,classes:c}=e,o={root:["root",t&&"dense",a&&"disabled",!n&&"gutters",i&&"divider",s&&"selected"]},l=(0,r.A)(o,_,c);return{...c,...l}})(t),I=(0,b.A)(k,a);let T;return t.disabled||(T=void 0!==v?v:-1),(0,x.jsx)(u.A.Provider,{value:j,children:(0,x.jsx)(C,{ref:I,role:y,tabIndex:T,component:c,focusVisibleClassName:(0,n.A)(S.focusVisible,p),className:(0,n.A)(S.root,A),...h,ownerState:N,classes:S})})}))}}]);
//# sourceMappingURL=4727.5b42220c.chunk.js.map