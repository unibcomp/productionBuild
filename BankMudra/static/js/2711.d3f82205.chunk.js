"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[2711],{62711:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var l=a(65043),n=a(72777),r=a(22019),o=a(94434),s=a(73575),i=a(27108),d=a(94516),c=a(67784),u=a(53193),v=a(18356),h=a(72221),b=a(32143),p=a(94496),m=a(59135),x=a(14282),f=a(11238),j=a(70579);const g=e=>{let{title:t}=e;const a=(new Date).toISOString().split("T")[0],[g,y]=(0,l.useState)(!1),[_,N]=(0,l.useState)(null),[C,w]=(0,l.useState)(1),[A,S]=(0,l.useState)([]),[k,T]=(0,l.useState)(null),[I,M]=(0,l.useState)(0),[R,D]=(0,l.useState)(!1),[O,B]=(0,l.useState)([]),[E,F]=(0,l.useState)(10),[z,P]=(0,l.useState)({start_date:"",end_date:"",trans_type:"",user_mobile:"",user_type:""}),W=e=>{const{name:t,value:a}=e.target;P((e=>"start_date"===t?{...e,start_date:a,end_date:e.end_date&&e.end_date<a?"":e.end_date}:"end_date"===t?e.start_date&&a<e.start_date?(r.Ay.error("End date cannot be earlier than Start date"),e):{...e,end_date:a}:{...e,[t]:a}))},L=(e,t)=>{P((a=>({...a,[t]:e})))};(0,l.useEffect)((()=>{(async()=>{try{var e;let a=await(0,s.EpH)();var t;!1===(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.error)?S((null===(t=a.data)||void 0===t?void 0:t.data)||[]):S([])}catch(a){console.error(a),S([])}})()}),[]);(0,l.useEffect)((()=>{(async()=>{y(!0);try{var e;const n=await(0,s.aKH)({...z,retailer_id:(null===k||void 0===k?void 0:k._id)||"",page:C,count:E});var t,a,l;!1===(null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.error)?(B((null===(t=n.data)||void 0===t?void 0:t.data)||[]),M((null===(a=n.data)||void 0===a?void 0:a.totalCount)||0)):(B([]),M(0),r.Ay.error((null===(l=n.data)||void 0===l?void 0:l.message)||"Something went wrong"))}catch(n){}finally{y(!1)}})()}),[R,C,E]);const U=Math.ceil(I/E);return(0,j.jsxs)(j.Fragment,{children:[g&&(0,j.jsx)(n.A,{}),t&&(0,j.jsx)("h3",{className:"mt-3 mb-3",style:{color:"var(--bs-primary2)",fontWeight:700,borderBottom:"1px solid var(--bs-primary2)",paddingBottom:"8px"},children:t}),(0,j.jsx)("div",{className:"card",children:(0,j.jsx)("div",{className:"card-body",children:(0,j.jsx)("form",{children:(0,j.jsxs)("div",{className:"form-row",style:{alignItems:"end"},children:[(0,j.jsxs)("div",{className:"form-group col-md-4",children:[(0,j.jsx)("label",{children:"Start Date"}),(0,j.jsx)("input",{type:"date",name:"start_date",className:"form-control input-white-bg",max:a,value:z.start_date,onChange:W})]}),(0,j.jsxs)("div",{className:"form-group col-md-4",children:[(0,j.jsx)("label",{children:"End Date"}),(0,j.jsx)("input",{type:"date",name:"end_date",className:"form-control input-white-bg",max:a,min:z.start_date||"",value:z.end_date,onChange:W})]}),(0,j.jsxs)("div",{className:"form-group col-md-4",children:[(0,j.jsx)("label",{children:"User Type"}),(0,j.jsx)(o.A,{style:{width:"100%"},value:z.user_type,onChange:e=>L(e,"user_type"),options:[{value:"",label:"All"},{value:"Distributor",label:"Distributor"},{value:"Super Distributor",label:"Super Distributor"},{value:"Retailer",label:"Retailer"},{value:"asm",label:"ASM"},{value:"zsm",label:"ZSM"}]})]}),(0,j.jsxs)("div",{className:"form-group col-md-4",children:[(0,j.jsx)("label",{children:"Transaction Type"}),(0,j.jsx)(o.A,{style:{width:"100%"},value:z.trans_type,onChange:e=>L(e,"trans_type"),options:[{value:"",label:"All"},{value:"balance Reverse",label:"Balance Reverse"},{value:"balance transfer",label:"Balance Transfer"}]})]}),(0,j.jsxs)("div",{className:"form-group col-md-4",children:[(0,j.jsx)("label",{children:"Mobile Number"}),(0,j.jsx)("input",{type:"text",name:"user_mobile",className:"form-control bs-autofill-fix",placeholder:"Enter Mobile Number",value:z.user_mobile,maxLength:10,onChange:e=>{const t=e.target.value.replace(/\D/g,"");P((e=>({...e,user_mobile:t})))},onWheel:e=>e.target.blur()})]}),(0,j.jsxs)("div",{className:"form-group col-md-4",children:[(0,j.jsx)("label",{children:"Select Retailer"}),(0,j.jsx)(i.A,{options:A,getOptionLabel:e=>e.name||"",value:null!==k&&void 0!==k?k:null,size:"small",onChange:(e,t)=>T(t),renderOption:(e,t)=>(0,l.createElement)("li",{...e,key:t.retailer_id},(0,j.jsx)(d.A,{sx:{fontSize:"13px"},children:t.name})),renderInput:e=>(0,j.jsx)(c.A,{...e,label:"Select Retailer",InputLabelProps:{sx:{"&.MuiInputLabel-root:not(.MuiInputLabel-shrink)":{top:"-3px"}}},sx:{"& label.Mui-focused":{color:"#8b8b8bff"},"& .MuiInputBase-root":{backgroundColor:"#fff"},"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#ced4da"},"&.Mui-focused fieldset":{borderColor:"#ced4da"}}}})})]}),(0,j.jsxs)("div",{className:"form-group col-md-12",children:[(0,j.jsx)("button",{type:"button",className:"btn mr-3 text-white",style:{backgroundColor:"#6C757D"},onClick:()=>{w(1),D((e=>!e))},children:"Search"}),(0,j.jsx)("button",{type:"button",className:"btn btn-light",style:{backgroundColor:"#F8F9FA"},onClick:()=>{P({start_date:"",end_date:"",trans_type:"",user_mobile:"",user_type:""}),T(null),F(10),w(1),D((e=>!e))},children:"Reset"})]})]})})})}),(0,j.jsx)("div",{className:"card mt-4",style:{overflow:"auto"},children:(0,j.jsxs)("div",{className:"card-body",children:[(0,j.jsxs)("div",{id:"myTable_wrapper",className:"dataTables_wrapper no-footer",children:[(0,j.jsx)("div",{className:"d-flex  justify-content-end align-items-center",children:(0,j.jsx)("div",{className:"dataTables_length mb-3",id:"myTable_length",children:(0,j.jsx)(x.A,{className:"btn btn-success cusxel",onClick:async()=>{try{var e,t;y(!0);const l=await(0,s.XPd)({...z,retailer_id:(null===k||void 0===k?void 0:k._id)||""});if((null===l||void 0===l||null===(e=l.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.length)>0){var a;const e=null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.data.map(((e,t)=>({"Sr. No":t+1,"Date / Time":(null===e||void 0===e?void 0:e.createdAt)||"","User Type":(null===e||void 0===e?void 0:e.user_type)||"","User Mobile Number":(null===e||void 0===e?void 0:e.user_mobile)||"","Transaction ID":(null===e||void 0===e?void 0:e.txn_id)||"",Amount:(null===e||void 0===e?void 0:e.amount)||"","Opening Balance":(null===e||void 0===e?void 0:e.opening_balance)||"","Closing Balance":(null===e||void 0===e?void 0:e.closing_balance)||"","Transaction Type":(null===e||void 0===e?void 0:e.trans_type)||"","Retailer Name":(null===e||void 0===e?void 0:e.user_name)||"","Refer ID":(null===e||void 0===e?void 0:e.user_refer_id)||""}))),t=f.Wp.json_to_sheet(e),n=f.Wp.book_new();f.Wp.book_append_sheet(n,t,"Fund_Transfer_Report"),f._h(n,"Fund_Transfer_Report_".concat((new Date).toLocaleDateString(),".xlsx"))}else r.Ay.error("No data available to export!")}catch(l){r.Ay.error("Failed to download Excel. Please try again.")}finally{y(!1)}},children:"Download Excel sheet"})})}),(0,j.jsx)("div",{className:"table-responsive",style:{maxHeight:"60vh",overflow:"auto",borderRadius:"10px",border:"1px solid #eaeaea"},children:(0,j.jsxs)("table",{className:"table table-hover table-bordered mb-0",style:{whiteSpace:"nowrap"},children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{children:"S.No"}),(0,j.jsx)("th",{children:"Txn Date"}),(0,j.jsx)("th",{children:"Txn Id"}),(0,j.jsx)("th",{children:"Transaction Type"}),(0,j.jsx)("th",{children:"User Type"}),(0,j.jsx)("th",{children:"User Mobile Number"}),(0,j.jsx)("th",{children:"Opening Balance"}),(0,j.jsx)("th",{children:"Amount"}),(0,j.jsx)("th",{children:"Closing Balance"}),(0,j.jsx)("th",{children:"Retailer Name"}),(0,j.jsx)("th",{children:"Refer Code"})]})}),(0,j.jsxs)("tbody",{children:[null===O||void 0===O?void 0:O.map(((e,t)=>(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:t+1+(C-1)*E}),(0,j.jsx)("td",{children:null===e||void 0===e?void 0:e.createdAt}),(0,j.jsx)("td",{children:(null===e||void 0===e?void 0:e.txn_id)||"---"}),(0,j.jsx)("td",{children:null===e||void 0===e?void 0:e.trans_type}),(0,j.jsx)("td",{children:null===e||void 0===e?void 0:e.user_type}),(0,j.jsx)("td",{children:null===e||void 0===e?void 0:e.user_mobile}),(0,j.jsx)("td",{children:null===e||void 0===e?void 0:e.opening_balance}),(0,j.jsx)("td",{children:null===e||void 0===e?void 0:e.amount}),(0,j.jsx)("td",{children:null===e||void 0===e?void 0:e.closing_balance}),(0,j.jsx)("td",{children:null===e||void 0===e?void 0:e.user_name}),(0,j.jsx)("td",{children:(null===e||void 0===e?void 0:e.user_refer_id)||""})]},null===e||void 0===e?void 0:e._id))),0===(null===O||void 0===O?void 0:O.length)&&(0,j.jsx)("tr",{children:(0,j.jsx)("td",{colSpan:11,style:{textAlign:"center"},children:"No Record Found"})})]})]})})]}),(0,j.jsxs)(d.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2,flexWrap:"wrap",gap:2,children:[(0,j.jsxs)(d.A,{display:"flex",alignItems:"center",gap:2,children:[(0,j.jsxs)(u.A,{size:"small",sx:{width:"150px"},children:[(0,j.jsx)(v.A,{children:"Rows per page"}),(0,j.jsx)(h.A,{value:E,onChange:e=>{F(e.target.value),w(1)},label:"Rows per page",sx:{fontSize:"14px","& .MuiOutlinedInput-notchedOutline":{borderColor:"#ccc"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"var(--bs-primary1)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"var(--bs-primary1)"}},children:[5,10,25,50].map((e=>(0,j.jsx)(b.A,{value:e,children:e},e)))})]}),(0,j.jsxs)(p.A,{variant:"body2",sx:{fontSize:"14px",color:"#555"},children:["Total Entries: ",I]})]}),(0,j.jsx)(m.A,{count:U,page:C,onChange:(e,t)=>{w(t)},shape:"rounded",showFirstButton:!0,showLastButton:!0,sx:{"& .MuiPaginationItem-root":{color:"var(--bs-primary1)",borderRadius:"8px"},"& .MuiPaginationItem-root.Mui-selected":{backgroundColor:"var(--bs-primary1)",color:"#fff",fontWeight:"bold","&:hover":{backgroundColor:"var(--bs-primary1)"}}}})]})]})})]})}},14140:(e,t,a)=>{a.d(t,{Am:()=>o,Ay:()=>i});var l=a(65043),n=a(70579);const r=["as","disabled"];function o(e){let{tagName:t,disabled:a,href:l,target:n,rel:r,role:o,onClick:s,tabIndex:i=0,type:d}=e;t||(t=null!=l||null!=n||null!=r?"a":"button");const c={tagName:t};if("button"===t)return[{type:d||"button",disabled:a},c];const u=e=>{(a||"a"===t&&function(e){return!e||"#"===e.trim()}(l))&&e.preventDefault(),a?e.stopPropagation():null==s||s(e)};return"a"===t&&(l||(l="#"),a&&(l=void 0)),[{role:null!=o?o:"button",disabled:void 0,tabIndex:a?void 0:i,href:l,target:"a"===t?n:void 0,"aria-disabled":a||void 0,rel:"a"===t?r:void 0,onClick:u,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),u(e))}},c]}const s=l.forwardRef(((e,t)=>{let{as:a,disabled:l}=e,s=function(e,t){if(null==e)return{};var a,l,n={},r=Object.keys(e);for(l=0;l<r.length;l++)a=r[l],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,r);const[i,{tagName:d}]=o(Object.assign({tagName:a,disabled:l},s));return(0,n.jsx)(d,Object.assign({},s,i,{ref:t}))}));s.displayName="Button";const i=s},14282:(e,t,a)=>{a.d(t,{A:()=>c});var l=a(98139),n=a.n(l),r=a(65043),o=a(14140),s=a(67852),i=a(70579);const d=r.forwardRef(((e,t)=>{let{as:a,bsPrefix:l,variant:r="primary",size:d,active:c=!1,disabled:u=!1,className:v,...h}=e;const b=(0,s.oU)(l,"btn"),[p,{tagName:m}]=(0,o.Am)({tagName:a,disabled:u,...h}),x=m;return(0,i.jsx)(x,{...p,...h,ref:t,disabled:u,className:n()(v,b,c&&"active",r&&"".concat(b,"-").concat(r),d&&"".concat(b,"-").concat(d),h.href&&u&&"disabled")})}));d.displayName="Button";const c=d},67852:(e,t,a)=>{a.d(t,{Jm:()=>u,Wz:()=>v,gy:()=>c,oU:()=>d});var l=a(65043);a(70579);const n=["xxl","xl","lg","md","sm","xs"],r="xs",o=l.createContext({prefixes:{},breakpoints:n,minBreakpoint:r}),{Consumer:s,Provider:i}=o;function d(e,t){const{prefixes:a}=(0,l.useContext)(o);return e||a[t]||t}function c(){const{breakpoints:e}=(0,l.useContext)(o);return e}function u(){const{minBreakpoint:e}=(0,l.useContext)(o);return e}function v(){const{dir:e}=(0,l.useContext)(o);return"rtl"===e}}}]);
//# sourceMappingURL=2711.d3f82205.chunk.js.map