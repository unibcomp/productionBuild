"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[978,4516],{10978:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var l=a(65043),n=a(72777),r=a(22019),o=a(94434),s=a(73575),i=a(27108),d=a(94516),c=a(67784),u=a(53193),v=a(18356),p=a(72221),m=a(32143),h=a(94496),x=a(59135),b=a(14282),g=a(35475),y=a(11238),f=a(39574),j=a(70579);const N=e=>{let{title:t}=e;const a=(new Date).toISOString().split("T")[0],[N,_]=(0,l.useState)(!1),{startDate:A,endDate:w}=(0,f.x)(),[S,C]=(0,l.useState)(null),[T,B]=(0,l.useState)(1),[I,R]=(0,l.useState)([]),[k,M]=(0,l.useState)(null),[D,O]=(0,l.useState)(0),[P,W]=(0,l.useState)(!1),[E,z]=(0,l.useState)([]),[F,L]=(0,l.useState)(10),[U,q]=(0,l.useState)({response:"",start_date:A,end_date:w,txn_id:"",service_name:""}),H=e=>{const{name:t,value:a}=e.target;q((e=>({...e,[t]:a})))};(0,l.useEffect)((()=>{(async()=>{try{var e;let a=await(0,s.EpH)();var t;!1===(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.error)?R((null===(t=a.data)||void 0===t?void 0:t.data)||[]):R([])}catch(a){console.error(a),R([])}})()}),[]);(0,l.useEffect)((()=>{(async()=>{_(!0);try{var e;const i=await(0,s.xcq)({...U,retailer_id:(null===k||void 0===k?void 0:k._id)||"",page:T,limit:F});var t,a,l,n,o;!1===(null===i||void 0===i||null===(e=i.data)||void 0===e?void 0:e.error)?(z((null===(t=i.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.bbpsAllTxns)||[]),O((null===(l=i.data)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.totalTxns)||0)):(z([]),O(0),r.Ay.error((null===(o=i.data)||void 0===o?void 0:o.message)||"Something went wrong"))}catch(i){}finally{_(!1)}})()}),[P,T,F]);const J=Math.ceil(D/F);return(0,j.jsxs)(j.Fragment,{children:[N&&(0,j.jsx)(n.A,{}),t&&(0,j.jsx)("h3",{className:"mt-3 mb-3",style:{color:"var(--bs-primary2)",fontWeight:700,borderBottom:"1px solid var(--bs-primary2)",paddingBottom:"8px"},children:t}),(0,j.jsx)("div",{className:"card",children:(0,j.jsx)("div",{className:"card-body",children:(0,j.jsx)("form",{children:(0,j.jsxs)("div",{className:"form-row",style:{alignItems:"end"},children:[(0,j.jsxs)("div",{className:"form-group col-md-4",children:[(0,j.jsx)("label",{children:"Start Date"}),(0,j.jsx)("input",{type:"date",name:"start_date",className:"form-control",max:a,value:U.start_date,onChange:H})]}),(0,j.jsxs)("div",{className:"form-group col-md-4",children:[(0,j.jsx)("label",{children:"End Date"}),(0,j.jsx)("input",{type:"date",name:"end_date",className:"form-control",max:a,value:U.end_date,onChange:H})]}),(0,j.jsxs)("div",{className:"form-group col-md-4",children:[(0,j.jsx)("label",{children:"Txn Id"}),(0,j.jsx)("input",{type:"text",name:"txn_id",className:"form-control",placeholder:"Enter Txn Id",value:U.txn_id,onChange:H})]}),(0,j.jsxs)("div",{className:"form-group col-md-4",children:[(0,j.jsx)("label",{children:"Service Name"}),(0,j.jsx)("input",{type:"text",name:"service_name",className:"form-control",placeholder:"Enter Service Name",value:U.service_name,onChange:H})]}),(0,j.jsxs)("div",{className:"form-group col-md-4",children:[(0,j.jsx)("label",{children:"Status"}),(0,j.jsx)(o.A,{style:{width:"100%"},value:U.response,onChange:e=>((e,t)=>{q((a=>({...a,[t]:e})))})(e,"response"),options:[{value:"",label:"All"},{value:"1",label:"Pending"},{value:"2",label:"Success"},{value:"3",label:"Failed"},{value:"4",label:"Refunded"}]})]}),(0,j.jsxs)("div",{className:"form-group col-md-4",children:[(0,j.jsx)("label",{children:"Select Retailer"}),(0,j.jsx)(i.A,{options:I,getOptionLabel:e=>e.name||"",value:null!==k&&void 0!==k?k:null,size:"small",onChange:(e,t)=>M(t),renderOption:(e,t)=>(0,l.createElement)("li",{...e,key:t.retailer_id},(0,j.jsx)(d.A,{sx:{fontSize:"13px",color:"var(--bs-nav)"},children:t.name})),renderInput:e=>(0,j.jsx)(c.A,{...e,label:"Select Retailer",InputLabelProps:{sx:{"&.MuiInputLabel-root:not(.MuiInputLabel-shrink)":{top:"-3px"}}},sx:{"& label.Mui-focused":{color:"var(--bs-nav)"},"& .MuiInputBase-root":{backgroundColor:"#fff"},"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"var(--bs-primary1)"},"&.Mui-focused fieldset":{borderColor:"var(--bs-primary1)"}}}})})]}),(0,j.jsxs)("div",{className:"form-group col-md-12",children:[(0,j.jsx)("button",{type:"button",className:"btn btn-primary mr-3",onClick:()=>{B(1),W((e=>!e))},children:"Search"}),(0,j.jsx)("button",{type:"button",className:"btn btn-light",onClick:()=>{q({response:"",start_date:"",end_date:"",txn_id:"",service_name:""}),M(null),W((e=>!e)),L(10),B(1)},children:"Reset"})]})]})})})}),(0,j.jsx)("div",{className:"card mt-4",style:{overflow:"auto"},children:(0,j.jsxs)("div",{className:"card-body",children:[(0,j.jsxs)("div",{id:"myTable_wrapper",className:"dataTables_wrapper no-footer",children:[(0,j.jsx)("div",{className:"d-flex  justify-content-end align-items-center",children:(0,j.jsx)("div",{className:"dataTables_length mb-3",id:"myTable_length",children:(0,j.jsx)(b.A,{className:"btn btn-success cusxel",onClick:async()=>{try{var e,t,a;_(!0);const o=await(0,s._Am)({...U,retailer_id:(null===k||void 0===k?void 0:k._id)||""});if((null===o||void 0===o||null===(e=o.data)||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.bbpsAllTxns)||void 0===a?void 0:a.length)>0){var l,n;const e=null===o||void 0===o||null===(l=o.data)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.bbpsAllTxns.map(((e,t)=>({"Sr. No":t+1,"Date / Time":(null===e||void 0===e?void 0:e.createdAt)||"","Transaction ID":(null===e||void 0===e?void 0:e.txn_id)||"","Operator Name":(null===e||void 0===e?void 0:e.operator_name)||"",Amount:(null===e||void 0===e?void 0:e.amount)||"",Status:2===(null===e||void 0===e?void 0:e.status)?"Success":1===(null===e||void 0===e?void 0:e.status)?"Pending":3===(null===e||void 0===e?void 0:e.status)?"Failed":4===(null===e||void 0===e?void 0:e.status)?"Refund":"Unknown","CA Number":(null===e||void 0===e?void 0:e.ca_num)||"","Opening Balance":(null===e||void 0===e?void 0:e.open_bal)||"","Closing Balance":(null===e||void 0===e?void 0:e.close_bal)||"","Ref ID":(null===e||void 0===e?void 0:e.refId)||"","Biller Id ID":(null===e||void 0===e?void 0:e.biller_id)||"",Charges:(null===e||void 0===e?void 0:e.charges)||"","Service Name":(null===e||void 0===e?void 0:e.service_name)||"","Created By Name":(null===e||void 0===e?void 0:e.CreatedBy_name)||"","Created By Mobile":(null===e||void 0===e?void 0:e.CreatedBy_mobile)||"","Created By Refer ID":(null===e||void 0===e?void 0:e.CreatedBy_refer_id)||"","Retailer Name":(null===e||void 0===e?void 0:e.retailer_name)||"","Retailer Mobile":(null===e||void 0===e?void 0:e.retailer_mobile)||"","Retailer Refer ID":(null===e||void 0===e?void 0:e.retailer_refer_id)||"","Status Update Time":(null===e||void 0===e?void 0:e.status_update_time)||""}))),t=y.Wp.json_to_sheet(e),a=y.Wp.book_new();y.Wp.book_append_sheet(a,t,"BBPS Report"),y._h(a,"BBPS_Report_".concat((new Date).toLocaleDateString(),".xlsx"))}else r.Ay.error("No data available to export!")}catch(o){r.Ay.error("Failed to download Excel. Please try again.")}finally{_(!1)}},children:"Download Excel sheet"})})}),(0,j.jsx)("div",{className:"table-responsive",children:(0,j.jsxs)("table",{className:"table table-striped table-bordered table-hover display dataTable no-footer dtr-inline collapsed",role:"grid","aria-describedby":"myTable_info",children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{role:"row",children:[(0,j.jsx)("th",{className:"",children:"S.No"}),(0,j.jsx)("th",{className:"",children:"Txn Date"}),(0,j.jsx)("th",{className:"",children:"Operator Name"}),(0,j.jsx)("th",{className:"",children:"CA Number"}),(0,j.jsx)("th",{className:"",children:"Txn Id"}),(0,j.jsx)("th",{className:"",children:"Service Name "}),(0,j.jsx)("th",{className:"",children:"Opening Balance"}),(0,j.jsx)("th",{className:"",children:"Amount"}),(0,j.jsx)("th",{className:"",children:"Closing Balance"}),(0,j.jsx)("th",{className:"",children:"Txn Status"}),(0,j.jsx)("th",{className:"",children:"Retailer Name"}),(0,j.jsx)("th",{className:"",children:"Retailer Code"}),(0,j.jsx)("th",{className:"",children:"Retailer Number"}),(0,j.jsx)("th",{className:"",children:"Status Update At"}),(0,j.jsx)("th",{className:"",children:"Enquiry"}),(0,j.jsx)("th",{className:"",children:"Invoice"})]})}),(0,j.jsxs)("tbody",{children:[null===E||void 0===E?void 0:E.map(((e,t)=>(0,j.jsxs)("tr",{className:"odd",children:[(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:t+1+(T-1)*F}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.createdAt}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.operator_name}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.ca_num}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:(null===e||void 0===e?void 0:e.txn_id)||"---"}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.service_name}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.open_bal}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.amount}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.close_bal}),(0,j.jsxs)("td",{valign:"top",className:"dataTables_empty",children:[1==(null===e||void 0===e?void 0:e.status)?(0,j.jsx)("button",{className:"btn btn-warning",style:{width:"130px"},children:"Pending"}):"",2==(null===e||void 0===e?void 0:e.status)?(0,j.jsx)("button",{className:"btn btn-success",style:{width:"130px"},children:"Success"}):"",3==(null===e||void 0===e?void 0:e.status)?(0,j.jsx)("button",{className:"btn btn-danger",style:{width:"130px"},children:"Failed"}):"",4==(null===e||void 0===e?void 0:e.status)?(0,j.jsx)("button",{className:"btn btn-light",style:{width:"130px"},children:"Refunded"}):"",5==(null===e||void 0===e?void 0:e.status)?(0,j.jsx)("button",{className:"btn btn-light",style:{width:"130px"},children:"Not Initiated"}):""]}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.retailer_name}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.retailer_refer_id}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.retailer_mobile}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.status_update_time}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:(0,j.jsx)(b.A,{onClick:()=>(async e=>{_(!0);try{var t;let n=await(0,s.Et2)(e);var a,l;!1===(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.error)?(r.Ay.success(null===(a=n.data)||void 0===a?void 0:a.message),W((e=>!e))):r.Ay.error(null===(l=n.data)||void 0===l?void 0:l.message)}catch(n){}finally{_(!1)}})(null===e||void 0===e?void 0:e.txn_id),disabled:N||1!==(null===e||void 0===e?void 0:e.status),children:"Enquiry"})}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:(0,j.jsx)(g.N_,{className:"btn btn-primary",to:"/bill-invoice/".concat(null===e||void 0===e?void 0:e._id),children:"Invoice"})})]},null===e||void 0===e?void 0:e._id))),0===(null===E||void 0===E?void 0:E.length)&&(0,j.jsx)("td",{style:{textAlign:"center"},colSpan:14,valign:"top",className:"dataTables_empty",children:"No Record Found"})]})]})})]}),(0,j.jsxs)(d.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2,flexWrap:"wrap",gap:2,children:[(0,j.jsxs)(d.A,{display:"flex",alignItems:"center",gap:2,children:[(0,j.jsxs)(u.A,{size:"small",sx:{width:"150px"},children:[(0,j.jsx)(v.A,{children:"Rows per page"}),(0,j.jsx)(p.A,{value:F,onChange:e=>{L(e.target.value),B(1)},label:"Rows per page",sx:{fontSize:"14px","& .MuiOutlinedInput-notchedOutline":{borderColor:"#ccc"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"var(--bs-primary1)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"var(--bs-primary1)"}},children:[5,10,25,50].map((e=>(0,j.jsx)(m.A,{value:e,children:e},e)))})]}),(0,j.jsxs)(h.A,{variant:"body2",sx:{fontSize:"14px",color:"#555"},children:["Total Entries: ",D]})]}),(0,j.jsx)(x.A,{count:J,page:T,onChange:(e,t)=>{B(t)},shape:"rounded",showFirstButton:!0,showLastButton:!0,sx:{"& .MuiPaginationItem-root":{color:"var(--bs-primary1)",borderRadius:"8px"},"& .MuiPaginationItem-root.Mui-selected":{backgroundColor:"var(--bs-primary1)",color:"#fff",fontWeight:"bold","&:hover":{backgroundColor:"var(--bs-primary1)"}}}})]})]})})]})}},39574:(e,t,a)=>{a.d(t,{x:()=>n});var l=a(73216);const n=()=>{const{search:e}=(0,l.zy)(),t=new URLSearchParams(e),a=e=>{if(t.has(e)){const a=t.get(e);return""===a?"":a}return(new Date).toISOString().split("T")[0]};return{startDate:a("start-date"),endDate:a("end-date")}}},94516:(e,t,a)=>{a.d(t,{A:()=>x});var l=a(65043),n=a(58387),r=a(54984),o=a(42768),s=a(38222),i=a(98366),d=a(70579);var c=a(79386),u=a(23571),v=a(13375);const p=(0,a(92532).A)("MuiBox",["root"]),m=(0,u.A)(),h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:a,defaultClassName:c="MuiBox-root",generateClassName:u}=e,v=(0,r.Ay)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(o.A);return l.forwardRef((function(e,l){const r=(0,i.A)(a),{className:o,component:p="div",...m}=(0,s.A)(e);return(0,d.jsx)(v,{as:p,ref:l,className:(0,n.A)(o,u?u(c):c),theme:t&&r[t]||r,...m})}))}({themeId:v.A,defaultTheme:m,defaultClassName:p.root,generateClassName:c.A.generate}),x=h},94496:(e,t,a)=>{a.d(t,{A:()=>b});var l=a(65043),n=a(58387),r=a(98610),o=a(60463),s=a(34535),i=a(66870),d=a(98206),c=a(6803),u=a(93618),v=a(70579);const p={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},m=(0,o.Dg)(),h=(0,s.Ay)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.variant&&t[a.variant],"inherit"!==a.align&&t["align".concat((0,c.A)(a.align))],a.noWrap&&t.noWrap,a.gutterBottom&&t.gutterBottom,a.paragraph&&t.paragraph]}})((0,i.A)((e=>{var t;let{theme:a}=e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(a.typography).filter((e=>{let[t,a]=e;return"inherit"!==t&&a&&"object"===typeof a})).map((e=>{let[t,a]=e;return{props:{variant:t},style:a}})),...Object.entries(a.palette).filter((e=>{let[,t]=e;return t&&t.main})).map((e=>{let[t]=e;return{props:{color:t},style:{color:(a.vars||a).palette[t].main}}})),...Object.entries((null===(t=a.palette)||void 0===t?void 0:t.text)||{}).filter((e=>{let[,t]=e;return"string"===typeof t})).map((e=>{let[t]=e;return{props:{color:"text".concat((0,c.A)(t))},style:{color:(a.vars||a).palette.text[t]}}})),{props:e=>{let{ownerState:t}=e;return"inherit"!==t.align},style:{textAlign:"var(--Typography-textAlign)"}},{props:e=>{let{ownerState:t}=e;return t.noWrap},style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:e=>{let{ownerState:t}=e;return t.gutterBottom},style:{marginBottom:"0.35em"}},{props:e=>{let{ownerState:t}=e;return t.paragraph},style:{marginBottom:16}}]}}))),x={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},b=l.forwardRef((function(e,t){const{color:a,...l}=(0,d.b)({props:e,name:"MuiTypography"}),o=m({...l,...!p[a]&&{color:a}}),{align:s="inherit",className:i,component:b,gutterBottom:g=!1,noWrap:y=!1,paragraph:f=!1,variant:j="body1",variantMapping:N=x,..._}=o,A={...o,align:s,color:a,className:i,component:b,gutterBottom:g,noWrap:y,paragraph:f,variant:j,variantMapping:N},w=b||(f?"p":N[j]||x[j])||"span",S=(e=>{const{align:t,gutterBottom:a,noWrap:l,paragraph:n,variant:o,classes:s}=e,i={root:["root",o,"inherit"!==e.align&&"align".concat((0,c.A)(t)),a&&"gutterBottom",l&&"noWrap",n&&"paragraph"]};return(0,r.A)(i,u.y,s)})(A);return(0,v.jsx)(h,{as:w,ref:t,className:(0,n.A)(S.root,i),..._,ownerState:A,style:{..."inherit"!==s&&{"--Typography-textAlign":s},..._.style}})}))},93618:(e,t,a)=>{a.d(t,{A:()=>o,y:()=>r});var l=a(92532),n=a(72372);function r(e){return(0,n.Ay)("MuiTypography",e)}const o=(0,l.A)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"])},14140:(e,t,a)=>{a.d(t,{Am:()=>o,Ay:()=>i});var l=a(65043),n=a(70579);const r=["as","disabled"];function o(e){let{tagName:t,disabled:a,href:l,target:n,rel:r,role:o,onClick:s,tabIndex:i=0,type:d}=e;t||(t=null!=l||null!=n||null!=r?"a":"button");const c={tagName:t};if("button"===t)return[{type:d||"button",disabled:a},c];const u=e=>{(a||"a"===t&&function(e){return!e||"#"===e.trim()}(l))&&e.preventDefault(),a?e.stopPropagation():null==s||s(e)};return"a"===t&&(l||(l="#"),a&&(l=void 0)),[{role:null!=o?o:"button",disabled:void 0,tabIndex:a?void 0:i,href:l,target:"a"===t?n:void 0,"aria-disabled":a||void 0,rel:"a"===t?r:void 0,onClick:u,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),u(e))}},c]}const s=l.forwardRef(((e,t)=>{let{as:a,disabled:l}=e,s=function(e,t){if(null==e)return{};var a,l,n={},r=Object.keys(e);for(l=0;l<r.length;l++)a=r[l],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,r);const[i,{tagName:d}]=o(Object.assign({tagName:a,disabled:l},s));return(0,n.jsx)(d,Object.assign({},s,i,{ref:t}))}));s.displayName="Button";const i=s},14282:(e,t,a)=>{a.d(t,{A:()=>c});var l=a(98139),n=a.n(l),r=a(65043),o=a(14140),s=a(67852),i=a(70579);const d=r.forwardRef(((e,t)=>{let{as:a,bsPrefix:l,variant:r="primary",size:d,active:c=!1,disabled:u=!1,className:v,...p}=e;const m=(0,s.oU)(l,"btn"),[h,{tagName:x}]=(0,o.Am)({tagName:a,disabled:u,...p}),b=x;return(0,i.jsx)(b,{...h,...p,ref:t,disabled:u,className:n()(v,m,c&&"active",r&&"".concat(m,"-").concat(r),d&&"".concat(m,"-").concat(d),p.href&&u&&"disabled")})}));d.displayName="Button";const c=d},67852:(e,t,a)=>{a.d(t,{Jm:()=>u,Wz:()=>v,gy:()=>c,oU:()=>d});var l=a(65043);a(70579);const n=["xxl","xl","lg","md","sm","xs"],r="xs",o=l.createContext({prefixes:{},breakpoints:n,minBreakpoint:r}),{Consumer:s,Provider:i}=o;function d(e,t){const{prefixes:a}=(0,l.useContext)(o);return e||a[t]||t}function c(){const{breakpoints:e}=(0,l.useContext)(o);return e}function u(){const{minBreakpoint:e}=(0,l.useContext)(o);return e}function v(){const{dir:e}=(0,l.useContext)(o);return"rtl"===e}}}]);
//# sourceMappingURL=978.80af3149.chunk.js.map