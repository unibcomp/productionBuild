"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[978],{10978:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var l=a(65043),n=a(72777),r=a(22019),i=a(94434),s=a(73575),o=a(27108),d=a(94516),c=a(67784),u=a(53193),v=a(18356),p=a(72221),m=a(91449),h=a(94496),x=a(59135),b=a(14282),g=a(35475),y=a(11238),j=a(39574),f=a(70579);const N=()=>{const e=(new Date).toISOString().split("T")[0],[t,a]=(0,l.useState)(!1),{startDate:N,endDate:_}=(0,j.x)(),[A,w]=(0,l.useState)(null),[S,C]=(0,l.useState)(1),[T,B]=(0,l.useState)([]),[I,R]=(0,l.useState)(null),[k,D]=(0,l.useState)(0),[O,M]=(0,l.useState)(!1),[P,W]=(0,l.useState)([]),[E,z]=(0,l.useState)(10),[L,F]=(0,l.useState)({response:"",start_date:N,end_date:_,txn_id:"",service_name:""}),U=e=>{const{name:t,value:a}=e.target;F((e=>({...e,[t]:a})))};(0,l.useEffect)((()=>{(async()=>{try{var e;let a=await(0,s.EpH)();var t;!1===(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.error)?B((null===(t=a.data)||void 0===t?void 0:t.data)||[]):B([])}catch(a){console.error(a),B([])}})()}),[]);(0,l.useEffect)((()=>{(async()=>{a(!0);try{var e;const a=await(0,s.xcq)({...L,retailer_id:(null===I||void 0===I?void 0:I._id)||"",page:S,limit:E});var t,l,n,i,o;!1===(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.error)?(W((null===(t=a.data)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.bbpsAllTxns)||[]),D((null===(n=a.data)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.totalTxns)||0)):(W([]),D(0),r.Ay.error((null===(o=a.data)||void 0===o?void 0:o.message)||"Something went wrong"))}catch(d){}finally{a(!1)}})()}),[O,S,E]);const q=Math.ceil(k/E);return(0,f.jsxs)(f.Fragment,{children:[t&&(0,f.jsx)(n.A,{}),(0,f.jsx)("div",{className:"card",children:(0,f.jsx)("div",{className:"card-body",children:(0,f.jsx)("form",{children:(0,f.jsxs)("div",{className:"form-row",style:{alignItems:"end"},children:[(0,f.jsxs)("div",{className:"form-group col-md-4",children:[(0,f.jsx)("label",{children:"Start Date"}),(0,f.jsx)("input",{type:"date",name:"start_date",className:"form-control",max:e,value:L.start_date,onChange:U})]}),(0,f.jsxs)("div",{className:"form-group col-md-4",children:[(0,f.jsx)("label",{children:"End Date"}),(0,f.jsx)("input",{type:"date",name:"end_date",className:"form-control",max:e,value:L.end_date,onChange:U})]}),(0,f.jsxs)("div",{className:"form-group col-md-4",children:[(0,f.jsx)("label",{children:"Txn Id"}),(0,f.jsx)("input",{type:"text",name:"txn_id",className:"form-control",placeholder:"Enter Txn Id",value:L.txn_id,onChange:U})]}),(0,f.jsxs)("div",{className:"form-group col-md-4",children:[(0,f.jsx)("label",{children:"Service Name"}),(0,f.jsx)("input",{type:"text",name:"service_name",className:"form-control",placeholder:"Enter Service Name",value:L.service_name,onChange:U})]}),(0,f.jsxs)("div",{className:"form-group col-md-4",children:[(0,f.jsx)("label",{children:"Status"}),(0,f.jsx)(i.A,{style:{width:"100%"},value:L.response,onChange:e=>((e,t)=>{F((a=>({...a,[t]:e})))})(e,"response"),options:[{value:"",label:"All"},{value:"1",label:"Pending"},{value:"2",label:"Success"},{value:"3",label:"Failed"},{value:"4",label:"Refunded"}]})]}),(0,f.jsxs)("div",{className:"form-group col-md-4",children:[(0,f.jsx)("label",{children:"Select Retailer"}),(0,f.jsx)(o.A,{options:T,getOptionLabel:e=>e.name||"",value:null!==I&&void 0!==I?I:null,size:"small",onChange:(e,t)=>R(t),renderOption:(e,t)=>(0,l.createElement)("li",{...e,key:t.retailer_id},(0,f.jsx)(d.A,{sx:{fontSize:"13px",color:"var(--bs-nav)"},children:t.name})),renderInput:e=>(0,f.jsx)(c.A,{...e,label:"Select Retailer",InputLabelProps:{sx:{"&.MuiInputLabel-root:not(.MuiInputLabel-shrink)":{top:"-3px"}}},sx:{"& label.Mui-focused":{color:"var(--bs-nav)"},"& .MuiInputBase-root":{backgroundColor:"#fff"},"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"var(--bs-primary1)"},"&.Mui-focused fieldset":{borderColor:"var(--bs-primary1)"}}}})})]}),(0,f.jsxs)("div",{className:"form-group col-md-12",children:[(0,f.jsx)("button",{type:"button",className:"btn btn-primary mr-3",onClick:()=>{C(1),M((e=>!e))},children:"Search"}),(0,f.jsx)("button",{type:"button",className:"btn btn-light",onClick:()=>{F({response:"",start_date:"",end_date:"",txn_id:"",service_name:""}),R(null),M((e=>!e)),z(10),C(1)},children:"Reset"})]})]})})})}),(0,f.jsx)("div",{className:"card mt-4",style:{overflow:"auto"},children:(0,f.jsxs)("div",{className:"card-body",children:[(0,f.jsxs)("div",{id:"myTable_wrapper",className:"dataTables_wrapper no-footer",children:[(0,f.jsx)("div",{className:"d-flex  justify-content-end align-items-center",children:(0,f.jsx)("div",{className:"dataTables_length mb-3",id:"myTable_length",children:(0,f.jsx)(b.A,{className:"btn btn-success cusxel",onClick:async()=>{try{var e,t,l;a(!0);const o=await(0,s._Am)({...L,retailer_id:(null===I||void 0===I?void 0:I._id)||""});if((null===o||void 0===o||null===(e=o.data)||void 0===e||null===(t=e.data)||void 0===t||null===(l=t.bbpsAllTxns)||void 0===l?void 0:l.length)>0){var n,i;const e=null===o||void 0===o||null===(n=o.data)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.bbpsAllTxns.map(((e,t)=>({"Sr. No":t+1,"Date / Time":(null===e||void 0===e?void 0:e.createdAt)||"","Transaction ID":(null===e||void 0===e?void 0:e.txn_id)||"","Operator Name":(null===e||void 0===e?void 0:e.operator_name)||"",Amount:(null===e||void 0===e?void 0:e.amount)||"",Status:2===(null===e||void 0===e?void 0:e.status)?"Success":1===(null===e||void 0===e?void 0:e.status)?"Pending":3===(null===e||void 0===e?void 0:e.status)?"Failed":4===(null===e||void 0===e?void 0:e.status)?"Refund":"Unknown","CA Number":(null===e||void 0===e?void 0:e.ca_num)||"","Opening Balance":(null===e||void 0===e?void 0:e.open_bal)||"","Closing Balance":(null===e||void 0===e?void 0:e.close_bal)||"","Ref ID":(null===e||void 0===e?void 0:e.refId)||"","Biller Id ID":(null===e||void 0===e?void 0:e.biller_id)||"",Charges:(null===e||void 0===e?void 0:e.charges)||"","Service Name":(null===e||void 0===e?void 0:e.service_name)||"","Created By Name":(null===e||void 0===e?void 0:e.CreatedBy_name)||"","Created By Mobile":(null===e||void 0===e?void 0:e.CreatedBy_mobile)||"","Created By Refer ID":(null===e||void 0===e?void 0:e.CreatedBy_refer_id)||"","Retailer Name":(null===e||void 0===e?void 0:e.retailer_name)||"","Retailer Mobile":(null===e||void 0===e?void 0:e.retailer_mobile)||"","Retailer Refer ID":(null===e||void 0===e?void 0:e.retailer_refer_id)||"","Status Update Time":(null===e||void 0===e?void 0:e.status_update_time)||""}))),t=y.Wp.json_to_sheet(e),a=y.Wp.book_new();y.Wp.book_append_sheet(a,t,"BBPS Report"),y._h(a,"BBPS_Report_".concat((new Date).toLocaleDateString(),".xlsx"))}else r.Ay.error("No data available to export!")}catch(o){r.Ay.error("Failed to download Excel. Please try again.")}finally{a(!1)}},children:"Download Excel sheet"})})}),(0,f.jsx)("div",{className:"table-responsive",children:(0,f.jsxs)("table",{className:"table table-striped table-bordered table-hover display dataTable no-footer dtr-inline collapsed",role:"grid","aria-describedby":"myTable_info",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{role:"row",children:[(0,f.jsx)("th",{className:"",children:"S.No"}),(0,f.jsx)("th",{className:"",children:"Txn Date"}),(0,f.jsx)("th",{className:"",children:"Operator Name"}),(0,f.jsx)("th",{className:"",children:"CA Number"}),(0,f.jsx)("th",{className:"",children:"Txn Id"}),(0,f.jsx)("th",{className:"",children:"Service Name "}),(0,f.jsx)("th",{className:"",children:"Opening Balance"}),(0,f.jsx)("th",{className:"",children:"Amount"}),(0,f.jsx)("th",{className:"",children:"Closing Balance"}),(0,f.jsx)("th",{className:"",children:"Txn Status"}),(0,f.jsx)("th",{className:"",children:"Retailer Name"}),(0,f.jsx)("th",{className:"",children:"Retailer Code"}),(0,f.jsx)("th",{className:"",children:"Retailer Number"}),(0,f.jsx)("th",{className:"",children:"Status Update At"}),(0,f.jsx)("th",{className:"",children:"Enquiry"}),(0,f.jsx)("th",{className:"",children:"Invoice"})]})}),(0,f.jsxs)("tbody",{children:[null===P||void 0===P?void 0:P.map(((e,l)=>(0,f.jsxs)("tr",{className:"odd",children:[(0,f.jsx)("td",{valign:"top",className:"dataTables_empty",children:l+1+(S-1)*E}),(0,f.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.createdAt}),(0,f.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.operator_name}),(0,f.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.ca_num}),(0,f.jsx)("td",{valign:"top",className:"dataTables_empty",children:(null===e||void 0===e?void 0:e.txn_id)||"---"}),(0,f.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.service_name}),(0,f.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.open_bal}),(0,f.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.amount}),(0,f.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.close_bal}),(0,f.jsxs)("td",{valign:"top",className:"dataTables_empty",children:[1==(null===e||void 0===e?void 0:e.status)?(0,f.jsx)("button",{className:"btn btn-warning",style:{width:"130px"},children:"Pending"}):"",2==(null===e||void 0===e?void 0:e.status)?(0,f.jsx)("button",{className:"btn btn-success",style:{width:"130px"},children:"Success"}):"",3==(null===e||void 0===e?void 0:e.status)?(0,f.jsx)("button",{className:"btn btn-danger",style:{width:"130px"},children:"Failed"}):"",4==(null===e||void 0===e?void 0:e.status)?(0,f.jsx)("button",{className:"btn btn-light",style:{width:"130px"},children:"Refunded"}):"",5==(null===e||void 0===e?void 0:e.status)?(0,f.jsx)("button",{className:"btn btn-light",style:{width:"130px"},children:"Not Initiated"}):""]}),(0,f.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.retailer_name}),(0,f.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.retailer_refer_id}),(0,f.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.retailer_mobile}),(0,f.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.status_update_time}),(0,f.jsx)("td",{valign:"top",className:"dataTables_empty",children:(0,f.jsx)(b.A,{onClick:()=>(async e=>{a(!0);try{var t;let a=await(0,s.Et2)(e);var l,n;!1===(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error)?(r.Ay.success(null===(l=a.data)||void 0===l?void 0:l.message),M((e=>!e))):r.Ay.error(null===(n=a.data)||void 0===n?void 0:n.message)}catch(i){}finally{a(!1)}})(null===e||void 0===e?void 0:e.txn_id),disabled:t||1!==(null===e||void 0===e?void 0:e.status),children:"Enquiry"})}),(0,f.jsx)("td",{valign:"top",className:"dataTables_empty",children:(0,f.jsx)(g.N_,{className:"btn btn-primary",to:"/bill-invoice/".concat(null===e||void 0===e?void 0:e._id),children:"Invoice"})})]},null===e||void 0===e?void 0:e._id))),0===(null===P||void 0===P?void 0:P.length)&&(0,f.jsx)("td",{style:{textAlign:"center"},colSpan:14,valign:"top",className:"dataTables_empty",children:"No Record Found"})]})]})})]}),(0,f.jsxs)(d.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2,flexWrap:"wrap",gap:2,children:[(0,f.jsxs)(d.A,{display:"flex",alignItems:"center",gap:2,children:[(0,f.jsxs)(u.A,{size:"small",sx:{width:"150px"},children:[(0,f.jsx)(v.A,{children:"Rows per page"}),(0,f.jsx)(p.A,{value:E,onChange:e=>{z(e.target.value),C(1)},label:"Rows per page",sx:{fontSize:"14px","& .MuiOutlinedInput-notchedOutline":{borderColor:"#ccc"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"var(--bs-primary1)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"var(--bs-primary1)"}},children:[5,10,25,50].map((e=>(0,f.jsx)(m.A,{value:e,children:e},e)))})]}),(0,f.jsxs)(h.A,{variant:"body2",sx:{fontSize:"14px",color:"#555"},children:["Total Entries: ",k]})]}),(0,f.jsx)(x.A,{count:q,page:S,onChange:(e,t)=>{C(t)},shape:"rounded",showFirstButton:!0,showLastButton:!0,sx:{"& .MuiPaginationItem-root":{color:"var(--bs-primary1)",borderRadius:"8px"},"& .MuiPaginationItem-root.Mui-selected":{backgroundColor:"var(--bs-primary1)",color:"#fff",fontWeight:"bold","&:hover":{backgroundColor:"var(--bs-primary1)"}}}})]})]})})]})}},39574:(e,t,a)=>{a.d(t,{x:()=>n});var l=a(73216);const n=()=>{const{search:e}=(0,l.zy)(),t=new URLSearchParams(e),a=e=>{if(t.has(e)){const a=t.get(e);return""===a?"":a}return(new Date).toISOString().split("T")[0]};return{startDate:a("start-date"),endDate:a("end-date")}}},94496:(e,t,a)=>{a.d(t,{A:()=>b});var l=a(65043),n=a(58387),r=a(98610),i=a(60463),s=a(34535),o=a(66870),d=a(98206),c=a(6803),u=a(93618),v=a(70579);const p={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},m=(0,i.Dg)(),h=(0,s.Ay)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.variant&&t[a.variant],"inherit"!==a.align&&t["align".concat((0,c.A)(a.align))],a.noWrap&&t.noWrap,a.gutterBottom&&t.gutterBottom,a.paragraph&&t.paragraph]}})((0,o.A)((e=>{var t;let{theme:a}=e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(a.typography).filter((e=>{let[t,a]=e;return"inherit"!==t&&a&&"object"===typeof a})).map((e=>{let[t,a]=e;return{props:{variant:t},style:a}})),...Object.entries(a.palette).filter((e=>{let[,t]=e;return t&&t.main})).map((e=>{let[t]=e;return{props:{color:t},style:{color:(a.vars||a).palette[t].main}}})),...Object.entries((null===(t=a.palette)||void 0===t?void 0:t.text)||{}).filter((e=>{let[,t]=e;return"string"===typeof t})).map((e=>{let[t]=e;return{props:{color:"text".concat((0,c.A)(t))},style:{color:(a.vars||a).palette.text[t]}}})),{props:e=>{let{ownerState:t}=e;return"inherit"!==t.align},style:{textAlign:"var(--Typography-textAlign)"}},{props:e=>{let{ownerState:t}=e;return t.noWrap},style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:e=>{let{ownerState:t}=e;return t.gutterBottom},style:{marginBottom:"0.35em"}},{props:e=>{let{ownerState:t}=e;return t.paragraph},style:{marginBottom:16}}]}}))),x={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},b=l.forwardRef((function(e,t){const{color:a,...l}=(0,d.b)({props:e,name:"MuiTypography"}),i=m({...l,...!p[a]&&{color:a}}),{align:s="inherit",className:o,component:b,gutterBottom:g=!1,noWrap:y=!1,paragraph:j=!1,variant:f="body1",variantMapping:N=x,..._}=i,A={...i,align:s,color:a,className:o,component:b,gutterBottom:g,noWrap:y,paragraph:j,variant:f,variantMapping:N},w=b||(j?"p":N[f]||x[f])||"span",S=(e=>{const{align:t,gutterBottom:a,noWrap:l,paragraph:n,variant:i,classes:s}=e,o={root:["root",i,"inherit"!==e.align&&"align".concat((0,c.A)(t)),a&&"gutterBottom",l&&"noWrap",n&&"paragraph"]};return(0,r.A)(o,u.y,s)})(A);return(0,v.jsx)(h,{as:w,ref:t,className:(0,n.A)(S.root,o),..._,ownerState:A,style:{..."inherit"!==s&&{"--Typography-textAlign":s},..._.style}})}))},93618:(e,t,a)=>{a.d(t,{A:()=>i,y:()=>r});var l=a(92532),n=a(72372);function r(e){return(0,n.Ay)("MuiTypography",e)}const i=(0,l.A)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"])},14140:(e,t,a)=>{a.d(t,{Am:()=>i,Ay:()=>o});var l=a(65043),n=a(70579);const r=["as","disabled"];function i(e){let{tagName:t,disabled:a,href:l,target:n,rel:r,role:i,onClick:s,tabIndex:o=0,type:d}=e;t||(t=null!=l||null!=n||null!=r?"a":"button");const c={tagName:t};if("button"===t)return[{type:d||"button",disabled:a},c];const u=e=>{(a||"a"===t&&function(e){return!e||"#"===e.trim()}(l))&&e.preventDefault(),a?e.stopPropagation():null==s||s(e)};return"a"===t&&(l||(l="#"),a&&(l=void 0)),[{role:null!=i?i:"button",disabled:void 0,tabIndex:a?void 0:o,href:l,target:"a"===t?n:void 0,"aria-disabled":a||void 0,rel:"a"===t?r:void 0,onClick:u,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),u(e))}},c]}const s=l.forwardRef(((e,t)=>{let{as:a,disabled:l}=e,s=function(e,t){if(null==e)return{};var a,l,n={},r=Object.keys(e);for(l=0;l<r.length;l++)a=r[l],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,r);const[o,{tagName:d}]=i(Object.assign({tagName:a,disabled:l},s));return(0,n.jsx)(d,Object.assign({},s,o,{ref:t}))}));s.displayName="Button";const o=s},14282:(e,t,a)=>{a.d(t,{A:()=>c});var l=a(98139),n=a.n(l),r=a(65043),i=a(14140),s=a(67852),o=a(70579);const d=r.forwardRef(((e,t)=>{let{as:a,bsPrefix:l,variant:r="primary",size:d,active:c=!1,disabled:u=!1,className:v,...p}=e;const m=(0,s.oU)(l,"btn"),[h,{tagName:x}]=(0,i.Am)({tagName:a,disabled:u,...p}),b=x;return(0,o.jsx)(b,{...h,...p,ref:t,disabled:u,className:n()(v,m,c&&"active",r&&"".concat(m,"-").concat(r),d&&"".concat(m,"-").concat(d),p.href&&u&&"disabled")})}));d.displayName="Button";const c=d},67852:(e,t,a)=>{a.d(t,{Jm:()=>u,Wz:()=>v,gy:()=>c,oU:()=>d});var l=a(65043);a(70579);const n=["xxl","xl","lg","md","sm","xs"],r="xs",i=l.createContext({prefixes:{},breakpoints:n,minBreakpoint:r}),{Consumer:s,Provider:o}=i;function d(e,t){const{prefixes:a}=(0,l.useContext)(i);return e||a[t]||t}function c(){const{breakpoints:e}=(0,l.useContext)(i);return e}function u(){const{minBreakpoint:e}=(0,l.useContext)(i);return e}function v(){const{dir:e}=(0,l.useContext)(i);return"rtl"===e}}}]);
//# sourceMappingURL=978.6720f082.chunk.js.map