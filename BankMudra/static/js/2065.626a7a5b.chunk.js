(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[2065],{2629:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var r=t(65043),n=t(73575),l=t(91036),s=t(73216),o=t(55953),d=(t(53816),t(94414)),i=t(70579);const c=function(){const[e,a]=(0,r.useState)(!1),[t,c]=(0,r.useState)(),[m,u]=(0,r.useState)(),h=(0,s.Zp)(),[p,x]=(0,r.useState)(null),[f,v]=(0,r.useState)(null),[b,j]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),[k,N]=(0,r.useState)(!1),[_,F]=(0,r.useState)(!1),[S,C]=(0,r.useState)(!1),[R,I]=(0,r.useState)(!1),[T,w]=(0,r.useState)(!1),[D,E]=(0,r.useState)(!1),[A,U]=(0,r.useState)(!1),[P,O]=(0,r.useState)(125),[q,B]=(0,r.useState)(""),[G,L]=(0,r.useState)(""),[W,z]=(0,r.useState)(null),[H,M]=(0,r.useState)({user_id:"",paymentDate:"",bankRef:"",amount:"",bank:"",method:"",account_number:"",receipt_img:"",remark:"",transferTo:""});console.log(H);const{paymentDate:J,bankRef:K,amount:Q,bank:V,method:Y}=H,Z=e=>{const a={...H},t=e.target.value,r=e.target.name;if("remark"===r&&t.length>P)B("Cannot type more than ".concat(P," characters"));else if(B(""),"amount"===r&&(parseFloat(t)<100?L("Amount must be at least 100"):L("")),a[r]=t,"bank"!==r)M(a);else{const e=p.find((e=>(null===e||void 0===e?void 0:e.bank_name)===t)),r=null===e||void 0===e?void 0:e.bank_account_number,n={...a,account_number:r};M(n)}},[X,$]=(0,r.useState)({transferTo:""}),ee=new FormData;return(0,r.useEffect)((()=>{(async()=>{try{var e;const a=await(0,n.qHw)();x(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.data)}catch(a){}})(),(async()=>{try{var e,a,t,r,l,s;const o=await(0,n.aQK)();"65e2f15785bfd78f9866c090"==o.data.data.user_type_id&&j(!0),"65e2f1a585bfd78f9866c09b"==o.data.data.user_type_id&&y(!0),"65f3fb87a6a2a92f979b47eb"!=o.data.data.user_type_id&&"6706853731bad9259704b172"!=(null===(e=o.data.user_type_id)||void 0===e?void 0:e._id)&&"6706856a31bad9259704b173"!=(null===(a=o.data.user_type_id)||void 0===a?void 0:a._id)&&"6706856a31bad9259704b174"!=(null===(t=o.data.user_type_id)||void 0===t?void 0:t._id)||N(!0),"6706853731bad9259704b172"==(null===(r=o.data.user_type_id)||void 0===r?void 0:r._id)&&w(!0),"6706856a31bad9259704b173"==(null===(l=o.data.user_type_id)||void 0===l?void 0:l._id)&&E(!0),"6706856a31bad9259704b174"==(null===(s=o.data.user_type_id)||void 0===s?void 0:s._id)&&U(!0)}catch(o){}})(),(async()=>{try{var e;const a=await(0,n.Dzm)();if(!Array.isArray(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.data))throw new Error("Data is not in the expected format");v(a.data.data)}catch(a){console.error("Error fetching transfer data:",a),z(""),v([])}})(),(()=>{const e={...H,paymentDate:(new Date).toISOString().substr(0,10)};M(e)})()}),[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"PageHeading",children:(0,i.jsx)("h1",{children:"ADD Fund Request"})}),(0,i.jsxs)("div",{className:"ContentArea",children:[(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("div",{className:"card-header"}),(0,i.jsx)("div",{className:"card-body",children:(0,i.jsx)("form",{action:"",method:"post",name:"frmReport",id:"frmReport",children:(0,i.jsxs)("div",{className:"form-row",style:{alignItems:"end"},children:[(0,i.jsxs)("div",{className:"form-group col-md-3",children:[(0,i.jsx)("label",{htmlFor:"ddldb",children:"Select Transfer To"}),(0,i.jsxs)("select",{className:"form-select","aria-label":"Default select example",name:"transferTo",onChange:e=>{const a={...X},t=e.target.value;a[e.target.name]=t,$(a),"Admin"==e.target.value&&(F(!0),C(!1),I(!1)),"distri"==e.target.value&&(C(!0),F(!1),I(!1)),"Super_dis"==e.target.value&&(I(!0),C(!1),F(!1)),"zsm"==e.target.value&&(I(!0),C(!1),F(!1)),"asm"==e.target.value&&(I(!0),C(!1),F(!1)),"rsm"==e.target.value&&(I(!0),C(!1),F(!1))},children:[(0,i.jsx)("option",{selected:!0,children:"Select Transfer"}),W?(0,i.jsx)("option",{disabled:!0,children:W}):f&&f.map((e=>(0,i.jsx)("option",{value:e.value,children:e.title},e.value)))]})]}),_?(0,i.jsxs)(i.Fragment,{children:["overdraft"!==H.method&&(0,i.jsxs)("div",{className:"form-group col-md-3",children:[(0,i.jsxs)("label",{htmlFor:"txtUserId",children:["Payment Date : ",(0,i.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,i.jsx)("input",{className:"form-control datefield",id:"txtFrom",type:"date",placeholder:"Enter Payment Date",name:"paymentDate",value:H.paymentDate,onChange:Z})]}),(0,i.jsxs)("div",{className:"form-group col-md-3",children:[(0,i.jsxs)("label",{htmlFor:"ddldb",children:["Select Method : ",(0,i.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,i.jsxs)("select",{className:"form-select","aria-label":"Default select example",name:"method",onChange:Z,children:[(0,i.jsx)("option",{selected:!0,children:"Select Method"}),(0,i.jsx)("option",{value:"neft",children:"NEFT"}),(0,i.jsx)("option",{value:"rtgs",children:"RTGS"}),(0,i.jsx)("option",{value:"imps",children:"IMPS"}),(0,i.jsx)("option",{value:"cashdeposit",children:"Cash Deposit"}),(0,i.jsx)("option",{value:"overdraft",children:"Overdraft"})]})]}),"overdraft"===H.method?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"form-group col-md-3",children:[(0,i.jsxs)("label",{htmlFor:"txtUserId",children:["Amount : ",(0,i.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,i.jsx)("input",{className:"form-control datefield",id:"txtFrom",type:"number",placeholder:"Enter Amount (min 100)",name:"amount",value:H.amount,onChange:Z})]}),(0,i.jsxs)("div",{className:"form-group col-md-3",children:[(0,i.jsx)("label",{htmlFor:"txtUserId",children:"Remark :"}),(0,i.jsx)("textarea",{className:"form-control",id:"txtFrom",placeholder:"Remark",name:"remark",value:H.remark,onChange:Z})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"form-group col-md-3",children:[(0,i.jsxs)("label",{htmlFor:"txtUserId",children:["Bank Name : ",(0,i.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,i.jsxs)("select",{className:"form-select","aria-label":"Default select example",name:"bank",onChange:Z,children:[(0,i.jsx)("option",{selected:!0,children:"Select Bank"}),p&&p.map((e=>(0,i.jsx)("option",{value:null===e||void 0===e?void 0:e.bank_name,children:null===e||void 0===e?void 0:e.bank_name})))]})]}),(0,i.jsxs)("div",{className:"form-group col-md-3",children:[(0,i.jsxs)("label",{htmlFor:"txtUserId",children:["Account Number : ",(0,i.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,i.jsx)("input",{className:"form-control datefield",id:"txtFrom",type:"number",placeholder:"Enter Account Number",name:"account_number",value:null===H||void 0===H?void 0:H.account_number,onChange:Z})]}),(0,i.jsxs)("div",{className:"form-group col-md-3",children:[(0,i.jsxs)("label",{htmlFor:"txtUserId",children:["Amount : ",(0,i.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,i.jsx)("input",{className:"form-control datefield",id:"txtFrom",type:"number",placeholder:"Enter Amount (min 100)",name:"amount",value:H.amount,onChange:Z})]}),(0,i.jsxs)("div",{className:"form-group col-md-3",children:[(0,i.jsxs)("label",{htmlFor:"txtUserId",children:["Bank Reference No : ",(0,i.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,i.jsx)("input",{className:"form-control datefield",id:"txtFrom",type:"text",placeholder:"Enter Bank Ref No",name:"bankRef",value:H.bankRef,onChange:Z})]}),(0,i.jsxs)("div",{className:"form-group col-md-3",children:[(0,i.jsx)("label",{htmlFor:"txtUserId",children:"Remark :"}),(0,i.jsx)("textarea",{className:"form-control",id:"txtFrom",placeholder:"Remark",name:"remark",value:H.remark,onChange:Z})]}),(0,i.jsxs)("div",{className:"form-group col-md-3",children:[(0,i.jsxs)("label",{htmlFor:"txtUserId",children:["Image : ",(0,i.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,i.jsx)("input",{className:"form-control datefield",id:"txtFrom",name:"receipt_img",type:"file",onChange:async e=>{if(!e.target||!e.target.files||0===e.target.files.length)return console.error("No file selected"),void alert("Please select a file.");const a=e.target.files[0];c(a),ee.append("image",a);if(!a.type||!["image/jpeg","image/png","image/gif"].includes(a.type))return console.error("Invalid file type",a.type),void alert("Warning: Only JPEG, PNG, and GIF image files are allowed.");try{var t,r;await new Promise((e=>setTimeout(e,1e3)));const e=await(0,n.zGb)(ee);if(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(r=t.data)||void 0===r||!r.url)throw new Error("Image URL not received from the server");u(e.data.data.url),c(e.data.data.url)}catch(l){console.error("Error uploading image:",l),alert("Error uploading image. Please try again."),u(null),c(null)}}})]}),(0,i.jsx)("div",{className:"form-group col-md-3",children:m&&(0,i.jsx)(o.A,{thumbnail:"".concat(d.cu).concat(m),image:"".concat(d.cu).concat(m)})})]})]}):"",S?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"form-group col-md-3",children:[(0,i.jsxs)("label",{htmlFor:"txtUserId",children:["Amount : ",(0,i.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,i.jsx)("input",{className:"form-control datefield",id:"txtFrom",type:"number",placeholder:"Enter Amount (min 100)",name:"amount",value:H.amount,onChange:Z})]}),(0,i.jsxs)("div",{className:"form-group col-md-3",children:[(0,i.jsx)("label",{htmlFor:"txtUserId",children:"Remark :"}),(0,i.jsx)("textarea",{className:"form-control",id:"txtFrom",placeholder:"Remark",name:"remark",value:H.remark,onChange:Z})]})]}):"",R||T||A?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"form-group col-md-3",children:[(0,i.jsxs)("label",{htmlFor:"txtUserId",children:["Amount : ",(0,i.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,i.jsx)("input",{className:"form-control datefield",id:"txtFrom",type:"number",placeholder:"Enter Amount (min 100)",name:"amount",value:H.amount,onChange:Z})]}),(0,i.jsxs)("div",{className:"form-group col-md-3",children:[(0,i.jsx)("label",{htmlFor:"txtUserId",children:"Remark :"}),(0,i.jsx)("textarea",{className:"form-control",id:"txtFrom",placeholder:"Remark",name:"remark",value:H.remark,onChange:Z})]})]}):"",(0,i.jsxs)("div",{className:"form-group col-md-12 text-align-center",children:[(0,i.jsx)("label",{children:"\xa0"}),(0,i.jsxs)("button",{type:"button",disabled:e||!X.transferTo||("overdraft"===H.method?!H.amount||!H.remark:_&&(!H.remark||!H.paymentDate||!H.method||!H.bank||!H.account_number||!H.amount||!H.bankRef||!m)||S&&(!H.remark||!H.amount)||R&&(!H.remark||!H.amount||parseFloat(H.amount)<100)),className:"btn ".concat(!e&&X.transferTo&&("overdraft"===H.method?H.amount&&H.remark:(!_||H.remark&&H.paymentDate&&H.method&&H.bank&&H.account_number&&H.amount&&H.bankRef&&m)&&(!S||H.remark&&H.amount)&&(!R||H.remark&&H.amount&&!(parseFloat(H.amount)<100)))?"btn-primary":"commonbotton_disable"),onClick:async()=>{a(!0);const e={...H,receipt_img:t,transferTo:X.transferTo,user_id:window.localStorage.getItem("userIdToken"),remark:H.remark};try{var r;const t=await(0,n.t7C)(e);var s;if("200"==(null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.statusCode))o=null===t||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message,l.oR.success("".concat(o),{position:"top-center",autoClose:2e3}),setTimeout((()=>{h(_?"/payment-request-to-company":"/payment-request-to-distributor")}),100);a(!1)}catch(d){a(!1)}var o},children:["Submit",e&&(0,i.jsx)("div",{style:{height:"16px",width:"16px"},className:"spinner-border",role:"status",children:(0,i.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]}),G&&(0,i.jsx)("div",{className:"error-message",children:G})]}),(0,i.jsxs)("div",{className:"row d-flex justify-content-center",children:["  ",q&&(0,i.jsx)("span",{style:{color:"red"},children:q})," "]})]})})})]}),(0,i.jsx)(ToastContainer,{})]})]})}},41497:(e,a,t)=>{"use strict";var r=t(13218);function n(){}function l(){}l.resetWarningCache=n,e.exports=function(){function e(e,a,t,n,l,s){if(s!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function a(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:a,element:e,elementType:e,instanceOf:a,node:e,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:l,resetWarningCache:n};return t.PropTypes=t,t}},65173:(e,a,t)=>{e.exports=t(41497)()},13218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},53816:()=>{}}]);
//# sourceMappingURL=2065.626a7a5b.chunk.js.map