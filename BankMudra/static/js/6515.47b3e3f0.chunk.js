"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[6515,523],{13847:(e,a,i)=>{i.d(a,{e:()=>n});var r=i(65043),t=i(44332);const n=e=>{let{wadhValue:a}=e;const[i,n]=(0,r.useState)(null),[o,l]=(0,r.useState)(!1);return{fingerprintData:i,loading:o,captureFingerprint:async e=>{l(!0);try{const i=null===t.R||void 0===t.R?void 0:t.R.find((a=>a.name.toLowerCase()===e.toLowerCase()));if(!i)throw new Error("Device config not found");const r=(e=>{const a=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("Resp")[0],i=null===a||void 0===a?void 0:a.getAttribute("errCode"),r=null===a||void 0===a?void 0:a.getAttribute("errInfo"),t=null===a||void 0===a?void 0:a.getAttribute("qScore");if("0"!==i)throw new Error(r||"Unknown capture error");return{status:"Captured",captureSuccess:!0,errCode:i,qScore:t,pidData:e}})((await(async(e,i,r)=>{for(let n of e)for(let e of i)try{const i="".concat(n,":").concat(e).concat(r),t=await fetch(i,{method:"CAPTURE",headers:{"Content-Type":"text/xml"},body:"<?xml version='1.0'?><PidOptions ver='1.0'><Opts fCount='1' fType='2' iCount='0' pCount='0' format='0' pidVer='2.0' timeout='10000' posh='UNKNOWN' env='P' wadh=\"".concat(a,'" /><CustOpts></CustOpts></PidOptions>')});if(t.ok)return{success:!0,data:await t.text(),url:i}}catch(t){continue}throw new Error("No available host/port for fingerprint capture.")})(i.hosts,i.ports,i.path)).data);return n(r),r}catch(i){throw i}finally{l(!1)}}}}},90523:(e,a,i)=>{i.r(a),i.d(a,{default:()=>l,useBankTransfer:()=>o});var r=i(65043),t=i(70579);const n=(0,r.createContext)(),o=()=>(0,r.useContext)(n),l=e=>{let{walletCall:a,children:i}=e;const[o,l]=(0,r.useState)(),[s,d]=(0,r.useState)(""),[c,u]=(0,r.useState)(!1),[m,v]=(0,r.useState)(""),[p,h]=(0,r.useState)({}),[b,x]=(0,r.useState)([]),[y,g]=(0,r.useState)("money-transfer"),[j,f]=(0,r.useState)("");return(0,t.jsx)(n.Provider,{value:{walletCall:a,invoiceId:j,setInvoiceId:f,setWadhValue:d,wadhValue:s,globalLoader:c,setGlobalLoader:u,mobile:m,setMobile:v,currentPage:y,setCurrentPage:g,setCustomer:h,customer:p,selectedBank:o,setSelectedBank:l,allBank:b,setAllBank:x},children:i})}},56515:(e,a,i)=>{i.r(a),i.d(a,{default:()=>ce});var r=i(65043),t=i(67784),n=i(94516),o=i(11906),l=i(90035),s=i(26600),d=i(94496),c=i(35316),u=i(29347),m=i(68903),v=i(17392),p=i(81045),h=i(81637),b=i(39336),x=i(12110),y=i(26494),g=i(57972),j=i(74605),f=i(14256),A=i(36591),C=i(2828),k=i(27108),S=i(95870),_=i(66360),w=i(68641),N=i(51387),T=i(44533),I=i(27149),P=i(34960),W=i(1281),B=i(73575),D=i(98606),M=i(73216),z=i(90523),O=(i(91036),i(54358)),E=i(8751),F=i(63516),L=i(80899),V=i(72777),q=(i(17205),i(37912),i(33262)),R=i(45531),Y=i(60648),$=(i(56573),i(6577),i(4137),i(58207),i(10146),i(44332),i(13847)),G=i(93141),K=i(90074),U=i.n(K),H=i(6901),Z=i(70579);const J=e=>/^[6-9]\d{9}$/.test(e),X=e=>(0,Z.jsx)(t.A,{variant:"outlined",size:"small",InputLabelProps:{shrink:!0},sx:{"& label.Mui-focused":{color:"var(--bs-primary2)"},"& .MuiOutlinedInput-root":{height:40,"& .MuiOutlinedInput-input":{py:0},"&:hover fieldset":{borderColor:"var(--bs-primary1)"},"&.Mui-focused fieldset":{borderColor:"var(--bs-primary1)"}}},...e}),Q=e=>(0,Z.jsx)(t.A,{variant:"outlined",size:"small",InputLabelProps:{shrink:!0},className:"send-moeny-input",InputProps:{sx:{"&::placeholder":{fontSize:"8px"}}},sx:{"& .MuiOutlinedInput-root":{height:40,"& .MuiOutlinedInput-input":{py:0},"&:hover fieldset":{borderColor:"var(--bs-primary1)"},"&.Mui-focused fieldset":{borderColor:"var(--bs-primary1)"}}},...e}),ee=e=>(0,Z.jsx)(t.A,{variant:"outlined",InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{height:44,"& .MuiOutlinedInput-input":{py:0},"&:hover fieldset":{borderColor:"var(--bs-primary1)"},"&.Mui-focused fieldset":{borderColor:"var(--bs-primary1)"}}},...e}),ae=e=>{let{children:a}=e;return(0,Z.jsx)(n.A,{sx:{width:"100%",mx:"auto",my:1,px:3,py:4,pb:6,backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)",borderRadius:1,boxShadow:"none","& .MuiTextField-root":{"& .MuiInputLabel-root":{color:"var(--bs-primary2)"},"& .MuiOutlinedInput-input":{color:"var(--bs-primary2) !important"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"var(--bs-primary2)"},"&:hover fieldset":{borderColor:"var(--bs-primary2)"},"&.Mui-focused fieldset":{borderColor:"var(--bs-primary2)"}}}},children:a})},ie=e=>{let{otpResponse:a,setOtpResponse:i,amount:t,transferMode:m,otpSent:v,open:p,onClose:h,recipient:b}=e;const{setInvoiceId:x,setCurrentPage:y,walletCall:g,setGlobalLoader:j,customer:f,selectedBank:A,allBank:C}=(0,z.useBankTransfer)(),[k,S]=((0,M.Zp)(),(0,r.useState)("")),[_,w]=(0,r.useState)(""),[N,T]=(0,r.useState)(""),[I,P]=(0,r.useState)(!1),[W,D]=(0,r.useState)(""),[F,L]=(0,r.useState)(""),[V,q]=(0,r.useState)(!1),[R,Y]=(0,r.useState)(!1),$=(null===f||void 0===f||f.total_limit,null===f||void 0===f||f.used_limit,C.find((e=>(null===e||void 0===e?void 0:e._id)===A))),G=(null===$||void 0===$?void 0:$.name)||"",K=()=>{const e=(a=_)?/^\d{6}$/.test(a)?"":"OTP must be 6 digits":"OTP is required";var a;T(e),e||P(!0)},U=(0,E.A)((async(e,r)=>{const n=(o=W)?/^\d{4}$/.test(o)?"":"PIN must be 4 digits":"PIN is required";var o;if(L(n),!n){Y(!0);let n={recipient_id:b.recipient_id,amount:t,customer_mobile:b.recipient_mobile,channel:m,beneficiary_name:(null===b||void 0===b?void 0:b.bank_account_name)||(null===b||void 0===b?void 0:b.recipient_name),bank_name:b.bank,ifsc_code:b.ifsc,account_number:b.account,customer_name:null===f||void 0===f?void 0:f.name,api_id:A,user_id:window.localStorage.getItem("userIdToken"),latlong:"".concat(e,",").concat(r),tpin:W};"bank1"===G&&(n.otp=_,n.value=a);try{var l,s,d,c,u,p;const e=await(0,B.Nk1)(n);var j,C,k;if((0,O.A)(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.error,null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message),"200"===(null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.statusCode)||"127"===(null===e||void 0===e||null===(c=e.data)||void 0===c?void 0:c.statusCode))x(null===e||void 0===e||null===(j=e.data)||void 0===j||null===(C=j.data)||void 0===C||null===(k=C[0])||void 0===k?void 0:k.batchId),y("invoice"),g();"400"===(null===e||void 0===e||null===(u=e.data)||void 0===u?void 0:u.statusCode)&&setTimeout((()=>{h()}),400),"405"===(null===e||void 0===e||null===(p=e.data)||void 0===p?void 0:p.statusCode)&&(h(),i(""),P(!1),v(!1)),setTimeout((()=>{D("")}),500)}catch(S){}finally{Y(!1)}}}));return(0,Z.jsxs)(l.A,{open:p,maxWidth:"sm",fullWidth:!0,onClose:()=>{},disableEscapeKeyDown:!0,disableBackdropClick:!0,PaperProps:{onClick:e=>e.stopPropagation()},children:[(0,Z.jsx)(s.A,{align:"center",sx:{fontWeight:"bold",color:"var(--bs-primary2)"},children:"Send Money"}),(0,Z.jsxs)(d.A,{align:"center",color:"var(--bs-primary1)",fontWeight:"bold",mt:-2,children:[v&&!I&&"Please enter your otp",v&&I&&"Please enter your Tpin"]}),(0,Z.jsx)(c.A,{children:(0,Z.jsx)(n.A,{mt:2,children:(()=>{const e="bank1"===G&&v&&!I,a="bank1"===G&&I||"bank2"===G&&v;return(0,Z.jsxs)(Z.Fragment,{children:[e&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(X,{fullWidth:!0,label:"Enter OTP",placeholder:"Enter 6 Digit Otp",value:_,onChange:e=>{const a=e.target.value;/^\d{0,6}$/.test(a)&&w(a)},inputProps:{maxLength:6},error:!!N,helperText:N,size:"small",className:"mt-3"}),(0,Z.jsx)(o.A,{fullWidth:!0,variant:"contained",onClick:K,sx:{mt:2,borderColor:"var(--bs-primary1)",backgroundColor:"var(--bs-primary1)",color:"white"},disabled:!_||6!=_.length,children:"Submit OTP"})]}),a&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(X,{fullWidth:!0,label:"4-digit PIN",type:"password",value:W,onChange:e=>{const a=e.target.value;/^\d{0,4}$/.test(a)&&D(a)},inputProps:{maxLength:4},error:!!F,helperText:F,size:"small",className:"mt-3"}),(0,Z.jsx)(o.A,{fullWidth:!0,variant:"contained",onClick:U,sx:{mt:2,borderColor:"var(--bs-primary1)",backgroundColor:"var(--bs-primary1)",color:"white"},disabled:4!=W.length||R,children:R?"Sending...":"Send Money"})]})]})})()})}),(0,Z.jsx)(u.A,{sx:{justifyContent:"end",pb:2,pr:4},children:(0,Z.jsx)(o.A,{variant:"outlined",color:"var(--bs-primary2)",onClick:h,children:"Cancel"})})]})},re=()=>{var e;const{setGlobalLoader:a,selectedBank:i,customer:t,setCurrentPage:l,allBank:s}=(0,z.useBankTransfer)(),c=s.find((e=>(null===e||void 0===e?void 0:e._id)===i)),u=(null===c||void 0===c?void 0:c.name)||"",A=null===t||void 0===t?void 0:t.total_limit,C=null===t||void 0===t?void 0:t.used_limit,k=A-C,S=C/A*100,[_,D]=(0,r.useState)([]),[M,F]=(0,r.useState)(!1),[L,V]=(0,r.useState)(!1),[q,R]=(0,r.useState)(null),[Y,$]=(0,r.useState)({}),[G,K]=(0,r.useState)({}),[U,H]=(0,r.useState)({}),[J,X]=(0,r.useState)(!1),[ee,re]=(0,r.useState)("1"),[te,ne]=(0,r.useState)(""),[oe,le]=(0,r.useState)(""),se=()=>"bank1"===u?k>5e3?5e3:k:"bank2"===u?25e3:k,de=()=>"bank1"===u?100:"bank2"===u?1e4:0,ce=(e,a)=>{const i=(e=>{const a=Number(e),i=de(),r=se();return e?isNaN(a)?"Amount must be a number":a<i?"Min: \u20b9".concat(i):a>r?"Max: \u20b9".concat(r):a>k?"Only \u20b9".concat(k," available"):"":"Amount is required"})(a);$((i=>({...i,[e]:a}))),K((a=>({...a,[e]:i})))};(0,r.useEffect)((()=>{(async()=>{var e;let a={mobile:null===t||void 0===t?void 0:t.mobile,api_id:i},r=await(0,B.Cyg)(a);D((null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.data)||[])})()}),[M]);const ue=(0,E.A)((async(e,r,n,o,l)=>{console.log(n,"re"),a(!0);let s={recipient_id:n.recipient_id,amount:o,customer_mobile:n.recipient_mobile,channel:l,beneficiary_name:(null===n||void 0===n?void 0:n.bank_account_name)||(null===n||void 0===n?void 0:n.recipient_name),bank_name:n.bank,ifsc_code:n.ifsc,account_number:n.account,customer_name:null===t||void 0===t?void 0:t.name,api_id:i,user_id:window.localStorage.getItem("userIdToken"),latlong:"".concat(e,",").concat(r)};try{var d,c,u;let e=await(0,B.Ph1)(s);var m,v;if(!1===(null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.error))X(!0),V(!0),ne(null===e||void 0===e||null===(m=e.data)||void 0===m||null===(v=m.data)||void 0===v?void 0:v.value);(0,O.A)(null===e||void 0===e||null===(c=e.data)||void 0===c?void 0:c.error,null===e||void 0===e||null===(u=e.data)||void 0===u?void 0:u.message)}catch(p){}finally{a(!1)}}));return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(ae,{children:[(0,Z.jsxs)(m.Ay,{container:!0,alignItems:"center",justifyContent:"space-between",pr:4,children:[(0,Z.jsx)(m.Ay,{item:!0,children:(0,Z.jsxs)(n.A,{display:"flex",alignItems:"center",gap:2,children:[(0,Z.jsx)(v.A,{onClick:()=>l("money-transfer"),children:(0,Z.jsx)(w.A,{})}),(0,Z.jsx)(p.A,{sx:{width:40,height:40},children:null===t||void 0===t||null===(e=t.name)||void 0===e?void 0:e.substring(0,1)}),(0,Z.jsx)(n.A,{children:(0,Z.jsxs)(d.A,{variant:"body2",fontWeight:"bold",fontSize:16,color:"var(--bs-primary2)",children:["Customer Name :",(0,Z.jsx)(d.A,{component:"body2",color:"var(--bs-primary2)",sx:{opacity:.8,ml:1},children:null===t||void 0===t?void 0:t.name})]})})]})}),"bank2"===u?(0,Z.jsx)(Z.Fragment,{children:null}):(0,Z.jsx)(m.Ay,{item:!0,children:(0,Z.jsxs)(n.A,{display:"flex",alignItems:"center",gap:2,children:[(0,Z.jsxs)(n.A,{position:"relative",display:"inline-flex",children:[(0,Z.jsx)(h.A,{variant:"determinate",size:96}),(0,Z.jsx)(h.A,{variant:"determinate",value:S,size:96,thickness:2,sx:{color:"var(--bs-primary2)",position:"absolute",left:0}}),(0,Z.jsxs)(n.A,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",children:[(0,Z.jsxs)(d.A,{variant:"caption",color:"var(--bs-primary2)",fontWeight:"bold",children:["\u20b9",C]}),(0,Z.jsx)(d.A,{variant:"caption",color:"var(--bs-primary2)",children:"Limit used"})]})]}),(0,Z.jsxs)(n.A,{children:[(0,Z.jsxs)(d.A,{variant:"body2",color:"var(--bs-primary2)",fontSize:16,fontWeight:"bold",children:["Available Transfer Limit:"," ",(0,Z.jsxs)(d.A,{component:"body2",color:"var(--bs-primary2)",sx:{opacity:.8},children:["\u20b9",k]})]}),(0,Z.jsxs)(d.A,{variant:"body2",color:"var(--bs-primary2)",fontSize:16,fontWeight:"bold",children:["Total Transfer Limit:"," ",(0,Z.jsxs)(d.A,{component:"body2",color:"var(--bs-primary2)",sx:{opacity:.8},children:["\u20b9",A]})]})]})]})})]}),(0,Z.jsx)(b.A,{sx:{my:2}}),(0,Z.jsxs)(n.A,{children:[(0,Z.jsx)(n.A,{display:"flex",justifyContent:"flex-end",children:(0,Z.jsx)(o.A,{variant:"contained",color:"var(--bs-primary2)",sx:{height:40,borderColor:"var(--bs-nav)",backgroundColor:"var(--bs-nav)",color:"var(--bs-primary2)"},onClick:()=>l("add-newBeneficiaryPage"),children:"Add New Beneficiary"})}),(0,Z.jsx)(x.A,{sx:{p:0,borderRadius:4,boxShadow:0,backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)"},children:(0,Z.jsxs)(y.A,{children:[(0,Z.jsx)(d.A,{variant:"h6",mb:2,children:"Send Money"}),(null===_||void 0===_?void 0:_.length)>0?null===_||void 0===_?void 0:_.map((e=>(0,Z.jsx)(x.A,{sx:{p:0,mb:2,borderRadius:4,boxShadow:0,backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)"},children:(0,Z.jsxs)(m.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:3,sx:{backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)"},children:(0,Z.jsxs)(n.A,{display:"flex",alignItems:"center",gap:2,children:[(0,Z.jsx)(p.A,{sx:{bgcolor:"transparent"},children:(0,Z.jsx)(T.A,{})}),(0,Z.jsxs)(n.A,{children:[(0,Z.jsx)(d.A,{fontWeight:"bold",fontSize:14,children:e.recipient_name}),(0,Z.jsx)(d.A,{variant:"body2",fontSize:12,children:e.bank}),(0,Z.jsx)(d.A,{variant:"body2",fontSize:12,children:e.ifsc}),(0,Z.jsxs)(d.A,{variant:"body2",fontSize:12,children:["AC: ",e.account]})]})]})}),(0,Z.jsx)(m.Ay,{item:!0,xs:6,sm:4,md:1.5,children:(0,Z.jsxs)(n.A,{display:"flex",alignItems:"center",color:e.isVerified?"green":"gray",children:[e.isVerified?(0,Z.jsx)(I._IM,{style:{fontSize:"14px",fill:"var(--bs-nav)"}}):(0,Z.jsx)(P.oxH,{style:{fontSize:"14px"}}),(0,Z.jsx)(d.A,{ml:.5,fontWeight:"bold",children:e.isVerified?"Verified":"Not Verified"})]})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,md:1.5,children:(0,Z.jsx)(o.A,{variant:"outlined",color:"var(--bs-primary2)",size:"small",disabled:e.isVerified,onClick:()=>(async e=>{const r={name:e.recipient_name,ifsc:e.ifsc,bankAccount:e.account,phone:e.recipient_mobile,recipient_id:e.recipient_id,bank_id:e.bankId,api_id:i,user_id:window.localStorage.getItem("userIdToken")};a(!0);try{var t,n;const e=await(0,B.ege)(r);(0,O.A)(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error,null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message),F((e=>!e))}catch(o){}finally{a(!1)}})(e),sx:{borderColor:"var(--bs-primary1)",fontSize:"12px",color:"var(--bs-primary2)"},children:"Verify"})}),(0,Z.jsx)(m.Ay,{item:!0,xs:6,sm:4,md:2,children:(0,Z.jsx)(Q,{fullWidth:!0,label:"Amount",placeholder:"\u20b9 Min: ".concat(de()," / Max: ").concat(se()),value:Y[e.recipient_id]||"",onChange:a=>ce(e.recipient_id,a.target.value),error:!!G[e.recipient_id],helperText:G[e.recipient_id],size:"small"})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,md:2,children:(0,Z.jsxs)(g.A,{row:!0,name:"transferType-".concat(e.recipient_id),sx:{justifyContent:"center","& .MuiFormControlLabel-label":{fontSize:10}},value:U[e.recipient_id]||"2",onChange:a=>H((i=>({...i,[e.recipient_id]:a.target.value}))),children:[(0,Z.jsx)(j.A,{value:"2",control:(0,Z.jsx)(f.A,{size:"small"}),label:"IMPS"}),(0,Z.jsx)(j.A,{value:"1",control:(0,Z.jsx)(f.A,{size:"small"}),label:"NEFT"})]})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,md:2,children:(0,Z.jsxs)(n.A,{display:"flex",justifyContent:{xs:"flex-start",md:"flex-end"},gap:1,children:[(0,Z.jsx)(o.A,{disabled:!!G[e.recipient_id]||!Y[e.recipient_id],onClick:()=>(e=>{console.log(e);const a=Y[e.recipient_id],i=U[e.recipient_id]||"2";re(i),le(a),"bank1"===u?ue(e,a,i):(X(!0),V(!0)),R(e)})(e),variant:"contained",color:"var(--bs-primary2)",size:"small",sx:{borderColor:"var(--bs-primary1)",fontSize:"12px",backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)"},children:"Send"}),(0,Z.jsx)(W.A,{title:"Delete",description:"Are you sure to Delete ?",onConfirm:()=>(async e=>{let r={customer_mobile:null===t||void 0===t?void 0:t.mobile,recipient_id:null===e||void 0===e?void 0:e.recipient_id,user_id:window.localStorage.getItem("userIdToken"),api_id:i};a(!0);try{var n,o,l;let e=await(0,B.ZWd)(r);200==(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.statusCode)&&F((e=>!e)),(0,O.A)(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.error,null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.message)}catch(s){}finally{a(!1)}})(e),onCancel:()=>{},okText:"Yes",cancelText:"No",okButtonProps:{className:"popoverconfirm",style:{backgroundColor:"var(--bs-primary1)",borderColor:"var(--bs-primary1)"}},children:(0,Z.jsx)(o.A,{variant:"outlined",color:"var(--bs-primary2)",size:"small",children:(0,Z.jsx)(N.A,{sx:{fill:"red"}})})})]})})]})},e.recipient_id))):(0,Z.jsx)(d.A,{variant:"body2",textAlign:"center",children:"No Benefiaries Found"})]})})]})]}),L&&(0,Z.jsx)(ie,{otpResponse:te,transferMode:ee,amount:oe,otpSent:J,setOtpSent:X,open:L,onClose:()=>V(!1),recipient:q})]})},te=()=>{const{walletCall:e,setGlobalLoader:a,customer:i,selectedBank:t,setCurrentPage:p}=(0,z.useBankTransfer)(),[b,x]=(0,r.useState)(!1),[y,g]=(0,r.useState)(!1),[j,f]=(0,r.useState)(""),[A,C]=(0,r.useState)([]),[k,_]=(0,r.useState)(null),[N,T]=(0,r.useState)(!1),[I,P]=(0,r.useState)(),[W,D]=(0,r.useState)(!1),[M,E]=(0,r.useState)(""),F=()=>{P(""),D(!1),E("")},[L,V]=(0,r.useState)({name:"",account_number:"",ifsc:""});(0,r.useEffect)((()=>{(async()=>{try{var e,a;let i=await(0,B.OAj)(t);const r=(null===i||void 0===i||null===(e=i.data)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.map((e=>({...e,label:e.bank_name,value:e.bankID}))))||[];C(r)}catch(i){}})(),(async()=>{try{var e,a;let i=await(0,B.$p4)();f(null===i||void 0===i||null===(e=i.data)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.bankVerificationCharge)}catch(i){}})()}),[]);const q=e=>{const{name:a,value:i}=e.target;V((e=>({...e,[a]:"name"===a?i.replace(/[^a-zA-Z\s]/g,""):i})))},R=L.name&&L.account_number&&L.ifsc&&k;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(ae,{children:[(0,Z.jsxs)(n.A,{display:"flex",alignItems:"center",gap:2,children:[(0,Z.jsx)(v.A,{onClick:()=>i.hasOwnProperty("mobile")?p("send-money-page"):p("money-transfer"),children:(0,Z.jsx)(w.A,{})}),(0,Z.jsx)(d.A,{variant:"body2",color:"var(--bs-nav)",fontWeight:"bold",fontSize:18,children:"Add New Beneficiary"})]}),(0,Z.jsxs)(n.A,{maxWidth:"800px",m:"auto",mt:3,children:[(0,Z.jsxs)(m.Ay,{container:!0,spacing:3,children:[(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,Z.jsx)(X,{fullWidth:!0,label:"Beneficiary Name",name:"name",value:L.name,onChange:q,disabled:N})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,Z.jsx)(S.Ay,{value:k,onChange:e=>{_(e),V((a=>({...a,ifsc:(null===e||void 0===e?void 0:e.ifsc_code)||""})))},options:A,placeholder:"Select Bank",isClearable:!0,isSearchable:!0,menuPortalTarget:document.body,isDisabled:N,styles:{control:(e,a)=>({...e,minHeight:40,borderRadius:4,borderColor:a.isFocused?"var(--bs-primary1)":"#ced4da",boxShadow:a.isFocused?"0 0 0 1px var(--bs-primary1)":"none","&:hover":{borderColor:"var(--bs-primary1)"}}),placeholder:e=>({...e,color:"var(--bs-primary2)",fontSize:14}),singleValue:e=>({...e,color:"var(--bs-primary2)",fontWeight:500,fontSize:14}),menu:e=>({...e,zIndex:20,fontSize:14}),option:(e,a)=>({...e,fontSize:14,fontWeight:a.isSelected?500:400,color:"var(--bs-primary2)",backgroundColor:(a.isSelected||a.isFocused,"white"),"&:hover":{backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)"}}),menuPortal:e=>({...e,zIndex:9999})}})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,Z.jsx)(X,{fullWidth:!0,label:"IFSC Code",name:"ifsc",value:L.ifsc,onChange:q,disabled:N})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,Z.jsx)(X,{fullWidth:!0,label:"Account Number",name:"account_number",value:L.account_number,onChange:q,type:"number",disabled:N})})]}),(0,Z.jsxs)(d.A,{color:"var(--bs-primary2)",sx:{mt:2},fontWeight:500,children:["Account Verification Charge: \u20b9 ",j||0]}),(0,Z.jsxs)(n.A,{sx:{display:"flex",gap:2,mt:2,justifyContent:"space-between"},children:[(0,Z.jsx)(o.A,{variant:"outlined",color:"var(--bs-primary2)",width:"200px",disabled:!R||N,onClick:async()=>{const a={account_number:L.account_number,ifsc:L.ifsc,bank_name:k.bank_name,name:L.name,bankAccount:L.account_number,phone:i.mobile};x(!0);try{var r,t,n;let i=await(0,B.ege)(a);"200"===(null===i||void 0===i||null===(r=i.data)||void 0===r?void 0:r.statusCode)&&(T(!0),V((()=>{var e,a,r,t,n,o;return{name:null===i||void 0===i||null===(e=i.data)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.bank_account_name,ifsc:null===i||void 0===i||null===(r=i.data)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.bank_ifsc,account_number:null===i||void 0===i||null===(n=i.data)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.bank_account_number}})),e()),(0,O.A)(null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.error,null===i||void 0===i||null===(n=i.data)||void 0===n?void 0:n.message)}catch(o){}finally{x(!1)}},sx:{borderColor:"var(--bs-primary1)",color:"var(--bs-primary1)"},children:b?(0,Z.jsx)(h.A,{size:24,color:"var(--bs-primary2)"}):"Account Verification"}),(0,Z.jsx)(o.A,{variant:"outlined",color:"var(--bs-primary2)",width:"200px",sx:{borderColor:"var(--bs-primary1)",color:"var(--bs-primary2)"},disabled:!R,onClick:async()=>{g(!0);const e={recipient_name:L.name,customer_mobile:null===i||void 0===i?void 0:i.mobile,account_number:null===L||void 0===L?void 0:L.account_number,ifsc:(null===L||void 0===L?void 0:L.ifsc)||"",bank_code:(null===k||void 0===k?void 0:k.bankID)||"",bank_id:null===k||void 0===k?void 0:k._id,recipient_mobile:null===i||void 0===i?void 0:i.mobile,isVerified:N,bank_name:(null===k||void 0===k?void 0:k.bank_name)||"",api_id:t,user_id:window.localStorage.getItem("userIdToken")};try{var a,r,n,o;const i=await(0,B.nJO)(e);var l,s;if(201===(null===i||void 0===i||null===(a=i.data)||void 0===a?void 0:a.statusCode))D(!0),E(null===i||void 0===i||null===(l=i.data)||void 0===l||null===(s=l.data)||void 0===s?void 0:s.recipient_id);200===(null===i||void 0===i||null===(r=i.data)||void 0===r?void 0:r.statusCode)&&p("send-money-page"),(0,O.A)(null===i||void 0===i||null===(n=i.data)||void 0===n?void 0:n.error,null===i||void 0===i||null===(o=i.data)||void 0===o?void 0:o.message)}catch(d){}finally{g(!1)}},children:y?(0,Z.jsx)(h.A,{size:24,color:"var(--bs-primary2)"}):"Add Beneficiary"})]})]})]}),(0,Z.jsxs)(l.A,{open:W,onClose:F,maxWidth:"xs",fullWidth:!0,children:[(0,Z.jsx)(s.A,{sx:{color:"var(--bs-primary2)"},children:"OTP Verification"}),(0,Z.jsxs)(c.A,{children:[(0,Z.jsx)(d.A,{mb:2,sx:{color:"var(--bs-primary2)"},children:"Enter the 6-digit code sent to your mobile number."}),(0,Z.jsx)(ee,{fullWidth:!0,label:"Enter OTP",value:I,onChange:e=>{const a=e.target.value.replace(/\D/g,"");(null===a||void 0===a?void 0:a.length)<=6&&P(a)},inputProps:{maxLength:6},autoFocus:!0})]}),(0,Z.jsxs)(u.A,{children:[(0,Z.jsx)(o.A,{onClick:F,children:"Cancel"}),(0,Z.jsx)(o.A,{onClick:async()=>{let e={recipient_id:M,customer_mobile:null===i||void 0===i?void 0:i.mobile,otp:I};a(!0);try{var r,t,n;const a=await(0,B.NmZ)(e);200==(null===a||void 0===a||null===(r=a.data)||void 0===r?void 0:r.statusCode)&&(F(),p("send-money-page")),(0,O.A)(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error,null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.message)}catch(o){}finally{a(!1)}},sx:{borderColor:"var(--bs-primary1)",backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)"},variant:"contained",disabled:(null===I||void 0===I?void 0:I.length)<6,children:"Verify"})]})]})]})},ne=()=>{const{selectedBank:e,setCurrentPage:a,mobile:i}=(0,z.useBankTransfer)(),t=new Date,l=new Date(t.getFullYear()-18,t.getMonth(),t.getDate()).toISOString().split("T")[0],s=new Date(t.getFullYear()-100,t.getMonth(),t.getDate()).toISOString().split("T")[0],[c,u]=(0,r.useState)({firstName:"",lastName:"",customerMobile:i,dob:"",country:"India",pinCode:"",state:"",city:"",district:"",area:"",aadharNumber:""}),p=L.Ik({firstName:L.Yj().required("First Name is required"),lastName:L.Yj().required("Last Name is required"),customerMobile:L.Yj().matches(/^[6-9]\d{9}$/,"Enter a valid 10-digit mobile number").required("Mobile number is required"),dob:L.Yj().required("Date of Birth is required"),pinCode:L.Yj().matches(/^\d{6}$/,"Pincode must be 6 digits").required("Pincode is required"),state:L.Yj().required("State is required"),city:L.Yj().required("City is required"),district:L.Yj().required("District is required"),area:L.Yj().required("Area is required"),aadharNumber:L.Yj().matches(/^\d{12}$/,"Aadhaar must be 12 digits").required("Aadhaar number is required")});return(0,Z.jsxs)(ae,{children:[(0,Z.jsxs)(n.A,{display:"flex",alignItems:"center",gap:2,children:[(0,Z.jsx)(v.A,{onClick:()=>a("money-transfer"),children:(0,Z.jsx)(w.A,{})}),(0,Z.jsx)(d.A,{variant:"body2",color:"var(--bs-primary2)",fontWeight:"bold",fontSize:18,children:"Add New Customer"})]}),(0,Z.jsx)(n.A,{maxWidth:"1000px",m:"auto",children:(0,Z.jsx)(F.l1,{initialValues:c,validationSchema:p,onSubmit:async(r,t)=>{let{setSubmitting:n}=t;await(async r=>{console.log("Submitted values:",r),u(r);let t={user_id:window.localStorage.getItem("userIdToken"),customer_mobile:i,name:r.firstName,dob:r.dob,country:r.country,city:r.city,state:r.state,pincode:r.pinCode,district:r.district,area:r.area,api_id:e,lastName:r.lastName,adhaar_number:r.aadharNumber};try{var n,o,l,s;const e=await(0,B.ffD)(t);200===(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.statusCode)&&a("otp-page"),"008"===(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.statusCode)&&a("otp-page"),(0,O.A)(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.error,null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)}catch(d){}})(r),n(!1)},enableReinitialize:!0,children:e=>{let{errors:a,touched:i,setErrors:r,setFieldValue:t,isSubmitting:d}=e;return(0,Z.jsx)(F.lV,{children:(0,Z.jsx)(n.A,{p:3,children:(0,Z.jsxs)(m.Ay,{container:!0,rowSpacing:6,columnSpacing:6,children:[(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(F.D0,{name:"firstName",as:ee,label:"First Name *",fullWidth:!0,error:i.firstName&&Boolean(a.firstName),helperText:i.firstName&&a.firstName})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(F.D0,{name:"lastName",as:ee,label:"Last Name *",fullWidth:!0,error:i.lastName&&Boolean(a.lastName),helperText:i.lastName&&a.lastName})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(F.D0,{name:"customerMobile",as:ee,label:"Customer Mobile *",fullWidth:!0,disabled:!0})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(F.D0,{name:"dob",as:ee,label:"Date Of Birth *",fullWidth:!0,type:"date",InputLabelProps:{shrink:!0},error:i.dob&&Boolean(a.dob),helperText:i.dob&&a.dob,inputProps:{max:l,min:s}})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(F.D0,{name:"country",as:ee,label:"Country *",fullWidth:!0,disabled:!0})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(F.D0,{name:"pinCode",as:ee,label:"Pin Code *",onChange:e=>{const a=e.target.value.replace(/\D/g,"").slice(0,6);t("pinCode",a),6===a.length&&(async(e,a,i)=>{try{var r;if(!e)return void i({pincode:"Pincode is required"});if(!/^[0-9]{6}$/.test(e))return void i({pincode:"Pincode must be exactly 6 digits"});i({pincode:""});const m=await(0,B.sal)(e);var t,n,o,l,s,d,c,u;null!==m&&void 0!==m&&null!==(r=m.data)&&void 0!==r&&r.error?i({pincode:"Invalid Pincode or not found"}):(a("city",(null===(t=m.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.city)||""),a("state",(null===(o=m.data)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.state)||""),a("district",(null===(s=m.data)||void 0===s||null===(d=s.data)||void 0===d?void 0:d.district)||""),a("area",(null===(c=m.data)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.sub_distance)||""))}catch(m){console.error("Error fetching pincode details:",m),i({pincode:"Something went wrong. Please try again."})}})(a,t,r)},fullWidth:!0,error:i.pinCode&&Boolean(a.pinCode),helperText:i.pinCode&&a.pinCode})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(F.D0,{name:"state",as:ee,label:"State *",fullWidth:!0,error:i.state&&Boolean(a.state),helperText:i.state&&a.state})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(F.D0,{name:"city",as:ee,label:"City *",fullWidth:!0,error:i.city&&Boolean(a.city),helperText:i.city&&a.city})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(F.D0,{name:"district",as:ee,label:"District *",fullWidth:!0,error:i.district&&Boolean(a.district),helperText:i.district&&a.district})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(F.D0,{name:"area",as:ee,label:"Area *",fullWidth:!0,error:i.area&&Boolean(a.area),helperText:i.area&&a.area})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(F.D0,{name:"aadharNumber",as:ee,label:"Aadhaar Number *",fullWidth:!0,error:i.aadharNumber&&Boolean(a.aadharNumber),helperText:i.aadharNumber&&a.aadharNumber})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,children:(0,Z.jsx)(o.A,{type:"submit",variant:"contained",color:"var(--bs-primary2)",sx:{borderColor:"var(--bs-primary1)",backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)"},disabled:d,children:"Submit"})})]})})})}})})]})},oe=()=>{const[e,a]=(0,r.useState)(!0),{walletCall:i,setWadhValue:t,selectedBank:n,mobile:m,setCurrentPage:v}=(0,z.useBankTransfer)(),[p,h]=(0,r.useState)(""),b=()=>{h(""),v("money-transfer"),a(!1)};return(0,Z.jsxs)(l.A,{open:e,onClose:b,maxWidth:"xs",fullWidth:!0,children:[(0,Z.jsx)(s.A,{sx:{color:"var(--bs-primary2)"},children:"OTP Verification"}),(0,Z.jsxs)(c.A,{children:[(0,Z.jsx)(d.A,{mb:2,sx:{color:"var(--bs-primary2)"},children:"Enter the 6-digit code sent to your mobile number."}),(0,Z.jsx)(ee,{fullWidth:!0,label:"Enter OTP",value:p,onChange:e=>{const a=e.target.value.replace(/\D/g,"");a.length<=6&&h(a)},inputProps:{maxLength:6},autoFocus:!0})]}),(0,Z.jsxs)(u.A,{children:[(0,Z.jsx)(o.A,{onClick:b,children:"Cancel"}),(0,Z.jsx)(o.A,{onClick:async()=>{const e={customer_mobile:m,api_id:n,otp:p,user_id:window.localStorage.getItem("userIdToken")};try{var a,i,r,o;const n=await(0,B.LOM)(e);var l,s;if(200===(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.statusCode)&&v("money-transfer"),200===(null===n||void 0===n||null===(i=n.data)||void 0===i?void 0:i.statusCode))v("KYC-page"),t(null===n||void 0===n||null===(l=n.data)||void 0===l||null===(s=l.data)||void 0===s?void 0:s.wadhValue);(0,O.A)(null===n||void 0===n||null===(r=n.data)||void 0===r?void 0:r.error,null===n||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message)}catch(d){}},sx:{borderColor:"var(--bs-primary1)",backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)"},variant:"contained",disabled:p.length<6,children:"Verify"})]})]})},le=()=>{const[e,a]=(0,r.useState)(!0),{setCurrentPage:i}=(0,z.useBankTransfer)(),[t,n]=(0,r.useState)(""),m=()=>{n(""),i("money-transfer"),a(!1)};return(0,Z.jsxs)(l.A,{open:e,onClose:m,maxWidth:"xs",fullWidth:!0,children:[(0,Z.jsx)(s.A,{sx:{color:"var(--bs-primary2)"},children:"Marchant Verification"}),(0,Z.jsxs)(c.A,{children:[(0,Z.jsx)(d.A,{mb:2,sx:{color:"var(--bs-primary2)"},children:"Enter the 6-digit code sent to your mobile number."}),(0,Z.jsx)(ee,{fullWidth:!0,label:"Enter OTP",value:t,onChange:e=>{const a=e.target.value.replace(/\D/g,"");a.length<=6&&n(a)},inputProps:{maxLength:6},autoFocus:!0})]}),(0,Z.jsxs)(u.A,{children:[(0,Z.jsx)(o.A,{onClick:m,children:"Cancel"}),(0,Z.jsx)(o.A,{onClick:async()=>{const e={mobile:window.localStorage.getItem("regisNumber").slice(-10),otp:t};try{var a,r,n;const t=await(0,B.K_R)(e);"200"===(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.statusCode)&&i("money-transfer"),(0,O.A)(null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.error,null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)}catch(o){}},sx:{borderColor:"var(--bs-primary1)",backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)"},variant:"contained",disabled:t.length<6,children:"Verify"})]})]})},se=()=>{const e=[{id:"2",img:q,name:"Mantra"},{id:"3",img:R,name:"Mantra L1"},{id:"4",img:Y,name:"Morpho"}],{walletCall:a,wadhValue:i,selectedBank:t,mobile:l,setCurrentPage:s}=(0,z.useBankTransfer)(),[c,u]=(0,r.useState)(null),{loading:p,captureFingerprint:h}=(0,$.e)({wadhValue:i}),b=e.find((e=>e.id===c)),g=(0,E.A)((async(e,i)=>{if(!b)return alert("Please select a device.");try{var r,n,o,d;const c=(await h(b.name)).pidData+"<bookz/>",u=window.btoa((new XMLSerializer).serializeToString((new DOMParser).parseFromString(c,"application/xml"))),m={customer_mobile:l,latitude:e,longitude:i,biometric_data:u,api_id:t},v=await(0,B.Rc1)(m);"200"!==(null===v||void 0===v||null===(r=v.data)||void 0===r?void 0:r.statusCode)||null!==v&&void 0!==v&&null!==(n=v.data)&&void 0!==n&&n.error||(s("send-money-page"),a()),(0,O.A)(null===v||void 0===v||null===(o=v.data)||void 0===o?void 0:o.error,null===v||void 0===v||null===(d=v.data)||void 0===d?void 0:d.message)}catch(c){alert("Capture failed: "+c.message)}}));return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)(ae,{children:[(0,Z.jsxs)(n.A,{display:"flex",alignItems:"center",gap:2,mb:2,children:[(0,Z.jsx)(v.A,{onClick:()=>s("money-transfer"),children:(0,Z.jsx)(w.A,{})}),(0,Z.jsx)(d.A,{variant:"body2",color:"var(--bs-primary2)",fontWeight:"bold",fontSize:18,children:"Verify KYC"})]}),(0,Z.jsxs)(m.Ay,{container:!0,spacing:2,sx:{p:2},children:[(0,Z.jsx)(m.Ay,{item:!0,xs:12,children:(0,Z.jsx)(m.Ay,{container:!0,spacing:2,children:null===e||void 0===e?void 0:e.map(((e,a)=>(0,Z.jsx)(m.Ay,{item:!0,xs:6,sm:4,md:2,children:(0,Z.jsxs)(x.A,{onClick:()=>{return a=e.id,void u(a);var a},sx:{display:"flex",flexDirection:"column",alignItems:"center",p:1,height:"100%",border:c===e.id?"1px solid var(--bs-nav)":"1px solid #ddd",borderRadius:2,boxShadow:0,cursor:"pointer",transition:"all 0.3s ease"},children:[(0,Z.jsx)(A.A,{component:"img",image:e.img,alt:e.name,sx:{height:80,objectFit:"contain",mb:1}}),(0,Z.jsx)(y.A,{sx:{p:0},children:(0,Z.jsx)(d.A,{variant:"body2",align:"center",sx:{fontWeight:500},children:e.name})})]})},a)))})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,textAlign:"center",children:(0,Z.jsx)(o.A,{variant:"contained",disabled:!c||p,onClick:g,sx:{borderColor:"var(--bs-primary1)",mt:3,backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)"},children:p?"Capturing...":"Capture Fingerprint"})})]})]})})},de=()=>{var e,a,i,t,n,o,l,s,d,c,u,m;const[p,h]=(0,r.useState)(!1),{invoiceId:b,setCurrentPage:x}=(0,z.useBankTransfer)(),[y,g]=(0,r.useState)(null),j=(0,r.useRef)(),f=(0,G.useReactToPrint)({content:()=>j.current,documentTitle:"DMT Data"});(0,r.useEffect)((()=>{(async()=>{h(!0);try{var e;const a=await(0,B.vJ9)(b);g(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.data)}catch(a){}h(!1)})()}),[b]);const A=(0,r.useRef)(null);(0,r.useEffect)((()=>{A.current&&(A.current.scrollTop=0)}),[]);return(0,r.useEffect)((()=>{(()=>{var e;null===A||void 0===A||null===(e=A.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"end"})})()}),[]),(0,Z.jsxs)(Z.Fragment,{children:[p&&(0,Z.jsx)(V.A,{}),(0,Z.jsx)("div",{ref:A}),(0,Z.jsx)("div",{className:"ContentArea",children:(0,Z.jsxs)("div",{className:"card",children:[(0,Z.jsxs)("div",{className:"card-header card-Details",children:[(0,Z.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Z.jsx)(v.A,{onClick:()=>x("send-money-page"),children:(0,Z.jsx)(w.A,{})}),(0,Z.jsx)("div",{className:"Details",children:(0,Z.jsx)("span",{children:"Details"})})]}),(0,Z.jsxs)("div",{className:"button-print",children:[(0,Z.jsxs)("div",{type:"button",className:"btn btn-warning mr-3",onClick:f,children:[" ",(0,Z.jsx)(P.ne7,{}),"Full Print"]}),(0,Z.jsxs)("div",{type:"button",className:"btn btn-warning mr-3",onClick:()=>{const e=document.getElementById("contentId1");U()().set({margin:1,format:[90,297],filename:"thermal_print_page.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"mm",format:[110,200],orientation:"portrait"}}).from(e).save()},children:[" ",(0,Z.jsx)(P.ne7,{}),"Thermal Print"]})]})]}),(0,Z.jsxs)("div",{ref:j,id:"contentId1",className:"contentId2",children:[(0,Z.jsx)("div",{className:"card-body",children:(0,Z.jsxs)("div",{className:"row",children:[(0,Z.jsx)("div",{className:"col-lg-12",children:(0,Z.jsx)("div",{className:"logo-print text-align-center pb-3",children:(0,Z.jsx)("img",{src:H,alt:""})})}),(0,Z.jsx)("div",{className:"col-lg-6 aabc",children:(0,Z.jsxs)("div",{className:"left-side-section",children:[(0,Z.jsxs)("div",{children:["CSP Name : ",(0,Z.jsx)("span",{children:null===y||void 0===y||null===(e=y.invoice[0])||void 0===e?void 0:e.shop_name})]}),(0,Z.jsxs)("div",{children:["Mobile Number :"," ",(0,Z.jsx)("span",{children:null===y||void 0===y||null===(a=y.invoice[0])||void 0===a?void 0:a.mobile_number})]}),(0,Z.jsxs)("div",{children:["Sender Name :"," ",(0,Z.jsx)("span",{children:null===y||void 0===y||null===(i=y.invoice[0])||void 0===i?void 0:i.customer_name})]}),(0,Z.jsxs)("div",{children:["Sender No :"," ",(0,Z.jsx)("span",{children:null===y||void 0===y||null===(t=y.invoice[0])||void 0===t?void 0:t.customer_mobile})]})]})}),(0,Z.jsx)("div",{className:"col-lg-6 aabc",children:(0,Z.jsxs)("div",{className:"right-side-section",children:[(0,Z.jsxs)("div",{children:["Beneficiary :"," ",(0,Z.jsx)("span",{children:null===y||void 0===y||null===(n=y.invoice[0])||void 0===n?void 0:n.beneficiary_name})]}),(0,Z.jsxs)("div",{children:["Bank Name : ",(0,Z.jsx)("span",{children:null===y||void 0===y||null===(o=y.invoice[0])||void 0===o?void 0:o.bank_name})]}),(0,Z.jsxs)("div",{children:["Account No :"," ",(0,Z.jsx)("span",{children:null===y||void 0===y||null===(l=y.invoice[0])||void 0===l?void 0:l.account_number})]}),(0,Z.jsxs)("div",{children:["Date : ",(0,Z.jsx)("span",{children:null===y||void 0===y||null===(s=y.invoice[0])||void 0===s?void 0:s.createdAt})]})]})})]})}),(0,Z.jsx)("div",{className:"col-lg-12",children:(0,Z.jsx)("div",{className:"card mt-4",style:{overflow:"auto"},children:(0,Z.jsxs)("div",{className:"card-body",children:[(0,Z.jsx)("div",{id:"myTable_wrapper",className:"dataTables_wrapper no-footer",children:(0,Z.jsxs)("table",{className:"table table-striped table-bordered table-hover display dataTable no-footer dtr-inline collapsed",role:"grid","aria-describedby":"myTable_info",children:[(0,Z.jsx)("thead",{children:(0,Z.jsxs)("tr",{role:"row",children:[(0,Z.jsx)("th",{className:"sorting",children:"TID"}),(0,Z.jsx)("th",{className:"sorting",children:"Status"}),(0,Z.jsx)("th",{className:"sorting",children:"UTR No"}),(0,Z.jsx)("th",{className:"sorting",children:"Amount"})]})}),(0,Z.jsxs)("tbody",{children:[y&&(null===y||void 0===y||null===(d=y.invoice[0])||void 0===d||null===(c=d.allTrans)||void 0===c?void 0:c.map((e=>(0,Z.jsxs)("tr",{children:[(0,Z.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.tid}),(0,Z.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.status}),(0,Z.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.utr}),(0,Z.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.amount})]},null===e||void 0===e?void 0:e._id)))),(0,Z.jsxs)("tr",{children:[(0,Z.jsx)("td",{valign:"top",className:"dataTables_empty",colSpan:3,children:"Total"}),(0,Z.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===y||void 0===y||null===(u=y.invoice[0])||void 0===u?void 0:u.totalAmount})]})]})]})}),(0,Z.jsx)("div",{className:"col-lg-12",children:(0,Z.jsx)("div",{className:"reserve",children:(0,Z.jsxs)("p",{children:["\xa9 ",null===(m=new Date)||void 0===m?void 0:m.getFullYear()," All Rights Reserved "]})})})]})})})]})]})})]})},ce=()=>{const[e,a]=(0,r.useState)([]),[i,t]=(0,r.useState)(""),{globalLoader:l,setGlobalLoader:s,mobile:c,setMobile:u,setCurrentPage:v,currentPage:p,setCustomer:h,selectedBank:b,setSelectedBank:g,allBank:j,setAllBank:f}=(0,z.useBankTransfer)(),A=(0,r.useCallback)((async()=>{try{var e;const i=await(0,B.jnj)({mobile:c}),r=(null===i||void 0===i||null===(e=i.data)||void 0===e?void 0:e.data)||[];a(r)}catch(i){console.error("Error fetching suggestions:",i),a([])}}),[c]);(0,r.useEffect)((()=>{if(!c)return void a([]);const e=setTimeout(A,500);return()=>clearTimeout(e)}),[c,A]);(0,r.useEffect)((()=>{(async()=>{var e,a,i,r;let t=await(0,B.JqU)();f((null===t||void 0===t||null===(e=t.data)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.dmtApiType)||[]),g(null===t||void 0===t||null===(i=t.data)||void 0===i||null===(r=i.data)||void 0===r?void 0:r.defaultApi)})()}),[]);return(0,Z.jsxs)(n.A,{sx:{width:"100vw",height:"100vh",backgroundColor:"var(--bs-primary1)",minHeight:"100vh"},children:[l&&(0,Z.jsx)(V.A,{}),(0,Z.jsx)("div",{className:"PageHeading",children:(0,Z.jsx)("h1",{children:"Bank Transfer"})}),"money-transfer"===p&&(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)(ae,{children:[(0,Z.jsx)(d.A,{variant:"h6",fontWeight:"600",mb:2,children:"Bank Selection"}),(0,Z.jsx)(m.Ay,{container:!0,spacing:2,children:null===j||void 0===j?void 0:j.map((e=>{const a=b===e._id;return(0,Z.jsx)(m.Ay,{item:!0,xs:6,sm:3,md:3,lg:2,children:(0,Z.jsx)(x.A,{elevation:a?6:1,sx:{border:a?"1px solid var(--bs-nav)":"1px solid #ccc",position:"relative",borderRadius:2,transition:"all 0.3s ease",width:"150px",color:"var(--bs-primary2)"},children:(0,Z.jsxs)(C.A,{onClick:()=>{return a=e._id,void g(a);var a},children:[(0,Z.jsx)(y.A,{sx:{p:1,color:"var(--bs-primary2)"},children:(0,Z.jsx)(d.A,{variant:"subtitle1",align:"center",fontSize:14,color:"var(--bs-primary2)",children:e.name.toUpperCase()})}),a&&(0,Z.jsx)(D.A,{sx:{position:"absolute",top:11,right:30,width:"17px",height:"17px",color:"var(--bs-primary2)",fill:"var(--bs-nav)"}})]})})},e._id)}))}),(0,Z.jsxs)(n.A,{sx:{mt:2,width:{xs:"100%",sm:"50%"}},children:[(0,Z.jsx)(d.A,{variant:"h6",fontWeight:"600",mb:2,children:"Customer Search"}),(0,Z.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),!J(c))return void t("Please enter a valid mobile number.");s(!0);let a={mobile:c,api_id:b};try{var r,n,o,l,d,u;let e=await(0,B.dqk)(a);var m,p;if("401"===(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.statusCode)&&v("add-customer"),"008"===(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.statusCode)&&v("otp-page"),"007"===(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.statusCode)&&v("marchant-onboarding-otp"),"200"===(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.statusCode))h(null===e||void 0===e||null===(m=e.data)||void 0===m||null===(p=m.data)||void 0===p?void 0:p.response),v("send-money-page");(0,O.A)(null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.error,null===e||void 0===e||null===(u=e.data)||void 0===u?void 0:u.message)}catch(i){}finally{s(!1)}},children:(0,Z.jsxs)(n.A,{display:"flex",alignItems:"flex-start",gap:1.5,children:[(0,Z.jsx)(n.A,{sx:{width:40,height:40,borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",color:"var(--bs-primary2)"},children:(0,Z.jsx)(_.A,{})}),(0,Z.jsx)(k.A,{freeSolo:!0,options:e,getOptionLabel:e=>"string"===typeof e?e:e.customer_number,inputValue:c,onInputChange:(e,a)=>{const i=a.replace(/\D/g,"").slice(0,10);u(i),i&&(i.length<10||!J(i))?t("Enter a valid 10-digit mobile number."):t("")},fullWidth:!0,renderInput:e=>(0,Z.jsx)(X,{...e,label:"Search customer mobile number",variant:"outlined",size:"small",error:!!i,helperText:i||null})}),(0,Z.jsx)(o.A,{variant:"contained",disabled:!J(c),type:"submit",sx:{width:"200px",backgroundColor:"var(--bs-primary1)",border:"1px solid var(--bs-primary2)",color:"var(--bs-primary2) !important","&:hover":{backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2) !important",opacity:.9},"&.Mui-disabled":{backgroundColor:"var(--bs-primary1) !important",color:"var(--bs-primary2) !important",borderColor:"var(--bs-primary2) !important",opacity:.5}},children:"Search"})]})})]})]})}),"send-money-page"===p&&(0,Z.jsx)(re,{}),"add-newBeneficiaryPage"===p&&(0,Z.jsx)(te,{}),"add-customer"===p&&(0,Z.jsx)(ne,{}),"otp-page"===p&&(0,Z.jsx)(oe,{}),"marchant-onboarding-otp"===p&&(0,Z.jsx)(le,{}),"KYC-page"===p&&(0,Z.jsx)(se,{}),"invoice"===p&&(0,Z.jsx)(de,{})]})}},44332:(e,a,i)=>{i.d(a,{R:()=>r});const r=[{name:"Mantra",path:"/rd/capture",hosts:["https://localhost","https://127.0.0.1"],ports:[11100,11101,11102]},{name:"Morpho",path:"/rd/capture",hosts:["https://localhost"],ports:[11100]},{name:"Mantra L1",path:"/rd/capture",hosts:["https://localhost","https://127.0.0.1"],ports:[11100,11101,11102]}]},89349:(e,a,i)=>{i.d(a,{g:()=>r});const r=()=>new Promise(((e,a)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((a=>{e({latitude:a.coords.latitude,longitude:a.coords.longitude})}),(e=>{e.code===e.PERMISSION_DENIED&&alert("Please Enable Location to Proceed"),a(e)}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):a(new Error("Geolocation is not supported"))}))},54358:(e,a,i)=>{i.d(a,{A:()=>t});var r=i(91036);function t(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"something went wrong";!1===e?r.oR.success(a):r.oR.error(a)}},8751:(e,a,i)=>{i.d(a,{A:()=>t});var r=i(89349);const t=e=>async function(){try{let{latitude:n,longitude:o}=await(0,r.g)();if(!n||!o)return alert("Please Enable Location");for(var a=arguments.length,i=new Array(a),t=0;t<a;t++)i[t]=arguments[t];return await e(n,o,...i)}catch(n){console.error("Error fetching location:",n)}}},37912:(e,a,i)=>{e.exports=i.p+"static/media/iris.7815c2241d235d0e09e7.png"},33262:(e,a,i)=>{e.exports=i.p+"static/media/mantra.6c398cd6eba242d3496c.png"},45531:(e,a,i)=>{e.exports=i.p+"static/media/mantral1.cdc67b4cc75a0d886924.png"},60648:(e,a,i)=>{e.exports=i.p+"static/media/morpho.3d2243f00963167fc971.png"},56573:(e,a,i)=>{e.exports=i.p+"static/media/morphol1.1d9cca64ce0bd3399131.png"},6577:(e,a,i)=>{e.exports=i.p+"static/media/precision.bc7d5ca50f7f6227e698.png"},4137:(e,a,i)=>{e.exports=i.p+"static/media/sequgen.91463d52e65a91c44667.png"},58207:(e,a,i)=>{e.exports=i.p+"static/media/startrek.a6a704265d590008c71c.png"},10146:(e,a,i)=>{e.exports=i.p+"static/media/startrekl1.af847db98c53f9fa33a7.png"},17205:(e,a,i)=>{e.exports=i.p+"static/media/finger_success.1cae1bfaf912b6dcb6b3.gif"},6901:(e,a,i)=>{e.exports=i.p+"static/media/image4.6c2e81d319a597cbd094.jpeg"}}]);
//# sourceMappingURL=6515.47b3e3f0.chunk.js.map