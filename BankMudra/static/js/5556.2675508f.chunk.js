"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[5556],{47943:(e,a,t)=>{t.d(a,{A:()=>i});var s=t(65043),r=t(73575),n=t(91036),l=(t(76323),t(70579));const i=e=>{let{userId:a,onClose:t,longitude:i,latitude:o,transferAmount:d,open:c,walletShowHeader:u,fetchData:m,resetModalStates:h}=e;const[x,v]=(0,s.useState)(new Array(6).fill("")),[j,p]=(0,s.useState)(120),[g,b]=(0,s.useState)(!1),[f,y]=(0,s.useState)(!1),[C,N]=(0,s.useState)(!1),[A,S]=(0,s.useState)(""),[w,k]=(0,s.useState)(""),T=(0,s.useRef)([]),R=(0,s.useRef)(null),P=(0,s.useCallback)((()=>{R.current&&clearInterval(R.current),p(120),b(!1),R.current=setInterval((()=>{p((e=>e<=1?(clearInterval(R.current),b(!0),0):e-1))}),1e3)}),[]),_=(0,s.useCallback)((()=>{R.current&&clearInterval(R.current),p(0),b(!0)}),[]);(0,s.useEffect)((()=>(c?P():_(),()=>clearInterval(R.current))),[c,P,_]);const E=(0,s.useCallback)((()=>{_(),v(new Array(6).fill("")),S(""),k(""),t()}),[t,_]),I=(0,s.useCallback)(((e,a)=>{const t=[...x];t[e]=a.slice(0,1),v(t),a&&e<5&&T.current[e+1]&&T.current[e+1].focus()}),[x]),L=(0,s.useCallback)(((e,a)=>{if("Backspace"===e.key&&!x[a]&&a>0){const e=[...x];e[a-1]="",v(e),T.current[a-1].focus()}}),[x]),z=(0,s.useCallback)((async()=>{y(!0),k(""),S("");try{200==(await(0,r.eVi)({token:a,amount:Number(d)})).status?(S("OTP has been resent successfully."),P(),v(new Array(6).fill(""))):k("Failed to resend OTP.")}catch(w){k("Failed to resend OTP.")}finally{y(!1)}}),[a,P,d]),O=(0,s.useCallback)((async()=>{N(!0),S(""),k("");try{var e;const v=await(0,r.AkL)({token:a,otp:x.join(""),lat:o,long:i});var s,l,d,c;if(200==(null===v||void 0===v||null===(e=v.data)||void 0===e?void 0:e.statusCode))S((null===v||void 0===v||null===(s=v.data)||void 0===s?void 0:s.message)||"OTP verified successfully."),n.oR.success((null===v||void 0===v||null===(l=v.data)||void 0===l?void 0:l.message)||"OTP verified successfully."),t(),u&&u(),m&&m(),h&&h();else k((null===v||void 0===v||null===(d=v.data)||void 0===d?void 0:d.message)||(null===v||void 0===v?void 0:v.data)||"Failed to verify OTP."),n.oR.error((null===v||void 0===v||null===(c=v.data)||void 0===c?void 0:c.message)||(null===v||void 0===v?void 0:v.data)||"Failed to verify OTP.")}catch(w){k("Failed to verify OTP."),n.oR.error("Failed to verify OTP.")}finally{N(!1)}}),[a,x,t,o,i]);return(0,l.jsx)("div",{className:"modal fade modal-cssclasss mediaqurymodalpop ".concat(c?"show d-block":""),tabIndex:"-1",role:"dialog",children:(0,l.jsx)("div",{className:"modal-dialog",role:"document",style:{zIndex:1050},children:(0,l.jsxs)("div",{className:"modal-content modal-content-otp",children:[(0,l.jsxs)("div",{className:"modal-header text-center",children:[(0,l.jsx)("h5",{className:"modal-title modaltitle-otp",children:"OTP Verification"}),(0,l.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:E})]}),(0,l.jsx)("div",{className:"modal-body",style:{backgroundColor:"#ffffff",transform:"translateZ(0)",backfaceVisibility:"hidden"},children:g?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{children:"Please Enter 6-digit Code Sent To Your Registered Mobile Number!"}),(0,l.jsx)("button",{type:"button",className:"btn btn-resend-otp",onClick:z,children:f?(0,l.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):"Resend OTP"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{children:"Please Enter 6-digit Code Sent To Your Registered Mobile Number!"}),(0,l.jsxs)("div",{className:"verification-timer",children:["Verification Code: ",(e=>{const a=Math.floor(e/60),t=e%60;return"".concat(a.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"))})(j)," seconds ",(0,l.jsx)("span",{className:"resend-otp",onClick:z,children:"Resend OTP"})]}),(0,l.jsx)("div",{className:"otp-inputs",children:x.map(((e,a)=>(0,l.jsx)("input",{type:"password",maxLength:"1",value:e,onChange:e=>I(a,e.target.value),onKeyDown:e=>L(e,a),ref:e=>T.current[a]=e,className:"otp-input"},a)))}),(0,l.jsx)("button",{type:"button",className:"btn btn-submit-otp",onClick:O,disabled:x.some((e=>""===e))||C,children:C?(0,l.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):"Submit OTP"}),A&&(0,l.jsx)("div",{className:"alert alert-success mt-3",children:A}),w&&(0,l.jsx)("div",{className:"alert alert-danger mt-3",children:w})]})})]})})})}},25556:(e,a,t)=>{t.r(a),t.d(a,{default:()=>f});var s=t(65043),r=t(14282),n=t(64196),l=t(38628),i=t(25284),o=t(73722),d=t(85369),c=t(73216),u=t(91036),m=(t(92342),t(1281)),h=t(76245),x=t(47943),v=t(73575),j=t(72777),p=(t(22871),t(70579));const g=e=>{let{users:a,totalCount:t,onUserClick:r,onTransferClick:l,onReverseTransferClick:i,onReportClick:o,onPageChange:c,handleReportClickmainreportasmzsm:u,level:m=0,initialPage:x=1,initialPageSize:v=10}=e;const[j,g]=(0,s.useState)(x),[f,y]=(0,s.useState)(v),[C,N]=(0,s.useState)({});(0,s.useEffect)((()=>{g(x),y(v)}),[x,v]);const A=async(e,a)=>{g(e),a!==f&&y(a),await c(e,a)};return null!==a&&void 0!==a&&a.length?(0,p.jsxs)("div",{className:"border rounded my-2",children:[(0,p.jsx)("div",{className:"bg-light p-2 d-flex justify-content-between align-items-center border-bottom",children:(0,p.jsxs)("h6",{className:"mb-0",children:["Downstream Members (Level ",m+1,")"]})}),(0,p.jsxs)(n.A,{hover:!0,className:"mb-0",children:[(0,p.jsx)("thead",{className:"bg-light",children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{children:"S.No"}),(0,p.jsx)("th",{children:"Refer ID"}),(0,p.jsx)("th",{children:"Name"}),(0,p.jsx)("th",{children:"User Type"}),(0,p.jsx)("th",{children:"Mobile no"}),(0,p.jsx)("th",{children:"Email Id"}),(0,p.jsx)("th",{children:"Status"}),(0,p.jsx)("th",{children:"Downstream"}),(0,p.jsx)("th",{children:"Actions"}),(0,p.jsx)("th",{children:"Wallet"}),(0,p.jsx)("th",{children:"Report"}),(0,p.jsx)("th",{children:"Wallet Report"})]})}),(0,p.jsx)("tbody",{children:a.map(((e,a)=>{var t,s;return(0,p.jsx)(b,{user:e,index:a+(j-1)*f,onUserClick:r,onTransferClick:l,onReverseTransferClick:i,onReportClick:o,level:m,currentPage:(null===(t=C[e._id])||void 0===t?void 0:t.page)||1,pageSize:(null===(s=C[e._id])||void 0===s?void 0:s.size)||10,onPageChange:(a,t)=>(async(e,a,t)=>{N((s=>({...s,[e]:{page:a,size:t}})))})(e._id,a,t),handleReportClickmainreportasmzsm:u},e._id)}))})]}),t>f&&(0,p.jsx)("div",{className:"p-3 border-top",children:(0,p.jsx)(h.A,{current:j,total:t,pageSize:f,onChange:e=>A(e,f),showSizeChanger:!0,onShowSizeChange:(e,a)=>A(1,a),showQuickJumper:!0,showTotal:(e,a)=>"".concat(a[0],"-").concat(a[1]," of ").concat(e," items"),className:"justify-content-end"})})]}):(0,p.jsxs)("div",{className:"text-center py-4",children:[(0,p.jsx)(d.YXz,{size:24,className:"mb-2"}),(0,p.jsx)("p",{children:"No downstream members available"})]})},b=e=>{let{user:a,index:t,onUserClick:n,onTransferClick:l,onReverseTransferClick:i,onReportClick:o,level:c,currentPage:u,pageSize:m,onPageChange:h,handleReportClickmainreportasmzsm:x}=e;const[v,j]=(0,s.useState)(!1),[b,f]=(0,s.useState)([]),[y,C]=(0,s.useState)(!1),[N,A]=(0,s.useState)(0),S=async(e,t)=>{C(!0);try{const s=await n(a._id,e,t);null!==s&&void 0!==s&&s.data&&(f(s.data),A(s.totalCount))}catch(s){console.error("Error fetching sub-users:",s)}C(!1)};return(0,p.jsxs)(s.Fragment,{children:[(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:t+1}),(0,p.jsx)("td",{children:null===a||void 0===a?void 0:a.refer_id}),(0,p.jsx)("td",{children:null===a||void 0===a?void 0:a.name}),(0,p.jsx)("td",{children:(0,p.jsx)("span",{className:"badge bg-primary",children:null===a||void 0===a?void 0:a.user_type})}),(0,p.jsx)("td",{children:null===a||void 0===a?void 0:a.mobile}),(0,p.jsx)("td",{children:null===a||void 0===a?void 0:a.email}),(0,p.jsx)("td",{children:(0,p.jsx)("span",{className:"badge ".concat(a.is_approved?"bg-success":"bg-warning"),children:null!==a&&void 0!==a&&a.is_approved?"Approved":"Pending"})}),(0,p.jsx)("td",{children:"Retailer"!==a.user_type&&(0,p.jsxs)(r.A,{variant:"link",onClick:async()=>{v||b.length||await S(u,m),j(!v)},disabled:y,className:"d-flex align-items-center",children:[y?"Loading...":"View",v?(0,p.jsx)(d.Ucs,{className:"ms-1"}):(0,p.jsx)(d.Vr3,{className:"ms-1"})]})}),(0,p.jsx)("td",{children:(0,p.jsxs)("div",{className:"d-flex gap-2",children:[(0,p.jsx)(r.A,{variant:"outline-primary",size:"sm",onClick:()=>l(a),children:"Transfer"}),(0,p.jsx)(r.A,{variant:"outline-secondary",size:"sm",onClick:()=>i(a),children:"Reverse"})]})}),(0,p.jsxs)("td",{children:["\u20b9",(null===a||void 0===a?void 0:a.main_wallet)||0]}),(0,p.jsx)("td",{children:(0,p.jsx)(r.A,{variant:"link",onClick:()=>o(a._id),children:(0,p.jsx)(d.Ny1,{})})}),(0,p.jsx)("td",{children:(0,p.jsx)(r.A,{variant:"warning",onClick:()=>x(a._id),children:"Wallet Report"})})]}),v&&(0,p.jsx)("tr",{children:(0,p.jsx)("td",{colSpan:"11",className:"p-0",children:(0,p.jsx)("div",{className:"ps-4 border-start border-primary",style:{marginLeft:"".concat(20*c,"px")},children:y?(0,p.jsx)("div",{className:"text-center py-3",children:"Loading..."}):b.length>0?(0,p.jsx)(g,{users:b,totalCount:N,onUserClick:n,onTransferClick:l,onReverseTransferClick:i,onReportClick:o,onPageChange:async(e,a)=>{await S(e,a),h(e,a)},level:c+1,initialPage:u,initialPageSize:m,handleReportClickmainreportasmzsm:x}):(0,p.jsx)("div",{className:"text-center py-3",children:"No downstream members available"})})})})]})};const f=function(e){let{walletShowHeader:a,position:t}=e;const[n,d]=(0,s.useState)(!1),[b,f]=(0,s.useState)([]),[y,C]=(0,s.useState)(0),[N,A]=(0,s.useState)(0),[S,w]=(0,s.useState)(10),[k,T]=(0,s.useState)(!1),[R,P]=(0,s.useState)(null),[_,E]=(0,s.useState)(null),[I,L]=(0,s.useState)(1),z=(0,c.Zp)(),[O,B]=(0,s.useState)(""),[G,F]=(0,s.useState)(10),[H,U]=(0,s.useState)({}),[M,D]=(0,s.useState)({userId:"",name:"",email:"",mobile:"",is_approved:"",refer_id:"",userType:""}),[V,Y]=(0,s.useState)(!1),[q,Q]=(localStorage.getItem("userType"),localStorage.getItem("userTypeId"),(0,s.useState)(!1)),[W,X]=(0,s.useState)(!1),[K,Z]=(0,s.useState)(""),[J,$]=(0,s.useState)(""),[ee,ae]=(0,s.useState)(!1),[te,se]=(0,s.useState)(""),[re,ne]=(0,s.useState)(!1),[le,ie]=(0,s.useState)(null),[oe,de]=(0,s.useState)(null),[ce,ue]=(0,s.useState)(null),[me,he]=(0,s.useState)(""),[xe,ve]=(0,s.useState)({}),[je,pe]=(0,s.useState)(!1),[ge,be]=(0,s.useState)(),[fe,ye]=(0,s.useState)(!1),Ce=(0,s.useRef)(null);(0,s.useEffect)((()=>{const e=()=>{if(Ce.current){const{top:e}=Ce.current.getBoundingClientRect();e<=0?Ce.current.classList.add("sticky-header"):Ce.current.classList.remove("sticky-header")}};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[]),(0,s.useEffect)((()=>{Ne(),ke(),Te()}),[I,S]);const Ne=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G;d(!0);try{var t,s;const r=await(0,v.XCx)(e-1,a,"",M);f((null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.data)||[]),C((null===r||void 0===r||null===(s=r.data)||void 0===s?void 0:s.totalCount)||0),L(e),F(a)}catch(r){console.error("Error fetching users:",r),u.oR.error("Failed to fetch users"),f([]),C(0)}d(!1)};(0,s.useEffect)((()=>{Ne(),ke(),Te()}),[I,G]);const Ae=(e,a)=>{L(e),F(a),Ne(e,a)},Se=async e=>{P(e),T(!0)},we=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;d(!0);try{const s=await(0,v.XCx)(a-1,t,e);if("200"==s.data.statusCode){const a=b.map((a=>a._id===e?{...a,subUsers:s.data.data||[],subUsersTotalCount:s.data.totalCount||0}:a));return f(a),{data:s.data.data||[],totalCount:s.data.totalCount||0}}u.oR.error(s.data.message||"Failed to fetch sub-users")}catch(s){console.error("Error fetching sub-users:",s),u.oR.error("Failed to fetch sub-users. Please try again.")}finally{d(!1)}return{data:[],totalCount:0}},ke=async()=>{try{var e;const a=await(0,v.aQK)();U(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.data)}catch(a){console.error("Error fetching wallet data:",a)}},Te=async()=>{try{var e;const a=await(0,v.mQ9)();ve(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.data)}catch(a){console.error("Error fetching profile data:",a)}},Re=()=>new Promise(((e,a)=>{le&&oe?e(!0):t.latitude&&t.longitude?(ie(t.latitude),de(t.longitude),ue(null),e(!0)):"geolocation"in navigator?(ye(!0),navigator.geolocation.getCurrentPosition((a=>{ie(a.coords.latitude),de(a.coords.longitude),ue(null),ye(!1),e(!0)}),(e=>{console.error("Geolocation error:",e),ue("Unable to retrieve your location. Please ensure location services are enabled."),ye(!1),a(e)}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})):(ue("Geolocation is not supported by your browser"),a(new Error("Geolocation not supported")))})),Pe=e=>{P(e),ae(!0)},_e=e=>{z("/user-report/".concat(e))},Ee=()=>{T(!1),Q(!1),ae(!1),X(!1),ne(!1),B(""),se(""),Z(""),he(""),$(""),Y(!1),pe(!1),P(null)};return(0,p.jsxs)(p.Fragment,{children:[n&&(0,p.jsx)(j.A,{}),(0,p.jsxs)("div",{className:"container-fluid",children:[(0,p.jsx)("h1",{className:"h3 mb-2 text-gray-800",children:"Downstream Users"}),(0,p.jsxs)(l.A,{className:"shadow mb-4",children:[(0,p.jsx)(l.A.Header,{className:"py-3 d-flex justify-content-between align-items-center bg-primary text-white",children:(0,p.jsx)("h6",{className:"m-0 font-weight-bold",children:"User List"})}),(0,p.jsxs)(l.A.Body,{children:[(0,p.jsx)("div",{className:"table-responsive",children:(0,p.jsx)(g,{users:b,totalCount:y,onUserClick:we,onTransferClick:Se,onReverseTransferClick:Pe,onReportClick:_e,onPageChange:Ae,initialPage:I,initialPageSize:G,handleReportClickmainreportasmzsm:e=>{z("/main-report/".concat(e))}})}),y>0&&(0,p.jsx)(h.A,{current:I,total:y,pageSize:S,onChange:Ae,showSizeChanger:!1,className:"mt-3 justify-content-end"})]})]})]}),(0,p.jsxs)(i.A,{show:k,onHide:()=>{T(!1),Ee()},children:[(0,p.jsxs)(i.A.Header,{closeButton:!0,className:"d-flex justify-content-between",children:[(0,p.jsx)(i.A.Title,{children:"Transfer Money"}),(0,p.jsxs)("span",{id:"baldiv",style:{marginLeft:"20%"},children:["Available Balance: ",Math.max(0,((null===H||void 0===H?void 0:H.main_wallet)||0)-((null===xe||void 0===xe?void 0:xe.locking_amt)||0))]})]}),(0,p.jsx)(i.A.Body,{children:(0,p.jsxs)(o.A,{children:[(0,p.jsxs)(o.A.Group,{className:"mb-3",children:[(0,p.jsx)(o.A.Label,{children:"Refer ID"}),(0,p.jsx)(o.A.Control,{type:"text",value:(null===R||void 0===R?void 0:R.refer_id)||"",readOnly:!0})]}),(0,p.jsxs)(o.A.Group,{className:"mb-3",children:[(0,p.jsx)(o.A.Label,{children:"Name"}),(0,p.jsx)(o.A.Control,{type:"text",value:(null===R||void 0===R?void 0:R.name)||"",readOnly:!0})]}),(0,p.jsxs)(o.A.Group,{className:"mb-3",children:[(0,p.jsx)(o.A.Label,{children:"Mobile"}),(0,p.jsx)(o.A.Control,{type:"text",value:(null===R||void 0===R?void 0:R.mobile)||"",readOnly:!0})]}),(0,p.jsxs)(o.A.Group,{className:"mb-3",children:[(0,p.jsx)(o.A.Label,{children:"Amount"}),(0,p.jsx)(o.A.Control,{type:"number",placeholder:"Enter amount (minimum 100)",required:!0,value:O,onChange:e=>{const a=e.target.value;B(a),Y(Number(a)>=100&&Number(a)<=Number((null===H||void 0===H?void 0:H.main_wallet)-(null===xe||void 0===xe?void 0:xe.locking_amt)))}}),!V&&""!==O&&(0,p.jsx)(o.A.Text,{className:"text-danger",children:Number(O)<100?"Amount must be at least 100 rupees":"Insufficient balance"})]}),(0,p.jsx)("div",{className:"text-center",children:(0,p.jsx)(r.A,{variant:"primary",onClick:()=>{Number(O)<100?u.oR.error("Amount must be at least 100 rupees"):(T(!1),Q(!0))},disabled:!V,children:"Transfer"})})]})})]}),(0,p.jsxs)(i.A,{show:q,onHide:()=>{Q(!1),Ee()},children:[(0,p.jsx)(i.A.Header,{closeButton:!0,children:(0,p.jsx)(i.A.Title,{children:"Enter TPIN"})}),(0,p.jsx)(i.A.Body,{children:(0,p.jsxs)(o.A,{children:[(0,p.jsxs)(o.A.Group,{className:"mb-3",children:[(0,p.jsx)(o.A.Label,{children:"TPIN"}),(0,p.jsx)(o.A.Control,{type:"password",placeholder:"Enter your TPIN",value:K,onChange:e=>{const a=e.target.value.replace(/[^0-9]/g,"").slice(0,4);Z(a),he("*".repeat(a.length))},maxLength:4}),ce&&(0,p.jsx)(o.A.Text,{className:"text-danger",children:ce}),J&&(0,p.jsx)(o.A.Text,{className:"text-danger",children:J})]}),(0,p.jsx)("div",{className:"text-center",children:(0,p.jsx)(m.A,{title:"Are you sure you want to transfer this money?",onConfirm:async()=>{try{if(await Re(),ce)return void u.oR.error(ce);const s=await(0,v.a50)({transferTo:R._id,amount:Number(O),tpin:K,trans_type:"transfer",lat:le,long:oe});if("200"==s.data.statusCode)u.oR.success("Money transferred successfully"),Q(!1),Ee(),ke(),a&&a(),Ne&&Ne();else if("403"==s.data.statusCode){var e,t;$(null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.message),u.oR.error(null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)}else u.oR.error(s.data.message||"Transfer failed. Please try again.")}catch(s){console.error("Error transferring money:",s),"GeolocationPositionError"===s.name?u.oR.error("Unable to access location. Please enable location services and try again."):u.oR.error("Transfer failed. Please try again.")}},okText:"Yes",cancelText:"No",onCancel:()=>pe(!1),open:je,okButtonProps:{disabled:4!==K.length||ce},children:(0,p.jsx)(r.A,{onClick:()=>pe(!0),variant:"primary",disabled:4!==K.length||ce,children:"Submit"})})})]})})]}),(0,p.jsxs)(i.A,{show:ee,onHide:()=>{ae(!1),Ee()},children:[(0,p.jsxs)(i.A.Header,{closeButton:!0,className:"d-flex justify-content-between",children:[(0,p.jsx)(i.A.Title,{children:"Reverse Transfer"}),(0,p.jsxs)("span",{id:"baldiv",style:{marginLeft:"20%"},children:["Available Balance: ",(null===R||void 0===R?void 0:R.main_wallet)||0]})]}),(0,p.jsx)(i.A.Body,{children:(0,p.jsxs)(o.A,{children:[(0,p.jsxs)(o.A.Group,{className:"mb-3",children:[(0,p.jsx)(o.A.Label,{children:"Refer ID"}),(0,p.jsx)(o.A.Control,{type:"text",value:(null===R||void 0===R?void 0:R.refer_id)||"",readOnly:!0})]}),(0,p.jsxs)(o.A.Group,{className:"mb-3",children:[(0,p.jsx)(o.A.Label,{children:"Name"}),(0,p.jsx)(o.A.Control,{type:"text",value:(null===R||void 0===R?void 0:R.name)||"",readOnly:!0})]}),(0,p.jsxs)(o.A.Group,{className:"mb-3",children:[(0,p.jsx)(o.A.Label,{children:"Mobile"}),(0,p.jsx)(o.A.Control,{type:"text",value:(null===R||void 0===R?void 0:R.mobile)||"",readOnly:!0})]}),(0,p.jsxs)(o.A.Group,{className:"mb-3",children:[(0,p.jsx)(o.A.Label,{children:"Amount"}),(0,p.jsx)(o.A.Control,{type:"number",placeholder:"Enter amount (minimum 100)",required:!0,value:te,onChange:e=>{const a=e.target.value;se(a)}}),Number(te)>Number(null===R||void 0===R?void 0:R.main_wallet)&&(0,p.jsx)(o.A.Text,{className:"text-danger",children:"Insufficient balance"}),Number(te)<100&&""!==te&&(0,p.jsx)(o.A.Text,{className:"text-danger",children:"Amount must be at least 100 rupees"})]}),(0,p.jsx)("div",{className:"text-center",children:(0,p.jsx)(r.A,{variant:"primary",onClick:()=>{ae(!1),X(!0)},disabled:Number(te)>Number(null===R||void 0===R?void 0:R.main_wallet)||Number(te)<100,children:"Reverse Transfer"})})]})})]}),(0,p.jsxs)(i.A,{show:W,onHide:()=>{X(!1),Ee()},children:[(0,p.jsx)(i.A.Header,{closeButton:!0,children:(0,p.jsx)(i.A.Title,{children:"Enter TPIN for Reverse Transfer"})}),(0,p.jsx)(i.A.Body,{children:(0,p.jsxs)(o.A,{children:[(0,p.jsxs)(o.A.Group,{className:"mb-3",children:[(0,p.jsx)(o.A.Label,{children:"TPIN"}),(0,p.jsx)(o.A.Control,{type:"password",placeholder:"Enter your TPIN",value:K,onChange:e=>{const a=e.target.value.replace(/[^0-9]/g,"").slice(0,4);Z(a),he("*".repeat(a.length))},maxLength:4}),ce&&(0,p.jsx)(o.A.Text,{className:"text-danger",children:ce}),J&&(0,p.jsx)(o.A.Text,{className:"text-danger",children:J})]}),(0,p.jsx)("div",{className:"text-center",children:(0,p.jsx)(m.A,{title:"Are you sure you want to reverse transfer this money?",onConfirm:async()=>{try{if(await Re(),ce)return void u.oR.error(ce);const t=await(0,v.a50)({transferTo:R._id,amount:Number(te),tpin:K,trans_type:"refund",lat:le,long:oe});if("200"==t.data.statusCode){const e=t.data.data.token;be(e),X(!1),ne(!0)}else if("403"==t.data.statusCode){var e,a;$(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.message),u.oR.error(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)}else u.oR.error(t.data.message||"Reverse transfer failed. Please try again.")}catch(t){console.error("Error reverse transferring money:",t),u.oR.error("Reverse transfer failed. Please try again.")}},okText:"Yes",cancelText:"No",onCancel:()=>pe(!1),open:je,okButtonProps:{disabled:4!==K.length||ce},children:(0,p.jsx)(r.A,{onClick:()=>pe(!0),variant:"primary",disabled:4!==K.length||ce,children:"Submit"})})})]})})]}),(0,p.jsx)(x.A,{open:re,userId:ge,onClose:()=>ne(!1),longitude:oe,latitude:le,transferAmount:te,walletShowHeader:a,fetchData:Ne,resetModalStates:Ee})]})}},76323:()=>{},22871:()=>{}}]);
//# sourceMappingURL=5556.2675508f.chunk.js.map