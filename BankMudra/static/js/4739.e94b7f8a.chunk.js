"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[4739,7214],{84739:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var a=r(65043),n=r(22019),o=r(94434),s=r(76245),l=r(73575),c=r(72777),i=r(85369),d=r(14282),u=r(25284),h=r(64196),m=r(95702),x=r(70579);const b=()=>{const[e,t]=(0,a.useState)(!1),[r,b]=(0,a.useState)([]),[p,f]=(0,a.useState)(null),[v,y]=(0,a.useState)(10),[g,j]=(0,a.useState)(0),[N,k]=(0,a.useState)(0),w=(0,a.useRef)(!1),[C,A]=(0,a.useState)({startDate:"",endDate:"",search:""}),E=e=>{A({...C,[e.target.name]:e.target.value})},T=(0,a.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v;t(!0);try{var a,o;const t=await(0,l.pFR)({page:e+1,limit:r,...C});b((null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.data)||[]),k((null===t||void 0===t||null===(o=t.data)||void 0===o?void 0:o.totalRecords)||0)}catch(s){n.Ay.error("Failed to fetch IRCTC transactions")}t(!1)}),[C,g,v]);(0,a.useEffect)((()=>{w.current||(T(),w.current=!0)}),[T]);return(0,x.jsxs)(x.Fragment,{children:[e&&(0,x.jsx)(c.A,{}),(0,x.jsx)("div",{className:"PageHeading",style:{color:"var(--bs-primary3)"},children:(0,x.jsx)("h1",{children:"IRCTC Report"})}),(0,x.jsxs)("div",{className:"ContentArea",children:[(0,x.jsx)("div",{className:"card",style:{backgroundColor:"var(--bs-primary2)",border:"1px solid var(--bs-nav)",color:"var(--bs-primary3)"},children:(0,x.jsx)("div",{className:"card-body",children:(0,x.jsxs)("div",{className:"form-row",style:{alignItems:"end"},children:[(0,x.jsxs)("div",{className:"form-group col-md-4",children:[(0,x.jsx)("label",{children:"Start Date"}),(0,x.jsx)("input",{type:"date",className:"form-control",name:"startDate",value:C.startDate,onChange:E,style:{backgroundColor:"var(--bs-primary2)",color:"var(--bs-primary3)",border:"1px solid var(--bs-nav)"}})]}),(0,x.jsxs)("div",{className:"form-group col-md-4",children:[(0,x.jsx)("label",{children:"End Date"}),(0,x.jsx)("input",{type:"date",className:"form-control",name:"endDate",value:C.endDate,onChange:E,style:{backgroundColor:"var(--bs-primary2)",color:"var(--bs-primary3)",border:"1px solid var(--bs-nav)"}})]}),(0,x.jsxs)("div",{className:"form-group col-md-4",children:[(0,x.jsx)("label",{children:"Txn ID / Reservation ID"}),(0,x.jsx)("input",{type:"text",className:"form-control",name:"search",placeholder:"Search...",value:C.search,onChange:E,style:{backgroundColor:"var(--bs-primary2)",color:"var(--bs-primary3)",border:"1px solid var(--bs-nav)"}})]}),(0,x.jsxs)("div",{className:"form-group col-md-2 mt-3",children:[(0,x.jsx)("button",{className:"btn",onClick:()=>{j(0),T(0)},style:{backgroundColor:"#6C757D",color:"#FFF",border:"1px solid var(--bs-nav)"},children:"Search"}),(0,x.jsx)("button",{className:"btn ml-2",onClick:()=>{A({startDate:"",endDate:"",search:""}),j(0),T(0)},style:{backgroundColor:"#F8F9FA",color:"var(--bs-primary2)",border:"1px solid var(--bs-primary3)"},children:"Reset"})]})]})})}),(0,x.jsx)("div",{className:"card mt-4",style:{backgroundColor:"var(--bs-primary2)",border:"1px solid var(--bs-nav)",overflow:"auto"},children:(0,x.jsxs)("div",{className:"card-body",children:[(0,x.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,x.jsx)(d.A,{onClick:()=>{if(!r.length)return n.Ay.error("No data found");setTimeout((()=>document.getElementById("excelExportIrctc").click()),200)},style:{backgroundColor:"#E8DAD6",color:"var(--bs-primary2)",border:"1px solid var(--bs-nav)"},children:"Download Excel"}),(0,x.jsx)(m.A,{id:"excelExportIrctc",filename:"IRCTC_Agent977_Report",sheet:"Sheet1",className:"d-none",table:"tableIrctc"})]}),(0,x.jsxs)("table",{className:"table table-bordered table-hover mt-3",id:"tableIrctc",style:{borderColor:"var(--bs-nav)",whiteSpace:"nowrap"},children:[(0,x.jsx)("thead",{style:{backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)"},children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"S No"}),(0,x.jsx)("th",{children:"Date"}),(0,x.jsx)("th",{children:"Txn ID"}),(0,x.jsx)("th",{children:"Reservation ID"}),(0,x.jsx)("th",{children:"Agent User"}),(0,x.jsx)("th",{children:"Class"}),(0,x.jsx)("th",{children:"Pax"}),(0,x.jsx)("th",{children:"Payment Mode"}),(0,x.jsx)("th",{children:"Amount"}),(0,x.jsx)("th",{children:"Agent Fee inclGST"}),(0,x.jsx)("th",{children:"Pg Charge inclGST "}),(0,x.jsx)("th",{children:"Total Amount"}),(0,x.jsx)("th",{children:"Payment Status"}),(0,x.jsx)("th",{children:"Booking Status"}),(0,x.jsx)("th",{children:"View"})]})}),(0,x.jsx)("tbody",{style:{color:"var(--bs-primary3)"},children:r.length?r.map(((e,t)=>(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:t+1}),(0,x.jsx)("td",{children:new Date(e.createdAt).toLocaleString()}),(0,x.jsx)("td",{children:e.txn_id}),(0,x.jsx)("td",{children:e.reservationId}),(0,x.jsx)("td",{children:e.agentUserId}),(0,x.jsx)("td",{children:e.classType}),(0,x.jsx)("td",{children:e.noOfPax||"-"}),(0,x.jsx)("td",{children:e.paymentMode||"-"}),(0,x.jsxs)("td",{children:["\u20b9",e.txnAmount]}),(0,x.jsxs)("td",{children:["\u20b9",e.maxAgentFeeinclGST]}),(0,x.jsxs)("td",{children:["\u20b9",e.maxPGChargeinclGST]}),(0,x.jsxs)("td",{children:["\u20b9",e.ticketPrintRate]}),(0,x.jsx)("td",{children:e.paymentStatus}),(0,x.jsx)("td",{children:e.ticketBookingStatus}),(0,x.jsx)("td",{children:(0,x.jsx)(i.Ny1,{onClick:()=>f(e),style:{cursor:"pointer",color:"var(--bs-primary2)"}})})]},e._id))):(0,x.jsx)("tr",{children:(0,x.jsx)("td",{colSpan:"13",className:"text-center",children:"No Transaction Found"})})})]}),(0,x.jsxs)("div",{className:"dataTables_info_page",children:[(0,x.jsxs)("div",{className:"d-flex align-items-center",children:[(0,x.jsxs)("div",{className:"dataTables_length me-3",children:[(0,x.jsx)("label",{className:"me-2",children:"Show"}),(0,x.jsx)(o.A,{value:v,onChange:e=>{y(e),j(0),T(0,e)},style:{width:120},options:[{value:10,label:"10 / page"},{value:20,label:"20 / page"},{value:50,label:"50 / page"},{value:100,label:"100 / page"}]})]}),(0,x.jsxs)("div",{className:"dataTables_info",children:["Total ",N," entries"]})]}),(0,x.jsx)("div",{className:"dataTables_paginate paging_simple_numbers",children:(0,x.jsx)(s.A,{current:g+1,onChange:e=>{const t=e-1;j(t),T(t)},total:N,pageSize:v,showSizeChanger:!1})})]})]})})]}),p&&(0,x.jsxs)(u.A,{show:!0,centered:!0,onHide:()=>f(null),children:[(0,x.jsx)(u.A.Header,{closeButton:!0,style:{backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)"},children:(0,x.jsxs)(u.A.Title,{children:["Transaction #",p.txn_id]})}),(0,x.jsx)(u.A.Body,{style:{backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary3)"},children:(0,x.jsx)(h.A,{borderless:!0,children:(0,x.jsxs)("tbody",{children:[(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:"Reservation ID"}),(0,x.jsx)("td",{children:p.reservationId})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:"Merchant Code"}),(0,x.jsx)("td",{children:p.merchantCode})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:"Agent User"}),(0,x.jsx)("td",{children:p.agentUserId})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:"Total Amount"}),(0,x.jsxs)("td",{children:["\u20b9",p.ticketPrintRate]})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:"Payment Status"}),(0,x.jsx)("td",{children:p.paymentStatus})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:"Booking Status"}),(0,x.jsx)("td",{children:p.ticketBookingStatus})]})]})})}),(0,x.jsx)(u.A.Footer,{style:{backgroundColor:"var(--bs-primary2)"},children:(0,x.jsx)(d.A,{onClick:()=>f(null),style:{backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)",border:"1px solid var(--bs-nav)"},children:"Close"})})]})]})}},92667:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(65043);function n(){return(0,a.useState)(null)}},14140:(e,t,r)=>{r.d(t,{Am:()=>s,Ay:()=>c});var a=r(65043),n=r(70579);const o=["as","disabled"];function s(e){let{tagName:t,disabled:r,href:a,target:n,rel:o,role:s,onClick:l,tabIndex:c=0,type:i}=e;t||(t=null!=a||null!=n||null!=o?"a":"button");const d={tagName:t};if("button"===t)return[{type:i||"button",disabled:r},d];const u=e=>{(r||"a"===t&&function(e){return!e||"#"===e.trim()}(a))&&e.preventDefault(),r?e.stopPropagation():null==l||l(e)};return"a"===t&&(a||(a="#"),r&&(a=void 0)),[{role:null!=s?s:"button",disabled:void 0,tabIndex:r?void 0:c,href:a,target:"a"===t?n:void 0,"aria-disabled":r||void 0,rel:"a"===t?o:void 0,onClick:u,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),u(e))}},d]}const l=a.forwardRef(((e,t)=>{let{as:r,disabled:a}=e,l=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,o);const[c,{tagName:i}]=s(Object.assign({tagName:r,disabled:a},l));return(0,n.jsx)(i,Object.assign({},l,c,{ref:t}))}));l.displayName="Button";const c=l},14282:(e,t,r)=>{r.d(t,{A:()=>d});var a=r(98139),n=r.n(a),o=r(65043),s=r(14140),l=r(67852),c=r(70579);const i=o.forwardRef(((e,t)=>{let{as:r,bsPrefix:a,variant:o="primary",size:i,active:d=!1,disabled:u=!1,className:h,...m}=e;const x=(0,l.oU)(a,"btn"),[b,{tagName:p}]=(0,s.Am)({tagName:r,disabled:u,...m}),f=p;return(0,c.jsx)(f,{...b,...m,ref:t,disabled:u,className:n()(h,x,d&&"active",o&&"".concat(x,"-").concat(o),i&&"".concat(x,"-").concat(i),m.href&&u&&"disabled")})}));i.displayName="Button";const d=i},25284:(e,t,r)=>{r.d(t,{A:()=>W});var a,n=r(98139),o=r.n(n),s=r(63043),l=r(18279),c=r(80182),i=r(8260);function d(e){if((!a&&0!==a||e)&&l.A){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),a=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return a}var u=r(92667),h=r(71456),m=r(38293),x=r(59109),b=r(94232),p=r(65043),f=r(79600),v=r(95675),y=r(18072),g=r(67852),j=r(70579);const N=p.forwardRef(((e,t)=>{let{className:r,bsPrefix:a,as:n="div",...s}=e;return a=(0,g.oU)(a,"modal-body"),(0,j.jsx)(n,{ref:t,className:o()(r,a),...s})}));N.displayName="ModalBody";const k=N;var w=r(31602);const C=p.forwardRef(((e,t)=>{let{bsPrefix:r,className:a,contentClassName:n,centered:s,size:l,fullscreen:c,children:i,scrollable:d,...u}=e;r=(0,g.oU)(r,"modal");const h="".concat(r,"-dialog"),m="string"===typeof c?"".concat(r,"-fullscreen-").concat(c):"".concat(r,"-fullscreen");return(0,j.jsx)("div",{...u,ref:t,className:o()(h,a,l&&"".concat(r,"-").concat(l),s&&"".concat(h,"-centered"),d&&"".concat(h,"-scrollable"),c&&m),children:(0,j.jsx)("div",{className:o()("".concat(r,"-content"),n),children:i})})}));C.displayName="ModalDialog";const A=C,E=p.forwardRef(((e,t)=>{let{className:r,bsPrefix:a,as:n="div",...s}=e;return a=(0,g.oU)(a,"modal-footer"),(0,j.jsx)(n,{ref:t,className:o()(r,a),...s})}));E.displayName="ModalFooter";const T=E;var R=r(42258);const S=p.forwardRef(((e,t)=>{let{bsPrefix:r,className:a,closeLabel:n="Close",closeButton:s=!1,...l}=e;return r=(0,g.oU)(r,"modal-header"),(0,j.jsx)(R.A,{ref:t,...l,className:o()(a,r),closeLabel:n,closeButton:s})}));S.displayName="ModalHeader";const D=S;const I=(0,r(4488).A)("h4"),O=p.forwardRef(((e,t)=>{let{className:r,bsPrefix:a,as:n=I,...s}=e;return a=(0,g.oU)(a,"modal-title"),(0,j.jsx)(n,{ref:t,className:o()(r,a),...s})}));O.displayName="ModalTitle";const P=O;function F(e){return(0,j.jsx)(y.A,{...e,timeout:null})}function _(e){return(0,j.jsx)(y.A,{...e,timeout:null})}const B=p.forwardRef(((e,t)=>{let{bsPrefix:r,className:a,style:n,dialogClassName:y,contentClassName:N,children:k,dialogAs:C=A,"data-bs-theme":E,"aria-labelledby":T,"aria-describedby":R,"aria-label":S,show:D=!1,animation:I=!0,backdrop:O=!0,keyboard:P=!0,onEscapeKeyDown:B,onShow:W,onHide:U,container:M,autoFocus:H=!0,enforceFocus:z=!0,restoreFocus:G=!0,restoreFocusOptions:L,onEntered:K,onExit:q,onExiting:V,onEnter:J,onEntering:Q,onExited:X,backdropClassName:Y,manager:Z,...$}=e;const[ee,te]=(0,p.useState)({}),[re,ae]=(0,p.useState)(!1),ne=(0,p.useRef)(!1),oe=(0,p.useRef)(!1),se=(0,p.useRef)(null),[le,ce]=(0,u.A)(),ie=(0,m.A)(t,ce),de=(0,h.A)(U),ue=(0,g.Wz)();r=(0,g.oU)(r,"modal");const he=(0,p.useMemo)((()=>({onHide:de})),[de]);function me(){return Z||(0,v.R)({isRTL:ue})}function xe(e){if(!l.A)return;const t=me().getScrollbarWidth()>0,r=e.scrollHeight>(0,c.A)(e).documentElement.clientHeight;te({paddingRight:t&&!r?d():void 0,paddingLeft:!t&&r?d():void 0})}const be=(0,h.A)((()=>{le&&xe(le.dialog)}));(0,x.A)((()=>{(0,i.A)(window,"resize",be),null==se.current||se.current()}));const pe=()=>{ne.current=!0},fe=e=>{ne.current&&le&&e.target===le.dialog&&(oe.current=!0),ne.current=!1},ve=()=>{ae(!0),se.current=(0,b.A)(le.dialog,(()=>{ae(!1)}))},ye=e=>{"static"!==O?oe.current||e.target!==e.currentTarget?oe.current=!1:null==U||U():(e=>{e.target===e.currentTarget&&ve()})(e)},ge=(0,p.useCallback)((e=>(0,j.jsx)("div",{...e,className:o()("".concat(r,"-backdrop"),Y,!I&&"show")})),[I,Y,r]),je={...n,...ee};je.display="block";return(0,j.jsx)(w.A.Provider,{value:he,children:(0,j.jsx)(f.A,{show:D,ref:ie,backdrop:O,container:M,keyboard:!0,autoFocus:H,enforceFocus:z,restoreFocus:G,restoreFocusOptions:L,onEscapeKeyDown:e=>{P?null==B||B(e):(e.preventDefault(),"static"===O&&ve())},onShow:W,onHide:U,onEnter:(e,t)=>{e&&xe(e),null==J||J(e,t)},onEntering:(e,t)=>{null==Q||Q(e,t),(0,s.Ay)(window,"resize",be)},onEntered:K,onExit:e=>{null==se.current||se.current(),null==q||q(e)},onExiting:V,onExited:e=>{e&&(e.style.display=""),null==X||X(e),(0,i.A)(window,"resize",be)},manager:me(),transition:I?F:void 0,backdropTransition:I?_:void 0,renderBackdrop:ge,renderDialog:e=>(0,j.jsx)("div",{role:"dialog",...e,style:je,className:o()(a,r,re&&"".concat(r,"-static"),!I&&"show"),onClick:O?ye:void 0,onMouseUp:fe,"data-bs-theme":E,"aria-label":S,"aria-labelledby":T,"aria-describedby":R,children:(0,j.jsx)(C,{...$,onMouseDown:pe,className:y,contentClassName:N,children:k})})})})}));B.displayName="Modal";const W=Object.assign(B,{Body:k,Header:D,Title:P,Footer:T,Dialog:A,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150})},64196:(e,t,r)=>{r.d(t,{A:()=>c});var a=r(98139),n=r.n(a),o=r(65043),s=r(67852),l=r(70579);const c=o.forwardRef(((e,t)=>{let{bsPrefix:r,className:a,striped:o,bordered:c,borderless:i,hover:d,size:u,variant:h,responsive:m,...x}=e;const b=(0,s.oU)(r,"table"),p=n()(a,b,h&&"".concat(b,"-").concat(h),u&&"".concat(b,"-").concat(u),o&&"".concat(b,"-").concat("string"===typeof o?"striped-".concat(o):"striped"),c&&"".concat(b,"-bordered"),i&&"".concat(b,"-borderless"),d&&"".concat(b,"-hover")),f=(0,l.jsx)("table",{...x,className:p,ref:t});if(m){let e="".concat(b,"-responsive");return"string"===typeof m&&(e="".concat(e,"-").concat(m)),(0,l.jsx)("div",{className:e,children:f})}return f}))},95702:(e,t,r)=>{var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=r(65043),o=l(n),s=l(r(65173));function l(e){return e&&e.__esModule?e:{default:e}}var c={table:s.default.string.isRequired,filename:s.default.string.isRequired,sheet:s.default.string.isRequired,id:s.default.string,className:s.default.string,buttonText:s.default.string},i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleDownload=r.handleDownload.bind(r),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"handleDownload",value:function(){if(!document)return null;if(1!==document.getElementById(this.props.table).nodeType||"TABLE"!==document.getElementById(this.props.table).nodeName)return null;var e=document.getElementById(this.props.table).outerHTML,r=String(this.props.sheet),a=String(this.props.filename)+".xls",n={worksheet:r||"Worksheet",table:e};if(window.navigator.msSaveOrOpenBlob){var o=new Blob(['<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><meta charset="UTF-8">\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body>'+e+"</body></html>"]);return document.getElementById("react-html-table-to-excel").click()((function(){window.navigator.msSaveOrOpenBlob(o,a)})),!0}var s=window.document.createElement("a");return s.href="data:application/vnd.ms-excel;base64,"+t.base64(t.format('<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><meta charset="UTF-8">\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body>{table}</body></html>',n)),s.download=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),!0}},{key:"render",value:function(){return o.default.createElement("button",{id:this.props.id,className:this.props.className,type:"button",onClick:this.handleDownload},this.props.buttonText)}}],[{key:"base64",value:function(e){return window.btoa(unescape(encodeURIComponent(e)))}},{key:"format",value:function(e,t){return e.replace(/{(\w+)}/g,(function(e,r){return t[r]}))}}]),t}(n.Component);i.propTypes=c,i.defaultProps={id:"button-download-as-xls",className:"button-download",buttonText:"Download"},t.A=i}}]);
//# sourceMappingURL=4739.e94b7f8a.chunk.js.map