"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[1548],{91548:(e,a,l)=>{l.r(a),l.d(a,{default:()=>_});var t=l(65043),n=l(72777),s=l(22019),i=l(94434),o=l(73575),d=l(27108),r=l(94516),c=l(67784),u=l(53193),v=l(18356),m=l(72221),p=l(32143),h=l(94496),b=l(59135),x=l(14282),g=l(35475),y=l(11238),j=l(70579);const _=e=>{let{title:a}=e;const l=(new Date).toISOString().split("T")[0],[_,f]=(0,t.useState)(!1),[N,A]=(0,t.useState)(null),[C,w]=(0,t.useState)(1),[T,k]=(0,t.useState)([]),[S,I]=(0,t.useState)(null),[B,R]=(0,t.useState)(0),[D,M]=(0,t.useState)(!1),[E,O]=(0,t.useState)([]),[P,F]=(0,t.useState)(10),[W,L]=(0,t.useState)({customer_mobile:"",response:"",start_date:"",end_date:"",txn_id:"",type:"",bank:"",addhar_no:""}),z=[{value:"",label:"All"},{value:"CW",label:"Cash Withdraw"},{value:"BE",label:"Balance Enquiry"},{value:"MS",label:"Mini Statement"},{value:"CD",label:"Cash Deposit"}],U=e=>{const{name:a,value:l}=e.target;L((e=>({...e,[a]:l})))},q=(e,a)=>{L((l=>({...l,[a]:e})))};(0,t.useEffect)((()=>{(async()=>{try{var e;let l=await(0,o.EpH)();var a;!1===(null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.error)?k((null===(a=l.data)||void 0===a?void 0:a.data)||[]):k([])}catch(l){console.error(l),k([])}})()}),[]);(0,t.useEffect)((()=>{(async()=>{f(!0);try{var e;const d=await(0,o.$m7)({...W,retailer_id:(null===S||void 0===S?void 0:S._id)||"",page:C,limit:P});var a,l,t,n,i;!1===(null===d||void 0===d||null===(e=d.data)||void 0===e?void 0:e.error)?(O((null===(a=d.data)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.aepsAllTxns)||[]),R((null===(t=d.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.totalTxns)||0)):(O([]),R(0),s.Ay.error((null===(i=d.data)||void 0===i?void 0:i.message)||"Something went wrong"))}catch(d){}finally{f(!1)}})()}),[D,C,P]);const H=Math.ceil(B/P);return(0,j.jsxs)(j.Fragment,{children:[_&&(0,j.jsx)(n.A,{}),a&&(0,j.jsx)("h3",{className:"mt-3 mb-3",style:{color:"var(--bs-primary2)",fontWeight:700,borderBottom:"1px solid var(--bs-primary2)",paddingBottom:"8px"},children:a}),(0,j.jsx)("div",{className:"card",children:(0,j.jsx)("div",{className:"card-body",children:(0,j.jsx)("form",{children:(0,j.jsxs)("div",{className:"form-row",style:{alignItems:"end"},children:[(0,j.jsxs)("div",{className:"form-group col-md-4",children:[(0,j.jsx)("label",{children:"Start Date"}),(0,j.jsx)("input",{type:"date",name:"start_date",className:"form-control input-white-bg",max:l,value:W.start_date,onChange:U})]}),(0,j.jsxs)("div",{className:"form-group col-md-4",children:[(0,j.jsx)("label",{children:"End Date"}),(0,j.jsx)("input",{type:"date",name:"end_date",className:"form-control input-white-bg",min:W.start_date,max:l,value:W.end_date,onChange:U})]}),(0,j.jsxs)("div",{className:"form-group col-md-4",children:[(0,j.jsx)("label",{children:"Aadhaar Number"}),(0,j.jsx)("input",{type:"text",name:"addhar_no",className:"form-control bs-autofill-fix",placeholder:"Enter Last 4 Aadhaar Digits",value:W.addhar_no,maxLength:4,onChange:e=>{const a=e.target.value.replace(/\D/g,"");L((e=>({...e,addhar_no:a})))},onWheel:e=>e.target.blur()})]}),(0,j.jsxs)("div",{className:"form-group col-md-4",children:[(0,j.jsx)("label",{children:"Txn Id"}),(0,j.jsx)("input",{type:"text",name:"txn_id",className:"form-control bs-autofill-fix",placeholder:"Enter Txn Id",value:W.txn_id,onChange:U})]}),(0,j.jsxs)("div",{className:"form-group col-md-4",children:[(0,j.jsx)("label",{children:"Type"}),(0,j.jsx)(i.A,{style:{width:"100%"},value:W.type,onChange:e=>q(e,"type"),options:z})]}),(0,j.jsxs)("div",{className:"form-group col-md-4",children:[(0,j.jsx)("label",{children:"Status"}),(0,j.jsx)(i.A,{style:{width:"100%"},value:W.response,onChange:e=>q(e,"response"),options:[{value:"",label:"All"},{value:"1",label:"Pending"},{value:"2",label:"Success"},{value:"3",label:"Failed"},{value:"4",label:"Refunded"}]})]}),(0,j.jsxs)("div",{className:"form-group col-md-4",children:[(0,j.jsx)("label",{children:"Select Retailer"}),(0,j.jsx)(d.A,{options:T,getOptionLabel:e=>e.name||"",value:null!==S&&void 0!==S?S:null,size:"small",onChange:(e,a)=>I(a),renderOption:(e,a)=>(0,t.createElement)("li",{...e,key:a.retailer_id},(0,j.jsx)(r.A,{sx:{fontSize:"13px"},children:a.name})),renderInput:e=>(0,j.jsx)(c.A,{...e,label:"Select Retailer",InputLabelProps:{sx:{"&.MuiInputLabel-root:not(.MuiInputLabel-shrink)":{top:"-3px"}}},sx:{"& label.Mui-focused":{color:"#8b8b8bff"},"& .MuiInputBase-root":{backgroundColor:"#fff"},"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#ced4da"},"&.Mui-focused fieldset":{borderColor:"#ced4da"}}}})})]}),(0,j.jsxs)("div",{className:"form-group col-md-12",children:[(0,j.jsx)("button",{type:"button",className:"btn mr-3 text-white",style:{backgroundColor:"#6C757D"},onClick:()=>{W.customer_mobile&&10!==W.customer_mobile.length?s.Ay.error("Please enter a valid 10-digit customer mobile number"):W.addhar_no&&4!==W.addhar_no.length?s.Ay.error("Please enter last 4 digits of Aadhaar number"):W.start_date&&!W.end_date||!W.start_date&&W.end_date?s.Ay.error("Please select both Start Date and End Date"):(w(1),M((e=>!e)))},children:"Search"}),(0,j.jsx)("button",{type:"button",className:"btn btn-light",style:{backgroundColor:"#F8F9FA"},onClick:()=>{L({customer_mobile:"",response:"",start_date:"",end_date:"",txn_id:"",type:"",bank:"",addhar_no:""}),I(null),M((e=>!e)),F(10),w(1)},children:"Reset"})]})]})})})}),(0,j.jsx)("div",{className:"card mt-4",style:{overflow:"auto"},children:(0,j.jsxs)("div",{className:"card-body",children:[(0,j.jsxs)("div",{id:"myTable_wrapper",className:"dataTables_wrapper no-footer",children:[(0,j.jsx)("div",{className:"d-flex  justify-content-end align-items-center",children:(0,j.jsx)("div",{className:"dataTables_length mb-3",id:"myTable_length",children:(0,j.jsx)(x.A,{className:"btn btn-success cusxel",onClick:async()=>{try{var e,a,l;f(!0);const d=await(0,o.Uk4)({...W,retailer_id:(null===S||void 0===S?void 0:S._id)||""});if((null===d||void 0===d||null===(e=d.data)||void 0===e||null===(a=e.data)||void 0===a||null===(l=a.aepsAllTxns)||void 0===l?void 0:l.length)>0){var t,n,i;const e=null===d||void 0===d||null===(t=d.data)||void 0===t||null===(n=t.data)||void 0===n||null===(i=n.aepsAllTxns)||void 0===i?void 0:i.map(((e,a)=>{var l;return{"Sr. No":a+1,"Date / Time":(null===e||void 0===e?void 0:e.createdAt)||"","Transaction ID":(null===e||void 0===e?void 0:e.txn_id)||"","Bank RRN":(null===e||void 0===e?void 0:e.bank_rrn)||"","Bank Name":(null===e||void 0===e?void 0:e.bank_name)||"",Amount:(null===e||void 0===e?void 0:e.amount)||"","Balance Amount":(null===e||void 0===e?void 0:e.bal_amount)||"","Opening Balance":(null===e||void 0===e?void 0:e.opening_balance)||"","Closing Balance":(null===e||void 0===e?void 0:e.closing_balance)||"","Transaction Type":(null===z||void 0===z||null===(l=z.find((a=>(null===a||void 0===a?void 0:a.value)===(null===e||void 0===e?void 0:e.type))))||void 0===l?void 0:l.label)||(null===e||void 0===e?void 0:e.type)||"",Status:2===(null===e||void 0===e?void 0:e.response)?"Success":1===(null===e||void 0===e?void 0:e.response)?"Pending":3===(null===e||void 0===e?void 0:e.response)?"Failed":4===(null===e||void 0===e?void 0:e.response)?"Refund":"Unknown",Message:(null===e||void 0===e?void 0:e.message)||"","Aadhaar Number":(null===e||void 0===e?void 0:e.adhaar_no)||"","Last 4 Aadhaar":(null===e||void 0===e?void 0:e.last_adhar)||"","Customer Mobile":(null===e||void 0===e?void 0:e.customer_mobile)||"","Retailer Name":(null===e||void 0===e?void 0:e.retailer_name)||"","Retailer Mobile":(null===e||void 0===e?void 0:e.retailer_mobile)||"","Retailer Refer ID":(null===e||void 0===e?void 0:e.retailer_refer_id)||"","Created By Name":(null===e||void 0===e?void 0:e.CreatedBy_name)||"","Created By Mobile":(null===e||void 0===e?void 0:e.CreatedBy_mobile)||"","Created By Refer ID":(null===e||void 0===e?void 0:e.CreatedBy_refer_id)||"","Status Update Time":(null===e||void 0===e?void 0:e.status_update_time)||""}})),a=y.Wp.json_to_sheet(e),l=y.Wp.book_new();y.Wp.book_append_sheet(l,a,"AEPS Report"),y._h(l,"AEPS_Report_".concat((new Date).toLocaleDateString(),".xlsx"))}else s.Ay.error("No data available to export!")}catch(d){s.Ay.error("Failed to download Excel. Please try again.")}finally{f(!1)}},children:"Download Excel sheet"})})}),(0,j.jsx)("div",{className:"table-responsive",style:{maxHeight:"60vh",overflow:"auto",borderRadius:"10px",border:"1px solid #eaeaea"},children:(0,j.jsxs)("table",{className:"table table-hover table-bordered mb-0",style:{whiteSpace:"nowrap"},children:[(0,j.jsx)("thead",{style:{position:"sticky",top:0,zIndex:2,background:"#f8f9fa"},children:(0,j.jsxs)("tr",{role:"row",children:[(0,j.jsx)("th",{className:"sorting",children:"S.No"}),(0,j.jsx)("th",{className:"sorting",children:"Txn Date"}),(0,j.jsx)("th",{className:"sorting",children:"Txn Id"}),(0,j.jsx)("th",{className:"sorting",children:"Aadhaar Number "}),(0,j.jsx)("th",{className:"sorting",children:"Bank Name"}),(0,j.jsx)("th",{className:"sorting",children:"Opening Balance"}),(0,j.jsx)("th",{className:"sorting",children:"Amount"}),(0,j.jsx)("th",{className:"sorting",children:"Closing Balance"}),(0,j.jsx)("th",{className:"sorting",children:"Txn Status"}),(0,j.jsx)("th",{className:"sorting",children:"Transaction Type"}),(0,j.jsx)("th",{className:"sorting",children:"Retailer Name"}),(0,j.jsx)("th",{className:"sorting",children:"Retailer Code"}),(0,j.jsx)("th",{className:"sorting",children:"Retailer Number"}),(0,j.jsx)("th",{className:"sorting",children:"Status Update At"}),(0,j.jsx)("th",{className:"sorting",children:"Enquiry"}),(0,j.jsx)("th",{className:"sorting",children:"Invoice"}),(0,j.jsx)("th",{className:"sorting",children:"Dispute"})]})}),(0,j.jsxs)("tbody",{children:[null===E||void 0===E?void 0:E.map(((e,a)=>{var l;return(0,j.jsxs)("tr",{className:"odd",children:[(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:a+1+(C-1)*P}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.createdAt}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:(null===e||void 0===e?void 0:e.txn_id)||"---"}),(0,j.jsxs)("td",{valign:"top",className:"dataTables_empty",children:["********",null===e||void 0===e?void 0:e.last_adhar]}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.bank_name}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.opening_balance}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.amount}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.closing_balance}),(0,j.jsxs)("td",{valign:"top",className:"dataTables_empty",children:[1==(null===e||void 0===e?void 0:e.response)?(0,j.jsx)("button",{className:"btn btn-warning",style:{width:"130px"},children:"Pending"}):"",2==(null===e||void 0===e?void 0:e.response)?(0,j.jsx)("button",{className:"btn btn-success",style:{width:"130px"},children:"Success"}):"",3==(null===e||void 0===e?void 0:e.response)?(0,j.jsx)("button",{className:"btn btn-danger",style:{width:"130px"},children:"Failed"}):"",4==(null===e||void 0===e?void 0:e.response)?(0,j.jsx)("button",{className:"btn btn-light",style:{width:"130px"},children:"Refunded"}):"",5==(null===e||void 0===e?void 0:e.response)?(0,j.jsx)("button",{className:"btn btn-light",style:{width:"130px"},children:"Not Initiated"}):""]}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===z||void 0===z||null===(l=z.find((a=>(null===a||void 0===a?void 0:a.value)===(null===e||void 0===e?void 0:e.type))))||void 0===l?void 0:l.label}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.retailer_name}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.retailer_refer_id}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.retailer_mobile}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.status_update_time}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:(0,j.jsx)(x.A,{onClick:()=>(async e=>{f(!0);try{var a;let n=await(0,o.jMM)(e);var l,t;!1===(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.error)?(s.Ay.success(null===(l=n.data)||void 0===l?void 0:l.message),M((e=>!e))):s.Ay.error(null===(t=n.data)||void 0===t?void 0:t.message)}catch(n){}finally{f(!1)}})(null===e||void 0===e?void 0:e._id),disabled:1!==(null===e||void 0===e?void 0:e.response)||_,children:"Enquiry"})}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:(0,j.jsx)(g.N_,{className:"btn btn-primary",to:"/aeps-invoice/".concat(null===e||void 0===e?void 0:e._id),children:"Invoice"})}),(0,j.jsx)("td",{valign:"top",className:"dataTables_empty",children:(0,j.jsx)(g.N_,{className:"btn btn-primary",to:"/add-ticket/".concat(null===e||void 0===e?void 0:e._id),state:{item:e,serviceId:"".concat(null===e||void 0===e?void 0:e._id)},children:(0,j.jsx)("span",{style:{color:"#fff"},children:"Dispute"})})})]},null===e||void 0===e?void 0:e._id)})),0===(null===E||void 0===E?void 0:E.length)&&(0,j.jsx)("td",{style:{textAlign:"center"},colSpan:17,valign:"top",className:"dataTables_empty",children:"No Record Found"})]})]})})]}),(0,j.jsxs)(r.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2,flexWrap:"wrap",gap:2,children:[(0,j.jsxs)(r.A,{display:"flex",alignItems:"center",gap:2,children:[(0,j.jsxs)(u.A,{size:"small",sx:{width:"150px"},children:[(0,j.jsx)(v.A,{children:"Rows per page"}),(0,j.jsx)(m.A,{value:P,onChange:e=>{F(e.target.value),w(1)},label:"Rows per page",sx:{fontSize:"14px","& .MuiOutlinedInput-notchedOutline":{borderColor:"#ccc"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"var(--bs-primary1)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"var(--bs-primary1)"}},children:[5,10,25,50].map((e=>(0,j.jsx)(p.A,{value:e,children:e},e)))})]}),(0,j.jsxs)(h.A,{variant:"body2",sx:{fontSize:"14px",color:"#555"},children:["Total Entries: ",B]})]}),(0,j.jsx)(b.A,{count:H,page:C,onChange:(e,a)=>{w(a)},shape:"rounded",showFirstButton:!0,showLastButton:!0,sx:{"& .MuiPaginationItem-root":{color:"var(--bs-primary1)",borderRadius:"8px"},"& .MuiPaginationItem-root.Mui-selected":{backgroundColor:"var(--bs-primary1)",color:"#fff",fontWeight:"bold","&:hover":{backgroundColor:"var(--bs-primary1)"}}}})]})]})})]})}},14140:(e,a,l)=>{l.d(a,{Am:()=>i,Ay:()=>d});var t=l(65043),n=l(70579);const s=["as","disabled"];function i(e){let{tagName:a,disabled:l,href:t,target:n,rel:s,role:i,onClick:o,tabIndex:d=0,type:r}=e;a||(a=null!=t||null!=n||null!=s?"a":"button");const c={tagName:a};if("button"===a)return[{type:r||"button",disabled:l},c];const u=e=>{(l||"a"===a&&function(e){return!e||"#"===e.trim()}(t))&&e.preventDefault(),l?e.stopPropagation():null==o||o(e)};return"a"===a&&(t||(t="#"),l&&(t=void 0)),[{role:null!=i?i:"button",disabled:void 0,tabIndex:l?void 0:d,href:t,target:"a"===a?n:void 0,"aria-disabled":l||void 0,rel:"a"===a?s:void 0,onClick:u,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),u(e))}},c]}const o=t.forwardRef(((e,a)=>{let{as:l,disabled:t}=e,o=function(e,a){if(null==e)return{};var l,t,n={},s=Object.keys(e);for(t=0;t<s.length;t++)l=s[t],a.indexOf(l)>=0||(n[l]=e[l]);return n}(e,s);const[d,{tagName:r}]=i(Object.assign({tagName:l,disabled:t},o));return(0,n.jsx)(r,Object.assign({},o,d,{ref:a}))}));o.displayName="Button";const d=o},14282:(e,a,l)=>{l.d(a,{A:()=>c});var t=l(98139),n=l.n(t),s=l(65043),i=l(14140),o=l(67852),d=l(70579);const r=s.forwardRef(((e,a)=>{let{as:l,bsPrefix:t,variant:s="primary",size:r,active:c=!1,disabled:u=!1,className:v,...m}=e;const p=(0,o.oU)(t,"btn"),[h,{tagName:b}]=(0,i.Am)({tagName:l,disabled:u,...m}),x=b;return(0,d.jsx)(x,{...h,...m,ref:a,disabled:u,className:n()(v,p,c&&"active",s&&"".concat(p,"-").concat(s),r&&"".concat(p,"-").concat(r),m.href&&u&&"disabled")})}));r.displayName="Button";const c=r},67852:(e,a,l)=>{l.d(a,{Jm:()=>u,Wz:()=>v,gy:()=>c,oU:()=>r});var t=l(65043);l(70579);const n=["xxl","xl","lg","md","sm","xs"],s="xs",i=t.createContext({prefixes:{},breakpoints:n,minBreakpoint:s}),{Consumer:o,Provider:d}=i;function r(e,a){const{prefixes:l}=(0,t.useContext)(i);return e||l[a]||a}function c(){const{breakpoints:e}=(0,t.useContext)(i);return e}function u(){const{minBreakpoint:e}=(0,t.useContext)(i);return e}function v(){const{dir:e}=(0,t.useContext)(i);return"rtl"===e}}}]);
//# sourceMappingURL=1548.b7cb3185.chunk.js.map