"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[9709],{21151:(e,a,t)=>{t.d(a,{d:()=>s});var r=t(22019),n=t(73575);const s=async(e,a,t,s)=>{try{var i;a(!0);const l=await(0,n.zI2)(e),{error:d,statusCode:o}=null===l||void 0===l?void 0:l.data,c=(null===l||void 0===l||null===(i=l.data)||void 0===i?void 0:i.message)||(null===l||void 0===l?void 0:l.message);if(!1===d)r.Ay.success(c),s&&s(t);else if(!0===d)r.Ay.error(c);else if(300===o)r.Ay.info(c);else r.Ay.warning(c);return l.data}catch(o){var l,d;throw console.error("Inquiry error:",o),r.Ay.error((null===(l=o.response)||void 0===l||null===(d=l.data)||void 0===d?void 0:d.message)||"An error occurred during inquiry"),o}finally{a(!1)}}},39709:(e,a,t)=>{t.r(a),t.d(a,{default:()=>E});var r=t(65043),n=t(34535),s=t(10039),i=t(61596),l=t(68903),d=t(94516),o=t(67784),c=t(11906),x=t(79650),u=t(71806),h=t(84882),m=t(28076),p=t(73460),j=t(81637),b=t(17392),v=t(72221),A=t(32143),g=t(59135),y=t(79484),f=t(30079),_=t(3632),C=t(95702),S=t(73575),k=t(21151),w=t(73216),I=t(22019),T=t(70579);const D=(0,n.Ay)(s.A)((e=>{let{theme:a}=e;return{fontWeight:"bold",backgroundColor:a.palette.action.hover,color:"var(--bs-primary2)"}}));const E=function(){const e=(0,w.Zp)(),[a,t]=(0,r.useState)(!1),[n,E]=(0,r.useState)(!1),[N,z]=(0,r.useState)(10),[R,W]=(0,r.useState)(0),[P,B]=(0,r.useState)(0),[F,U]=(0,r.useState)([]),[q,O]=(0,r.useState)([]),Y=(0,r.useRef)(10),L={1:{text:"Pending",bg:"#f59e0b"},2:{text:"Success",bg:"#16a34a"},3:{text:"Failed",bg:"#dc2626"},4:{text:"Refund",bg:"#2563eb"}},H=()=>(new Date).toISOString().split("T")[0],[M,Z]=(0,r.useState)({biller_id:"",txn_id:"",start_date:"",end_date:"",min_amt:"",max_amt:""}),G=e=>{const{name:a,value:t}=e.target;Z((e=>"start_date"===a&&e.end_date&&t>e.end_date?{...e,start_date:t,end_date:t}:{...e,[a]:t}))},J=(0,r.useCallback)((async(e,a)=>{t(!0);const r=void 0!==a?a:Y.current;try{var n,s;const a={...M,count:r,page:e||0},t=Object.entries(a).reduce(((e,a)=>{let[t,r]=a;return void 0!==r&&null!==r&&""!==r&&(e[t]=r),e}),{}),i=await(0,S.Dz)(t);B((null===i||void 0===i||null===(n=i.data)||void 0===n?void 0:n.totalCount)||0),U((null===i||void 0===i||null===(s=i.data)||void 0===s?void 0:s.data)||[])}catch(i){console.error("Error fetching transition report:",i),U([])}t(!1)}),[M]);(0,r.useEffect)((()=>{Z({biller_id:"",txn_id:"",start_date:"",end_date:"",min_amt:"",max_amt:""}),J(0)}),[]);const K=(0,r.useCallback)((e=>{const a=e.target.value;Y.current=a,z(a),W(0),Z((e=>({...e,count:a,page:0}))),J(0,a)}),[J]);return(0,T.jsx)(T.Fragment,{children:(0,T.jsxs)(i.A,{sx:{p:3},children:[(0,T.jsx)("div",{className:"PageHeading",children:(0,T.jsx)("h1",{children:"Utility Transaction Report"})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,children:(0,T.jsx)(d.A,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",mt:3,mb:2}})}),(0,T.jsxs)(l.Ay,{container:!0,spacing:3,alignItems:"center",sx:{mb:4},children:[(0,T.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,T.jsx)(o.A,{label:"Start Date",type:"date",name:"start_date",className:"input-white-bg",value:M.start_date,onChange:G,inputProps:{max:H()},fullWidth:!0,variant:"outlined",InputLabelProps:{shrink:!0}})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,T.jsx)(o.A,{label:"End Date",type:"date",name:"end_date",className:"input-white-bg",value:M.end_date,onChange:G,fullWidth:!0,variant:"outlined",InputLabelProps:{shrink:!0},inputProps:{min:M.start_date||void 0,max:H()},onBlur:()=>{M.start_date&&M.end_date&&M.end_date<M.start_date&&(I.Ay.error("End Date cannot be earlier than Start Date"),Z((e=>({...e,end_date:e.start_date}))))}})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,T.jsx)(o.A,{label:"Biller ID",name:"biller_id",value:M.biller_id,onChange:G,fullWidth:!0,variant:"outlined"})}),(0,T.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,T.jsx)(o.A,{label:"Transaction ID",name:"txn_id",value:M.txn_id,onChange:G,fullWidth:!0,variant:"outlined"})}),(0,T.jsx)(l.Ay,{container:!0,spacing:3,alignItems:"center",sx:{mb:4,mt:2,ml:4},children:(0,T.jsx)(l.Ay,{item:!0,xs:12,sm:3,md:3,children:(0,T.jsxs)(d.A,{display:"flex",justifyContent:"space-between",children:[(0,T.jsx)(c.A,{startIcon:(0,T.jsx)(y.A,{sx:{fill:"#fff"}}),variant:"contained",onClick:()=>{if(M.start_date&&M.end_date&&M.end_date<M.start_date)return I.Ay.error("End Date cannot be earlier than Start Date");W(0),J(0)},sx:{mr:1,flex:1,borderColor:"var(--bs-primary1)",backgroundColor:"#6C757D",color:"#ffffff"},children:"Search"}),(0,T.jsx)(c.A,{startIcon:(0,T.jsx)(f.A,{}),variant:"outlined",onClick:async()=>{t(!0),Z({biller_id:"",txn_id:"",start_date:"",end_date:"",min_amt:"",max_amt:""});const e={count:10,page:0,txn_id:"",biller_id:"",start_date:"",end_date:"",min_amt:"",max_amt:"",user_id:window.localStorage.getItem("userIdToken")};W(0);try{var a,r;const t=await(0,S.Dz)(e);B((null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.totalCount)||0),U((null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.data)||[])}catch(n){}t(!1)},sx:{flex:1,borderColor:"var(--bs-primary1)",color:"var(--bs-primary2)",backgroundColor:"#F8F9FA"},children:"Reset"})]})})})]}),(0,T.jsxs)(i.A,{sx:{p:3,mb:3},children:[(0,T.jsxs)("div",{className:"d-flex  justify-content-end dataTables_length mb-3",id:"myTable_length",children:[(0,T.jsx)(c.A,{className:"btn btn-success cusxel",onClick:async()=>{const e={...M,count:N,page:R,user_id:window.localStorage.getItem("userIdToken")};try{var a;const t=await(0,S.WE)(e),r=null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.data;if(console.log(r,"data"),!r||0===r.length)return void I.Ay.error("No data available to export.");O(r),setTimeout((()=>{document.getElementById("test-table-xls-button").click(),I.Ay.success("Excel file download initiated.")}),100),setTimeout((()=>{O([])}),1e3)}catch(t){console.error("Error preparing data for export:",t),I.Ay.error("Failed to prepare data for export. Please try again.")}},disabled:a,style:{backgroundColor:"#10b981",color:"var(--bs-primary2)",border:"none",borderRadius:"8px",padding:"10px 24px",fontSize:"15px",fontWeight:"600",cursor:"pointer",minWidth:"160px",height:"42px",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"end",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",opacity:a?.7:1,transform:a?"none":"translateY(0)",":hover":{backgroundColor:"#059669",transform:"translateY(-1px)"},":active":{transform:"translateY(0)"},":disabled":{backgroundColor:"#9ca3af",cursor:"not-allowed"}},children:"Download Excel sheet"}),(0,T.jsx)(C.A,{id:"test-table-xls-button",className:"download-table-xls-button d-none",table:"table-to-xlsx",filename:"Utility_Tx._Report",sheet:"Sheet1",buttonText:"Download Excel Sheet"})]}),(0,T.jsx)(x.A,{children:(0,T.jsxs)(u.A,{style:{whiteSpace:"nowrap"},children:[(0,T.jsx)(h.A,{children:(0,T.jsxs)(m.A,{sx:{backgroundColor:"#f5f5f5"},children:[(0,T.jsx)(D,{children:"S.No"}),(0,T.jsx)(D,{children:"Txn Date"}),(0,T.jsx)(D,{children:"Txn Id"}),(0,T.jsx)(D,{children:"Biller Id"}),(0,T.jsx)(D,{children:"Service Name"}),(0,T.jsx)(D,{children:"Operator Name"}),(0,T.jsx)(D,{children:"Opening Balance"}),(0,T.jsx)(D,{align:"right",children:"Amount"}),(0,T.jsx)(D,{children:"Closing Balance"}),(0,T.jsx)(D,{children:"Status"}),(0,T.jsx)(D,{children:"Status Update AT"}),(0,T.jsx)(D,{children:"Invoice"}),(0,T.jsx)(D,{children:"Enquiry"})]})}),(0,T.jsx)(p.A,{children:a?(0,T.jsx)(m.A,{children:(0,T.jsx)(s.A,{colSpan:8,align:"center",children:(0,T.jsx)(j.A,{})})}):Array.isArray(F)&&F.length>0?F.map(((a,t)=>(0,T.jsxs)(m.A,{sx:{"&:nth-of-type(odd)":{backgroundColor:"#fafafa"}},children:[(0,T.jsx)(s.A,{sx:{color:"var(--bs-primary2)"},children:t+1+R*N}),(0,T.jsx)(s.A,{sx:{color:"var(--bs-primary2)"},children:a.createdAt}),(0,T.jsx)(s.A,{sx:{color:"var(--bs-primary2)"},children:a.txn_id}),(0,T.jsx)(s.A,{sx:{color:"var(--bs-primary2)"},children:a.biller_id}),(0,T.jsx)(s.A,{sx:{color:"var(--bs-primary2)"},children:a.service_name}),(0,T.jsx)(s.A,{sx:{color:"var(--bs-primary2)"},children:a.operator_name}),(0,T.jsx)(s.A,{sx:{color:"var(--bs-primary2)"},children:null===a||void 0===a?void 0:a.open_bal}),(0,T.jsxs)(s.A,{sx:{color:"var(--bs-primary2)"},align:"right",children:["\u20b9",a.amount]}),(0,T.jsx)(s.A,{sx:{color:"var(--bs-primary2)"},children:null===a||void 0===a?void 0:a.close_bal}),(0,T.jsx)(s.A,{children:(()=>{const e=L[a.status]||{text:"Unknown",bg:"#6b7280"};return(0,T.jsx)(c.A,{variant:"contained",size:"small",sx:{backgroundColor:e.bg,color:"#fff",borderRadius:"20px",textTransform:"capitalize",fontWeight:600,minWidth:"90px","&:hover":{backgroundColor:e.bg}},children:e.text})})()}),(0,T.jsx)(s.A,{sx:{color:"var(--bs-primary2)"},children:a.status_update_time}),(0,T.jsx)(s.A,{children:(0,T.jsx)(b.A,{onClick:()=>{return t=a._id,void e("/bill-invoice/".concat(t));var t},color:"var(--bs-primary2)",children:(0,T.jsx)(_.A,{})})}),(0,T.jsx)(s.A,{children:(0,T.jsx)(c.A,{variant:"outlined",size:"small",onClick:()=>(async e=>{try{await(0,k.d)(e,E,R,J)}catch(a){console.error("Error in responseEnquiry:",a)}})(a.txn_id),sx:{borderRadius:"20px"},disabled:n||1!==a.status,children:"Enquiry"})})]},a._id))):(0,T.jsx)(m.A,{children:(0,T.jsx)(s.A,{colSpan:8,sx:{color:"var(--bs-primary2)"},align:"center",children:"No records found"})})})]})}),(0,T.jsx)(x.A,{sx:{display:"none"},children:(0,T.jsxs)(u.A,{id:"table-to-xlsx",children:[(0,T.jsx)(h.A,{children:(0,T.jsxs)(m.A,{sx:{backgroundColor:"#f5f5f5"},children:[(0,T.jsx)(D,{children:"S.No"}),(0,T.jsx)(D,{children:"Transaction Date"}),(0,T.jsx)(D,{children:"Txn Id"}),(0,T.jsx)(D,{children:"Biller Id"}),(0,T.jsx)(D,{children:"Service Name"}),(0,T.jsx)(D,{children:"Operator Name"}),(0,T.jsx)(D,{align:"right",children:"Amount"}),(0,T.jsx)(D,{children:"Response"}),(0,T.jsx)(D,{children:"Status Update AT"})]})}),(0,T.jsx)(p.A,{children:null===q||void 0===q?void 0:q.map(((e,a)=>(0,T.jsxs)(m.A,{sx:{"&:nth-of-type(odd)":{backgroundColor:"#fafafa"}},children:[(0,T.jsx)(s.A,{children:a+1+R*N}),(0,T.jsx)(s.A,{children:e.createdAt}),(0,T.jsx)(s.A,{children:e.txn_id}),(0,T.jsx)(s.A,{children:e.biller_id}),(0,T.jsx)(s.A,{children:e.service_name}),(0,T.jsx)(s.A,{children:e.operator_name}),(0,T.jsx)(s.A,{align:"right",children:e.amount}),(0,T.jsx)(s.A,{children:(0,T.jsxs)(c.A,{variant:"contained",size:"small",color:"var(--bs-primary2)",sx:{borderRadius:"20px",textTransform:"capitalize"},children:[2===e.status?"Success":1===e.status?"Pending":3===e.status?"Failed":4===e.status?"Refund":"Unknown"," "]})}),(0,T.jsx)(s.A,{children:e.status_update_time})]},e._id)))})]})})]}),(0,T.jsxs)(d.A,{gap:3,sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:3},children:[(0,T.jsxs)("div",{className:"dataTables_info",id:"empoloyees-tblwrapper_info",role:"status","aria-live":"polite",children:["Total ",P," entries"]}),(0,T.jsxs)(d.A,{gap:3,sx:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:[(0,T.jsxs)(v.A,{value:N,onChange:K,variant:"outlined",size:"small",sx:{width:100},children:[(0,T.jsx)(A.A,{value:10,children:"10 / pages"}),(0,T.jsx)(A.A,{value:20,children:"20 / pages"}),(0,T.jsx)(A.A,{value:50,children:"50 / pages"}),(0,T.jsx)(A.A,{value:100,children:"100 / pages"})]}),(0,T.jsx)(g.A,{count:Math.ceil(P/N),page:R+1,onChange:(e,a)=>{W(a-1),J(a-1)},color:"var(--bs-primary2)",size:"large"})]})]})]})})}}}]);
//# sourceMappingURL=9709.faa163bc.chunk.js.map