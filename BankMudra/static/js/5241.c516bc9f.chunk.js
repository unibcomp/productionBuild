"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[5241],{26051:(e,t,l)=>{l.r(t),l.d(t,{default:()=>C});var o=l(73216),a=l(65043),i=l(10457),n=l(27149),s=l(48555),d=l.n(s),r=l(73575),c=l(91036),u=l(95922),m=l(85369),p=l(94414),x=l(70579);const v=function(e){let{id:t,ticketUser:l}=e;const o=(0,a.useRef)(null),[s,v]=(0,a.useState)(""),[h,f]=(0,a.useState)(!0),[g,j]=(0,a.useState)([]),[b,y]=(0,a.useState)([]),[A,w]=(0,a.useState)("0"),[S,C]=(0,a.useState)({name:"",email:"",phone:""}),[N,k]=(0,a.useState)({chat:"",dispute_id:"",attachments:[]}),I=new FormData,D=()=>{v(""),y([]),w("1"),setTimeout((()=>{w("")}),0)};return(0,a.useEffect)((()=>{(async()=>{try{var e,t,l;const o=await(0,r.qMm)();C({email:null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.email,name:null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.name,phone:null===o||void 0===o||null===(l=o.data)||void 0===l?void 0:l.mobile})}catch(o){}})()}),[]),(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{className:"col-lg-12",children:(0,x.jsx)(i.A,{children:(0,x.jsxs)(i.A.Item,{eventKey:"0",children:[(0,x.jsxs)(i.A.Header,{style:{fontWeight:"700"},children:[(0,x.jsx)(n.Yvo,{className:"mr-2",style:{fontWeight:"700"}})," Reply"]}),(0,x.jsx)(i.A.Body,{children:(0,x.jsxs)("form",{action:"",method:"post",name:"frmReport",id:"frmReport",children:[(0,x.jsx)("input",{type:"hidden",id:"hidID",name:"hidID"}),(0,x.jsxs)("div",{className:"form-row",style:{alignItems:"end"},children:[(0,x.jsxs)("div",{className:"form-group col-md-4",children:[(0,x.jsxs)("label",{htmlFor:"txtUserId",children:["Name ",(0,x.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,x.jsx)("input",{type:"text",disabled:!0,name:"name",id:"account_no",placeholder:"Enter Name",className:"form-control",value:S.name})]}),(0,x.jsxs)("div",{className:"form-group col-md-4",children:[(0,x.jsxs)("label",{htmlFor:"txtUserId",children:["Email ",(0,x.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,x.jsx)("input",{type:"email",disabled:!0,name:"email",id:"account_no",placeholder:"Enter email",className:"form-control",value:S.email})]}),(0,x.jsxs)("div",{className:"form-group col-md-4",children:[(0,x.jsxs)("label",{htmlFor:"txtUserId",children:["Phone ",(0,x.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,x.jsx)("input",{type:"text",disabled:!0,name:"email",id:"account_no",placeholder:"Enter Phoen",className:"form-control",value:S.phone})]}),(0,x.jsxs)("div",{className:"form-group col-md-12",children:[(0,x.jsxs)("label",{htmlFor:"txtUserId",children:["Message ",(0,x.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,x.jsx)(d(),{ref:o,value:s,onChange:e=>v(e)})]}),(0,x.jsxs)("div",{className:"form-group form-group-img col-md-8",children:[(0,x.jsx)("input",{type:"file",class:"input-file",id:"file",name:"search",multiple:!0,onChange:async e=>{I.append("image",e.target.files[0]);if(e.target.files[0]&&["video/mp4","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/x-rar-compressed","application/x-zip-compressed","application/zip"].includes(e.target.files[0].type))alert("Warning: Only image files are allowed.");else{const s=[...b];for(let d=0;d<(null===(t=e.target.files)||void 0===t?void 0:t.length);d++){var t;try{var l,o,a,i;const t=e.target.files[d];I.set("image",t);const n=await(0,r.zGb)(I);console.log(0==(null===n||void 0===n||null===(l=n.data)||void 0===l?void 0:l.error));const c={id:Math.random(),url:null===n||void 0===n||null===(o=n.data)||void 0===o||null===(a=o.data)||void 0===a?void 0:a.url};s.push(c),0==(null===n||void 0===n||null===(i=n.data)||void 0===i?void 0:i.error)&&f(!1)}catch(n){console.log(" Image not uploaded")}}setTimeout((()=>{y(s)}),1e3)}}}),(0,x.jsxs)("label",{for:"file",class:"btn btn-upload",style:{marginBottom:"0px"},children:["Upload Images",(0,x.jsx)(m.BzO,{size:18,fill:"#fff"})]})]}),(0,x.jsx)("div",{className:"form-group col-md-2"}),(0,x.jsxs)("div",{className:"form-group col-md-2",children:[(0,x.jsx)("label",{children:"\xa0"}),(0,x.jsx)("button",{type:"button",className:"btn btn-primary mr-3",style:{width:"100%"},onClick:async()=>{const e=b.map((e=>e.url)),a={...N,chat:o.current.value,attachments:e,dispute_id:t,user_id:window.localStorage.getItem("userIdToken")};try{var i,n;const e=await(0,r.W1V)(a);var s,d;if(console.log(e),0==(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.error))u=null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message,c.oR.success("".concat(u),{position:"top-center",autoClose:2e3}),l(0),D();if(1==(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.error))(e=>{c.oR.error("".concat(e),{position:"top-center",autoClose:2e3})})(null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.message)}catch(m){}var u},children:"Submit"})]}),b&&(null===b||void 0===b?void 0:b.map((e=>(0,x.jsxs)("div",{className:"col-lg-2 img-shoe-set",children:[(0,x.jsx)("img",{src:"".concat(p.cu).concat(null===e||void 0===e?void 0:e.url),alt:"",style:{height:"100%",width:"100%"}}),(0,x.jsx)("div",{className:"crose-icon",children:(0,x.jsx)(u.TCu,{onClick:()=>{(e=>{const t=[...b].filter((t=>t.id!==e));y(t)})(e.id)},style:{color:"red",fontSize:"1.0rem"}})})]},null===e||void 0===e?void 0:e.id))))]})]})})]})})})})};var h=l(55953),f=(l(53816),l(76245)),g=l(94516),j=l(12110),b=l(94496),y=l(26494),A=l(81637),w=l(67807),S=l(61596);const C=function(){var e;const t=(0,o.g)(),[l,i]=(0,a.useState)(!1),[n,s]=(0,a.useState)(10),[d,c]=(0,a.useState)(0),[u,m]=(0,a.useState)(null),[C,N]=(0,a.useState)(null),[k]=(0,a.useState)({count:"",page:""});function I(e){return{__html:e}}const D=(0,a.useCallback)((async e=>{i(!0);const l={...k,count:n,page:e,id:null===t||void 0===t?void 0:t.id};try{var o,a;const e=await(0,r.iEZ)(l);m(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.totalCount),N(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data)}catch(s){console.error(s)}i(!1)}),[k,n,null===t||void 0===t?void 0:t.id]);return(0,a.useEffect)((()=>{D(0)}),[D]),(0,x.jsx)(g.A,{className:"ContentArea",sx:{p:3,minHeight:"100vh",background:"var(--bs-primary3)"},children:(0,x.jsxs)(j.A,{sx:{maxWidth:950,mx:"auto",borderRadius:"16px",overflow:"hidden",boxShadow:"0 8px 32px rgba(25, 57, 104, 0.3)"},children:[(0,x.jsxs)(g.A,{sx:{background:"#193968",color:"#fff",p:2.5,display:"flex",alignItems:"center",gap:2},children:[(0,x.jsx)(g.A,{sx:{width:42,height:42,borderRadius:"50%",background:"#cc9840",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:20},children:"TC"}),(0,x.jsxs)(g.A,{children:[(0,x.jsx)(b.A,{variant:"h6",sx:{fontWeight:600,lineHeight:1.2},children:"Ticket Chat"}),(0,x.jsx)(b.A,{variant:"caption",sx:{opacity:.85},children:"Dispute Resolution Center"})]})]}),(0,x.jsxs)(y.A,{sx:{background:"#f8f9fa",maxHeight:"60vh",minHeight:"50vh",overflowY:"auto",p:3},children:[l&&(0,x.jsx)(g.A,{textAlign:"center",py:4,children:(0,x.jsx)(A.A,{})}),(0,x.jsx)(w.A,{spacing:3,children:C&&(null===C||void 0===C||null===(e=C.sort(((e,t)=>new Date(e.createdAt)-new Date(t.createdAt))))||void 0===e?void 0:e.map(((e,t)=>{var l,o,a;const i="Retailer"===(null===e||void 0===e?void 0:e.operator);return(0,x.jsx)(w.A,{direction:"column",alignItems:i?"flex-end":"flex-start",children:(0,x.jsxs)(S.A,{elevation:0,sx:{maxWidth:"75%",p:2,borderRadius:i?"16px 16px 4px 16px":"16px 16px 16px 4px",background:i?"#193968":"#ffffff",color:i?"#fff":"#193968",boxShadow:i?"0 4px 12px rgba(25,57,104,0.25)":"0 2px 8px rgba(0,0,0,0.08)",border:i?"none":"1px solid #aeb9c7"},children:[(0,x.jsxs)(b.A,{variant:"subtitle2",sx:{fontWeight:700,mb:.5,fontSize:"12px",color:i?"#cc9840":"#5a7191"},children:[null===e||void 0===e||null===(l=e.by)||void 0===l?void 0:l.name," \u2022 ",null===e||void 0===e?void 0:e.operator]}),(0,x.jsx)(g.A,{dangerouslySetInnerHTML:I(null===e||void 0===e?void 0:e.chat),sx:{fontSize:"14px",lineHeight:1.65}}),(null===e||void 0===e||null===(o=e.attachments)||void 0===o?void 0:o.length)>0&&(0,x.jsx)(w.A,{direction:"row",spacing:1,mt:1.5,flexWrap:"wrap",children:null===e||void 0===e||null===(a=e.attachments)||void 0===a?void 0:a.map(((e,t)=>(0,x.jsx)(g.A,{sx:{width:110,height:110,borderRadius:"10px",overflow:"hidden",cursor:"pointer",border:"2px solid #aeb9c7"},children:(0,x.jsx)(h.A,{thumbnail:"".concat(p.cu).concat(e),image:"".concat(p.cu).concat(e)})},t)))}),(0,x.jsxs)(b.A,{sx:{mt:1,fontSize:"9px",opacity:.55,textAlign:"right",letterSpacing:"0.3px"},children:[new Date(null===e||void 0===e?void 0:e.createdAt).getDate(),"-",new Date(null===e||void 0===e?void 0:e.createdAt).getMonth()+1,"-",new Date(null===e||void 0===e?void 0:e.createdAt).getFullYear()," /",new Date(null===e||void 0===e?void 0:e.createdAt).getHours(),":",new Date(null===e||void 0===e?void 0:e.createdAt).getMinutes()]})]})},t)})))})]}),(0,x.jsx)(g.A,{sx:{p:2,background:"#fff",borderTop:"1px solid #aeb9c7"},children:(0,x.jsx)(v,{id:null===t||void 0===t?void 0:t.id,ticketUser:D})}),(0,x.jsx)(g.A,{sx:{p:2,background:"#f8f9fa",borderTop:"1px solid #aeb9c7",display:"flex",justifyContent:"center"},children:(0,x.jsx)(f.A,{defaultCurrent:1,onChange:e=>{c(e-1),D(e-1)},total:u})})]})})}}}]);
//# sourceMappingURL=5241.c516bc9f.chunk.js.map