"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[840],{840:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var s=a(65043),r=a(38628),n=a(64196),l=a(14282),o=a(25284),i=a(73722),d=a(76245),c=a(85369),u=a(73216),h=a(91036),m=(a(95702),a(72777)),x=a(73575),f=(a(76323),a(1281)),p=a(47943),v=a(70579);const b=function(e){let{walletShowHeader:t}=e;const[a,b]=(0,s.useState)(!1),[j,y]=(0,s.useState)([]),[g,N]=(0,s.useState)(0),[A,w]=(0,s.useState)(0),[k,S]=(0,s.useState)(10),[C,T]=(0,s.useState)(!1),[R,_]=(0,s.useState)(null),[E,P]=(0,s.useState)(null),[I,O]=(0,s.useState)(1),D=(0,u.Zp)(),[B,W]=(0,s.useState)(""),[L,U]=(0,s.useState)({}),[F,M]=(0,s.useState)({userId:"",name:"",email:"",mobile:"",is_approved:"",refer_id:""}),[G,z]=(0,s.useState)(!1),H=localStorage.getItem("userType"),V=localStorage.getItem("userTypeId"),[q,K]=(window.localStorage.getItem("userToken"),(0,s.useState)(!1)),[Z,Y]=(0,s.useState)(!1),[X,Q]=(0,s.useState)(""),[J,$]=(0,s.useState)(""),[ee,te]=(0,s.useState)(!1),[ae,se]=(0,s.useState)(""),[re,ne]=(0,s.useState)(!1),[le,oe]=(0,s.useState)(["","","","","",""]),[ie,de]=(0,s.useState)(120),[ce,ue]=(0,s.useState)(!1),[he,me]=(0,s.useState)(!1),[xe,fe]=(0,s.useState)(!1),[pe,ve]=(0,s.useState)(""),[be,je]=(0,s.useState)(""),[ye,ge]=(0,s.useState)(),[Ne,Ae]=(0,s.useState)(new Array(6).fill("")),[we,ke]=((0,s.useRef)([]),(0,s.useState)(null)),[Se,Ce]=(0,s.useState)(null),[Te,Re]=(0,s.useState)(null),[_e,Ee]=(0,s.useState)(""),[Pe,Ie]=(0,s.useState)({}),[Oe,De]=(0,s.useState)(!1),[Be,We]=(0,s.useState)(1),Le=(Array(30).fill().map(((e,t)=>({_id:"user".concat(t+1),refer_id:"REF00".concat(t+1),name:"User ".concat(t+1),is_approved:t%2===0,main_wallet:3e3+500*t,subUsers:Array(Math.floor(20*Math.random())+10).fill().map(((e,a)=>({_id:"subuser".concat(t+1,"_").concat(a+1),refer_id:"SUB00".concat(t+1,"_").concat(a+1),name:"Retailer ".concat(t+1,"-").concat(a+1),is_approved:a%2===0,main_wallet:1e3+200*a})))}))),()=>new Promise(((e,t)=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition((t=>{ke(t.coords.latitude),Ce(t.coords.longitude),Re(null),e(!0)}),(e=>{Re("Unable to retrieve your location")})):Re("Geolocation is not supported by your browser")})));Ne.includes(""),console.log("walletData",L),(0,s.useEffect)((()=>{Ue()}),[I,k]);const Ue=async function(){b(!0);try{var e,t,a,s;let r;r="Distributor"===H?await(0,x.XCx)(I-1,k,V,F):await(0,x.XCx)(I-1,k,"",F),y((null===(e=r)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data)||[]),N((null===(a=r)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.totalCount)||0)}catch(r){console.error("Error fetching users:",r),h.oR.error("Failed to fetch users"),y([]),N(0)}b(!1)},Fe=e=>{_(e),T(!0)},Me=e=>{We(e-1)},Ge=e=>{const t=10*(Be-1),a=t+10;return e.slice(t,a)},ze=async()=>{try{var e;const t=await(0,x.aQK)();console.log("Wallet",t),U(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.data)}catch(t){}};(0,s.useEffect)((()=>{ze(),(async()=>{try{var e;const t=await(0,x.mQ9)();Ie(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.data)}catch(t){}})()}),[]),(0,s.useEffect)((()=>{(q||Z)&&Le()}),[q,Z]);const He=e=>{_(e),te(!0)},Ve=()=>{W(""),se(""),Q(""),Ee(""),$(""),Ae(new Array(6).fill("")),ve(""),je(""),z(!1),De(!1)},qe=e=>{D("/user-report/".concat(e))};return(0,v.jsxs)(v.Fragment,{children:[a&&(0,v.jsx)(m.A,{}),(0,v.jsxs)("div",{className:"container-fluid",children:[(0,v.jsx)("h1",{className:"h3 mb-2 text-gray-800",children:"Downstream Users"}),(0,v.jsxs)(r.A,{className:"shadow mb-4",children:[(0,v.jsx)("div",{className:"card-header py-3 d-flex justify-content-between align-items-center",children:(0,v.jsxs)("span",{children:[" ","Super Distributor"===H?"Distributor":"Retailer"]})}),(0,v.jsxs)(r.A.Body,{children:[(0,v.jsx)("div",{className:"table-responsive",children:"Super Distributor"===H?(0,v.jsxs)(n.A,{className:"table-hover",id:"dataTable",children:[(0,v.jsx)("thead",{className:"bg-light",children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"S.No"}),(0,v.jsx)("th",{children:"Refer ID"}),(0,v.jsx)("th",{children:"Name"}),(0,v.jsx)("th",{children:"Approved"}),(0,v.jsx)("th",{children:"Userlist"}),(0,v.jsx)("th",{children:"Transfer"}),(0,v.jsx)("th",{children:"Reverse Transfer"}),(0,v.jsx)("th",{children:"Wallet Balance"}),(0,v.jsx)("th",{children:"Report"})]})}),(0,v.jsx)("tbody",{children:j.length>0?j.map(((e,t)=>(0,v.jsxs)(s.Fragment,{children:[(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:t+1+A*k}),(0,v.jsx)("td",{children:e.refer_id}),(0,v.jsx)("td",{children:e.name}),(0,v.jsx)("td",{className:e.is_approved?"approvedstatusindownstrip":"pendingstatusindownstrip",children:e.is_approved?"Approved":"Pending"}),(0,v.jsx)("td",{children:(0,v.jsxs)(l.A,{variant:"link",onClick:()=>(async e=>{if(console.log("userId",e),E===e)P(null);else{P(e),b(!0);try{const t=await(0,x.XCx)(A,k,e),a=j.map((a=>{var s;return a._id===e?{...a,subUsers:(null===t||void 0===t||null===(s=t.data)||void 0===s?void 0:s.data)||[]}:a}));y(a),console.log("subdata",j)}catch(t){console.error("Error fetching sub-users:",t),h.oR.error("Failed to fetch sub-users")}b(!1)}})(e._id),className:"d-flex align-items-center",children:["Retailers",E===e._id?(0,v.jsx)(c.Ucs,{className:"ms-1"}):(0,v.jsx)(c.Vr3,{className:"ms-1"})]})}),(0,v.jsx)("td",{children:(0,v.jsx)(l.A,{variant:"outline-primary",size:"sm",onClick:()=>Fe(e),children:"Transfer Money"})}),(0,v.jsx)("td",{children:(0,v.jsx)(l.A,{variant:"outline-secondary",size:"sm",onClick:()=>He(e),children:"Reverse Transfer"})}),(0,v.jsx)("td",{children:(null===e||void 0===e?void 0:e.main_wallet)||0}),(0,v.jsx)("td",{children:(0,v.jsx)(l.A,{variant:"link",onClick:()=>qe(e._id),children:(0,v.jsx)(c.Ny1,{className:"text-primary"})})})]}),E===e._id&&e.subUsers&&(0,v.jsx)("tr",{children:(0,v.jsx)("td",{colSpan:"6",className:"p-0",children:(0,v.jsxs)("div",{className:"bg-light p-3 rounded",children:[(0,v.jsx)("h6",{className:"mb-3",children:"Retailer List"}),(0,v.jsxs)(n.A,{className:"table-sm table-bordered",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"S.No"}),(0,v.jsx)("th",{children:"Refer Id"}),(0,v.jsx)("th",{children:"Name"}),(0,v.jsx)("th",{children:"Status"}),(0,v.jsx)("th",{children:"Wallet Balance"})]})}),(0,v.jsx)("tbody",{children:e.subUsers.length>0?Ge(e.subUsers).map(((e,t)=>(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:10*(Be-1)+t+1}),(0,v.jsx)("td",{children:e.refer_id}),(0,v.jsx)("td",{children:e.name}),(0,v.jsx)("td",{children:e.is_approved?(0,v.jsx)("span",{className:"badge bg-success",children:"Approved"}):(0,v.jsx)("span",{className:"badge bg-warning text-dark",children:"Not Approved"})}),(0,v.jsx)("td",{children:e.main_wallet||0})]},e._id))):(0,v.jsx)("tr",{children:(0,v.jsx)("td",{colSpan:"5",className:"text-center",children:"No data available"})})})]}),(0,v.jsx)(d.A,{current:Be,total:e.subUsers.length,pageSize:10,onChange:Me,showSizeChanger:!1,className:"mt-3 justify-content-end"})]})})})]},e._id))):(0,v.jsx)("tr",{children:(0,v.jsx)("td",{colSpan:"6",className:"text-center",children:"No data available"})})})]}):"Distributor"===H?(0,v.jsxs)(n.A,{className:"table-hover",id:"dataTable",children:[(0,v.jsx)("thead",{className:"bg-light",children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"S.No"}),(0,v.jsx)("th",{children:"Refer ID"}),(0,v.jsx)("th",{children:"Name"}),(0,v.jsx)("th",{children:"Approved"}),(0,v.jsx)("th",{children:"Transfer"}),(0,v.jsx)("th",{children:"Reverse Transfer"}),(0,v.jsx)("th",{children:"Wallet Balance"}),(0,v.jsx)("th",{children:"Report"})]})}),(0,v.jsx)("tbody",{children:j.length>0?j.map(((e,t)=>(0,v.jsxs)("tr",{children:[(0,v.jsx)("td",{children:t+1+A*k}),(0,v.jsx)("td",{children:e.refer_id}),(0,v.jsx)("td",{children:e.name}),(0,v.jsx)("td",{className:e.is_approved?"approvedstatusindownstrip":"pendingstatusindownstrip",children:e.is_approved?"Approved":"Pending"}),(0,v.jsx)("td",{children:(0,v.jsx)(l.A,{variant:"outline-primary",size:"sm",onClick:()=>Fe(e),children:"Transfer Money"})}),(0,v.jsx)("td",{children:(0,v.jsx)(l.A,{variant:"outline-secondary",size:"sm",onClick:()=>He(e),children:"Reverse Transfer"})}),(0,v.jsx)("td",{children:e.main_wallet||0}),(0,v.jsx)("td",{children:(0,v.jsx)(l.A,{variant:"link",onClick:()=>qe(e._id),children:(0,v.jsx)(c.Ny1,{className:"text-primary"})})})]}))):(0,v.jsx)("tr",{children:(0,v.jsx)("td",{colSpan:"5",className:"text-center",children:"No data available"})})})]}):(0,v.jsx)("div",{className:"text-center",children:"No records available ."})}),g>0&&(0,v.jsx)(d.A,{current:I,total:g,pageSize:k,onChange:e=>{O(e)},showSizeChanger:!1,className:"mt-3 justify-content-end"})]})]})]}),(0,v.jsxs)(o.A,{style:{zIndex:1050},show:C,onHide:()=>{T(!1),Ve()},onKeyDown:e=>{"Enter"===e.key&&G&&(e.preventDefault(),Number(B)<100?h.oR.error("Amount must be at least 100 rupees"):(T(!1),K(!0)))},children:[(0,v.jsxs)(o.A.Header,{closeButton:!0,className:"d-flex justify-content-between",children:[(0,v.jsx)(o.A.Title,{children:"Transfer Money"}),(0,v.jsxs)("span",{id:"baldiv",style:{marginLeft:"20%"},children:["Balance: ",Math.max(0,((null===L||void 0===L?void 0:L.main_wallet)||0)-((null===Pe||void 0===Pe?void 0:Pe.locking_amt)||0))]})]}),(0,v.jsx)(o.A.Body,{style:{backgroundColor:"#ffffff",transform:"translateZ(0)",backfaceVisibility:"hidden"},children:(0,v.jsxs)(i.A,{children:[(0,v.jsxs)(i.A.Group,{className:"mb-3",children:[(0,v.jsx)(i.A.Label,{children:"Refer ID"}),(0,v.jsx)(i.A.Control,{type:"text",value:(null===R||void 0===R?void 0:R.refer_id)||"",readOnly:!0})]}),(0,v.jsxs)(i.A.Group,{className:"mb-3",children:[(0,v.jsx)(i.A.Label,{children:"Name"}),(0,v.jsx)(i.A.Control,{type:"text",value:(null===R||void 0===R?void 0:R.name)||"",readOnly:!0})]}),(0,v.jsxs)(i.A.Group,{className:"mb-3",children:[(0,v.jsx)(i.A.Label,{children:"Mobile"}),(0,v.jsx)(i.A.Control,{type:"text",value:(null===R||void 0===R?void 0:R.mobile)||"",readOnly:!0})]}),(0,v.jsxs)(i.A.Group,{className:"mb-3",children:[(0,v.jsx)(i.A.Label,{children:"Amount"}),(0,v.jsx)(i.A.Control,{type:"number",placeholder:"Enter amount (minimum 100)",required:!0,value:B,onChange:e=>{const t=e.target.value;W(t),z(Number(t)>=0&&Number(t)<=Number((null===L||void 0===L?void 0:L.main_wallet)-(null===Pe||void 0===Pe?void 0:Pe.locking_amt)))}}),!G&&""!==B&&(0,v.jsx)(i.A.Text,{className:"text-danger",children:Number(B)<100?"Amount must be at least 100 rupees":"Insufficient balance"})]}),(0,v.jsx)("div",{className:"text-center",children:(0,v.jsx)(l.A,{variant:"primary",onClick:()=>{Number(B)<100?h.oR.error("Amount must be at least 100 rupees"):(T(!1),K(!0))},disabled:!G,children:"Transfer"})})]})})]}),(0,v.jsxs)(o.A,{style:{zIndex:1050},show:q,onHide:()=>{K(!1),Ve()},onKeyDown:e=>{"Enter"!==e.key||4!==X.length||Te||(e.preventDefault(),De(!0))},children:[(0,v.jsx)(o.A.Header,{closeButton:!0,children:(0,v.jsx)(o.A.Title,{children:"Enter TPIN"})}),(0,v.jsx)(o.A.Body,{style:{backgroundColor:"#ffffff",transform:"translateZ(0)",backfaceVisibility:"hidden"},children:(0,v.jsxs)(i.A,{children:[(0,v.jsxs)(i.A.Group,{className:"mb-3",children:[(0,v.jsx)(i.A.Label,{children:"TPIN"}),(0,v.jsx)(i.A.Control,{type:"password",placeholder:"Enter your TPIN",value:X,onChange:e=>{const t=e.target.value.replace(/[^0-9]/g,"").slice(0,4);Q(t),Ee("*".repeat(t.length))},maxLength:4}),Te&&(0,v.jsx)(i.A.Text,{className:"text-danger",children:Te}),J&&(0,v.jsx)(i.A.Text,{className:"text-danger",children:J})]}),(0,v.jsx)("div",{className:"text-center",children:(0,v.jsx)(f.A,{title:"Are you sure you want to transfer this money?",onConfirm:async()=>{try{if(await Le(),Te)return void h.oR.error("Location access is required for this transaction. Please enable location services and try again.");const s=await(0,x.a50)({transferTo:R._id,amount:Number(B),tpin:X,trans_type:"transfer",lat:we,long:Se});if("200"==s.data.statusCode)h.oR.success("Money transferred successfully"),K(!1),Ve(),Ue(),ze(),t&&t();else if("403"==s.data.statusCode){var e,a;$(null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.message),h.oR.error(null===s||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)}else h.oR.error(s.data.message||"Transfer failed. Please try again.")}catch(s){console.error("Error transferring money:",s),"GeolocationPositionError"===s.name?h.oR.error("Unable to access location. Please enable location services and try again."):h.oR.error("Transfer failed. Please try again.")}},okText:"Yes",cancelText:"No",onCancel:()=>De(!1),open:Oe,okButtonProps:{disabled:4!==X.length||Te},children:(0,v.jsx)(l.A,{onClick:()=>De(!0),variant:"primary",disabled:4!==X.length||Te,children:"Submit"})})})]})})]}),(0,v.jsxs)(o.A,{show:ee,onHide:()=>{te(!1),Ve()},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),te(!1),Y(!0))},style:{zIndex:1050},children:[(0,v.jsxs)(o.A.Header,{closeButton:!0,className:"d-flex justify-content-between",children:[(0,v.jsx)(o.A.Title,{children:"Reverse Transfer"}),(0,v.jsxs)("span",{id:"baldiv",style:{marginLeft:"20%"},children:["Balance: ",(null===R||void 0===R?void 0:R.main_wallet)||0]})]}),(0,v.jsx)(o.A.Body,{style:{backgroundColor:"#ffffff",transform:"translateZ(0)",backfaceVisibility:"hidden"},children:(0,v.jsxs)(i.A,{children:[(0,v.jsxs)(i.A.Group,{className:"mb-3",children:[(0,v.jsx)(i.A.Label,{children:"Refer ID"}),(0,v.jsx)(i.A.Control,{type:"text",value:(null===R||void 0===R?void 0:R.refer_id)||"",readOnly:!0})]}),(0,v.jsxs)(i.A.Group,{className:"mb-3",children:[(0,v.jsx)(i.A.Label,{children:"Name"}),(0,v.jsx)(i.A.Control,{type:"text",value:(null===R||void 0===R?void 0:R.name)||"",readOnly:!0})]}),(0,v.jsxs)(i.A.Group,{className:"mb-3",children:[(0,v.jsx)(i.A.Label,{children:"Mobile"}),(0,v.jsx)(i.A.Control,{type:"text",value:(null===R||void 0===R?void 0:R.mobile)||"",readOnly:!0})]}),(0,v.jsxs)(i.A.Group,{className:"mb-3",children:[(0,v.jsx)(i.A.Label,{children:"Amount"}),(0,v.jsx)(i.A.Control,{type:"number",placeholder:"Enter amount (minimum 100)",required:!0,value:ae,onChange:e=>{const t=e.target.value;se(t)}}),Number(ae)>Number(null===R||void 0===R?void 0:R.main_wallet)&&(0,v.jsx)(i.A.Text,{className:"text-danger",children:"Insufficient balance"}),Number(ae)<100&&""!==ae&&(0,v.jsx)(i.A.Text,{className:"text-danger",children:"Amount must be at least 100 rupees"})]}),(0,v.jsx)("div",{className:"text-center",children:(0,v.jsx)(l.A,{variant:"primary",onClick:()=>{te(!1),Y(!0)},disabled:Number(ae)>Number(null===R||void 0===R?void 0:R.main_wallet)||Number(ae)<100,children:"Reverse Transfer"})})]})})]}),(0,v.jsxs)(o.A,{show:Z,onHide:()=>{Y(!1),Ve(),Q("")},onKeyDown:e=>{"Enter"!==e.key||4!==X.length||Te||(e.preventDefault(),De(!0))},style:{zIndex:1050},children:[(0,v.jsx)(o.A.Header,{closeButton:!0,children:(0,v.jsx)(o.A.Title,{children:"Enter TPIN for Reverse Transfer"})}),(0,v.jsx)(o.A.Body,{style:{backgroundColor:"#ffffff",transform:"translateZ(0)",backfaceVisibility:"hidden"},children:(0,v.jsxs)(i.A,{children:[(0,v.jsxs)(i.A.Group,{className:"mb-3",children:[(0,v.jsx)(i.A.Label,{children:"TPIN"}),(0,v.jsx)(i.A.Control,{type:"password",placeholder:"Enter your TPIN",value:X,onChange:e=>{const t=e.target.value.replace(/[^0-9]/g,"").slice(0,4);Q(t),Ee("*".repeat(t.length))},maxLength:4}),Te&&(0,v.jsx)(i.A.Text,{className:"text-danger",children:Te}),J&&(0,v.jsx)(i.A.Text,{className:"text-danger",children:J})]}),(0,v.jsx)("div",{className:"text-center",children:(0,v.jsx)(f.A,{title:"Are you sure you want to reverse transfer this money?",onConfirm:async()=>{try{if(await Le(),Te)return void h.oR.error(Te);const a=await(0,x.a50)({transferTo:R._id,amount:Number(ae),tpin:X,trans_type:"refund",lat:we,long:Se});if("200"==a.data.statusCode){const e=a.data.data.token;ge(e),Y(!1),ne(!0)}else if("403"==a.data.statusCode){var e,t;$(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.message),h.oR.error(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)}else h.oR.error(a.data.message||"Reverse transfer failed. Please try again.")}catch(a){console.error("Error reverse transferring money:",a),h.oR.error("Reverse transfer failed. Please try again.")}},okText:"Yes",cancelText:"No",onCancel:()=>De(!1),open:Oe,okButtonProps:{disabled:4!==X.length||Te},children:(0,v.jsx)(l.A,{onClick:()=>De(!0),variant:"primary",disabled:4!==X.length||Te,children:"Submit"})})})]})})]}),(0,v.jsx)(p.A,{open:re,userId:ye,onClose:()=>{ne(!1),Ve()},longitude:Se,latitude:we,transferAmount:ae})]})}},47943:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(65043),r=a(73575),n=a(91036),l=(a(76323),a(70579));const o=e=>{let{userId:t,onClose:a,longitude:o,latitude:i,transferAmount:d,open:c,walletShowHeader:u,fetchData:h,resetModalStates:m}=e;const[x,f]=(0,s.useState)(new Array(6).fill("")),[p,v]=(0,s.useState)(120),[b,j]=(0,s.useState)(!1),[y,g]=(0,s.useState)(!1),[N,A]=(0,s.useState)(!1),[w,k]=(0,s.useState)(""),[S,C]=(0,s.useState)(""),T=(0,s.useRef)([]),R=(0,s.useRef)(null),_=(0,s.useCallback)((()=>{R.current&&clearInterval(R.current),v(120),j(!1),R.current=setInterval((()=>{v((e=>e<=1?(clearInterval(R.current),j(!0),0):e-1))}),1e3)}),[]),E=(0,s.useCallback)((()=>{R.current&&clearInterval(R.current),v(0),j(!0)}),[]);(0,s.useEffect)((()=>(c?_():E(),()=>clearInterval(R.current))),[c,_,E]);const P=(0,s.useCallback)((()=>{E(),f(new Array(6).fill("")),k(""),C(""),a()}),[a,E]),I=(0,s.useCallback)(((e,t)=>{const a=[...x];a[e]=t.slice(0,1),f(a),t&&e<5&&T.current[e+1]&&T.current[e+1].focus()}),[x]),O=(0,s.useCallback)(((e,t)=>{if("Backspace"===e.key&&!x[t]&&t>0){const e=[...x];e[t-1]="",f(e),T.current[t-1].focus()}}),[x]),D=(0,s.useCallback)((async()=>{g(!0),C(""),k("");try{200==(await(0,r.eVi)({token:t,amount:Number(d)})).status?(k("OTP has been resent successfully."),_(),f(new Array(6).fill(""))):C("Failed to resend OTP.")}catch(S){C("Failed to resend OTP.")}finally{g(!1)}}),[t,_,d]),B=(0,s.useCallback)((async()=>{A(!0),k(""),C("");try{var e;const f=await(0,r.AkL)({token:t,otp:x.join(""),lat:i,long:o});var s,l,d,c;if(200==(null===f||void 0===f||null===(e=f.data)||void 0===e?void 0:e.statusCode))k((null===f||void 0===f||null===(s=f.data)||void 0===s?void 0:s.message)||"OTP verified successfully."),n.oR.success((null===f||void 0===f||null===(l=f.data)||void 0===l?void 0:l.message)||"OTP verified successfully."),a(),u&&u(),h&&h(),m&&m();else C((null===f||void 0===f||null===(d=f.data)||void 0===d?void 0:d.message)||(null===f||void 0===f?void 0:f.data)||"Failed to verify OTP."),n.oR.error((null===f||void 0===f||null===(c=f.data)||void 0===c?void 0:c.message)||(null===f||void 0===f?void 0:f.data)||"Failed to verify OTP.")}catch(S){C("Failed to verify OTP."),n.oR.error("Failed to verify OTP.")}finally{A(!1)}}),[t,x,a,i,o]);return(0,l.jsx)("div",{className:"modal fade modal-cssclasss mediaqurymodalpop ".concat(c?"show d-block":""),tabIndex:"-1",role:"dialog",children:(0,l.jsx)("div",{className:"modal-dialog",role:"document",style:{zIndex:1050},children:(0,l.jsxs)("div",{className:"modal-content modal-content-otp",children:[(0,l.jsxs)("div",{className:"modal-header text-center",children:[(0,l.jsx)("h5",{className:"modal-title modaltitle-otp",children:"OTP Verification"}),(0,l.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:P})]}),(0,l.jsx)("div",{className:"modal-body",style:{backgroundColor:"#ffffff",transform:"translateZ(0)",backfaceVisibility:"hidden"},children:b?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{children:"Please Enter 6-digit Code Sent To Your Registered Mobile Number!"}),(0,l.jsx)("button",{type:"button",className:"btn btn-resend-otp",onClick:D,children:y?(0,l.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):"Resend OTP"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{children:"Please Enter 6-digit Code Sent To Your Registered Mobile Number!"}),(0,l.jsxs)("div",{className:"verification-timer",children:["Verification Code: ",(e=>{const t=Math.floor(e/60),a=e%60;return"".concat(t.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"))})(p)," seconds ",(0,l.jsx)("span",{className:"resend-otp",onClick:D,children:"Resend OTP"})]}),(0,l.jsx)("div",{className:"otp-inputs",children:x.map(((e,t)=>(0,l.jsx)("input",{type:"password",maxLength:"1",value:e,onChange:e=>I(t,e.target.value),onKeyDown:e=>O(e,t),ref:e=>T.current[t]=e,className:"otp-input"},t)))}),(0,l.jsx)("button",{type:"button",className:"btn btn-submit-otp",onClick:B,disabled:x.some((e=>""===e))||N,children:N?(0,l.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):"Submit OTP"}),w&&(0,l.jsx)("div",{className:"alert alert-success mt-3",children:w}),S&&(0,l.jsx)("div",{className:"alert alert-danger mt-3",children:S})]})})]})})})}},95702:(e,t,a)=>{var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}}(),r=a(65043),n=o(r),l=o(a(65173));function o(e){return e&&e.__esModule?e:{default:e}}var i={table:l.default.string.isRequired,filename:l.default.string.isRequired,sheet:l.default.string.isRequired,id:l.default.string,className:l.default.string,buttonText:l.default.string},d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleDownload=a.handleDownload.bind(a),a}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"handleDownload",value:function(){if(!document)return null;if(1!==document.getElementById(this.props.table).nodeType||"TABLE"!==document.getElementById(this.props.table).nodeName)return null;var e=document.getElementById(this.props.table).outerHTML,a=String(this.props.sheet),s=String(this.props.filename)+".xls",r={worksheet:a||"Worksheet",table:e};if(window.navigator.msSaveOrOpenBlob){var n=new Blob(['<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><meta charset="UTF-8">\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body>'+e+"</body></html>"]);return document.getElementById("react-html-table-to-excel").click()((function(){window.navigator.msSaveOrOpenBlob(n,s)})),!0}var l=window.document.createElement("a");return l.href="data:application/vnd.ms-excel;base64,"+t.base64(t.format('<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><meta charset="UTF-8">\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body>{table}</body></html>',r)),l.download=s,document.body.appendChild(l),l.click(),document.body.removeChild(l),!0}},{key:"render",value:function(){return n.default.createElement("button",{id:this.props.id,className:this.props.className,type:"button",onClick:this.handleDownload},this.props.buttonText)}}],[{key:"base64",value:function(e){return window.btoa(unescape(encodeURIComponent(e)))}},{key:"format",value:function(e,t){return e.replace(/{(\w+)}/g,(function(e,a){return t[a]}))}}]),t}(r.Component);d.propTypes=i,d.defaultProps={id:"button-download-as-xls",className:"button-download",buttonText:"Download"},t.A=d},76323:()=>{}}]);
//# sourceMappingURL=840.ae1e1fd4.chunk.js.map