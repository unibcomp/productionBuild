"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[5171],{15171:(e,n,a)=>{a.r(n),a.d(n,{default:()=>w});var l=a(65043),r=a(11238),o=a(61596),d=a(94496),s=a(94516),t=a(11906),i=a(79650),c=a(71806),x=a(84882),v=a(28076),u=a(10039),h=a(73460),p=a(53193),j=a(18356),m=a(72221),g=a(32143),b=a(59135),A=(a(91036),a(72777)),y=a(73575),_=a(73216),f=a(22019),C=a(70579);const w=()=>{const{id:e}=(0,_.g)(),n=(new Date).toISOString().split("T")[0],[a,w]=(0,l.useState)(1),[D,I]=(0,l.useState)(10),[N,S]=(0,l.useState)(!1),[T,k]=(0,l.useState)(0),[O,M]=(0,l.useState)(!1),[R,W]=(0,l.useState)([]),[B,P]=(0,l.useState)({startDate:n,endDate:n,txn_id:"",order_id:""}),E=(e,n)=>{["user_mobile"].includes(e)&&""!==n&&!/^[0-9\b]+$/.test(n)||P((a=>({...a,[e]:n})))};(0,l.useEffect)((()=>{(async()=>{let n={page:a,count:D,start_date:B.startDate,end_date:B.endDate,txn_id:B.txn_id,order_id:null===B||void 0===B?void 0:B.order_id};e&&(n.user_id=e);try{var l;let e=await(0,y.bXR)(n);var r,o,d,s;200===(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.statusCode)?(W(null===e||void 0===e||null===(r=e.data)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.wallet),k(null===e||void 0===e||null===(d=e.data)||void 0===d||null===(s=d.data)||void 0===s?void 0:s.total)):(W([]),k(0))}catch(t){}})()}),[N,a,D]);const z=Math.ceil(T/D);return(0,C.jsxs)(C.Fragment,{children:[O&&(0,C.jsx)(A.A,{}),(0,C.jsx)(o.A,{sx:{padding:3,borderRadius:2,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},children:(0,C.jsx)(d.A,{variant:"h6",sx:{fontWeight:"600",fontSize:"24px",color:"var(--bs-nav)",textAlign:"center"},children:"Pay In Wallet"})}),(0,C.jsxs)("div",{className:"card",children:[(0,C.jsx)("div",{className:"card-header",children:" "}),(0,C.jsx)("div",{className:"card-body",children:(0,C.jsx)("form",{children:(0,C.jsxs)("div",{className:"form-row",style:{alignItems:"end"},children:[(0,C.jsxs)("div",{className:"form-group col-md-4",children:[(0,C.jsx)("label",{children:"Start Date"}),(0,C.jsx)("input",{type:"date",name:"startDate",className:"form-control",value:B.startDate,onChange:e=>E("startDate",e.target.value),max:n})]}),(0,C.jsxs)("div",{className:"form-group col-md-4",children:[(0,C.jsx)("label",{children:"End Date"}),(0,C.jsx)("input",{type:"date",name:"endDate",className:"form-control",value:B.endDate,onChange:e=>E("endDate",e.target.value),max:n})]}),(0,C.jsxs)("div",{className:"form-group col-md-4",children:[(0,C.jsx)("label",{children:"Txn Id"}),(0,C.jsx)("input",{type:"text",name:"txn_id",className:"form-control",value:B.txn_id,onChange:e=>E("txn_id",e.target.value)})]}),(0,C.jsxs)("div",{className:"form-group col-md-4",children:[(0,C.jsx)("label",{children:"Order Id"}),(0,C.jsx)("input",{type:"text",name:"order_id",className:"form-control",value:B.order_id,onChange:e=>E("order_id",e.target.value)})]}),(0,C.jsx)("div",{className:"form-group col-md-12 col-lg-12",children:(0,C.jsxs)("div",{children:[(0,C.jsx)("button",{type:"button",className:"btn btn-primary mr-3",onClick:()=>{S((e=>!e))},children:"Search"}),(0,C.jsx)("button",{type:"button",className:"btn btn-light",onClick:()=>{P({startDate:"",endDate:"",txn_id:"",order_id:""}),w(1),I(10),S((e=>!e))},children:"Reset"})]})})]})})})]}),(0,C.jsxs)(o.A,{sx:{padding:3,borderRadius:2,marginTop:4,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},children:[(0,C.jsx)(s.A,{display:"flex",justifyContent:"flex-end",columnGap:3,children:(0,C.jsx)(t.A,{variant:"contained",color:"nav",sx:{borderColor:"var(--bs-nav)",backgroundColor:"var(--bs-nav)",color:"white"},onClick:async()=>{try{var n,a,l;M(!0);let t={...B};e&&(t.user_id=e);const i=await(0,y.ryJ)(t);if((null===i||void 0===i||null===(n=i.data)||void 0===n||null===(a=n.data)||void 0===a||null===(l=a.wallet)||void 0===l?void 0:l.length)>0){var o,d,s;const e=null===i||void 0===i||null===(o=i.data)||void 0===o||null===(d=o.data)||void 0===d||null===(s=d.wallet)||void 0===s?void 0:s.map(((e,n)=>({"Date / Time":null===e||void 0===e?void 0:e.createdAt,"Order ID":null===e||void 0===e?void 0:e.order_id,"Transaction ID":null===e||void 0===e?void 0:e.txn_id,"Opening Balance":null===e||void 0===e?void 0:e.o_bal,Amount:null===e||void 0===e?void 0:e.amount,"Closing Balance":null===e||void 0===e?void 0:e.c_bal,"Transaction Type":null===e||void 0===e?void 0:e.trans_type,Type:null===e||void 0===e?void 0:e.type,Message:null===e||void 0===e?void 0:e.message,"Updated At":null===e||void 0===e?void 0:e.updatedAt}))),n=r.Wp.json_to_sheet(e),a=r.Wp.book_new();r.Wp.book_append_sheet(a,n,"Pay_In Report"),r._h(a,"Pay_In_Report_".concat((new Date).toLocaleDateString(),".xlsx"))}else f.Ay.error("No data available to export!")}catch(t){f.Ay.error("Failed to download Excel. Please try again.")}finally{M(!1)}},children:"Download Excel"})}),(0,C.jsxs)(s.A,{sx:{padding:1},children:[(0,C.jsx)(i.A,{component:s.A,elevation:3,children:(0,C.jsxs)(c.A,{children:[(0,C.jsx)(x.A,{sx:{backgroundColor:"#f5f5f5"},children:(0,C.jsxs)(v.A,{children:[(0,C.jsx)(u.A,{children:(0,C.jsx)("strong",{children:"S.No."})}),(0,C.jsx)(u.A,{sx:{minWidth:"180px"},children:(0,C.jsx)("strong",{children:"Date / Time"})}),(0,C.jsx)(u.A,{children:(0,C.jsx)("strong",{children:"Order Id"})}),(0,C.jsx)(u.A,{children:(0,C.jsx)("strong",{children:" Txn Id"})}),(0,C.jsx)(u.A,{children:(0,C.jsx)("strong",{children:" Opening Balance"})}),(0,C.jsx)(u.A,{children:(0,C.jsx)("strong",{children:" Amount"})}),(0,C.jsx)(u.A,{children:(0,C.jsx)("strong",{children:" Closing Balance"})}),(0,C.jsx)(u.A,{children:(0,C.jsx)("strong",{children:" TransType"})}),(0,C.jsx)(u.A,{children:(0,C.jsx)("strong",{children:" Type"})}),(0,C.jsx)(u.A,{sx:{minWidth:"250px"},children:(0,C.jsx)("strong",{children:"Message"})})]})}),(0,C.jsx)(u.A,{sx:{color:"var(--bs-nav)"}}),(0,C.jsx)(h.A,{children:null===R||void 0===R?void 0:R.map(((e,n)=>(0,C.jsxs)(v.A,{hover:!0,children:[(0,C.jsx)(u.A,{sx:{color:"var(--bs-nav)"},children:n+1+(a-1)*D}),(0,C.jsx)(u.A,{sx:{color:"var(--bs-nav)"},children:null===e||void 0===e?void 0:e.createdAt}),(0,C.jsx)(u.A,{sx:{color:"var(--bs-nav)"},children:null===e||void 0===e?void 0:e.order_id}),(0,C.jsx)(u.A,{sx:{color:"var(--bs-nav)"},children:null===e||void 0===e?void 0:e.txn_id}),(0,C.jsx)(u.A,{sx:{color:"var(--bs-nav)"},children:null===e||void 0===e?void 0:e.o_bal}),(0,C.jsx)(u.A,{sx:{color:"var(--bs-nav)"},children:null===e||void 0===e?void 0:e.amount}),(0,C.jsx)(u.A,{sx:{color:"var(--bs-nav)"},children:null===e||void 0===e?void 0:e.c_bal}),(0,C.jsx)(u.A,{sx:{color:"var(--bs-nav)"},children:null===e||void 0===e?void 0:e.trans_type}),(0,C.jsx)(u.A,{sx:{color:"var(--bs-nav)"},children:null===e||void 0===e?void 0:e.type}),(0,C.jsx)(u.A,{sx:{color:"var(--bs-nav)"},children:null===e||void 0===e?void 0:e.message})]},n)))})]})}),(0,C.jsxs)(s.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2,flexWrap:"wrap",gap:2,children:[(0,C.jsxs)(s.A,{display:"flex",alignItems:"center",gap:2,children:[(0,C.jsxs)(p.A,{size:"small",sx:{width:"150px"},children:[(0,C.jsx)(j.A,{children:"Rows per page"}),(0,C.jsx)(m.A,{value:D,onChange:e=>{I(Number(e.target.value)),w(1)},label:"Rows per page",sx:{fontSize:"14px","& .MuiOutlinedInput-notchedOutline":{borderColor:"#ccc"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"var(--bs-primary1)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"var(--bs-primary1)"}},children:[5,10,25,50].map((e=>(0,C.jsx)(g.A,{value:e,children:e},e)))})]}),(0,C.jsxs)(d.A,{variant:"body2",sx:{fontSize:"14px",color:"#555"},children:["Total Entries: ",T]})]}),(0,C.jsx)(b.A,{count:z,page:a,onChange:(e,n)=>{w(n)},shape:"rounded",showFirstButton:!0,showLastButton:!0,sx:{"& .MuiPaginationItem-root":{color:"var(--bs-primary1)",borderRadius:"8px"},"& .MuiPaginationItem-root.Mui-selected":{backgroundColor:"var(--bs-primary1)",color:"#fff",fontWeight:"bold","&:hover":{backgroundColor:"var(--bs-primary1)"}}}})]})]})]})]})}}}]);
//# sourceMappingURL=5171.b6481194.chunk.js.map