"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[7782,8923],{48923:(e,a,r)=>{r.r(a),r.d(a,{BankTransferPPIProvider:()=>l,default:()=>s,usePpiBankTransfer:()=>n});var t=r(65043),i=r(70579);const o=(0,t.createContext)(),n=()=>(0,t.useContext)(o),l=e=>{let{children:a}=e;const[r,n]=(0,t.useState)(!1),[l,s]=(0,t.useState)("ppi-status-page"),[d,u]=(0,t.useState)([]);return(0,i.jsx)(o.Provider,{value:{globalLoader:r,setGlobalLoader:n,currentPage:l,setCurrentPage:s,beneficiaryList:d,setBeneficiaryList:u},children:a})},s=l},7782:(e,a,r)=>{r.r(a),r.d(a,{default:()=>T});var t=r(65043),i=r(94516),o=r(72777),n=r(48923),l=r(12110),s=r(94496),d=r(67784),u=r(11906),c=r(81637),b=r(90035),m=r(35316),v=r(91036),x=r(73575),p=r(70579);const h=e=>{let{title:a,children:r}=e;return(0,p.jsxs)(i.A,{p:{xs:1,sm:1,md:2},sx:{width:"100%",maxWidth:"1400px",margin:"0 auto",mt:{xs:1,md:0},minHeight:"100vh",flexDirection:"column"},children:[(0,p.jsx)(s.A,{variant:"h4",fontWeight:700,mb:3,textAlign:"center",color:"var(--bs-primary2)",children:a}),(0,p.jsx)(i.A,{sx:{flexGrow:1},children:r})," "]})},f=()=>{const{setGlobalLoader:e,setCurrentPage:a,setBeneficiaryList:r,globalLoader:i}=(0,n.usePpiBankTransfer)(),[o,f]=(0,t.useState)(""),[g,A]=(0,t.useState)(""),[y,R]=(0,t.useState)(!1);(0,t.useEffect)((()=>{var e;const a=null===(e=localStorage.getItem("mobile"))||void 0===e?void 0:e.slice(-10);a&&f(a)}),[]);return(0,p.jsxs)(h,{title:"PPI Bank Transfer",children:[(0,p.jsxs)(l.A,{sx:{p:3,borderRadius:"14px",backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)",textAlign:"center",maxWidth:"360px",margin:"0 auto",mt:4,boxShadow:"0 2px 10px rgba(0,0,0,0.2)"},children:[(0,p.jsx)(s.A,{fontWeight:500,mb:2,fontSize:"14px",children:"Verify your identity to continue"}),(0,p.jsx)(d.A,{fullWidth:!0,label:"Enter Mobile Number",value:o,onChange:e=>f(e.target.value.replace(/\D/g,"")),inputProps:{maxLength:10},sx:{mb:2}}),(0,p.jsx)(u.A,{onClick:async()=>{if(10!==o.length)return v.oR.error("Enter valid 10 digit mobile number");localStorage.setItem("mobile",o),e(!0);try{await(0,x.ACm)({mobile:o}),v.oR.success("OTP Sent Successfully"),R(!0)}catch{v.oR.error("Failed to send OTP")}e(!1)},variant:"contained",sx:{width:"100%",padding:"10px",borderRadius:"50px",backgroundColor:"var(--bs-primary2)",color:"var(--bs-primary1)",fontWeight:"bold"},children:i?(0,p.jsx)(c.A,{size:20,color:"inherit"}):"Send OTP"})]}),(0,p.jsx)(b.A,{open:y,onClose:()=>R(!1),fullWidth:!0,maxWidth:"xs",children:(0,p.jsxs)(m.A,{sx:{p:3},children:[(0,p.jsx)(s.A,{variant:"h6",textAlign:"center",mb:2,children:"Enter OTP"}),(0,p.jsx)(d.A,{fullWidth:!0,label:"OTP",value:g,inputProps:{maxLength:6},onChange:e=>A(e.target.value.replace(/\D/g,""))}),(0,p.jsx)(u.A,{fullWidth:!0,variant:"contained",sx:{mt:3,backgroundColor:"var(--bs-primary2)",borderRadius:"50px",color:"var(--bs-primary1)",fontWeight:"bold"},onClick:async()=>{if(!g)return v.oR.error("Enter OTP");e(!0);try{var t;const e=await(0,x.ACm)({mobile:o,otp:g}),i=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data,n=null===i||void 0===i?void 0:i.statuscode;"TXN"===n?(v.oR.success("OTP Verified!"),r(null===i||void 0===i?void 0:i.data),R(!1),a("ppi-send-money")):"RNF"===n?(v.oR.info("Remitter Not Found. Please Register."),R(!1),a("ppi-add-customer")):v.oR.error((null===i||void 0===i?void 0:i.status)||"Verification Failed")}catch{v.oR.error("Invalid OTP")}e(!1)},children:"Verify OTP"})]})})]})};var g=r(73036),A=r(39336),y=r(68903),R=r(32143);const S=()=>{const{beneficiaryList:e,setCurrentPage:a}=(0,n.usePpiBankTransfer)(),r=e,o=(null===r||void 0===r?void 0:r.beneficiaries)||[],[c,f]=(0,t.useState)(!1),[S,j]=(0,t.useState)(!1),[C,k]=(0,t.useState)(null),[T,E]=(0,t.useState)(!1),P=(0,g.A)("(max-width:600px)"),[W,I]=(0,t.useState)({latitude:"0",longitude:"0"}),[N,w]=(0,t.useState)({transferMode:"",transferAmount:"",otp:""}),[D,O]=(0,t.useState)("");(0,t.useEffect)((()=>{var e;const a=null===(e=localStorage.getItem("mobile"))||void 0===e?void 0:e.slice(-10);a&&O(a)}),[]),(0,t.useEffect)((()=>{var e;null===(e=navigator.geolocation)||void 0===e||e.getCurrentPosition((e=>I({latitude:e.coords.latitude,longitude:e.coords.longitude})),(()=>v.oR.warning("Location Disabled, Using Default")))}),[]);return(0,p.jsxs)(h,{title:"Send Money",children:[(0,p.jsxs)(l.A,{sx:{p:{xs:2,sm:3},mb:3,width:"100%",borderRadius:"14px",background:"var(--bs-primary1)",color:"var(--bs-primary2)",border:"1.5px solid var(--bs-primary2)",boxShadow:"none"},children:[(0,p.jsx)(s.A,{fontWeight:700,fontSize:{xs:18,sm:20},children:"Remitter Details"}),(0,p.jsx)(A.A,{sx:{my:1,borderColor:"var(--bs-primary2)"}}),(0,p.jsxs)(y.Ay,{container:!0,spacing:2,children:[(0,p.jsxs)(y.Ay,{item:!0,xs:12,sm:6,children:[(0,p.jsxs)(s.A,{fontSize:{xs:14,sm:15},children:[(0,p.jsx)("b",{children:"Name:"})," ",null===r||void 0===r?void 0:r.firstName," ",null===r||void 0===r?void 0:r.lastName]}),(0,p.jsxs)(s.A,{fontSize:{xs:14,sm:15},children:[(0,p.jsx)("b",{children:"Mobile:"})," ",D]})]}),(0,p.jsxs)(y.Ay,{item:!0,xs:12,sm:6,children:[(0,p.jsxs)(s.A,{fontSize:{xs:14,sm:15},children:[(0,p.jsx)("b",{children:"Total Limit:"})," \u20b9",null===r||void 0===r?void 0:r.limitTotal]}),(0,p.jsxs)(s.A,{fontSize:{xs:14,sm:15},children:[(0,p.jsx)("b",{children:"Available:"})," \u20b9",null===r||void 0===r?void 0:r.limitAvailable]}),(0,p.jsxs)(s.A,{fontSize:{xs:14,sm:15},children:[(0,p.jsx)("b",{children:"Used:"})," \u20b9",null===r||void 0===r?void 0:r.limitConsumed]})]})]})]}),(0,p.jsx)(i.A,{display:"flex",justifyContent:"flex-end",mb:2,children:(0,p.jsx)(u.A,{variant:"contained",sx:{borderRadius:"30px",fontWeight:700,px:4,py:1.2,backgroundColor:"var(--bs-primary2)",color:"var(--bs-primary1)"},onClick:()=>a("ppi-add-beneficiary"),children:"+ Add Beneficiary"})}),(0,p.jsx)(y.Ay,{container:!0,spacing:2,children:null===o||void 0===o?void 0:o.sort(((e,a)=>"REGISTERED"===e.bankStatus&&"UNREGISTERED"===a.bankStatus?-1:"UNREGISTERED"===e.bankStatus&&"REGISTERED"===a.bankStatus?1:0)).map((e=>(0,p.jsx)(y.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2,children:(0,p.jsxs)(l.A,{sx:{p:3,borderRadius:"18px",backgroundColor:"UNREGISTERED"===e.bankStatus?"rgba(200,200,200,0.3)":"var(--bs-primary1)",color:"var(--bs-primary2)",position:"relative",boxShadow:"0 8px 16px rgba(0,0,0,0.3)",transition:"0.3s","&:hover":"REGISTERED"===e.bankStatus?{transform:"translateY(-8px)"}:{}},children:["UNREGISTERED"===e.bankStatus&&(0,p.jsx)(s.A,{sx:{position:"absolute",top:10,right:10,background:"red",color:"white",fontSize:"11px",fontWeight:700,px:1,borderRadius:"5px"},children:"Deleted"}),(0,p.jsx)(s.A,{fontWeight:700,fontSize:{xs:17,sm:18},children:e.name}),(0,p.jsxs)(s.A,{fontSize:15,children:["Account: ",e.account]}),(0,p.jsxs)(s.A,{fontSize:15,children:["IFSC: ",e.ifsc]}),(0,p.jsxs)(s.A,{fontSize:15,children:["Bank: ",e.bank]}),(0,p.jsxs)(i.A,{display:"flex",justifyContent:"space-between",gap:1,mt:2,children:[(0,p.jsx)(u.A,{fullWidth:!0,variant:"contained",disabled:"UNREGISTERED"===e.bankStatus,sx:{borderRadius:"30px",backgroundColor:"UNREGISTERED"===e.bankStatus?"#b0b0b0":"var(--bs-primary2)",color:"UNREGISTERED"===e.bankStatus?"#fff":"var(--bs-primary1)"},onClick:()=>"REGISTERED"===e.bankStatus&&(e=>{k(e),f(!0),E(!1),w({transferMode:"",transferAmount:"",otp:""})})(e),children:"Send Money"}),(0,p.jsx)(u.A,{fullWidth:!0,variant:"outlined",disabled:"UNREGISTERED"===e.bankStatus,sx:{borderRadius:"30px",fontWeight:700,borderColor:"UNREGISTERED"===e.bankStatus?"#b0b0b0":"red",color:"UNREGISTERED"===e.bankStatus?"#b0b0b0":"red"},onClick:()=>"REGISTERED"===e.bankStatus&&(async e=>{k(e);try{var r;const t=await(0,x.ets)({beneficiaryId:null===e||void 0===e?void 0:e.id,mobile:D}),i=null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.data,o=null===i||void 0===i?void 0:i.statuscode;"OTP"===o?(v.oR.success("OTP Sent for Delete Verification"),j(!0)):"ERR"===o?v.oR.error((null===i||void 0===i?void 0:i.status)||"Please wait before requesting new OTP"):"IST"===o?(v.oR.error((null===i||void 0===i?void 0:i.status)||"Invalid or expired session token"),localStorage.removeItem("mobile"),j(!1),a("ppi-status-page")):v.oR.error((null===i||void 0===i?void 0:i.status)||"Failed to send delete OTP")}catch(o){var t,i;v.oR.error((null===o||void 0===o||null===(t=o.response)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.message)||"Delete request failed")}})(e),children:"Delete"})]})]})},e.id)))}),(0,p.jsx)(b.A,{open:c,onClose:()=>f(!1),fullWidth:!0,maxWidth:"xs",fullScreen:P,children:(0,p.jsxs)(m.A,{sx:{p:{xs:2,sm:4},backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)",borderRadius:"20px",border:"1px solid var(--bs-primary2)"},children:[(0,p.jsx)(s.A,{fontWeight:700,textAlign:"center",fontSize:{xs:18,sm:20},children:"Send Money"}),(0,p.jsx)(s.A,{fontWeight:500,mb:2,fontSize:"14px",mt:2,children:"Verify your identity to continue"}),(0,p.jsx)(d.A,{fullWidth:!0,label:"Mobile",value:D,disabled:!0,sx:{mb:2}}),(0,p.jsx)(d.A,{fullWidth:!0,label:"Account",value:null===C||void 0===C?void 0:C.account,disabled:!0,sx:{mt:2}}),(0,p.jsx)(d.A,{fullWidth:!0,label:"IFSC",value:null===C||void 0===C?void 0:C.ifsc,disabled:!0,sx:{mt:2}}),(0,p.jsxs)(d.A,{select:!0,fullWidth:!0,sx:{mt:2},label:"Transfer Mode",onChange:e=>w({...N,transferMode:e.target.value}),children:[(0,p.jsx)(R.A,{value:"IMPS",children:"IMPS"}),(0,p.jsx)(R.A,{value:"NEFT",children:"NEFT"})]}),(0,p.jsx)(d.A,{fullWidth:!0,label:"Amount",sx:{mt:2},onChange:e=>w({...N,transferAmount:e.target.value})}),T&&(0,p.jsx)(d.A,{fullWidth:!0,label:"Enter OTP",sx:{mt:2},onChange:e=>w({...N,otp:e.target.value})}),T?(0,p.jsx)(u.A,{fullWidth:!0,variant:"contained",sx:{mt:3,borderRadius:"30px",backgroundColor:"var(--bs-primary2)"},onClick:async()=>{if(!N.otp)return v.oR.error("Enter OTP");try{const e=await(0,x.AZh)({accountNumber:C.account,ifsc:C.ifsc,transferMode:N.transferMode,amount:N.transferAmount,otp:N.otp,mobile:D,latitude:W.latitude,longitude:W.longitude}),r=null===e||void 0===e?void 0:e.data,t=null===r||void 0===r?void 0:r.statuscode;"TXN"===t?(v.oR.success((null===r||void 0===r?void 0:r.status)||"Transaction Success"),f(!1)):"IST"===t?(v.oR.error((null===r||void 0===r?void 0:r.status)||"Invalid or expired session token"),localStorage.removeItem("mobile"),f(!1),a("ppi-status-page")):v.oR.error((null===r||void 0===r?void 0:r.status)||"Transaction Failed")}catch(t){var e,r;v.oR.error((null===t||void 0===t||null===(e=t.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)||"Something went wrong")}},children:"Confirm Payment"}):(0,p.jsx)(u.A,{fullWidth:!0,variant:"contained",sx:{mt:3,borderRadius:"30px",backgroundColor:"var(--bs-primary2)"},onClick:async()=>{if(!N.transferMode||!N.transferAmount)return v.oR.error("Enter Transfer Mode & Amount");if(10!==D.length)return v.oR.error("Invalid mobile number");try{var e,r;const l=await(0,x.VD1)({accountNumber:C.account,ifsc:C.ifsc,beneficiaryId:C.id,transferMode:N.transferMode,amount:N.transferAmount,mobile:D,latitude:W.latitude,longitude:W.longitude}),s=null===l||void 0===l||null===(e=l.data)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.statuscode;if("OTP"===s)v.oR.success("OTP Sent Successfully"),E(!0);else if("IST"===s){var t,i;v.oR.error((null===l||void 0===l||null===(t=l.data)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.status)||"Session expired. Please login again"),localStorage.removeItem("mobile"),a("ppi-status-page")}else{var o,n;v.oR.error((null===l||void 0===l||null===(o=l.data)||void 0===o||null===(n=o.data)||void 0===n?void 0:n.status)||"Failed to send OTP")}}catch(l){v.oR.error("Something went wrong")}},children:"Send OTP"}),(0,p.jsx)(u.A,{fullWidth:!0,sx:{mt:2,borderRadius:"30px",color:"var(--bs-primary2)"},onClick:()=>f(!1),children:"Cancel"})]})}),(0,p.jsx)(b.A,{open:S,onClose:()=>j(!1),fullWidth:!0,maxWidth:"xs",children:(0,p.jsxs)(m.A,{sx:{p:3,backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)",borderRadius:"20px",border:"1px solid var(--bs-primary2)"},children:[(0,p.jsx)(s.A,{fontWeight:700,textAlign:"center",fontSize:{xs:18,sm:20},mb:2,children:"Enter OTP"}),(0,p.jsx)(d.A,{fullWidth:!0,label:"OTP",value:N.otp,inputProps:{maxLength:6},onChange:e=>w({...N,otp:e.target.value.replace(/\D/g,"")})}),(0,p.jsx)(u.A,{fullWidth:!0,variant:"contained",sx:{mt:3,backgroundColor:"red",borderRadius:"50px",color:"white",fontWeight:"bold"},onClick:async()=>{try{var e;const r=await(0,x.TUt)({beneficiaryId:null===C||void 0===C?void 0:C.id,otp:N.otp,mobile:D}),t=null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.data,i=null===t||void 0===t?void 0:t.statuscode;"TXN"===i?(v.oR.success("Beneficiary Removed Successfully"),j(!1),a("ppi-status-page")):"IST"===i?(v.oR.error((null===t||void 0===t?void 0:t.status)||"Invalid or expired session token"),localStorage.removeItem("mobile"),j(!1),a("ppi-status-page")):v.oR.error((null===t||void 0===t?void 0:t.status)||"Delete failed")}catch(i){var r,t;v.oR.error((null===i||void 0===i||null===(r=i.response)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.message)||"Invalid OTP")}},children:"Confirm Delete"}),(0,p.jsx)(u.A,{fullWidth:!0,sx:{mt:2,borderRadius:"50px",color:"var(--bs-primary2)",fontWeight:"bold"},onClick:()=>j(!1),children:"Cancel"})]})})]})};var j=r(27108);const C=()=>{const{setCurrentPage:e,setGlobalLoader:a}=(0,n.usePpiBankTransfer)(),[r,i]=(0,t.useState)([]),[o,s]=(0,t.useState)("");(0,t.useEffect)((()=>{var e;const a=null===(e=localStorage.getItem("mobile"))||void 0===e?void 0:e.slice(-10);a&&s(a)}),[]);const[c,b]=(0,t.useState)({name:"",accountNumber:"",ifsc:"",bankId:""});(0,t.useEffect)((()=>{(async()=>{try{var e;const a=await(0,x.KW0)();i((null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.data)||[])}catch{v.oR.error("Bank List Load Failed")}})()}),[]);return(0,p.jsx)(h,{title:"Add Beneficiary",children:(0,p.jsxs)(l.A,{sx:{p:{xs:2,sm:3},borderRadius:"16px",backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)",border:"1.5px solid var(--bs-primary2)",boxShadow:"none",maxWidth:"400px"},children:[(0,p.jsx)(d.A,{fullWidth:!0,label:"Registered Mobile Number",value:o,disabled:!0,sx:{mb:2}}),(0,p.jsx)(d.A,{fullWidth:!0,label:"Beneficiary Name",name:"name",sx:{mb:2},value:c.name,onChange:e=>b({...c,name:e.target.value})}),(0,p.jsx)(d.A,{fullWidth:!0,label:"Account Number",name:"accountNumber",sx:{mb:2},value:c.accountNumber,onChange:e=>b({...c,accountNumber:e.target.value})}),(0,p.jsx)(j.A,{fullWidth:!0,options:r,getOptionLabel:e=>e.bank_name,sx:{mb:2},onChange:(e,a)=>b({...c,bankId:(null===a||void 0===a?void 0:a.bankID)||"",ifsc:(null===a||void 0===a?void 0:a.ifsc_code)||""}),renderInput:e=>(0,p.jsx)(d.A,{...e,label:"Search Bank"})}),(0,p.jsx)(d.A,{fullWidth:!0,label:"IFSC Code",name:"ifsc",sx:{mb:2},value:c.ifsc,disabled:!0}),(0,p.jsx)(u.A,{fullWidth:!0,variant:"contained",sx:{borderRadius:"50px",backgroundColor:"var(--bs-primary2)",color:"var(--bs-primary1)",fontWeight:700,mt:1},onClick:async()=>{if(!c.name||!c.accountNumber||!c.ifsc||!c.bankId)return void v.oR.error("All fields are required");const r={name:c.name,accountNumber:c.accountNumber,ifsc:c.ifsc,bankId:c.bankId,mobile:o};a(!0);try{var t,i;const a=await(0,x.yO5)(r);var n,l;if("TXN"===(null===a||void 0===a||null===(t=a.data)||void 0===t||null===(i=t.data)||void 0===i?void 0:i.statuscode))v.oR.success("Beneficiary Added Successfully!"),e("ppi-status-page");else v.oR.error((null===a||void 0===a||null===(n=a.data)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.status)||"Failed to add beneficiary")}catch(s){v.oR.error("Failed to add beneficiary")}a(!1)},children:"Add Beneficiary"}),(0,p.jsx)(u.A,{fullWidth:!0,sx:{borderRadius:"50px",mt:1,color:"var(--bs-primary2)",fontWeight:700},onClick:()=>e("ppi-send-money"),children:"Cancel"})]})})},k=()=>{const{setCurrentPage:e,setGlobalLoader:a}=(0,n.usePpiBankTransfer)(),[r,o]=(0,t.useState)(!1),[c,h]=(0,t.useState)(""),[f,g]=(0,t.useState)(""),[A,y]=(0,t.useState)({latitude:"0",longitude:"0"});(0,t.useEffect)((()=>{var e;const a=null===(e=localStorage.getItem("mobile"))||void 0===e?void 0:e.slice(-10);a&&g(a)}),[]),(0,t.useEffect)((()=>{navigator.geolocation.getCurrentPosition((e=>y({latitude:e.coords.latitude,longitude:e.coords.longitude})),(()=>{v.oR.warning("Location Disabled, Using Default Coords"),y({latitude:"0",longitude:"0"})}))}),[]);const[R,S]=(0,t.useState)({name:"",mobile:"",pan:"",aadhaarNumber:""});return(0,p.jsxs)(i.A,{p:2,sx:{width:"100%",margin:"0 auto"},children:[(0,p.jsx)(s.A,{variant:"h5",fontWeight:700,mb:3,textAlign:"center",color:"var(--bs-primary2)",children:"Add Customer"}),(0,p.jsxs)(l.A,{sx:{p:3,borderRadius:"16px",backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)",border:"1.5px solid var(--bs-primary2)",boxShadow:"none"},children:[(0,p.jsx)(d.A,{fullWidth:!0,label:"Full Name",name:"name",value:R.name,onChange:e=>S({...R,[e.target.name]:e.target.value}),sx:{mb:2}}),(0,p.jsx)(d.A,{fullWidth:!0,label:"Mobile Number",name:"mobile",value:R.mobile,onChange:e=>S({...R,mobile:e.target.value.replace(/\D/g,"")}),inputProps:{maxLength:10},sx:{mb:2}}),(0,p.jsx)(d.A,{fullWidth:!0,label:"PAN Number",name:"pan",value:R.pan,onChange:e=>S({...R,pan:e.target.value.toUpperCase()}),sx:{mb:2}}),(0,p.jsx)(d.A,{fullWidth:!0,label:"Aadhaar Number",name:"aadhaarNumber",value:R.aadhaarNumber,onChange:e=>S({...R,aadhaarNumber:e.target.value.replace(/\D/g,"")}),inputProps:{maxLength:12},sx:{mb:3}}),(0,p.jsx)(u.A,{fullWidth:!0,variant:"contained",sx:{borderRadius:"50px",padding:"10px",backgroundColor:"var(--bs-primary2)",color:"var(--bs-primary1)",fontWeight:700},onClick:async()=>{if(!R.name||!R.mobile||!R.pan||!R.aadhaarNumber)return v.oR.error("All fields are required");if(10!==R.mobile.length)return v.oR.error("Enter valid 10-digit Mobile Number");if(12!==R.aadhaarNumber.length)return v.oR.error("Enter valid 12-digit Aadhaar Number");a(!0);try{const e={name:R.name,mobile:R.mobile,pan:R.pan,aadhaarNumber:R.aadhaarNumber,latitude:A.latitude,longitude:A.longitude};await(0,x.wnE)(e),v.oR.success("OTP Sent Successfully"),o(!0)}catch(e){v.oR.error("Registration Failed")}a(!1)},children:"Submit"})]}),(0,p.jsx)(b.A,{open:r,onClose:()=>o(!1),fullWidth:!0,maxWidth:"xs",children:(0,p.jsxs)(m.A,{sx:{p:3,backgroundColor:"var(--bs-primary1)",borderRadius:"16px",color:"var(--bs-primary2)",border:"1px solid var(--bs-primary2)"},children:[(0,p.jsx)(s.A,{textAlign:"center",fontWeight:700,mb:2,fontSize:18,children:"Enter OTP"}),(0,p.jsx)(d.A,{fullWidth:!0,label:"OTP",value:c,onChange:e=>h(e.target.value.replace(/\D/g,"")),inputProps:{maxLength:6}}),(0,p.jsx)(u.A,{fullWidth:!0,variant:"contained",sx:{mt:3,borderRadius:"50px",backgroundColor:"var(--bs-primary2)",color:"var(--bs-primary1)",fontWeight:700},onClick:async()=>{if(!c)return v.oR.error("Enter OTP");a(!0);try{var r;const a={mobile:R.mobile,otp:c,latitude:A.latitude,longitude:A.longitude},i=await(0,x.p_6)(a),n=null===i||void 0===i?void 0:i.data,l=null===n||void 0===n||null===(r=n.data)||void 0===r?void 0:r.statuscode;if("TXN"===l)v.oR.success("Customer Registration Completed"),o(!1),e("ppi-status-page");else if("RNF"===l)v.oR.info("Remitter Not Found, Please Register First"),o(!1),e("ppi-add-customer");else if("IST"===l)v.oR.error("Session Expired"),o(!1),e("ppi-status-page");else if("KYC"===l)v.oR.error("Mobile not linked with Aadhaar. Use Bio-auth to complete KYC"),o(!1);else{var t;v.oR.error((null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.status)||"Verification Failed")}}catch(i){v.oR.error("OTP Verification Failed")}a(!1)},children:"Verify OTP"})]})})]})},T=()=>{const{globalLoader:e,currentPage:a}=(0,n.usePpiBankTransfer)();return(0,p.jsxs)(i.A,{sx:{width:"100%",p:2},children:[e&&(0,p.jsx)(o.A,{}),"ppi-status-page"===a&&(0,p.jsx)(f,{}),"ppi-add-customer"===a&&(0,p.jsx)(k,{}),"ppi-add-beneficiary"===a&&(0,p.jsx)(C,{}),"ppi-send-money"===a&&(0,p.jsx)(S,{})]})}}}]);
//# sourceMappingURL=7782.879c5678.chunk.js.map