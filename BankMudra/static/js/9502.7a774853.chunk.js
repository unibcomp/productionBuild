"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[9502],{99502:(e,r,o)=>{o.r(r),o.d(r,{default:()=>T});var i=o(65043),t=o(73575),a=o(35475),n=o(27149),l=o(17555),s=o(71462),d=o(26240),c=o(73036),u=o(12110),p=o(94516),x=o(36591),v=o(26494),b=o(94496),h=o(11906),g=o(12816),m=o(39336),f=o(68903),y=o(61596),j=o(90035),A=o(26600),k=o(27108),C=o(67784),w=o(51787),S=o(29347),_=o(98606),I=o(35717),M=(o(72777),o(54358)),W=o(70579);const P=e=>{let{permission:r,children:o}=e;const i=localStorage.getItem("userType");return r.includes(i)?o:null},O=e=>{let{pkg:r}=e;const o=(0,d.A)(),t=(0,c.A)(o.breakpoints.down("sm")),[l,s]=(r.prices[0],(0,i.useState)(!1)),[g,m]=(0,i.useState)(null);return(0,W.jsxs)(u.A,{elevation:0,sx:{height:"100%",display:"flex",flexDirection:"column",borderRadius:3,border:"1px solid var(--bs-border)",borderTop:"4px solid var(--bs-nav)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-6px)",boxShadow:"0 10px 25px rgba(0,0,0,0.08)"}},children:[(0,W.jsxs)(p.A,{sx:{position:"relative",p:2},children:[r.icon_img&&(0,W.jsx)(p.A,{sx:{height:80,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,W.jsx)(x.A,{component:"img",width:"14px",image:"".concat((0,I.q)(r.icon_img)),alt:r.package_name,sx:{maxHeight:60,objectFit:"contain"}})}),(0,W.jsx)(p.A,{sx:{position:"absolute",top:16,right:16,color:"var(--bs-primary2)"},children:r.isPurchased&&(0,W.jsxs)(p.A,{sx:{position:"absolute",top:12,right:12,display:"flex",alignItems:"center",gap:.5,px:1,py:.3,bgcolor:"rgba(0,200,83,0.1)",borderRadius:2,color:"#00c853",fontSize:12,fontWeight:600},children:[(0,W.jsx)(n._IM,{size:14}),"Purchased"]})})]}),(0,W.jsxs)(v.A,{sx:{flexGrow:1,pt:0,pt:0},children:[(0,W.jsx)(b.A,{variant:"h6",fontWeight:600,color:"var(--bs-primary2)",sx:{mb:1},children:r.package_name}),r.description&&(0,W.jsx)(b.A,{variant:"body2",dangerouslySetInnerHTML:{__html:r.description},color:"text.secondary",sx:{mb:2,lineHeight:1.6,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"}})]}),(0,W.jsxs)(p.A,{sx:{p:2,pt:0,display:"flex",flexDirection:t?"column":"row",gap:1.5},children:[(0,W.jsx)(P,{permission:["Distributor","Super Distributor"],children:!0===(null===r||void 0===r?void 0:r.isPurchased)&&(0,W.jsx)(h.A,{fullWidth:!0,variant:"contained",size:"small",sx:{bgcolor:"var(--bs-nav)",color:"var(--bs-primary2)",fontWeight:600,"&:hover":{bgcolor:"var(--bs-nav-dark)"}},onClick:()=>{s(!0),m(null===r||void 0===r?void 0:r._id)},children:"Assign Package"})}),(0,W.jsx)(h.A,{fullWidth:!0,variant:"outlined",component:a.N_,to:"/package-details/".concat(null===r||void 0===r?void 0:r._id),size:"small",sx:{borderColor:"var(--bs-nav)",color:"var(--bs-nav)",fontWeight:600,"&:hover":{bgcolor:"rgba(0,0,0,0.04)"}},children:"View Details"})]}),l&&(0,W.jsx)(z,{packageId:g,popupOpen:l,setpopupOpen:s})]})},R=e=>{let{data:r}=e;const o=(0,d.A)(),i=(0,c.A)(o.breakpoints.down("sm")),t=null===r||void 0===r?void 0:r.some((e=>e.isPurchased));return(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(p.A,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #f9f9f9, #eaeaea)",py:6},children:(0,W.jsxs)(g.A,{maxWidth:"lg",children:[(0,W.jsxs)(p.A,{textAlign:"center",mb:6,children:[(0,W.jsx)(b.A,{variant:i?"h5":"h4",fontWeight:800,letterSpacing:1.5,sx:{textTransform:"uppercase",color:"var(--bs-primary2)",background:"linear-gradient(90deg, #ff8a00, #e52e71)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Available Packages"}),(0,W.jsx)(m.A,{sx:{mt:2,mx:"auto",width:100,height:4,borderRadius:2,bgcolor:"var(--bs-primary2)"}}),(0,W.jsx)(b.A,{variant:"body1",sx:{mt:2,color:"var(--bs-primary2)",fontSize:i?"0.9rem":"1rem"},children:"Choose the plan that fits your business \u2014 flexible, fast, and powerful."})]}),(0,W.jsx)(f.Ay,{container:!0,spacing:4,justifyContent:"center",children:null===r||void 0===r?void 0:r.map((e=>(0,W.jsx)(f.Ay,{item:!0,xs:12,sm:6,md:4,sx:{transition:"transform 0.3s ease, box-shadow 0.3s ease","&:hover":{transform:"translateY(-10px)"}},children:(0,W.jsx)(O,{pkg:e})},e._id)))}),t&&(0,W.jsx)(y.A,{elevation:6,sx:{mt:6,p:3,borderRadius:3,bgcolor:"rgba(76, 175, 80, 0.08)",border:"1px solid rgba(76, 175, 80, 0.3)",color:"var(--bs-primary2)"},children:(0,W.jsxs)(p.A,{display:"flex",alignItems:"center",children:[(0,W.jsx)(_.A,{sx:{mr:2,fontSize:40,color:"var(--bs-primary2)",filter:"drop-shadow(0px 0px 4px rgba(76,175,80,0.4))"}}),(0,W.jsxs)(p.A,{children:[(0,W.jsx)(b.A,{variant:"h6",fontWeight:"600",color:"#111",children:"You have active subscriptions"}),(0,W.jsx)(b.A,{variant:"body2",color:"var(--bs-primary2)",children:"Manage your packages anytime from your account settings."})]})]})})]})})})},z=e=>{let{packageId:r,popupOpen:o,setpopupOpen:a}=e;const n=()=>{a(!1),I(null),m(null),x(""),c("")},[d,c]=(0,i.useState)(""),[u,x]=(0,i.useState)(""),[v,b]=(0,i.useState)([]),[g,m]=(0,i.useState)(null),[f,y]=(0,i.useState)([]),[_,I]=(0,i.useState)(null);(0,i.useEffect)((()=>{(async()=>{try{var e;let o=await(0,t.EpH)();var r;!1===(null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.error)?b((null===(r=o.data)||void 0===r?void 0:r.data)||[]):b([])}catch(o){console.error(o),b([])}})(),(async()=>{try{var e;const o=await(0,t.FJs)(r);y((null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.data)||[])}catch(o){}})()}),[]);const[P,O]=(0,i.useState)(!1);return(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)(j.A,{open:o,onClose:()=>a(!1),PaperProps:{sx:()=>({borderRadius:4,p:2,backdropFilter:"blur(10px)",background:"white",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)",width:"100%",maxWidth:380})},children:[(0,W.jsx)(A.A,{sx:{color:"var(--bs-primary2)",fontWeight:600,textAlign:"center",fontSize:"1.0rem"},children:"Assign Package to Retailer"}),(0,W.jsx)("div",{className:"form-group col-md-12",children:(0,W.jsx)(k.A,{options:v,getOptionLabel:e=>e.name||"",value:null!==g&&void 0!==g?g:null,size:"small",onChange:(e,r)=>m(r),renderOption:(e,r)=>(0,i.createElement)("li",{...e,key:r.retailer_id},(0,W.jsx)(p.A,{sx:{fontSize:"13px",color:"var(--bs-primary2)"},children:r.name})),renderInput:e=>(0,W.jsx)(C.A,{...e,label:"Select Retailer",InputLabelProps:{sx:{"&.MuiInputLabel-root:not(.MuiInputLabel-shrink)":{top:"-3px"}}},sx:{"& label.Mui-focused":{color:"var(--bs-primary2)"},"& .MuiInputBase-root":{backgroundColor:"#fff"},"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"var(--bs-primary1)"},"&.Mui-focused fieldset":{borderColor:"var(--bs-primary1)"}}}})})}),(0,W.jsx)("div",{className:"form-group col-md-12",children:(0,W.jsx)(k.A,{options:f,getOptionLabel:e=>{var r;return"".concat(null===e||void 0===e?void 0:e.single_unit_amt," Rs , ").concat(null===e||void 0===e?void 0:e.price_info.duration).concat(null===e||void 0===e||null===(r=e.price_info)||void 0===r?void 0:r.duration_type,", ").concat(null===e||void 0===e?void 0:e.count," Count")||0},value:null!==_&&void 0!==_?_:null,size:"small",onChange:(e,r)=>I(r),renderOption:(e,r)=>{var o;return(0,i.createElement)("li",{...e,key:r._id},(0,W.jsx)(p.A,{sx:{fontSize:"13px",color:"var(--bs-primary2)"},children:"".concat(null===r||void 0===r?void 0:r.single_unit_amt," Rs , ").concat(null===r||void 0===r?void 0:r.price_info.duration).concat(null===r||void 0===r||null===(o=r.price_info)||void 0===o?void 0:o.duration_type,", ").concat(null===r||void 0===r?void 0:r.count," Count")||0}))},renderInput:e=>(0,W.jsx)(C.A,{...e,label:"Select Package",InputLabelProps:{sx:{"&.MuiInputLabel-root:not(.MuiInputLabel-shrink)":{top:"-3px"}}},sx:{"& label.Mui-focused":{color:"var(--bs-primary2)"},"& .MuiInputBase-root":{backgroundColor:"#fff"},"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"var(--bs-primary1)"},"&.Mui-focused fieldset":{borderColor:"var(--bs-primary1)"}}}})})}),(0,W.jsx)("div",{className:"form-group col-md-12",children:(0,W.jsx)(C.A,{label:"Price",type:"text",name:"price",value:u||"",onChange:e=>{const r=e.target.value;/^(?:\d{0,4}(?:\.\d{0,2})?)?$/.test(r)&&x(r)},sx:{"& .MuiOutlinedInput-root":{height:42,"& .MuiOutlinedInput-input":{py:1},"&:hover fieldset":{borderColor:"var(--bs-primary1)"},"&.Mui-focused fieldset":{borderColor:"var(--bs-primary1)"}}},autoComplete:"off",InputProps:{startAdornment:(0,W.jsx)(w.A,{position:"start",children:(0,W.jsx)(s.A,{})})},fullWidth:!0})}),(0,W.jsx)("div",{className:"form-group col-md-12",children:(0,W.jsx)(C.A,{label:"TPIN",type:"password",name:"userpins",placeholder:"Enter TPin",value:d||"",onChange:e=>{const r=e.target.value;/^\d{0,4}$/.test(r)&&c(r)},sx:{"& .MuiOutlinedInput-root":{height:42,"& .MuiOutlinedInput-input":{py:1},"&:hover fieldset":{borderColor:"var(--bs-primary1)"},"&.Mui-focused fieldset":{borderColor:"var(--bs-primary1)"}}},autoComplete:"new-tpin",inputProps:{inputMode:"numeric",maxLength:4},InputProps:{startAdornment:(0,W.jsx)(w.A,{position:"start",children:(0,W.jsx)(l.A,{})})},fullWidth:!0})}),(0,W.jsxs)(S.A,{sx:{justifyContent:"center",mt:2},children:[(0,W.jsx)(h.A,{onClick:n,color:"var(--bs-primary2)",variant:"outlined",sx:{borderRadius:2,px:4,width:"150px"},children:"Cancel"}),(0,W.jsx)(h.A,{onClick:()=>{(null===d||void 0===d?void 0:d.length)<4?alert("Please enter 4 digit TPIN"):(async()=>{var e,o;if(null===g||void 0===g||!g._id||null===_||void 0===_||null===(e=_.price_info)||void 0===e||!e._id||null===u||void 0===u||!u.trim())return void alert("All fields are required");O(!0);let i={package_id:r,tpin:d,price:null===_||void 0===_||null===(o=_.price_info)||void 0===o?void 0:o._id,merchant_id:null===g||void 0===g?void 0:g._id,merchantPurchasedAmt:u||0};try{var a,l,s;let e=await(0,t.O9L)(i);"200"===(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.statusCode)&&n(),(0,M.A)(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.error,null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)}catch(c){}finally{O(!1)}})()},disabled:P,color:"var(--bs-primary2)",variant:"contained",sx:{backgroundColor:"var(--bs-primary1)",borderRadius:2,px:4,width:"150px"},children:"Submit"})]})]})})},L=()=>{const[e,r]=(0,i.useState)(null),o=async()=>{try{const e=await(0,t.ew7)();r(null===e||void 0===e?void 0:e.data)}catch(e){console.error("Error fetching package list:",e),r({error:!0,message:"Failed to fetch packages."})}};return(0,i.useEffect)((()=>{o()}),[]),null!==e&&void 0!==e&&e.error?(0,W.jsx)(p.A,{sx:{minHeight:"80vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1f1c2c, #928dab)",p:2},children:(0,W.jsxs)(y.A,{elevation:10,sx:{p:5,borderRadius:4,maxWidth:500,width:"100%",textAlign:"center",color:"var(--bs-primary2)",backdropFilter:"blur(10px)",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",transition:"transform 0.3s ease, box-shadow 0.3s ease","&:hover":{transform:"translateY(-5px)",boxShadow:"0 12px 40px rgba(0,0,0,0.5)"}},children:[(0,W.jsx)(b.A,{variant:"h4",sx:{fontWeight:"700",mb:2,textTransform:"uppercase",letterSpacing:1,background:"linear-gradient(90deg, #ff8a00, #e52e71)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Oops! Something went wrong"}),(0,W.jsx)(b.A,{variant:"body1",sx:{fontSize:"1.1rem",opacity:.9,mb:4},children:(null===e||void 0===e?void 0:e.message)||"Unable to load packages at the moment."}),(0,W.jsx)(h.A,{variant:"contained",color:"var(--bs-primary2)",size:"large",onClick:o,sx:{borderRadius:3,px:4,fontWeight:"600",textTransform:"none",boxShadow:"0 4px 12px rgba(255, 138, 0, 0.4)","&:hover":{background:"linear-gradient(90deg, #e52e71, #ff8a00)",boxShadow:"0 8px 20px rgba(229, 46, 113, 0.6)"}},children:"Try Again"})]})}):(0,W.jsx)(R,{data:(null===e||void 0===e?void 0:e.data)||[]})};const T=function(){return(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(L,{})})}},35717:(e,r,o)=>{o.d(r,{q:()=>t});var i=o(94414);const t=e=>i.cu+(e||"")},54358:(e,r,o)=>{o.d(r,{A:()=>t});var i=o(91036);function t(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"something went wrong";!1===e?i.oR.success(r):i.oR.error(r)}}}]);
//# sourceMappingURL=9502.7a774853.chunk.js.map