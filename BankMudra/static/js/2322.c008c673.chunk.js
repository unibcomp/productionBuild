"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[2322],{20925:(e,a,t)=>{t.d(a,{A:()=>d});var l=t(65043),s=t(14282),n=t(25284),o=t(70579);const d=function(e){var a,t;const[d,i]=(0,l.useState)(""),[r,c]=(0,l.useState)(!1),[u,m]=(0,l.useState)(!1);(0,l.useEffect)((()=>{h(e.updateInitialMemberHistory.pin),p()}),[e.updateInitialMemberHistory]);const p=()=>{const{pin:a,status:t,authority_remark:l}=e.updateInitialMemberHistory,s=r&&t&&"Select Status"!==t&&l&&""!==l.trim();m(s)},h=e=>{e?4!==e.length?(i("TPIN should be of four digits"),c(!1)):(i(""),c(!0)):(i("TPIN is required"),c(!1))};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(n.A,{...e,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,o.jsx)(n.A.Header,{closeButton:!0,children:(0,o.jsx)(n.A.Title,{id:"contained-modal-title-vcenter",className:"text-align-center",children:"Fund request By Member"})}),(0,o.jsx)(n.A.Body,{children:(0,o.jsxs)("div",{className:"row g-3",children:[" ",(0,o.jsx)("div",{className:"col-lg-6 mb-3",children:(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"txtDate",className:"form-label",children:"Date :"}),(0,o.jsx)("input",{className:"form-control",id:"txtDate",type:"text",name:"date",value:null===(a=e.updateInitialMemberHistory)||void 0===a?void 0:a.createdAt,disabled:!0})]})}),(0,o.jsx)("div",{className:"col-lg-6 mb-3",children:(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"txtAmount",className:"form-label",children:"Amount :"}),(0,o.jsx)("input",{className:"form-control",id:"txtAmount",type:"number",name:"amount",value:e.updateInitialMemberHistory.amount,disabled:!0})]})}),(0,o.jsx)("div",{className:"col-lg-6 mb-3",children:(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"txtMemberRemark",className:"form-label",children:"Member Remarks :"}),(0,o.jsx)("input",{className:"form-control",id:"txtMemberRemark",type:"text",name:"remark",value:e.updateInitialMemberHistory.remark,disabled:!0})]})}),(0,o.jsx)("div",{className:"col-lg-6 mb-3",children:(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"txtAuthorityRemark",className:"form-label",children:"Authority Remarks :"}),(0,o.jsx)("input",{className:"form-control",id:"txtAuthorityRemark",type:"text",name:"authority_remark",value:e.updateInitialMemberHistory.authority_remark||"",onChange:e.handleChangeUpdate,placeholder:"Enter authority remarks",required:!0})]})}),(0,o.jsx)("div",{className:"col-lg-6 mb-3",children:(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"txtPin",className:"form-label",children:"TPin :"}),(0,o.jsx)("input",{className:"form-control",id:"txtPin",type:"password",name:"pin",placeholder:"Enter TPin",value:(null===(t=e.updateInitialMemberHistory)||void 0===t?void 0:t.pin)||"",onChange:a=>{const t=a.target.value.replace(/\D/g,"");t.length<=4&&e.handleChangeUpdate({target:{name:"pin",value:t}}),h(t)},maxLength:4,required:!0}),d&&(0,o.jsx)("div",{className:"text-danger small mt-1",children:d})]})}),(0,o.jsx)("div",{className:"col-lg-6 mb-3",children:(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"ddlStatus",className:"form-label",children:"Select Status :"}),(0,o.jsxs)("select",{className:"form-select",id:"ddlStatus",name:"status",value:e.updateInitialMemberHistory.status||"",onChange:e.handleChangeUpdate,required:!0,children:[(0,o.jsx)("option",{value:"",disabled:!0,children:"Select Status"}),(0,o.jsx)("option",{value:"Pending",children:"Pending"}),(0,o.jsx)("option",{value:"Approved",children:"Approved"}),(0,o.jsx)("option",{value:"Rejected",children:"Rejected"})]})]})})]})}),(0,o.jsxs)(n.A.Footer,{children:[(0,o.jsx)(s.A,{variant:"secondary",onClick:e.onHide,children:"Close"}),(0,o.jsx)(s.A,{variant:"primary",onClick:e.updateData,disabled:!u,children:"Update"})]})]})})}},17042:(e,a,t)=>{t.r(a),t.d(a,{default:()=>h});var l=t(65043),s=t(73575),n=t(22019),o=t(94434),d=t(76245),i=t(72777),r=t(95702),c=(t(55953),t(53816),t(6901),t(20925)),u=t(91036),m=t(70579);const p=function(){const[e,a]=(0,l.useState)(!1),[t,p]=(0,l.useState)(10),[h,v]=(0,l.useState)(0),[x,b]=(0,l.useState)(null),[g,y]=(0,l.useState)(null),[j,N]=(0,l.useState)(null),[w,S]=(0,l.useState)(null),[_,f]=(0,l.useState)(!1),T=(new Date).toISOString().split("T")[0],A=(0,l.useRef)(10),[k,I]=(localStorage.getItem("userType"),(0,l.useState)({user_id:"",count:"",page:"",min_amt:0,max_amt:0,end_date:"",start_date:"",status:"",sortType:"",sortKey:""})),C=e=>{const{name:a,value:t}=e.target;t?"end_date"===a&&k.start_date&&t<k.start_date?n.Ay.error("End Date cannot be earlier than Start Date"):"start_date"===a&&k.end_date&&t>k.end_date?n.Ay.error("Start Date cannot be later than End Date"):I((e=>({...e,[a]:t}))):I((e=>({...e,[a]:t})))},D=(0,l.useCallback)((async(e,t)=>{a(!0);const l=void 0!==t?t:A.current,n=void 0!==e?e:h,o={...k,count:l,page:n||0,min_amt:+k.min_amt,max_amt:+k.max_amt,user_id:window.localStorage.getItem("userIdToken")};try{var d,i,r,c;const e=await(0,s.Xcx)(o);b(null===e||void 0===e||null===(d=e.data)||void 0===d||null===(i=d.data)||void 0===i?void 0:i.totalCount),y(null===e||void 0===e||null===(r=e.data)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.requestList)}catch(u){console.error("Error fetching data:",u)}a(!1)}),[k]),[R,M]=(0,l.useState)(),[P,F]=(0,l.useState)(1),H=async e=>{F("asc"==R?1:-1),M("asc"===R?"desc":"asc"),a(!0);const l={...k,count:t,page:h,sortType:+P,sortKey:e,user_id:window.localStorage.getItem("userIdToken")};try{var n,o,d,i,r,c;const e=await(0,s.Xcx)(l);console.log(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.requestList),b(null===e||void 0===e||null===(d=e.data)||void 0===d||null===(i=d.data)||void 0===i?void 0:i.totalCount),y(null===e||void 0===e||null===(r=e.data)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.requestList)}catch(u){}a(!1)},q=e=>{u.oR.success("".concat(e),{position:"top-center",autoClose:2e3})},E=e=>{u.oR.error("".concat(e),{position:"top-center",autoClose:2e3})},[B,U]=(0,l.useState)({Payment:"",status:"",pin:"",user_id:""}),[L,K]=(0,l.useState)();(0,l.useEffect)((()=>{D(0)}),[]);const Y=(0,l.useCallback)((e=>{A.current=e,p(e),v(0),I((a=>({...a,count:e,page:0}))),D(0,e)}),[D]);return(0,m.jsxs)(m.Fragment,{children:[e&&(0,m.jsx)(i.A,{}),(0,m.jsx)("div",{className:"PageHeading",children:(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("h1",{children:"Fund request by Member"})})}),(0,m.jsxs)("div",{className:"ContentArea",children:[(0,m.jsxs)("div",{className:"card",children:[(0,m.jsx)("div",{className:"card-header",children:" "}),(0,m.jsx)("div",{className:"card-body",children:(0,m.jsxs)("form",{action:"",method:"post",name:"frmReport",id:"frmReport",children:[(0,m.jsx)("input",{type:"hidden",id:"hidID",name:"hidID"}),(0,m.jsxs)("div",{className:"form-row",style:{alignItems:"end"},children:[(0,m.jsxs)("div",{className:"form-group col-md-4",children:[(0,m.jsx)("label",{htmlFor:"txtUserId",children:"Start Date"}),(0,m.jsx)("input",{type:"date",name:"start_date",id:"account_no",className:"form-control input-white-bg",max:k.end_date||T,value:k.start_date,onChange:C})]}),(0,m.jsxs)("div",{className:"form-group col-md-4",children:[(0,m.jsx)("label",{htmlFor:"txtUserId",children:"End Date"}),(0,m.jsx)("input",{type:"date",name:"end_date",id:"account_no",className:"form-control input-white-bg",min:k.start_date||void 0,max:T,value:k.end_date,onChange:C})]}),(0,m.jsxs)("div",{className:"form-group col-md-4",children:[(0,m.jsx)("label",{htmlFor:"ddldb",children:"Status"}),(0,m.jsxs)("select",{className:"form-select","aria-label":"Default select example",name:"status",onChange:C,children:[(0,m.jsx)("option",{selected:!0,children:"Select Status"}),(0,m.jsx)("option",{value:"Pending",children:"Pending"}),(0,m.jsx)("option",{value:"Approved",children:"Approved"}),(0,m.jsx)("option",{value:"Rejected",children:"Rejected"})]})]}),(0,m.jsxs)("div",{className:"form-group col-md-2",children:[(0,m.jsx)("label",{children:"\xa0"}),(0,m.jsx)("button",{type:"button",className:"btn mr-3 text-white",onClick:()=>D(0),style:{backgroundColor:"#6C757D"},children:"Search"}),(0,m.jsx)("button",{type:"button",className:"btn btn-light",onClick:async()=>{a(!0);const e={count:10,page:0,min_amt:0,max_amt:0,end_date:"",start_date:"",status:"",sortType:"",sortKey:"",user_id:window.localStorage.getItem("userIdToken")};try{var t,l,n,o;const a=await(0,s.Xcx)(e);y(null===a||void 0===a||null===(t=a.data)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.requestList),b(null===a||void 0===a||null===(n=a.data)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.totalCount),I({user_id:"",count:"",page:"",min_amt:0,max_amt:0,end_date:"",start_date:"",status:"",sortType:"",sortKey:""}),v(0),p(10)}catch(d){console.error("Something went wrong")}a(!1)},children:"Reset"})]})]})]})})]}),(0,m.jsx)("div",{className:"card mt-4",style:{overflow:"auto"},children:(0,m.jsx)("div",{className:"card-body",children:(0,m.jsxs)("div",{id:"myTable_wrapper",className:"dataTables_wrapper no-footer",children:[(0,m.jsx)("div",{className:"d-flex  justify-content-end ",children:(0,m.jsxs)("div",{className:"dataTables_length mb-2",id:"myTable_length",children:[(0,m.jsx)("button",{onClick:async()=>{a(!0);const e={...k,count:t,page:h,user_id:window.localStorage.getItem("userIdToken")};try{var l,o;const t=await(0,s.eVn)(e),d=null===t||void 0===t||null===(l=t.data)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.requestList;if(!d||0===d.length)return n.Ay.error("No data available to export."),void a(!1);S(d),setTimeout((()=>{document.getElementById("test-table-xls-button").click(),a(!1),n.Ay.success("Excel file download initiated.")}),100)}catch(d){console.error("Error preparing data for export:",d),n.Ay.error("Failed to prepare data for export. Please try again."),a(!1)}},disabled:e,style:{backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"8px",padding:"10px 24px",fontSize:"15px",fontWeight:"600",cursor:"pointer",minWidth:"160px",height:"42px",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",opacity:e?.7:1,transform:e?"none":"translateY(0)",":hover":{backgroundColor:"#059669",transform:"translateY(-1px)"},":active":{transform:"translateY(0)"},":disabled":{backgroundColor:"#9ca3af",cursor:"not-allowed"}},children:e?"Loading...":"Download Excel"}),(0,m.jsx)(r.A,{id:"test-table-xls-button",className:"download-table-xls-button d-none",table:"table-to-xlsx",filename:"Payment_Request  Report",sheet:"Sheet1",buttonText:"Download Excel"})]})}),(0,m.jsxs)("table",{style:{whiteSpace:"nowrap"},className:"table table-striped table-bordered table-hover display dataTable no-footer dtr-inline collapsed",id:"",role:"grid","aria-describedby":"myTable_info",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{role:"row",children:[(0,m.jsx)("th",{className:"sorting",tabIndex:0,"aria-controls":"myTable",rowSpan:1,colSpan:1,style:{width:"169.4px"},onClick:()=>H("createdAt"),children:"S.No"}),(0,m.jsx)("th",{className:"sorting",tabIndex:0,"aria-controls":"myTable",rowSpan:1,colSpan:1,style:{width:"169.4px"},onClick:()=>H("createdAt"),children:"Request Date"}),(0,m.jsx)("th",{className:"sorting",tabIndex:0,"aria-controls":"myTable",rowSpan:1,colSpan:1,style:{width:"169.4px"},onClick:()=>H("createdAt"),children:"User Name"}),(0,m.jsx)("th",{className:"sorting",tabIndex:0,"aria-controls":"myTable",rowSpan:1,colSpan:1,style:{width:"169.4px"},onClick:()=>H("createdAt"),children:"User Type"}),(0,m.jsx)("th",{className:"sorting",tabIndex:0,"aria-controls":"myTable",rowSpan:1,colSpan:1,style:{width:"131.4px"},"aria-label":"Bill Amount: activate to sort column ascending",children:"Mobile No."}),(0,m.jsx)("th",{className:"sorting",tabIndex:0,"aria-controls":"myTable",rowSpan:1,colSpan:1,style:{width:"131.4px"},"aria-label":"Bill Amount: activate to sort column ascending",children:"Amount"}),(0,m.jsx)("th",{className:"sorting",tabIndex:0,"aria-controls":"myTable",rowSpan:1,colSpan:1,style:{width:"131.4px"},"aria-label":"Bill Amount: activate to sort column ascending",children:"Remarks"}),(0,m.jsx)("th",{className:"sorting",tabIndex:0,"aria-controls":"myTable",rowSpan:1,colSpan:1,style:{width:"131.4px"},"aria-label":"Bill Amount: activate to sort column ascending",children:"Authority Remarks"}),(0,m.jsx)("th",{className:"sorting",tabIndex:0,"aria-controls":"myTable",rowSpan:1,colSpan:1,style:{width:"76.4px"},"aria-label":"Status: activate to sort column ascending",children:"Status"})]})}),(0,m.jsx)("tbody",{children:g&&(null===g||void 0===g?void 0:g.map(((e,a)=>(0,m.jsxs)("tr",{className:"odd",children:[(0,m.jsx)("td",{valign:"top",className:"dataTables_empty",children:a+1+h*t}),(0,m.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.createdAt}),(0,m.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.user_id}),(0,m.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.user_type}),(0,m.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.user_mobile}),(0,m.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.amount}),(0,m.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.remark}),(0,m.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.authority_remark}),(0,m.jsxs)("td",{valign:"top",className:"dataTables_empty",children:["Pending"==(null===e||void 0===e?void 0:e.status)?(0,m.jsx)("button",{class:"btn btn-warning",style:{width:"150px"},onClick:()=>(e=>{console.log("item",e),K(null===e||void 0===e?void 0:e._id),U(e),"Approved"==e.status?q("Already Approved"):f(!0)})(e),children:null===e||void 0===e?void 0:e.status}):"","Approved"==(null===e||void 0===e?void 0:e.status)?(0,m.jsx)("button",{class:"btn btn-success",style:{width:"150px"},children:null===e||void 0===e?void 0:e.status}):"","Rejected"==(null===e||void 0===e?void 0:e.status)?(0,m.jsx)("button",{class:"btn btn-danger",style:{width:"150px"},children:null===e||void 0===e?void 0:e.status}):""]})]},null===e||void 0===e?void 0:e._id))))})]}),(0,m.jsxs)("div",{className:"dataTables_info_page",children:[(0,m.jsxs)("div",{className:"dataTables_length me-3",children:[(0,m.jsx)("label",{className:"me-2",children:"Show"}),(0,m.jsx)(o.A,{value:t,onChange:Y,style:{width:120},options:[{value:10,label:"10 / page"},{value:20,label:"20 / page"},{value:50,label:"50 / page"},{value:100,label:"100 / page"}]})]}),(0,m.jsxs)("div",{className:"dataTables_info",id:"empoloyees-tblwrapper_info",role:"status","aria-live":"polite",children:["Total ",x," entries"]}),(0,m.jsx)("div",{className:"dataTables_paginate paging_simple_numbers",id:"empoloyees-tblwrapper_paginate",children:(0,m.jsx)(d.A,{current:h+1,onChange:e=>{const a=e-1;v(a),D(a)},total:x,pageSize:t})})]})]})})}),(0,m.jsx)(c.A,{show:_,onHide:()=>f(!1),updateInitialMemberHistory:B,handleChangeUpdate:e=>{const a={...B};console.log("clone",a);const t=e.target.value;a[e.target.name]=t,U(a)},updateData:async()=>{const e={...B,Payment:L,user_id:window.localStorage.getItem("userIdToken")};try{var t;a(!0);const o=await(0,s.xMo)(e);var l,n;if(200===(null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.statusCode))q(null===o||void 0===o||null===(l=o.data)||void 0===l?void 0:l.message),setTimeout((()=>{f(!1),D()}),2e3);else E((null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.message)||"Update failed. Please try again.")}catch(i){var o,d;E((null===i||void 0===i||null===(o=i.response)||void 0===o||null===(d=o.data)||void 0===d?void 0:d.message)||"An error occurred. Please try again."),console.error("Update error:",i)}finally{a(!1)}}})]}),(0,m.jsxs)("table",{className:"table table-striped table-bordered table-hover display dataTable no-footer dtr-inline collapsed d-none",id:"table-to-xlsx",role:"grid","aria-describedby":"myTable_info",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{role:"row",children:[(0,m.jsx)("th",{className:"sorting",tabIndex:0,"aria-controls":"myTable",rowSpan:1,colSpan:1,style:{width:"169.4px"},onClick:()=>H("createdAt"),children:"Create Date"}),(0,m.jsx)("th",{className:"sorting",tabIndex:0,"aria-controls":"myTable",rowSpan:1,colSpan:1,style:{width:"131.4px"},"aria-label":"Bill Amount: activate to sort column ascending",children:"Amount"}),(0,m.jsx)("th",{className:"sorting",tabIndex:0,"aria-controls":"myTable",rowSpan:1,colSpan:1,style:{width:"131.4px"},"aria-label":"Bill Amount: activate to sort column ascending",children:"Remarks"}),(0,m.jsx)("th",{className:"sorting",tabIndex:0,"aria-controls":"myTable",rowSpan:1,colSpan:1,style:{width:"131.4px"},"aria-label":"Bill Amount: activate to sort column ascending",children:"Authority Remarks"}),(0,m.jsx)("th",{className:"sorting",tabIndex:0,"aria-controls":"myTable",rowSpan:1,colSpan:1,style:{width:"76.4px"},"aria-label":"Status: activate to sort column ascending",children:"Status"})]})}),(0,m.jsx)("tbody",{children:w&&(null===w||void 0===w?void 0:w.map((e=>(0,m.jsxs)("tr",{className:"odd",children:[(0,m.jsx)("td",{valign:"top",className:"dataTables_empty",children:new Date(null===e||void 0===e?void 0:e.createdAt).getDate()+"/"+Number(new Date(null===e||void 0===e?void 0:e.createdAt).getMonth()+1)+"/"+new Date(null===e||void 0===e?void 0:e.createdAt).getFullYear()+","+new Date(null===e||void 0===e?void 0:e.createdAt).getHours()+":"+new Date(null===e||void 0===e?void 0:e.createdAt).getMinutes()}),(0,m.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.amount}),(0,m.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.remark}),(0,m.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.authority_remark}),(0,m.jsxs)("td",{valign:"top",className:"dataTables_empty",children:["Pending"==(null===e||void 0===e?void 0:e.status)?(0,m.jsx)("button",{class:"btn btn-warning",children:null===e||void 0===e?void 0:e.status}):"","Approved"==(null===e||void 0===e?void 0:e.status)?(0,m.jsx)("button",{class:"btn btn-success",children:null===e||void 0===e?void 0:e.status}):"","Rejected"==(null===e||void 0===e?void 0:e.status)?(0,m.jsx)("button",{class:"btn btn-danger",children:null===e||void 0===e?void 0:e.status}):"","In progress"==(null===e||void 0===e?void 0:e.status)?(0,m.jsx)("button",{class:"btn btn-warning",children:null===e||void 0===e?void 0:e.status}):""]})]},null===e||void 0===e?void 0:e._id))))})]})]})};const h=function(){return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(p,{})})}},6901:(e,a,t)=>{e.exports=t.p+"static/media/image4.6c2e81d319a597cbd094.jpeg"}}]);
//# sourceMappingURL=2322.c008c673.chunk.js.map