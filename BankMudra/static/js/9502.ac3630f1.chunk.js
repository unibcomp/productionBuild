"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[9502],{99502:(e,r,a)=>{a.r(r),a.d(r,{default:()=>N});var i=a(65043),t=a(73575),o=a(35475),n=a(27149),s=a(17555),l=a(71462),d=a(26240),c=a(73036),u=a(12110),p=a(94516),x=a(36591),v=a(26494),h=a(94496),g=a(11906),b=a(12816),m=a(39336),f=a(68903),A=a(61596),j=a(90035),y=a(35316),k=a(67807),w=a(27108),S=a(67784),C=a(51787),W=a(98606),_=a(35717),P=(a(72777),a(54358)),I=a(70579);const R=e=>{let{permission:r,children:a}=e;const i=localStorage.getItem("userType");return r.includes(i)?a:null},T=e=>{let{pkg:r}=e;const a=(0,d.A)(),t=(0,c.A)(a.breakpoints.down("sm")),[s,l]=(r.prices[0],(0,i.useState)(!1)),[b,m]=(0,i.useState)(null);return(0,I.jsxs)(u.A,{elevation:0,sx:{height:"100%",display:"flex",flexDirection:"column",borderRadius:3,border:"1px solid var(--bs-border)",borderTop:"4px solid var(--bs-nav)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-6px)",boxShadow:"0 10px 25px rgba(0,0,0,0.08)"}},children:[(0,I.jsxs)(p.A,{sx:{position:"relative",p:2},children:[r.icon_img&&(0,I.jsx)(p.A,{sx:{height:80,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,I.jsx)(x.A,{component:"img",width:"14px",image:"".concat((0,_.q)(r.icon_img)),alt:r.package_name,sx:{maxHeight:60,objectFit:"contain"}})}),(0,I.jsx)(p.A,{sx:{position:"absolute",top:16,right:16,color:"var(--bs-primary2)"},children:r.isPurchased&&(0,I.jsxs)(p.A,{sx:{position:"absolute",top:12,right:12,display:"flex",alignItems:"center",gap:.5,px:1,py:.3,bgcolor:"rgba(0,200,83,0.1)",borderRadius:2,color:"#00c853",fontSize:12,fontWeight:600},children:[(0,I.jsx)(n._IM,{size:14}),"Purchased"]})})]}),(0,I.jsxs)(v.A,{sx:{flexGrow:1,pt:0},children:[(0,I.jsx)(h.A,{variant:"h6",fontWeight:600,color:"var(--bs-primary2)",sx:{mb:1},children:r.package_name}),r.description&&(0,I.jsx)(h.A,{variant:"body2",dangerouslySetInnerHTML:{__html:r.description},color:"text.secondary",sx:{mb:2,lineHeight:1.6,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"}})]}),(0,I.jsxs)(p.A,{sx:{p:2,pt:0,display:"flex",flexDirection:t?"column":"row",gap:1.5},children:[(0,I.jsx)(R,{permission:["Distributor","Super Distributor"],children:!0===(null===r||void 0===r?void 0:r.isPurchased)&&(0,I.jsx)(g.A,{fullWidth:!0,variant:"contained",size:"small",sx:{bgcolor:"var(--bs-nav)",color:"var(--bs-primary2)",fontWeight:600,"&:hover":{bgcolor:"var(--bs-nav-dark)"}},onClick:()=>{l(!0),m(null===r||void 0===r?void 0:r._id)},children:"Assign Package"})}),(0,I.jsx)(g.A,{fullWidth:!0,variant:"outlined",component:o.N_,to:"/package-details/".concat(null===r||void 0===r?void 0:r._id),size:"small",sx:{borderColor:"var(--bs-nav)",color:"var(--bs-nav)",fontWeight:600,"&:hover":{bgcolor:"rgba(0,0,0,0.04)"}},children:"View Details"})]}),s&&(0,I.jsx)(z,{packageId:b,popupOpen:s,setpopupOpen:l})]})},O=e=>{let{data:r}=e;const a=(0,d.A)(),i=(0,c.A)(a.breakpoints.down("sm")),t=null===r||void 0===r?void 0:r.some((e=>e.isPurchased));return(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(p.A,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #f9f9f9, #eaeaea)",py:6},children:(0,I.jsxs)(b.A,{maxWidth:"lg",children:[(0,I.jsxs)(p.A,{textAlign:"center",mb:6,children:[(0,I.jsx)(h.A,{variant:i?"h5":"h4",fontWeight:800,letterSpacing:1.5,sx:{textTransform:"uppercase",color:"var(--bs-primary2)",background:"linear-gradient(90deg, #ff8a00, #e52e71)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Available Packages"}),(0,I.jsx)(m.A,{sx:{mt:2,mx:"auto",width:100,height:4,borderRadius:2,bgcolor:"var(--bs-primary2)"}}),(0,I.jsx)(h.A,{variant:"body1",sx:{mt:2,color:"var(--bs-primary2)",fontSize:i?"0.9rem":"1rem"},children:"Choose the plan that fits your business \u2014 flexible, fast, and powerful."})]}),(0,I.jsx)(f.Ay,{container:!0,spacing:4,justifyContent:"center",children:null===r||void 0===r?void 0:r.map((e=>(0,I.jsx)(f.Ay,{item:!0,xs:12,sm:6,md:4,sx:{transition:"transform 0.3s ease, box-shadow 0.3s ease","&:hover":{transform:"translateY(-10px)"}},children:(0,I.jsx)(T,{pkg:e})},e._id)))}),t&&(0,I.jsx)(A.A,{elevation:6,sx:{mt:6,p:3,borderRadius:3,bgcolor:"rgba(76, 175, 80, 0.08)",border:"1px solid rgba(76, 175, 80, 0.3)",color:"var(--bs-primary2)"},children:(0,I.jsxs)(p.A,{display:"flex",alignItems:"center",children:[(0,I.jsx)(W.A,{sx:{mr:2,fontSize:40,color:"var(--bs-primary2)",filter:"drop-shadow(0px 0px 4px rgba(76,175,80,0.4))"}}),(0,I.jsxs)(p.A,{children:[(0,I.jsx)(h.A,{variant:"h6",fontWeight:"600",color:"#111",children:"You have active subscriptions"}),(0,I.jsx)(h.A,{variant:"body2",color:"var(--bs-primary2)",children:"Manage your packages anytime from your account settings."})]})]})})]})})})},z=e=>{let{packageId:r,popupOpen:a,setpopupOpen:o}=e;const n=()=>{o(!1),_(null),m(null),p(""),c("")},[d,c]=(0,i.useState)(""),[u,p]=(0,i.useState)(""),[x,v]=(0,i.useState)([]),[b,m]=(0,i.useState)(null),[f,A]=(0,i.useState)([]),[W,_]=(0,i.useState)(null);(0,i.useEffect)((()=>{(async()=>{try{var e;let a=await(0,t.EpH)();var r;!1===(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.error)?v((null===(r=a.data)||void 0===r?void 0:r.data)||[]):v([])}catch(a){console.error(a),v([])}})(),(async()=>{try{var e;const a=await(0,t.FJs)(r);A((null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.data)||[])}catch(a){}})()}),[]);const[R,T]=(0,i.useState)(!1),O={"& .MuiOutlinedInput-root":{borderRadius:"14px"}};return(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(j.A,{open:a,onClose:n,fullWidth:!0,maxWidth:"xs",PaperProps:{sx:{borderRadius:"22px",background:"linear-gradient(145deg,#ffffff,#f5f7fc)",p:1}},children:(0,I.jsxs)(y.A,{sx:{p:3,backgroundColor:"var(--bs-primary1)",borderRadius:"20px",border:"1px solid var(--bs-primary2)"},children:[(0,I.jsx)(h.A,{textAlign:"center",fontWeight:700,fontSize:18,color:"var(--bs-primary2)",mb:2,children:"Assign Package to Retailer"}),(0,I.jsxs)(k.A,{spacing:2.2,children:[(0,I.jsx)(w.A,{options:x,getOptionLabel:e=>e.name||"",value:null!==b&&void 0!==b?b:null,onChange:(e,r)=>m(r),renderInput:e=>(0,I.jsx)(S.A,{...e,label:"Select Retailer",className:"mui-autofill-fix",sx:O})}),(0,I.jsx)(w.A,{options:f,getOptionLabel:e=>{var r;return"".concat(null===e||void 0===e?void 0:e.single_unit_amt," Rs , ").concat(null===e||void 0===e?void 0:e.price_info.duration).concat(null===e||void 0===e||null===(r=e.price_info)||void 0===r?void 0:r.duration_type,", ").concat(null===e||void 0===e?void 0:e.count," Count")},value:null!==W&&void 0!==W?W:null,onChange:(e,r)=>_(r),renderInput:e=>(0,I.jsx)(S.A,{...e,label:"Select Package",className:"mui-autofill-fix",sx:O})}),(0,I.jsx)(S.A,{label:"Price",value:u||"",className:"mui-autofill-fix",onChange:e=>{const r=e.target.value;/^(?:\d{0,4}(?:\.\d{0,2})?)?$/.test(r)&&p(r)},InputProps:{startAdornment:(0,I.jsx)(C.A,{position:"start",children:(0,I.jsx)(l.A,{})})},fullWidth:!0,sx:O}),(0,I.jsx)(S.A,{label:"TPIN",type:"password",value:d||"",className:"mui-autofill-fix",onChange:e=>{const r=e.target.value;/^\d{0,4}$/.test(r)&&c(r)},inputProps:{inputMode:"numeric",maxLength:4},InputProps:{startAdornment:(0,I.jsx)(C.A,{position:"start",children:(0,I.jsx)(s.A,{})})},fullWidth:!0,sx:O})]}),(0,I.jsxs)(k.A,{direction:"row",spacing:2,mt:3,children:[(0,I.jsx)(g.A,{fullWidth:!0,variant:"outlined",onClick:n,sx:{borderRadius:"50px",fontWeight:600,borderColor:"var(--bs-primary2)",color:"var(--bs-primary2)"},children:"Cancel"}),(0,I.jsx)(g.A,{fullWidth:!0,variant:"contained",disabled:R,onClick:()=>{(null===d||void 0===d?void 0:d.length)<4?alert("Please enter 4 digit TPIN"):(async()=>{var e,a;if(null===b||void 0===b||!b._id||null===W||void 0===W||null===(e=W.price_info)||void 0===e||!e._id||null===u||void 0===u||!u.trim())return void alert("All fields are required");T(!0);let i={package_id:r,tpin:d,price:null===W||void 0===W||null===(a=W.price_info)||void 0===a?void 0:a._id,merchant_id:null===b||void 0===b?void 0:b._id,merchantPurchasedAmt:u||0};try{var o,s,l;let e=await(0,t.O9L)(i);"200"===(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.statusCode)&&n(),(0,P.A)(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.error,null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.message)}catch(c){}finally{T(!1)}})()},sx:{borderRadius:"50px",fontWeight:700,backgroundColor:"var(--bs-primary2)",color:"#fff","&:hover":{backgroundColor:"#152c56"}},children:"Submit"})]})]})})})},F=()=>{const[e,r]=(0,i.useState)(null),a=async()=>{try{const e=await(0,t.ew7)();r(null===e||void 0===e?void 0:e.data)}catch(e){console.error("Error fetching package list:",e),r({error:!0,message:"Failed to fetch packages."})}};return(0,i.useEffect)((()=>{a()}),[]),null!==e&&void 0!==e&&e.error?(0,I.jsx)(p.A,{sx:{minHeight:"80vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1f1c2c, #928dab)",p:2},children:(0,I.jsxs)(A.A,{elevation:10,sx:{p:5,borderRadius:4,maxWidth:500,width:"100%",textAlign:"center",color:"var(--bs-primary2)",backdropFilter:"blur(10px)",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",transition:"transform 0.3s ease, box-shadow 0.3s ease","&:hover":{transform:"translateY(-5px)",boxShadow:"0 12px 40px rgba(0,0,0,0.5)"}},children:[(0,I.jsx)(h.A,{variant:"h4",sx:{fontWeight:"700",mb:2,textTransform:"uppercase",letterSpacing:1,background:"linear-gradient(90deg, #ff8a00, #e52e71)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Oops! Something went wrong"}),(0,I.jsx)(h.A,{variant:"body1",sx:{fontSize:"1.1rem",opacity:.9,mb:4},children:(null===e||void 0===e?void 0:e.message)||"Unable to load packages at the moment."}),(0,I.jsx)(g.A,{variant:"contained",color:"var(--bs-primary2)",size:"large",onClick:a,sx:{borderRadius:3,px:4,fontWeight:"600",textTransform:"none",boxShadow:"0 4px 12px rgba(255, 138, 0, 0.4)","&:hover":{background:"linear-gradient(90deg, #e52e71, #ff8a00)",boxShadow:"0 8px 20px rgba(229, 46, 113, 0.6)"}},children:"Try Again"})]})}):(0,I.jsx)(O,{data:(null===e||void 0===e?void 0:e.data)||[]})};const N=function(){return(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(F,{})})}},35717:(e,r,a)=>{a.d(r,{q:()=>t});var i=a(94414);const t=e=>i.cu+(e||"")},54358:(e,r,a)=>{a.d(r,{A:()=>t});var i=a(91036);function t(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"something went wrong";!1===e?i.oR.success(r):i.oR.error(r)}}}]);
//# sourceMappingURL=9502.ac3630f1.chunk.js.map