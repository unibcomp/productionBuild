"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[9502],{99502:(e,r,o)=>{o.r(r),o.d(r,{default:()=>F});var t=o(65043),n=o(73575),i=o(35475),a=o(27149),s=o(17555),l=o(71462),d=o(26240),c=o(73036),u=o(12110),p=o(94516),x=o(36591),v=o(81045),h=o(26494),b=o(94496),g=o(11906),m=o(12816),f=o(39336),j=o(68903),A=o(61596),y=o(90035),k=o(26600),w=o(27108),C=o(67784),S=o(51787),_=o(29347),I=o(98606),M=o(35717),P=(o(72777),o(54358)),O=o(70579);const W=e=>{let{permission:r,children:o}=e;const t=localStorage.getItem("userType");return r.includes(t)?o:null},R=e=>{let{pkg:r}=e;const o=(0,d.A)(),n=(0,c.A)(o.breakpoints.down("sm")),[s,l]=(r.prices[0],(0,t.useState)(!1)),[m,f]=(0,t.useState)(null);return(0,O.jsxs)(u.A,{elevation:3,sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.3s, box-shadow 0.3s","&:hover":{transform:"translateY(-8px)",boxShadow:o.shadows[8]},borderTop:"4px solid var(-bs-nav)"},children:[(0,O.jsxs)(p.A,{sx:{position:"relative"},children:[r.icon_img&&(0,O.jsx)(p.A,{sx:{width:"100px"},children:(0,O.jsx)(x.A,{component:"img",width:"14px",image:"".concat((0,M.q)(r.icon_img)),alt:r.package_name,sx:{objectFit:"contain",p:2}})}),(0,O.jsx)(p.A,{sx:{position:"absolute",top:16,right:16},children:r.isPurchased&&(0,O.jsx)(v.A,{sx:{bgcolor:"transparent"},children:(0,O.jsx)(a._IM,{})})})]}),(0,O.jsxs)(h.A,{sx:{flexGrow:1},children:[(0,O.jsx)(b.A,{gutterBottom:!0,variant:"h5",component:"div",fontWeight:"bold",color:"var(--bs-nav)",fontSize:"16px",children:r.package_name}),r.description&&(0,O.jsx)(b.A,{variant:"body2",color:"var(--bs-nav)",dangerouslySetInnerHTML:{__html:r.description},sx:{mb:2}})]}),(0,O.jsxs)(p.A,{sx:{p:2,display:"flex",flexDirection:n?"column":"row",rowGap:2,justifyContent:"space-between"},children:[(0,O.jsx)(W,{permission:["Distributor","Super Distributor"],children:!0===(null===r||void 0===r?void 0:r.isPurchased)&&(0,O.jsx)(g.A,{variant:"contained",color:"success",size:n?"small":"medium",onClick:()=>{l(!0),f(null===r||void 0===r?void 0:r._id)},fullWidth:n,sx:{height:40,borderColor:"var(--bs-nav)",backgroundColor:"var(--bs-nav)",color:"white"},children:"Assign Package"})}),(0,O.jsx)("button",{className:"btn btn-secondary",children:(0,O.jsx)(i.N_,{to:"/package-details/".concat(null===r||void 0===r?void 0:r._id),children:(0,O.jsx)("span",{style:{color:"#fff"},children:"View Details"})})})]}),s&&(0,O.jsx)(z,{packageId:m,popupOpen:s,setpopupOpen:l})]})},T=e=>{let{data:r}=e;const o=(0,d.A)(),t=(0,c.A)(o.breakpoints.down("sm")),n=null===r||void 0===r?void 0:r.some((e=>e.isPurchased));return(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(p.A,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #f9f9f9, #eaeaea)",py:6},children:(0,O.jsxs)(m.A,{maxWidth:"lg",children:[(0,O.jsxs)(p.A,{textAlign:"center",mb:6,children:[(0,O.jsx)(b.A,{variant:t?"h5":"h4",fontWeight:800,letterSpacing:1.5,sx:{textTransform:"uppercase",color:"#111",background:"linear-gradient(90deg, #ff8a00, #e52e71)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Available Packages"}),(0,O.jsx)(f.A,{sx:{mt:2,mx:"auto",width:100,height:4,borderRadius:2,bgcolor:"#e52e71"}}),(0,O.jsx)(b.A,{variant:"body1",sx:{mt:2,color:"#444",fontSize:t?"0.9rem":"1rem"},children:"Choose the plan that fits your business \u2014 flexible, fast, and powerful."})]}),(0,O.jsx)(j.Ay,{container:!0,spacing:4,justifyContent:"center",children:null===r||void 0===r?void 0:r.map((e=>(0,O.jsx)(j.Ay,{item:!0,xs:12,sm:6,md:4,sx:{transition:"transform 0.3s ease, box-shadow 0.3s ease","&:hover":{transform:"translateY(-10px)"}},children:(0,O.jsx)(R,{pkg:e})},e._id)))}),n&&(0,O.jsx)(A.A,{elevation:6,sx:{mt:6,p:3,borderRadius:3,bgcolor:"rgba(76, 175, 80, 0.08)",border:"1px solid rgba(76, 175, 80, 0.3)",color:"#222"},children:(0,O.jsxs)(p.A,{display:"flex",alignItems:"center",children:[(0,O.jsx)(I.A,{sx:{mr:2,fontSize:40,color:"#388e3c",filter:"drop-shadow(0px 0px 4px rgba(76,175,80,0.4))"}}),(0,O.jsxs)(p.A,{children:[(0,O.jsx)(b.A,{variant:"h6",fontWeight:"600",color:"#111",children:"You have active subscriptions"}),(0,O.jsx)(b.A,{variant:"body2",color:"#555",children:"Manage your packages anytime from your account settings."})]})]})})]})})})},z=e=>{let{packageId:r,popupOpen:o,setpopupOpen:i}=e;const a=()=>{i(!1),I(null),m(null),x(""),c("")},[d,c]=(0,t.useState)(""),[u,x]=(0,t.useState)(""),[v,h]=(0,t.useState)([]),[b,m]=(0,t.useState)(null),[f,j]=(0,t.useState)([]),[A,I]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{try{var e;let o=await(0,n.EpH)();var r;!1===(null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.error)?h((null===(r=o.data)||void 0===r?void 0:r.data)||[]):h([])}catch(o){console.error(o),h([])}})(),(async()=>{try{var e;const o=await(0,n.FJs)(r);j((null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.data)||[])}catch(o){}})()}),[]);const[M,W]=(0,t.useState)(!1);return(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)(y.A,{open:o,onClose:()=>i(!1),PaperProps:{sx:()=>({borderRadius:4,p:2,backdropFilter:"blur(10px)",background:"white",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)",width:"100%",maxWidth:380})},children:[(0,O.jsx)(k.A,{sx:{color:"var(--bs-primary1)",fontWeight:600,textAlign:"center",fontSize:"1.0rem"},children:"Assign Package to Retailer"}),(0,O.jsx)("div",{className:"form-group col-md-12",children:(0,O.jsx)(w.A,{options:v,getOptionLabel:e=>e.name||"",value:null!==b&&void 0!==b?b:null,size:"small",onChange:(e,r)=>m(r),renderOption:(e,r)=>(0,t.createElement)("li",{...e,key:r.retailer_id},(0,O.jsx)(p.A,{sx:{fontSize:"13px",color:"var(--bs-nav)"},children:r.name})),renderInput:e=>(0,O.jsx)(C.A,{...e,label:"Select Retailer",InputLabelProps:{sx:{"&.MuiInputLabel-root:not(.MuiInputLabel-shrink)":{top:"-3px"}}},sx:{"& label.Mui-focused":{color:"var(--bs-nav)"},"& .MuiInputBase-root":{backgroundColor:"#fff"},"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"var(--bs-primary1)"},"&.Mui-focused fieldset":{borderColor:"var(--bs-primary1)"}}}})})}),(0,O.jsx)("div",{className:"form-group col-md-12",children:(0,O.jsx)(w.A,{options:f,getOptionLabel:e=>{var r;return"".concat(null===e||void 0===e?void 0:e.single_unit_amt," Rs , ").concat(null===e||void 0===e?void 0:e.price_info.duration).concat(null===e||void 0===e||null===(r=e.price_info)||void 0===r?void 0:r.duration_type,", ").concat(null===e||void 0===e?void 0:e.count," Count")||0},value:null!==A&&void 0!==A?A:null,size:"small",onChange:(e,r)=>I(r),renderOption:(e,r)=>{var o;return(0,t.createElement)("li",{...e,key:r._id},(0,O.jsx)(p.A,{sx:{fontSize:"13px",color:"var(--bs-nav)"},children:"".concat(null===r||void 0===r?void 0:r.single_unit_amt," Rs , ").concat(null===r||void 0===r?void 0:r.price_info.duration).concat(null===r||void 0===r||null===(o=r.price_info)||void 0===o?void 0:o.duration_type,", ").concat(null===r||void 0===r?void 0:r.count," Count")||0}))},renderInput:e=>(0,O.jsx)(C.A,{...e,label:"Select Package",InputLabelProps:{sx:{"&.MuiInputLabel-root:not(.MuiInputLabel-shrink)":{top:"-3px"}}},sx:{"& label.Mui-focused":{color:"var(--bs-nav)"},"& .MuiInputBase-root":{backgroundColor:"#fff"},"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"var(--bs-primary1)"},"&.Mui-focused fieldset":{borderColor:"var(--bs-primary1)"}}}})})}),(0,O.jsx)("div",{className:"form-group col-md-12",children:(0,O.jsx)(C.A,{label:"Price",type:"text",name:"price",value:u||"",onChange:e=>{const r=e.target.value;/^(?:\d{0,4}(?:\.\d{0,2})?)?$/.test(r)&&x(r)},sx:{"& .MuiOutlinedInput-root":{height:42,"& .MuiOutlinedInput-input":{py:1},"&:hover fieldset":{borderColor:"var(--bs-primary1)"},"&.Mui-focused fieldset":{borderColor:"var(--bs-primary1)"}}},autoComplete:"off",InputProps:{startAdornment:(0,O.jsx)(S.A,{position:"start",children:(0,O.jsx)(l.A,{})})},fullWidth:!0})}),(0,O.jsx)("div",{className:"form-group col-md-12",children:(0,O.jsx)(C.A,{label:"TPIN",type:"password",name:"userpins",placeholder:"Enter TPin",value:d||"",onChange:e=>{const r=e.target.value;/^\d{0,4}$/.test(r)&&c(r)},sx:{"& .MuiOutlinedInput-root":{height:42,"& .MuiOutlinedInput-input":{py:1},"&:hover fieldset":{borderColor:"var(--bs-primary1)"},"&.Mui-focused fieldset":{borderColor:"var(--bs-primary1)"}}},autoComplete:"new-tpin",inputProps:{inputMode:"numeric",maxLength:4},InputProps:{startAdornment:(0,O.jsx)(S.A,{position:"start",children:(0,O.jsx)(s.A,{})})},fullWidth:!0})}),(0,O.jsxs)(_.A,{sx:{justifyContent:"center",mt:2},children:[(0,O.jsx)(g.A,{onClick:a,color:"error",variant:"outlined",sx:{borderRadius:2,px:4,width:"150px"},children:"Cancel"}),(0,O.jsx)(g.A,{onClick:()=>{(null===d||void 0===d?void 0:d.length)<4?alert("Please enter 4 digit TPIN"):(async()=>{var e,o;if(null===b||void 0===b||!b._id||null===A||void 0===A||null===(e=A.price_info)||void 0===e||!e._id||null===u||void 0===u||!u.trim())return void alert("All fields are required");W(!0);let t={package_id:r,tpin:d,price:null===A||void 0===A||null===(o=A.price_info)||void 0===o?void 0:o._id,merchant_id:null===b||void 0===b?void 0:b._id,merchantPurchasedAmt:u||0};try{var i,s,l;let e=await(0,n.O9L)(t);"200"===(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.statusCode)&&a(),(0,P.A)(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.error,null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.message)}catch(c){}finally{W(!1)}})()},disabled:M,color:"primary",variant:"contained",sx:{backgroundColor:"var(--bs-primary1)",borderRadius:2,px:4,width:"150px"},children:"Submit"})]})]})})},L=()=>{const[e,r]=(0,t.useState)(null),o=async()=>{try{const e=await(0,n.ew7)();r(null===e||void 0===e?void 0:e.data)}catch(e){console.error("Error fetching package list:",e),r({error:!0,message:"Failed to fetch packages."})}};return(0,t.useEffect)((()=>{o()}),[]),null!==e&&void 0!==e&&e.error?(0,O.jsx)(p.A,{sx:{minHeight:"80vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1f1c2c, #928dab)",p:2},children:(0,O.jsxs)(A.A,{elevation:10,sx:{p:5,borderRadius:4,maxWidth:500,width:"100%",textAlign:"center",color:"#fff",backdropFilter:"blur(10px)",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",transition:"transform 0.3s ease, box-shadow 0.3s ease","&:hover":{transform:"translateY(-5px)",boxShadow:"0 12px 40px rgba(0,0,0,0.5)"}},children:[(0,O.jsx)(b.A,{variant:"h4",sx:{fontWeight:"700",mb:2,textTransform:"uppercase",letterSpacing:1,background:"linear-gradient(90deg, #ff8a00, #e52e71)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Oops! Something went wrong"}),(0,O.jsx)(b.A,{variant:"body1",sx:{fontSize:"1.1rem",opacity:.9,mb:4},children:(null===e||void 0===e?void 0:e.message)||"Unable to load packages at the moment."}),(0,O.jsx)(g.A,{variant:"contained",color:"warning",size:"large",onClick:o,sx:{borderRadius:3,px:4,fontWeight:"600",textTransform:"none",boxShadow:"0 4px 12px rgba(255, 138, 0, 0.4)","&:hover":{background:"linear-gradient(90deg, #e52e71, #ff8a00)",boxShadow:"0 8px 20px rgba(229, 46, 113, 0.6)"}},children:"Try Again"})]})}):(0,O.jsx)(T,{data:(null===e||void 0===e?void 0:e.data)||[]})};const F=function(){return(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(L,{})})}},35717:(e,r,o)=>{o.d(r,{q:()=>n});var t=o(94414);const n=e=>t.cu+(e||"")},54358:(e,r,o)=>{o.d(r,{A:()=>n});var t=o(91036);function n(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"something went wrong";!1===e?t.oR.success(r):t.oR.error(r)}}}]);
//# sourceMappingURL=9502.8d08d3cf.chunk.js.map