"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[8926],{60027:(e,r,t)=>{t.r(r),t.d(r,{default:()=>Se});var s=t(68903),a=t(94516),n=t(67807),l=t(81045),o=t(94496),i=t(11906),d=t(39336),c=t(95263);t.p;t(49867),t(92382);var u=t(70579);var x=t(65043),h=t(73575),m=t(94163),p=(t(38421),t(48885),t(6901)),v=t(91036),b=(t(92342),t(83687));const g=e=>{let{retailerName:r}=e;return(0,u.jsx)("div",{className:"custom-marquee-container",children:(0,u.jsxs)("div",{className:"marquee-content",children:[(0,u.jsx)("span",{className:"congratulations",children:"Congratulations!"}),(0,u.jsxs)("span",{className:"message1111",children:["Dear ",(0,u.jsx)("strong",{children:r}),", now you have become our partner with Needu. So let's grow together. Thank you!"]})]})})};t(55953),t(53816);var f=t(83625),y=t(24056),j=t(73036),A=t(12816),w=t(66620),S=t(77111),C=t(90837),N=t(73216),k=t(35475),I=t(61596),T=t(67254),F=t(67784),M=t(12110),P=t(36591),R=t(26494),_=t(34535),O=t(26240),E=t(51787),z=t(66360),B=t(17200),D=t(35717),W=t(94414),U=t(82114);const L=["Search by name","Search by name , Bank Transfer","Search by name , Bank Transfer , Aadhaar withdraw..."],V="#ffffff",q="var(--bs-primary1)",G=((0,_.Ay)(I.A)((e=>{let{theme:r}=e;return{padding:r.spacing(2),textAlign:"center",backgroundColor:V,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.3s ease",borderRadius:"8px",border:"1px solid #e0e0e0",height:"120px",position:"relative",zIndex:0,"&:hover":{transform:"translateY(-5px)",boxShadow:"rgba(0, 0, 0, 0.35) 0px 2px 8px",backgroundClip:"border-box"}}})),(0,_.Ay)(a.A)((e=>{let{theme:r}=e;return{backgroundColor:q,borderRadius:"50%",padding:r.spacing(1.5),marginBottom:r.spacing(1.5),display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:"-30px",zIndex:10,width:"48px",height:"48px",[r.breakpoints.up("sm")]:{width:"56px",height:"56px"}}})),(0,_.Ay)(T.A)((e=>{let{theme:r}=e;return{margin:r.spacing(2),width:"100%"}})));const X=function(e){let{services:r=[],isInstantpaypresnt:t}=e;(0,N.Zp)();const n=localStorage.getItem("regisNumber"),[l,i]=(0,x.useState)(""),[d,c]=(0,x.useState)(!1),[h,m]=(0,x.useState)(null),[p,v]=(0,x.useState)([]),b=(0,O.A)();(0,j.A)(b.breakpoints.only("xs")),(0,x.useEffect)((()=>{try{if(!Array.isArray(r))throw new Error("Invalid services data received");m(null)}catch(e){m(e),console.error("ServiceGrid initialization error:",e)}}),[r]);const[g,f]=(0,x.useState)(0);(0,x.useEffect)((()=>{const e=setInterval((()=>{f((e=>(e+1)%L.length))}),1e3);return()=>clearInterval(e)}),[]),(0,x.useEffect)((()=>{try{if(!Array.isArray(r))return void v([]);const e=r.filter((e=>{try{if(!e||"undefined"===typeof e.service_name)return!1;const r=String(e.service_name||""),t=String(l||"");return 0===r.localeCompare(t,void 0,{sensitivity:"base"})||r.includes(t)}catch(r){return console.error("Service filtering error:",r),!1}}));v(e)}catch(e){console.error("Filtering error:",e),v([])}}),[r,l]);const y=localStorage.getItem("userType");return h?(0,u.jsxs)(G,{severity:"error",children:[(0,u.jsx)(o.A,{variant:"h6",children:"Error Loading Services"}),(0,u.jsx)(o.A,{variant:"body2",children:h.message})]}):Array.isArray(r)?(0,u.jsxs)(a.A,{sx:{paddingY:{xs:2,sm:3,md:4},backgroundColor:"",paddingX:0,borderRadius:"12px"},children:[(0,u.jsx)(U.A,{currentUser:y,excludeUserList:["Reseller","reseller partner api user"],children:!0!==(null===W.wV||void 0===W.wV?void 0:W.wV.includes(n))&&(0,u.jsx)(a.A,{sx:{display:"flex",alignItems:"center",gap:2,width:"100%",bgcolor:"var(--bs-primary1)",color:"var(--bs-primary2)",p:2,mb:2,borderRadius:2,border:"2px solid var(--bs-primary3)"},children:(0,u.jsx)(B.P.div,{initial:{width:50},animate:{width:d||l?"100%":50},transition:{type:"spring",stiffness:800,damping:15},onHoverStart:()=>c(!0),onHoverEnd:()=>c(!1),style:{width:"100%"},children:(0,u.jsx)(F.A,{variant:"outlined",placeholder:L[g],value:l,onChange:e=>i(e.target.value),onFocus:()=>c(!0),onBlur:()=>c(!1),fullWidth:!0,size:"small",sx:{bgcolor:"var(--bs-primary1)",color:"var(--bs-primary2)",borderRadius:1,"& .MuiOutlinedInput-root":{color:"var(--bs-primary2)","& fieldset":{borderColor:"var(--bs-primary3)",borderWidth:"2px"},"&:hover fieldset":{borderColor:"var(--bs-primary3)",borderWidth:"2px"},"&.Mui-focused fieldset":{borderColor:"var(--bs-primary3)",borderWidth:"2px"}},input:{color:"var(--bs-primary2)"}},InputProps:{startAdornment:(0,u.jsx)(E.A,{position:"start",children:(0,u.jsx)(z.A,{sx:{cursor:"pointer",color:"var(--bs-primary2)"}})})}})})})}),0===p.length&&l&&(0,u.jsx)(T.A,{severity:"error",sx:{mb:2},children:"No services found matching your search."}),(0,u.jsx)(s.Ay,{container:!0,spacing:2,children:p.map((e=>{try{const r=(null===e||void 0===e?void 0:e._id)||"",t=(null===e||void 0===e?void 0:e.service_name)||"Unnamed Service",a=(null===e||void 0===e?void 0:e.icon)||"",n=(null===e||void 0===e?void 0:e.route)||"#";return(0,u.jsx)(s.Ay,{item:!0,xs:6,sm:4,md:3,lg:2,children:(0,u.jsx)(k.N_,{to:n,children:(0,u.jsxs)(M.A,{className:"boxModel",sx:{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",padding:2,boxShadow:3,borderRadius:2,transition:"transform 0.2s ease-in-out","&:hover":{transform:"scale(1.03)"}},children:[(0,u.jsx)(P.A,{component:"img",src:(0,D.q)(a),alt:t,loading:"eager",onError:e=>{e.target.onerror=null,e.target.src="/servicesicon.png"},sx:{width:64,height:64,objectFit:"contain",marginBottom:1}}),(0,u.jsx)(R.A,{sx:{padding:0},children:(0,u.jsx)(o.A,{variant:"body2",fontWeight:500,children:t})})]})})},r)}catch(h){return console.error("Service rendering error:",h),null}}))})]}):(0,u.jsx)(G,{severity:"warning",children:"No services available at the moment. Please try again later."})};var H=t(43845),Y=t(27108),Z=t(15531),$=t(93881),K=t(74709),J=t(88645),Q=t(59540),ee=t(34642),re=t(17392);const te=e=>{var r,t,n;let{data:l}=e;return(0,u.jsx)(a.A,{sx:{p:2},children:(0,u.jsxs)(s.Ay,{container:!0,spacing:3,children:[(0,u.jsx)(s.Ay,{item:!0,xs:12,sm:6,md:6,children:(0,u.jsx)(M.A,{sx:{bgcolor:"#ffffff",boxShadow:3,borderRadius:2,height:"100%"},children:(0,u.jsxs)(R.A,{children:[(0,u.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,u.jsx)(re.A,{children:(0,u.jsx)(J.A,{})}),(0,u.jsxs)(o.A,{variant:"h6",sx:{color:"#388e3c",fontWeight:"bold"},children:[null!==(r=null===l||void 0===l?void 0:l.totalCredit)&&void 0!==r?r:0," \u20b9"]})]}),(0,u.jsx)(o.A,{variant:"subtitle2",color:"text.secondary",sx:{textAlign:"center",mt:1},children:"Credit"})]})})}),(0,u.jsx)(s.Ay,{item:!0,xs:12,sm:6,md:6,children:(0,u.jsx)(M.A,{sx:{bgcolor:"#ffffff",boxShadow:3,borderRadius:2,height:"100%"},children:(0,u.jsxs)(R.A,{children:[(0,u.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,u.jsx)(re.A,{children:(0,u.jsx)(Q.A,{})}),(0,u.jsxs)(o.A,{variant:"h6",sx:{color:"#d32f2f",fontWeight:"bold"},children:[null!==(t=null===l||void 0===l?void 0:l.totalDebit)&&void 0!==t?t:0," \u20b9"]})]}),(0,u.jsx)(o.A,{variant:"subtitle2",color:"text.secondary",sx:{textAlign:"center",mt:1},children:"Debit"})]})})}),(0,u.jsx)(s.Ay,{item:!0,xs:12,sm:6,md:6,children:(0,u.jsx)(M.A,{sx:{bgcolor:"#ffffff",boxShadow:3,borderRadius:2,height:"100%"},children:(0,u.jsxs)(R.A,{children:[(0,u.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,u.jsx)(re.A,{children:(0,u.jsx)(ee.A,{})}),(0,u.jsx)(o.A,{variant:"h6",sx:{color:"#8e24aa",fontWeight:"bold"},children:null!==(n=null===l||void 0===l?void 0:l.totalDisputeCount)&&void 0!==n?n:0})]}),(0,u.jsx)(o.A,{variant:"subtitle2",color:"text.secondary",sx:{textAlign:"center",mt:1},children:"Dispute Request"})]})})})]})})},se={success:{iconBg:"#4CAF50",border:"#388E3C",text:"#2E7D32",label:"Success",key:"success"},failed:{iconBg:"#F44336",border:"#D32F2F",text:"#C62828",label:"Failed",key:"failed"},pending:{iconBg:"#FF9800",border:"#F57C00",text:"#EF6C00",label:"Pending",key:"pending"},refund:{iconBg:"#F44336",border:"#D32F2F",text:"#C62828",label:"Refund",key:"refund"},totalAmount:{iconBg:"#4CAF50",border:"#388E3C",text:"#2E7D32",label:"Total Amount",key:"totalAmount"},balance_reverse:{iconBg:"#FF9800",border:"#F57C00",text:"#EF6C00",label:"Balance Reverse",key:"balance_reverse"},balance_transfer:{iconBg:"#4CAF50",border:"#388E3C",text:"#2E7D32",label:"Balance Transfer",key:"balance_transfer"},cardGradient:"linear-gradient(135deg, #FFFFFF, #F7F9FC)",titleColor:"#1E88E5"},ae={success:{count:0,totalAmount:0},pending:{count:0,totalAmount:0},failed:{count:0,totalAmount:0},refund:{count:0,totalAmount:0}},ne={totalAmount:0,balance_reverse:0,balance_transfer:0,totalCount:0},le=e=>{var r;let{title:t,data:a,url:n}=e;const i=(0,O.A)(),d=(0,j.A)(i.breakpoints.down("sm"));return(0,u.jsx)(M.A,{elevation:4,sx:{height:"100%",background:se.cardGradient,borderRadius:3,p:2,"&:hover":{boxShadow:"0 8px 20px rgba(0, 0, 0, 0.15)",transform:"scale(1.02)",transition:"all 0.3s ease-in-out"}},children:(0,u.jsx)(k.N_,{to:n,children:(0,u.jsxs)(R.A,{children:[(0,u.jsx)(o.A,{variant:d?"h6":"h5",fontWeight:"bold",gutterBottom:!0,sx:{color:"var(--bs-nav)",textAlign:"center",mb:3,fontSize:"16px"},children:t}),(0,u.jsx)(s.Ay,{container:!0,spacing:2,children:null===(r=Object.keys(a))||void 0===r?void 0:r.filter((e=>!["totalCount"].includes(e))).map((e=>{var r,t,n,o,i,d,c,x,h,m,p,v;return(0,u.jsx)(s.Ay,{item:!0,xs:12,children:(0,u.jsx)(H.A,{avatar:(0,u.jsx)(l.A,{sx:{bgcolor:(null===(r=se[e])||void 0===r?void 0:r.iconBg)||(null===se||void 0===se||null===(t=se.success)||void 0===t?void 0:t.iconBg)},children:"success"===e?(0,u.jsx)(Z.A,{fontSize:"20px",sx:{fill:"#fff",color:"#fff"}}):"failed"===e?(0,u.jsx)($.A,{fontSize:"20px",sx:{fill:"#fff",color:"#fff"}}):(0,u.jsx)(K.A,{fontSize:"20px",sx:{fill:"#fff",color:"#fff"}})}),label:"".concat((null===se||void 0===se||null===(n=se[e])||void 0===n?void 0:n.label)||e||"N/A",": ").concat(null!==(o=null!==(i=null===a||void 0===a||null===(d=a[e])||void 0===d?void 0:d.totalAmount)&&void 0!==i?i:null===a||void 0===a?void 0:a[null===se||void 0===se||null===(c=se[e])||void 0===c?void 0:c.key])&&void 0!==o?o:"0.00"),variant:"outlined",sx:{width:"100%",justifyContent:"flex-start",fontWeight:"bold",p:1,borderColor:(null===(x=se[e])||void 0===x?void 0:x.border)||(null===se||void 0===se||null===(h=se.success)||void 0===h?void 0:h.border),"& .MuiChip-label":{fontWeight:600,color:(null===(m=se[e])||void 0===m?void 0:m.text)||(null===se||void 0===se||null===(p=se.success)||void 0===p?void 0:p.text)},"&:hover":{backgroundColor:"".concat(null===(v=se[e])||void 0===v?void 0:v.iconBg,"20")},"& .MuiChip-icon":{fill:"#fff"}}})},e)}))})]})})})},oe=e=>{var r,t,n,l;let{data:i}=e;const d=(new Date).toISOString().split("T")[0],[c,m]=(0,x.useState)(1),p=localStorage.getItem("userType"),[v,b]=(0,x.useState)(""),[g,f]=(0,x.useState)([]),[y,A]=(0,x.useState)(null),[w,S]=(0,x.useState)(),C=(0,O.A)(),[N,k]=(0,x.useState)(d),[I,T]=(0,x.useState)(d),[P,R]=(0,x.useState)(!1),_=((0,j.A)(C.breakpoints.down("sm")),[{title:"Bank Transfer Summary",data:null!==(r=null===w||void 0===w?void 0:w.dmtTxns)&&void 0!==r?r:ae,url:"/super/bank-transfer-report?start-date=".concat(N,"&end-date=").concat(I)},{title:"AEPS Summary",data:null!==(t=null===w||void 0===w?void 0:w.aepsTxns)&&void 0!==t?t:ae,url:"/super/aeps-transfer-report?start-date=".concat(N,"&end-date=").concat(I)},{title:"BBPS Summary",data:null!==(n=null===w||void 0===w?void 0:w.bbpsTxns)&&void 0!==n?n:ae,url:"/super/bbps-report?start-date=".concat(N,"&end-date=").concat(I)},{title:"Fund Transfer Summary",data:null!==(l=null===w||void 0===w?void 0:w.fundTransfer)&&void 0!==l?l:ne,url:"/super/fund-transfer-report?start-date=".concat(N,"&end-date=").concat(I)}].filter((e=>e.title.toLowerCase().includes(v.toLowerCase())))),E=(Math.ceil(_.length/10),_.slice(10*(c-1),10*c));return(0,x.useEffect)((()=>{(async()=>{var e;let r=await(0,h.EpH)();var t;!1===(null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.error)?f((null===(t=r.data)||void 0===t?void 0:t.data)||[]):f([])})()}),[]),(0,x.useEffect)((()=>{(async()=>{var e;let r={start_date:N,end_date:I};console.log(y,"sel"),y&&(r.retailer_id=null===y||void 0===y?void 0:y._id);let t=await(0,h.rgU)(r);S((null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.data)||null)})()}),[P]),(0,u.jsxs)(a.A,{sx:{flexGrow:1},children:[(0,u.jsx)(M.A,{elevation:0,sx:{p:3,pb:0,mb:0,borderRadius:3,background:"#fff",boxShadow:0},children:(0,u.jsxs)(s.Ay,{container:!0,spacing:2,children:[(0,u.jsx)(s.Ay,{item:!0,xs:12,children:(0,u.jsxs)(a.A,{sx:{p:2,paddingX:0,display:"flex",alignItems:"center",justifyContent:"start",gap:2,width:"100%",flexWrap:"wrap"},children:[(0,u.jsx)(F.A,{label:"From",type:"date",size:"small",value:N,onChange:e=>k(e.target.value),InputLabelProps:{shrink:!0},inputProps:{max:d},sx:{flex:1,minWidth:160,"& .MuiInputBase-root":{backgroundColor:"#fff"},"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"var(--bs-primary1)"},"&.Mui-focused fieldset":{borderColor:"var(--bs-primary1)"}}}}),(0,u.jsx)(F.A,{label:"To",type:"date",size:"small",value:I,onChange:e=>T(e.target.value),InputLabelProps:{shrink:!0},inputProps:{max:d},sx:{flex:1,minWidth:160,"& .MuiInputBase-root":{backgroundColor:"#fff"},"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"var(--bs-primary1)"},"&.Mui-focused fieldset":{borderColor:"var(--bs-primary1)"}}}}),(0,u.jsx)(U.A,{currentUser:p,excludeUserList:["Reseller"],children:(0,u.jsx)(Y.A,{options:g,getOptionLabel:e=>e.name,value:null!==y&&void 0!==y?y:null,size:"small",onChange:(e,r)=>A(r),sx:{flex:1,minWidth:220,flexShrink:0},renderOption:(e,r)=>(0,x.createElement)("li",{...e,key:r.retailer_id},(0,u.jsx)(a.A,{sx:{fontSize:"13px",color:"var(--bs-nav)"},display:"flex",columnGap:1.5,alignItems:"center",children:r.name})),renderInput:e=>(0,u.jsx)(F.A,{...e,label:"Select Retailer",InputLabelProps:{sx:{"&.MuiInputLabel-root:not(.MuiInputLabel-shrink)":{top:"-3px"}}}})})})]})}),(0,u.jsxs)(s.Ay,{item:!0,xs:12,children:[(0,u.jsx)("button",{type:"button",className:"btn btn-primary mr-3",onClick:()=>{R((e=>!e))},children:"Search"}),(0,u.jsx)("button",{type:"button",className:"btn btn-light",onClick:()=>{T(""),k(""),A(null),R((e=>!e))},children:"Reset"})]})]})}),(0,u.jsx)(te,{data:w}),(0,u.jsx)(U.A,{currentUser:p,excludeUserList:["Reseller"],children:(0,u.jsxs)(M.A,{sx:{p:3,pb:0,borderRadius:3,boxShadow:0,background:"#fff"},children:[(0,u.jsx)(o.A,{variant:"h4",fontSize:"20px",mb:2,gutterBottom:!0,fontWeight:"bold",color:"var(--bs-nav)",align:"center",children:"Business Summary"}),(0,u.jsx)(s.Ay,{container:!0,spacing:3,sx:{mb:4},children:E.length>0?E.map(((e,r)=>(0,u.jsx)(s.Ay,{item:!0,xs:12,md:6,children:(0,u.jsx)(le,{title:e.title,data:e.data,url:e.url})},r))):(0,u.jsx)(s.Ay,{item:!0,xs:12,children:(0,u.jsxs)(o.A,{variant:"h6",color:"textSecondary",align:"center",children:['No data found for "',v,'"']})})})]})})]})},ie=e=>"Api User"===localStorage.getItem("userType")?null:e,de={background:"var(--bs-primary3)"},ce={regular:400,medium:500,bold:700},ue={small:"14px",medium:"16px",large:"20px"},xe=e=>"".concat(8*e,"px"),he={sm:"600px"},me=(0,w.A)(f.A)({display:"none","& .MuiTabs-indicator":{backgroundColor:de.background,height:3,display:"none"}}),pe=(0,w.A)(y.A)({textTransform:"none",fontWeight:ce.medium,fontSize:ue.medium,marginRight:xe(4),["@media (max-width: ".concat(he.sm,")")]:{fontSize:ue.small,marginRight:xe(2)}}),ve=(0,w.A)(a.A)({padding:xe(3),["@media (max-width: ".concat(he.sm,")")]:{padding:xe(2)}}),be=e=>{let{storedUserType:r,services:t,data:s,isInstantpaypresnt:n}=e;const[l,o]=(0,x.useState)(null),i=(0,j.A)("(max-width: ".concat(he.sm,")"));(0,x.useEffect)((()=>{o("zsm"===r||"asm"===r||"Super Distributor"===r||"Distributor"===r?1:0)}),[r]);return"Retailer"!=r&&1===l?(0,u.jsx)(a.A,{sx:{p:xe(3)},children:(0,u.jsx)(oe,{data:s})}):(0,u.jsxs)(A.A,{sx:{p:0,backgroundColor:"var(--bs-primary3)"},children:[(0,u.jsxs)(me,{value:l,onChange:(e,r)=>{o(r)},"aria-label":"dashboard tabs",variant:i?"fullWidth":"standard",centered:!i,children:[(0,u.jsx)(pe,{icon:(0,u.jsx)(S.A,{}),label:"Services"}),ie((0,u.jsx)(pe,{icon:(0,u.jsx)(C.A,{}),label:"Transactions"}))]}),(0,u.jsxs)(ve,{sx:{p:0},children:[0===l&&(0,u.jsx)(X,{services:t,isInstantpaypresnt:n}),1===l&&(0,u.jsx)(a.A,{children:(0,u.jsx)(oe,{data:s})})]})]})},ge=e=>{let{modalVisibility:r,handleCloseModal3:t,handleSubmitmodal3:s,storedUserid:a,setModalVisibility:n,getUserTpinStatus:l}=e;const[o,i]=(0,x.useState)(new Array(6).fill("")),[d,c]=(0,x.useState)(120),[m,p]=(0,x.useState)(!1),[b,g]=(0,x.useState)(!1),[f,y]=(0,x.useState)(!1),[j,A]=(0,x.useState)(""),[w,S]=(0,x.useState)(""),C=(0,x.useRef)([]),N=(0,x.useRef)(null),k=(0,x.useCallback)((e=>{const r=Math.floor(e/60),t=e%60;return"".concat(String(r).padStart(2,"0"),":").concat(String(t).padStart(2,"0"))}),[]),I=(0,x.useCallback)((()=>{N.current&&clearInterval(N.current),c(120),p(!1),N.current=setInterval((()=>{c((e=>e<=1?(clearInterval(N.current),p(!0),0):e-1))}),1e3)}),[]);(0,x.useEffect)((()=>(r.showModal3&&I(),()=>{N.current&&clearInterval(N.current)})),[r.showModal3,I]);const T=(0,x.useCallback)(((e,r)=>{const t=[...o];t[e]=r.slice(0,1),i(t),r&&e<5&&C.current[e+1]&&C.current[e+1].focus()}),[o]),F=(0,x.useCallback)(((e,r)=>{"Backspace"===r.key&&!o[e]&&e>0&&C.current[e-1]&&C.current[e-1].focus()}),[o]),M=(0,x.useCallback)((async()=>{g(!0),S(""),A("");try{200===(await(0,h.Ei8)({user_id:a})).status?(A("OTP has been resent successfully."),I(),i(new Array(6).fill(""))):S("Failed to resend OTP.")}catch(w){S("Failed to resend OTP.")}finally{g(!1)}}),[a,I]),P=(0,x.useCallback)((async()=>{y(!0),A(""),S("");try{var e;const n=await(0,h.B1X)({user_id:a,otp:o.join("")});var r,t;if(200===(null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.statusCode))A("OTP verified successfully."),v.oR.success("OTP verified successfully."),l("OV"),s();else S((null===n||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||"Failed to verify OTP."),v.oR.error((null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message)||"Failed to verify OTP.")}catch(w){S("Failed to verify OTP."),v.oR.error("Failed to verify OTP.")}finally{y(!1)}}),[a,o,s,l]);return r.showModal3?(0,u.jsx)("div",{className:"modal fade modal-cssclasss mediaqurymodalpop show d-block",tabIndex:"-1",role:"dialog",children:(0,u.jsx)("div",{className:"modal-dialog",role:"document",children:(0,u.jsxs)("div",{className:"modal-content modal-content-otp",children:[(0,u.jsx)("div",{className:"modal-header text-center",children:(0,u.jsx)("h5",{className:"modal-title modaltitle-otp",children:"OTP Verification"})}),(0,u.jsx)("div",{className:"modal-body",children:m?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{children:"We've sent a 6-digit verification code to your mobile number, please enter it here!"}),(0,u.jsx)("button",{type:"button",className:"btn btn-resend-otp",onClick:M,children:b?(0,u.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):"Resend OTP"})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{children:"We've sent a 6-digit verification code to your mobile number, please enter it here!!"}),(0,u.jsxs)("div",{className:"verification-timer",children:["OTP expires in ",k(d)," ",(0,u.jsx)("span",{className:"resend-otp",style:{cursor:m?"pointer":"default",color:m?"blue":"gray",pointerEvents:m?"auto":"none"},onClick:M,children:"Resend OTP"})]}),(0,u.jsx)("div",{className:"otp-inputs",children:o.map(((e,r)=>(0,u.jsx)("input",{type:"number",maxLength:"1",value:e,onChange:e=>T(r,e.target.value),onKeyDown:e=>F(r,e),ref:e=>C.current[r]=e,className:"otp-input"},r)))}),(0,u.jsx)("button",{type:"button",className:"btn btn-submit-otp",onClick:P,disabled:o.some((e=>""===e))||f,children:f?(0,u.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):"Submit OTP"}),j&&(0,u.jsx)("div",{className:"alert alert-success mt-3",children:j}),w&&(0,u.jsx)("div",{className:"alert alert-danger mt-3",children:w})]})})]})})}):null},fe=x.memo(ge);const ye=function(e){let{walletData:r,services:t,isInstantpaypresnt:s={isInstantpaypresnt:s}}=e;const[a,n]=(0,x.useState)({}),[l,o]=(0,x.useState)(""),[i,d]=(0,x.useState)(!1),[f,y]=(0,x.useState)(!1),[j,A]=(0,x.useState)(""),[w,S]=(0,x.useState)(""),[C,N]=(0,x.useState)(!1),[k,I]=(0,x.useState)(!1),[T,F]=(0,x.useState)(null),[M,P]=(0,x.useState)(null),[R,_]=(0,x.useState)(""),[O,E]=(0,x.useState)(""),[z,B]=(0,x.useState)(!1),[D,W]=(0,x.useState)(""),[U,L]=(0,x.useState)(""),[V,q]=(0,x.useState)(""),[G,X]=(0,x.useState)(""),H=localStorage.getItem("userIdToken");console.log("storedUserid",H);const[Y,Z]=(0,x.useState)(!1),[$,K]=(0,x.useState)(!1),[J,Q]=(0,x.useState)(180),[ee,re]=(0,x.useState)(!1),[te,se]=(0,x.useState)(!1),[ae,ne]=(0,x.useState)(!0),[le,oe]=(0,x.useState)({showModal:!1,showModal2:!1,showModal3:!1,showOverlay:!1}),ie=()=>{oe((e=>({...e,showModal:!1,showOverlay:!1}))),_(""),E("")},de=e=>{oe((e=>({...e,showModal3:!1,showModal2:!0})))};(0,x.useEffect)((()=>{(async()=>{const e=new Date;let r=e.getDate(),t=e.getMonth()+1,s=e.getFullYear(),a="".concat(s,"-").concat(t,"-").concat(r);try{var l;const e=await(0,h.pth)(a);n(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.data)}catch(o){console.error(o)}})();const e=localStorage.getItem("userTpinstatus");F(e)}),[]),(0,x.useEffect)((()=>{null!==T&&oe("CV"===T?{showModal:!1,showModal2:!1,showModal3:!1,showOverlay:!1}:"NP"===T||null===T||void 0===T||""===T||"undefined"==T?{showModal:!0,showModal2:!1,showModal3:!1,showOverlay:!0}:"OV"===T?{showModal:!1,showModal2:!0,showModal3:!1,showOverlay:!0}:{showModal:!1,showModal2:!1,showModal3:!1,showOverlay:!1})}),[T]);const[ce,ue]=(0,x.useState)(new Array(6).fill(""));(0,x.useRef)([]),ce.includes(""),new Array(6).fill(null),function(){var e=window.localStorage.getItem("regisNumber"),r="";e?r="+"==e.charAt(0)||"0"==e.charAt(0)?e.replace(/[^a-zA-Z0-9+]/g,"").substr(3):e.replace(/[^a-zA-Z0-9]/g,""):console.log("No registration number found in localStorage.")}(),(0,x.useEffect)((()=>{let e;return console.log(" timeLeft:",J,"isTimerEnded:",ee),J>0&&!ee?e=setTimeout((()=>{console.log("Decreasing timeLeft:",J-1),Q((e=>e-1))}),1e3):0!==J||ee||(re(!0),console.log("Timer ended")),()=>clearTimeout(e)}),[]);const xe=localStorage.getItem("userType"),he=r?null===r||void 0===r?void 0:r.name:"";return(0,x.useEffect)((()=>{(async()=>{try{const e=await(0,h.SpX)();console.log("ledgerreport report Service Report Data:",e)}catch(e){console.error("Error fetching commission service report data:",e)}})()}),[]),(0,u.jsxs)(u.Fragment,{children:[le.showOverlay&&(0,u.jsx)("div",{className:"overlay modalpinoverlayclass"}),(0,u.jsx)("div",{className:"ContentArea",children:(0,u.jsxs)("div",{className:"card",style:{backgroundColor:"var(--bs-primary3)"},children:[(0,u.jsx)(g,{retailerName:he}),(0,u.jsx)(be,{storedUserType:xe,services:t,data:a,isInstantpaypresnt:s})]})}),le.showModal&&(0,u.jsx)("div",{className:"modal fade mediaqurymodalpop show d-block",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",onHide:ie,children:(0,u.jsx)("div",{className:"lock-screen",children:(0,u.jsxs)("div",{className:"lock-screen__content",children:[(0,u.jsx)("div",{className:"image-bg",children:(0,u.jsx)("img",{className:"lock-screen__imgae",src:p})}),(0,u.jsx)("h2",{className:"lock-screen__message mt-3",children:"Generate Tpin for secure payments."}),(0,u.jsx)("p",{className:"lock-screen__instruction",children:"Click on button to generate Tpin"}),(0,u.jsx)("button",{className:"unlock-button",onClick:async()=>{d(!0);try{const e=await(0,h.Bwk)({});d(!1),e&&e.data&&!1===e.data.error?(v.oR.success("TPIN generated successfully"),console.log("tpin generated"),_(e.data.message),ie(),oe((e=>({...e,showModal3:!0,showOverlay:!0})))):(E("Failed to generate TPIN"),v.oR.error("Failed to generate TPIN"))}catch(e){d(!1),E("Failed to generate OTP for Tpin"),v.oR.error("Failed to generate TPIN")}},children:i?(0,u.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):"Generate Tpin"}),R&&(0,u.jsx)("div",{className:"alert alert-success mt-1",role:"alert",children:R}),O&&(0,u.jsx)("div",{className:"alert alert-danger mt-1",role:"alert",children:O})]})})}),le.showModal3&&(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(fe,{modalVisibility:le,handleCloseModal3:()=>{oe((e=>({...e,showModal3:!1,showOverlay:!1})))},handleSubmitmodal3:de,storedUserid:H,setModalVisibility:oe,getUserTpinStatus:b.rp})}),le.showModal2&&(0,u.jsx)("div",{className:"modal fade modal-cssclasss mediaqurymodalpop show d-block",tabIndex:"-1",role:"dialog",children:(0,u.jsx)("div",{className:"modal-dialog getpinmodal",role:"document",children:(0,u.jsxs)("div",{className:"modal-content text-center",children:[(0,u.jsx)("div",{className:"modal-header text-center",children:(0,u.jsx)("h5",{className:"modal-title modaltitle-otp",children:"Create your Tpin"})}),(0,u.jsx)("div",{className:"modal-body",children:(0,u.jsx)("div",{className:"col-lg-12",children:(0,u.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),4===j.length&&4===w.length&&j===w){y(!0),q(""),X("");try{var r;const e=await(0,h.Dm7)({user_id:H,genTpin:j,confirmTpin:w});"200"==(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.statusCode)?((0,b.rp)("CV"),q("New TPIN generated successfully."),v.oR.success("New TPIN generated successfully!"),oe((e=>({...e,showModal2:!1,showOverlay:!1})))):(X("Failed to generate TPIN."),v.oR.error("Failed to generate TPIN."))}catch(t){X("Failed to generate TPIN."),v.oR.error("Failed to generate TPIN.")}finally{y(!1)}}else I(!0)},children:[(0,u.jsxs)("div",{className:"mb-3",children:[(0,u.jsxs)("div",{className:"input-group",children:[(0,u.jsx)("input",{type:Y?"text":"password",className:"form-control ".concat(4!==j.length||C?"":"is-valid"),id:"newPin",value:j,onChange:e=>{const r=e.target.value;/^\d{0,6}$/.test(r)?(A(r),N(4!==r.length)):N(!0)},placeholder:"Enter new PIN","aria-label":"New PIN","aria-describedby":"basic-addon1",required:!0}),4===j.length&&!C&&(0,u.jsx)("span",{className:"position-absolute top-50 end-0 translate-middle-y pe-2",children:(0,u.jsx)(m.RXm,{})}),(0,u.jsx)("button",{className:"btn ",style:{borderColor:"#aaaaaa57"},type:"button",onClick:()=>Z(!Y),children:Y?(0,u.jsx)(c.mx3,{}):(0,u.jsx)(c.Ny1,{})})]}),C&&(0,u.jsx)("div",{className:"text-danger",children:"Please enter exactly 4 numeric digits."})]}),(0,u.jsxs)("div",{className:"mb-3",children:[(0,u.jsxs)("div",{className:"input-group",children:[(0,u.jsx)("input",{type:$?"text":"password",className:"form-control ".concat(4!==w.length||k?"":"is-valid"),id:"confirmPin",value:w,onChange:e=>{const r=e.target.value;/^\d{0,6}$/.test(r)?(S(r),I(4!==r.length||r!==j)):I(!0)},placeholder:"Confirm new PIN","aria-label":"Confirm PIN","aria-describedby":"basic-addon2",required:!0}),(0,u.jsx)("button",{className:"btn ",style:{borderColor:"#aaaaaa57"},type:"button",onClick:()=>K(!$),children:$?(0,u.jsx)(c.mx3,{}):(0,u.jsx)(c.Ny1,{})})]}),k&&(0,u.jsx)("div",{className:"text-danger",children:"PINs do not match or are not 4 digits."})]}),(0,u.jsx)("button",{type:"submit",className:"btn btn-submit-otp",disabled:C||k||4!==j.length||4!==w.length,children:f?(0,u.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):"Submit"}),V&&(0,u.jsx)("div",{className:"alert alert-success mt-3",children:V}),G&&(0,u.jsx)("div",{className:"alert alert-danger mt-3",children:G})]})})})]})})})]})};var je=t(25284),Ae=t(14282);const we=e=>{let{show:r,handleClose:t,profiledata:s}=e;if(!s)return null;const i=(null===s||void 0===s?void 0:s.businessInfo)||{};return(0,u.jsxs)(je.A,{show:r,onHide:t,centered:!0,size:"md",className:"custom-modal",children:[(0,u.jsx)(je.A.Header,{closeButton:!0,children:(0,u.jsx)(je.A.Title,{children:"Profile Details"})}),(0,u.jsxs)(je.A.Body,{children:[(0,u.jsxs)(n.A,{alignItems:"center",spacing:1.2,mb:2,children:[(0,u.jsx)(l.A,{src:(0,D.q)(null===s||void 0===s?void 0:s.profile),sx:{width:80,height:80,border:"2px solid var(--bs-primary3)",boxShadow:"0 0 8px rgba(0,0,0,0.1)"}}),(0,u.jsx)(o.A,{variant:"h6",sx:{fontWeight:600,textAlign:"center"},children:(null===s||void 0===s?void 0:s.name)||"\u2014"}),(0,u.jsxs)(o.A,{variant:"body2",sx:{color:"text.secondary",textAlign:"center"},children:["Code: ",(null===s||void 0===s?void 0:s.refer_id)||"N/A"]})]}),(0,u.jsx)(d.A,{sx:{mb:2}}),(0,u.jsx)(a.A,{sx:{px:1},children:null!==s&&void 0!==s&&s.isGstAvailable?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(o.A,{variant:"body2",sx:{mb:1},children:[(0,u.jsx)("strong",{children:"GST Number:"})," ",(null===i||void 0===i?void 0:i.gst_NUmber)||"\u2014"]}),(0,u.jsxs)(o.A,{variant:"body2",sx:{mb:1},children:[(0,u.jsx)("strong",{children:"Legal Name:"})," ",(null===i||void 0===i?void 0:i.legal_name_of_business)||"\u2014"]}),(0,u.jsxs)(o.A,{variant:"body2",sx:{mb:1},children:[(0,u.jsx)("strong",{children:"Business Type:"})," ",(null===i||void 0===i?void 0:i.constitution_of_business)||"\u2014"]}),(0,u.jsxs)(o.A,{variant:"body2",children:[(0,u.jsx)("strong",{children:"Address:"})," ",(null===i||void 0===i?void 0:i.principal_place_address)||"\u2014"]})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(o.A,{variant:"body2",sx:{mb:1},children:[(0,u.jsx)("strong",{children:"Shop:"})," ",(null===s||void 0===s?void 0:s.shop_name)||"\u2014"]}),(0,u.jsxs)(o.A,{variant:"body2",sx:{mb:1},children:[(0,u.jsx)("strong",{children:"Address:"})," ",(null===s||void 0===s?void 0:s.business_Address)||"\u2014"]}),(0,u.jsxs)(o.A,{variant:"body2",sx:{mb:1},children:[(0,u.jsx)("strong",{children:"Area:"})," ",(null===s||void 0===s?void 0:s.business_Area)||"\u2014"]}),(0,u.jsxs)(o.A,{variant:"body2",children:[(0,u.jsx)("strong",{children:"City:"})," ",(null===s||void 0===s?void 0:s.business_city)||"\u2014"]})]})})]}),(0,u.jsx)(je.A.Footer,{children:(0,u.jsx)(Ae.A,{variant:"secondary",onClick:t,children:"Close"})})]})};const Se=function(e){var r;let{profiledata:t,walletData:c,services:h,position:m,isInstantpaypresnt:p}=e;const[v,b]=(0,x.useState)(!1),g=[{id:1,title:"Payment received",amount:"+\u20b91,200"},{id:2,title:"Withdrawal processed",amount:"-\u20b9500"},{id:3,title:"Commission added",amount:"+\u20b9300"},{id:4,title:"Recharge success",amount:"-\u20b9200"},{id:5,title:"Cashback credited",amount:"+\u20b9100"}];return(0,u.jsxs)(s.Ay,{container:!0,sx:{height:"100%",overflow:"auto",backgroundColor:"var(--bs-primary3)"},children:[(0,u.jsx)(s.Ay,{item:!0,xs:12,md:10.2,sx:{height:"100%",overflowY:"auto",pr:2,scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},children:(0,u.jsx)(ye,{walletData:c,services:h,position:m,isInstantpaypresnt:p})}),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(s.Ay,{item:!0,xs:12,md:1.8,sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[(0,u.jsx)(a.A,{sx:{width:"100%",color:"var(--bs-primary2)",borderRadius:"16px",boxShadow:"0 4px 10px rgba(0,0,0,0.05)",p:2,textAlign:"center",backgroundColor:"var(--bs-primary1)"},children:(0,u.jsxs)(n.A,{alignItems:"center",spacing:1,children:[(0,u.jsx)(l.A,{src:(0,D.q)(null===t||void 0===t?void 0:t.profile),sx:{width:70,height:70,border:"2px solid var(--bs-primary3)",boxShadow:"0 0 10px rgba(0,0,0,0.1)"}}),(0,u.jsx)(o.A,{variant:"subtitle1",sx:{color:"var(--bs-primary2)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:600,width:"100%"},children:(null===t||void 0===t?void 0:t.name)||"\u2014"}),(0,u.jsxs)(o.A,{variant:"body2",sx:{color:"var(--bs-primary2)",fontSize:"14px"},children:["Balance: \u20b9",null!==(r=null===t||void 0===t?void 0:t.wallet_balance)&&void 0!==r?r:"XXXX"]}),(0,u.jsx)(i.A,{variant:"contained",size:"small",sx:{backgroundColor:"var(--bs-primary3)",textTransform:"none",fontSize:"13px",mt:1},onClick:()=>b(!0),children:"View"})]})}),(0,u.jsxs)(a.A,{sx:{width:"100%",color:"var(--bs-primary2)",borderRadius:"16px",boxShadow:"0 4px 10px rgba(0,0,0,0.05)",p:2,backgroundColor:"var(--bs-primary1)"},children:[(0,u.jsx)(o.A,{variant:"h6",sx:{fontSize:"16px",fontWeight:600,color:"var(--bs-primary2)",mb:1,textAlign:"center"},children:"Help Center"}),(0,u.jsx)(o.A,{variant:"body2",sx:{color:"text.secondary",fontSize:"13px",textAlign:"center",color:"var(--bs-primary2)"},children:"\ud83d\udcde +91 9876543210"}),(0,u.jsx)(o.A,{variant:"body2",sx:{color:"text.secondary",fontSize:"13px",textAlign:"center",color:"var(--bs-primary2)"},children:"\u2709\ufe0f support@example.com"}),(0,u.jsx)(i.A,{variant:"outlined",size:"small",sx:{textTransform:"none",fontSize:"13px",mt:1.5,borderColor:"var(--bs-primary3)",color:"var(--bs-primary2)",width:"100%"},children:"Contact Us"})]}),(0,u.jsxs)(a.A,{sx:{width:"100%",color:"var(--bs-primary2)",borderRadius:"16px",boxShadow:"0 4px 10px rgba(0,0,0,0.05)",p:2,backgroundColor:"var(--bs-primary1)"},children:[(0,u.jsx)(o.A,{variant:"h6",sx:{fontSize:"16px",fontWeight:600,color:"var(--bs-primary2)",mb:1,textAlign:"center"},children:"Recent Transactions"}),g.map(((e,r)=>(0,u.jsxs)(a.A,{children:[(0,u.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",py:.5,color:"var(--bs-primary2)"},children:[(0,u.jsx)(o.A,{variant:"body2",sx:{fontSize:"13px"},children:e.title}),(0,u.jsx)(o.A,{variant:"body2",sx:{fontWeight:600,fontSize:"13px"},children:e.amount})]}),r<g.length-1&&(0,u.jsx)(d.A,{})]},e.id))),(0,u.jsx)(i.A,{variant:"text",size:"small",sx:{textTransform:"none",fontSize:"13px",mt:1,color:"var(--bs-primary2)",width:"100%"},children:"View More \u2192"})]})]}),(0,u.jsx)(we,{show:v,handleClose:()=>b(!1),profiledata:t})]})]})}},82114:(e,r,t)=>{t.d(r,{A:()=>a});var s=t(70579);const a=e=>{let{currentUser:r,allowUserList:t=[],excludeUserList:a=[],children:n}=e;return a.includes(r)||t.length>0&&!t.includes(r)?null:(0,s.jsx)(s.Fragment,{children:n})}},35717:(e,r,t)=>{t.d(r,{q:()=>a});var s=t(94414);const a=e=>s.cu+(e||"")},6901:(e,r,t)=>{e.exports=t.p+"static/media/image4.6c2e81d319a597cbd094.jpeg"}}]);
//# sourceMappingURL=8926.7d4269a6.chunk.js.map