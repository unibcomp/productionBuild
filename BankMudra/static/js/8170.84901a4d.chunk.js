"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[8170],{48170:(e,a,i)=>{i.r(a),i.d(a,{default:()=>p});var n=i(65043),t=i(94516),r=i(94496),c=i(68903),l=i(67784),s=i(11906),d=i(90035),o=i(26600),f=i(35316),u=i(29347),m=i(4026),b=i(67361),y=i.n(b),_=i(54358),v=i(73575),h=i(70579);const p=()=>{const[e,a]=(0,n.useState)(!1),[i,b]=(0,n.useState)(!1),[p,x]=(0,n.useState)(!1),[g,A]=(0,n.useState)(!1),[j,I]=(0,n.useState)(!1),[C,P]=(0,n.useState)(""),[w,U]=(0,n.useState)({transfer_mode:"UPI",vpa:"",transfer_amount:"",beneficiary_name:"",beneficiary_account_name:"",beneficiary_email:"",beneficiary_mobile:"",beneficiary_add:"",beneficiary_city:"",beneficiary_state:"",beneficiary_pin_code:""}),S=(e,a)=>U((i=>({...i,[e]:a}))),k=async e=>{try{var i;x(!0);const c=await(0,v.PrO)({accountNumber:e,transfer_mode:"UPI"});var n,t,r;if(null!==c&&void 0!==c&&null!==(i=c.data)&&void 0!==i&&i.success)a(!0),S("beneficiary_name",(null===(n=c.data.data)||void 0===n?void 0:n.name)||""),S("beneficiary_account_name",(null===(t=c.data.data)||void 0===t?void 0:t.bank_name)||""),(0,_.A)(!1,"UPI Verified");else(0,_.A)(!0,null===c||void 0===c||null===(r=c.data)||void 0===r?void 0:r.message)}catch{(0,_.A)(!0,"UPI verification error")}finally{x(!1)}},N=e=>{if(null===e||void 0===e||!e.toLowerCase().startsWith("upi://"))return void(0,_.A)(!0,"Invalid UPI QR");const a=new URLSearchParams(e.split("?")[1]||""),i=a.get("pa"),n=a.get("pn"),t=a.get("am");if(i){const e=decodeURIComponent(i);S("vpa",e),k(e)}n&&S("beneficiary_name",decodeURIComponent(n)),t&&!isNaN(t)?(S("transfer_amount",t),b(!0)):b(!1),A(!1)},R=()=>{a(!1),b(!1),I(!1),P(""),U({transfer_mode:"UPI",vpa:"",transfer_amount:"",beneficiary_name:"",beneficiary_account_name:"",beneficiary_email:"",beneficiary_mobile:"",beneficiary_add:"",beneficiary_city:"",beneficiary_state:"",beneficiary_pin_code:""})};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(t.A,{p:3,bgcolor:"#fff",borderRadius:2,children:[(0,h.jsx)(r.A,{variant:"h6",mb:2,children:"UPI Transfer"}),(0,h.jsxs)(c.Ay,{container:!0,spacing:2,children:[(0,h.jsxs)(c.Ay,{item:!0,xs:12,md:4,children:[(0,h.jsx)(l.A,{fullWidth:!0,className:"mui-autofill-fix",label:"UPI ID",value:w.vpa,disabled:e||p,onChange:e=>{S("vpa",e.target.value.toLowerCase()),a(!1)}}),!e&&(0,h.jsxs)(t.A,{mt:1,display:"flex",gap:1,children:[(0,h.jsx)(s.A,{onClick:()=>A(!0),disabled:p,children:"Scan QR"}),(0,h.jsx)(s.A,{onClick:()=>k(w.vpa),disabled:!w.vpa||p,children:p?"Verifying...":"Verify"})]})]}),e&&[["beneficiary_name","Beneficiary Name"],["beneficiary_account_name","Bank Name"],["transfer_amount","Amount"],["beneficiary_email","Email"],["beneficiary_mobile","Mobile"],["beneficiary_add","Address"],["beneficiary_city","City"],["beneficiary_state","State"],["beneficiary_pin_code","PIN Code"]].map((e=>{let[a,n]=e;return(0,h.jsx)(c.Ay,{item:!0,xs:12,md:4,children:(0,h.jsx)(l.A,{fullWidth:!0,className:"mui-autofill-fix",label:n,value:w[a],disabled:p||"transfer_amount"===a&&i,onChange:e=>S(a,e.target.value)})},a)}))]}),e&&(0,h.jsx)(t.A,{mt:3,textAlign:"center",children:(0,h.jsx)(s.A,{variant:"contained",disabled:p,onClick:()=>I(!0),children:"Submit"})})]}),(0,h.jsxs)(d.A,{open:g,maxWidth:"xs",fullWidth:!0,children:[(0,h.jsx)(o.A,{align:"center",children:"Scan UPI QR"}),(0,h.jsxs)(f.A,{children:[(0,h.jsx)(m.Lp,{constraints:{facingMode:"environment"},onScan:e=>{var a;const i="string"===typeof e?e:(null===e||void 0===e?void 0:e.rawValue)||(null===e||void 0===e||null===(a=e[0])||void 0===a?void 0:a.rawValue);i&&N(i)}}),(0,h.jsx)(t.A,{mt:2,textAlign:"center",children:(0,h.jsxs)(s.A,{component:"label",variant:"outlined",disabled:p,children:["Upload QR",(0,h.jsx)("input",{hidden:!0,type:"file",accept:"image/*",onChange:e=>{var a;const i=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!i)return;const n=new Image;n.src=URL.createObjectURL(i),n.onload=()=>{const e=document.createElement("canvas"),a=e.getContext("2d");e.width=n.width,e.height=n.height,a.drawImage(n,0,0);const i=a.getImageData(0,0,e.width,e.height),t=y()(i.data,i.width,i.height);null!==t&&void 0!==t&&t.data&&N(t.data)}}})]})})]}),(0,h.jsx)(u.A,{children:(0,h.jsx)(s.A,{onClick:()=>A(!1),disabled:p,children:"Close"})})]}),(0,h.jsxs)(d.A,{open:j,children:[(0,h.jsx)(o.A,{align:"center",children:"Enter TPIN"}),(0,h.jsx)(f.A,{children:(0,h.jsx)(l.A,{fullWidth:!0,className:"mui-autofill-fix",type:"password",value:C,inputProps:{maxLength:4},disabled:p,onChange:e=>/^\d{0,4}$/.test(e.target.value)&&P(e.target.value)})}),(0,h.jsxs)(u.A,{children:[(0,h.jsx)(s.A,{onClick:()=>I(!1),disabled:p,children:"Cancel"}),(0,h.jsx)(s.A,{onClick:async()=>{if(e)if(/^\d{4}$/.test(C))try{var a;x(!0);const e={transfer_mode:"UPI",vpa:w.vpa,transfer_amount:Number(w.transfer_amount),beneficiary_name:w.beneficiary_name,beneficiary_account_name:w.beneficiary_account_name,beneficiary_email:w.beneficiary_email,beneficiary_mobile:w.beneficiary_mobile,beneficiary_add:w.beneficiary_add,beneficiary_city:w.beneficiary_city,beneficiary_state:w.beneficiary_state,beneficiary_pin_code:w.beneficiary_pin_code,tpin:C},n=await(0,v.IJ8)(e);var i;if(null!==n&&void 0!==n&&null!==(a=n.data)&&void 0!==a&&a.success)(0,_.A)(!1,"UPI Payout Successful"),R();else(0,_.A)(!0,null===n||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)}finally{x(!1)}else(0,_.A)(!0,"Invalid TPIN");else(0,_.A)(!0,"UPI verification required")},disabled:p,children:p?"Processing...":"Confirm"})]})]})]})}},54358:(e,a,i)=>{i.d(a,{A:()=>t});var n=i(91036);function t(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"something went wrong";!1===e?n.oR.success(a):n.oR.error(a)}}}]);
//# sourceMappingURL=8170.84901a4d.chunk.js.map