{"version":3,"file":"static/js/4693.3431785c.chunk.js","mappings":"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","sources":["components/admin/package/packageDetails/Bbpslist.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Select, Input, Spin, Card, Table, Pagination, message } from 'antd';\r\nimport axios from 'axios';\r\nimport { baseUrl } from '../../../../baseUrl';\r\n\r\nconst { Option } = Select;\r\nconst { Search } = Input;\r\n\r\nconst ServiceOperatorList = ({ BBPSWiseServices, dataDetails }) => {\r\n  const [selectedService, setSelectedService] = useState(null);\r\n  const [operators, setOperators] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalOperators, setTotalOperators] = useState(0);\r\n  const pageSize = 4; // Number of operators per page\r\n\r\n  useEffect(() => {\r\n    if (selectedService) {\r\n      fetchOperators(currentPage);\r\n    }\r\n  }, [selectedService, currentPage]);\r\n\r\n  const fetchOperators = async (page) => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axios.get(`${baseUrl}package/bbps/commision`, {\r\n        params: {\r\n          package_id: dataDetails?._id,\r\n          service_id: selectedService,\r\n          page: page - 1,\r\n          count: pageSize\r\n        },\r\n        headers: {\r\n          \"Content-type\": \"application/json; charset=UTF-8\",\r\n          Authorization: `Bearer ${localStorage.getItem('userToken')}`,\r\n        }\r\n      });\r\n\r\n      if (response.data && Array.isArray(response.data.data)) {\r\n        setOperators(response.data.data);\r\n        setTotalOperators(response.data.totalCount || 0);\r\n      } else {\r\n        console.error('Unexpected response structure:', response.data);\r\n        message.error('Unexpected response structure');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching operators:', error);\r\n      message.error('Failed to fetch operators');\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleServiceChange = (value) => {\r\n    setSelectedService(value);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const handleSearch = (value) => {\r\n    setSearchTerm(value);\r\n  };\r\n\r\n  const handlePageChange = (page) => {\r\n    setCurrentPage(page);\r\n  };\r\n\r\n  const filteredOperators = operators.filter(operator =>\r\n    operator.name.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  const columns = [\r\n    { title: 'Start Amount', dataIndex: 'start_amt', key: 'start_amt' },\r\n    { title: 'End Amount', dataIndex: 'end_amt', key: 'end_amt' },\r\n    { title: 'Charge', dataIndex: 'charge', key: 'charge' },\r\n    { title: 'Charge Type', dataIndex: 'charge_type', key: 'charge_type' },\r\n    { title: 'Retailer Commission', dataIndex: 'commision', key: 'commision' },\r\n    { title: 'Retailer Commission Type', dataIndex: 'commision_type', key: 'commision_type' },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"service-operator-list\">\r\n      <h3>Service Operator List</h3>\r\n      <Select\r\n        style={{ width: '100%', marginBottom: 16 }}\r\n        value={selectedService}\r\n        placeholder=\"Please select a service\"\r\n        onChange={handleServiceChange}\r\n      >\r\n        {BBPSWiseServices.map(service => (\r\n          <Option key={service._id} value={service._id}>{service.service}</Option>\r\n        ))}\r\n      </Select>\r\n\r\n      {selectedService && (\r\n        <>\r\n          <Search\r\n            placeholder=\"Search operators\"\r\n            onChange={(e) => handleSearch(e.target.value)}\r\n            style={{ marginBottom: 16 }}\r\n          />\r\n\r\n          <Spin spinning={loading}>\r\n            {filteredOperators.length > 0 ? (\r\n              filteredOperators.map(operator => (\r\n                <Card\r\n                  key={operator._id}\r\n                  title={operator.name || 'Operator'}\r\n                  style={{ marginBottom: 16 }}\r\n                >\r\n                  <Table\r\n                    dataSource={operator.slots}\r\n                    columns={columns}\r\n                    pagination={false}\r\n                    rowKey=\"_id\"\r\n                    locale={{ emptyText: 'No data found' }}\r\n                  />\r\n                </Card>\r\n              ))\r\n            ) : (\r\n              <div style={{ textAlign: 'center', marginTop: 20 }}>No operators found</div>\r\n            )}\r\n\r\n            {/* Pagination for the list of operators */}\r\n            <Pagination\r\n              current={currentPage}\r\n              total={totalOperators}\r\n              pageSize={pageSize}\r\n              onChange={handlePageChange}\r\n              style={{ marginTop: 16, textAlign: 'right' }}\r\n            />\r\n          </Spin>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ServiceOperatorList;","function _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (e.includes(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nexport { _objectWithoutPropertiesLoose as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };"],"names":["Option","Select","Search","Input","_ref","BBPSWiseServices","dataDetails","selectedService","setSelectedService","useState","operators","setOperators","loading","setLoading","searchTerm","setSearchTerm","currentPage","setCurrentPage","totalOperators","setTotalOperators","useEffect","fetchOperators","async","response","axios","get","concat","baseUrl","params","package_id","_id","service_id","page","count","headers","Authorization","localStorage","getItem","data","Array","isArray","totalCount","console","error","message","filteredOperators","filter","operator","name","toLowerCase","includes","columns","title","dataIndex","key","_jsxs","className","children","_jsx","style","width","marginBottom","value","placeholder","onChange","map","service","_Fragment","e","handleSearch","target","Spin","spinning","length","Card","Table","dataSource","slots","pagination","rowKey","locale","emptyText","textAlign","marginTop","Pagination","current","total","pageSize","_objectWithoutPropertiesLoose","r","t","n","hasOwnProperty","call","_setPrototypeOf","Object","setPrototypeOf","bind","__proto__"],"sourceRoot":""}