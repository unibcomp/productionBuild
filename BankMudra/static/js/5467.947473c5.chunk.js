"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[5467],{25467:(e,r,t)=>{t.r(r),t.d(r,{default:()=>j});var a=t(65043),s=t(53519),n=t(38628),l=t(73722),d=t(61072),c=t(78602),o=t(64196),i=t(27491),x=t(85369),m=t(95702),h=t(73575),b=(t(76323),t(72777)),p=t(22019),y=t(70579);const j=function(){const e=()=>(new Date).toISOString().substr(0,10),[r,t]=(0,a.useState)([]),[j,u]=(0,a.useState)(0),[g,v]=(0,a.useState)({key:null,direction:"ascending"}),[N,A]=(0,a.useState)(1),[C,_]=(0,a.useState)(!0),k={user_id:window.localStorage.getItem("userToken"),count:10,page:0,min_amt:0,max_amt:0,end_date:"",start_date:"",type:"",trans_type:"",order_id:"",txn_id:"",sortType:"",sortKey:""},[f,S]=(0,a.useState)(k),[E,w]=(0,a.useState)(k);(0,a.useEffect)((()=>{D()}),[E,N]);const D=async()=>{try{_(!0);const e=await(0,h.cnE)({...E,page:N-1});Array.isArray(e.data.data.wallet)?(t(e.data.data.wallet),u(e.data.data.total)):(console.error("API did not return array:",e.data),t([]),u(0))}catch(e){console.error("Error fetching earnings data:",e),t([]),u(0)}finally{_(!1)}},M=e=>{const{name:r,value:t}=e.target;S((e=>"start_date"===r?{...e,start_date:t,end_date:e.end_date&&e.end_date<t?"":e.end_date}:"end_date"===r?e.start_date&&t&&t<e.start_date?(p.Ay.error("End date cannot be earlier than Start date"),e):{...e,end_date:t}:{...e,[r]:t}))},W=e=>{let r="ascending";g.key===e&&"ascending"===g.direction&&(r="descending"),v({key:e,direction:r}),w((t=>({...t,sortType:"ascending"===r?1:-1,sortKey:e})))},I=e=>{A(e)},R=(0,a.useMemo)((()=>{let e=[...r];return g.key&&e.sort(((e,r)=>e[g.key]<r[g.key]?"ascending"===g.direction?-1:1:e[g.key]>r[g.key]?"ascending"===g.direction?1:-1:0)),e}),[r,g]),T=Math.ceil(j/E.count);let F=Math.max(1,N-2),P=Math.min(T,N+2);const B=(N<=3?P=Math.min(5,T):N>=T-2&&(F=Math.max(1,T-4)),Array.from({length:P-F+1},((e,r)=>F+r)));return(0,y.jsxs)(y.Fragment,{children:[C&&(0,y.jsx)(b.A,{}),(0,y.jsxs)(s.A,{fluid:!0,className:"px-4 PageHeading",style:{backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)"},children:[(0,y.jsx)("h1",{className:"mt-2 mb-4",style:{fontWeight:700},children:"Earnings Report"}),(0,y.jsxs)(n.A,{className:"mb-4 er-card",style:{backgroundColor:"var(--bs-primary1)",border:"1px solid var(--bs-primary2)",borderRadius:"12px"},children:[(0,y.jsx)(n.A.Header,{className:"er-card-header",style:{backgroundColor:"var(--bs-primary3)",color:"var(--bs-primary2)",fontWeight:600,borderRadius:"12px 12px 0 0",borderBottom:"1px solid var(--bs-primary2)"},children:"Filter"}),(0,y.jsx)(n.A.Body,{className:"er-card-body",children:(0,y.jsxs)(l.A,{children:[(0,y.jsxs)(d.A,{className:"mb-3",children:[(0,y.jsx)(c.A,{md:4,children:(0,y.jsxs)(l.A.Group,{controlId:"startDate",children:[(0,y.jsx)(l.A.Label,{style:{color:"var(--bs-primary2)"},children:"Start Date"}),(0,y.jsx)(l.A.Control,{type:"date",name:"start_date",className:"input-white-bg",max:e(),value:f.start_date,onChange:M,style:{backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)",border:"1px solid var(--bs-primary2)"}})]})}),(0,y.jsx)(c.A,{md:4,children:(0,y.jsxs)(l.A.Group,{controlId:"endDate",children:[(0,y.jsx)(l.A.Label,{style:{color:"var(--bs-primary2)"},children:"End Date"}),(0,y.jsx)(l.A.Control,{type:"date",name:"end_date",className:"input-white-bg",min:f.start_date||"",max:e(),value:f.end_date,onChange:M,style:{backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)",border:"1px solid var(--bs-primary2)"}})]})}),(0,y.jsx)(c.A,{md:4,children:(0,y.jsxs)(l.A.Group,{controlId:"order_id",children:[(0,y.jsx)(l.A.Label,{style:{color:"var(--bs-primary2)"},children:"Order ID"}),(0,y.jsx)(l.A.Control,{type:"text",name:"order_id",className:"bs-autofill-fix",value:f.order_id,onChange:M,style:{backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)",border:"1px solid var(--bs-primary2)"}})]})})]}),(0,y.jsxs)(d.A,{className:"mb-3",children:[(0,y.jsx)(c.A,{md:4,children:(0,y.jsxs)(l.A.Group,{controlId:"txn_id",children:[(0,y.jsx)(l.A.Label,{style:{color:"var(--bs-primary2)"},children:"Txn ID"}),(0,y.jsx)(l.A.Control,{type:"text",name:"txn_id",className:"bs-autofill-fix",value:f.txn_id,onChange:M,style:{backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)",border:"1px solid var(--bs-primary2)"}})]})}),(0,y.jsx)(d.A,{className:"mt-3",children:(0,y.jsxs)(c.A,{sm:12,className:"d-flex align-items-end gap-2",children:[(0,y.jsx)("button",{type:"button",className:"btn",style:{backgroundColor:"#6C757D",color:"#fff",borderRadius:"10px",fontWeight:600,padding:"6px 14px"},onClick:()=>{f.start_date&&!f.end_date||!f.start_date&&f.end_date?alert("Please select both Start Date and End Date"):(w(f),A(1))},children:"Search"}),(0,y.jsx)("button",{type:"button",className:"btn",style:{backgroundColor:"#F8F9FA",color:"var(--bs-primary2)",borderRadius:"10px",fontWeight:600,padding:"6px 14px"},onClick:()=>{const e={...k,start_date:"",end_date:""};S(e),w(e),A(1)},children:"Reset"})]})})]})]})})]}),(0,y.jsxs)(n.A,{className:"mb-4 er-card",style:{backgroundColor:"var(--bs-primary1)",border:"1px solid var(--bs-primary2)",borderRadius:"12px"},children:[(0,y.jsx)(n.A.Header,{className:"er-card-header",style:{backgroundColor:"#fff",color:"var(--bs-primary2)",fontWeight:600,borderBottom:"1px solid var(--bs-primary2)"},children:(0,y.jsx)(d.A,{className:"align-items-center justify-content-end w-100",children:(0,y.jsx)(c.A,{lg:12,className:"text-end",children:(0,y.jsx)(m.A,{id:"export-excel-button",className:"btn er-download-btn",table:"table-to-xls",filename:"earnings_report",sheet:"earnings_report",buttonText:"Download Excel"})})})}),(0,y.jsxs)(n.A.Body,{className:"er-card-body",children:[(0,y.jsxs)(o.A,{responsive:!0,striped:!0,bordered:!0,hover:!0,id:"table-to-xls",className:"er-table",style:{backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)",border:"1px solid var(--bs-primary2)",whiteSpace:"nowrap"},children:[(0,y.jsx)("thead",{style:{backgroundColor:"var(--bs-primary3)",color:"var(--bs-primary2)",fontWeight:600,textAlign:"center"},children:(0,y.jsxs)("tr",{style:{backgroundColor:"var(--bs-primary3)"},children:[(0,y.jsxs)("th",{className:"text-center er-th",style:{whiteSpace:"nowrap"},onClick:()=>W("_id"),children:["S.No ",(0,y.jsx)(x.MjW,{})]}),(0,y.jsxs)("th",{className:"text-center er-th",onClick:()=>W("createdAt"),children:["Date ",(0,y.jsx)(x.MjW,{})]}),(0,y.jsxs)("th",{className:"text-center er-th",onClick:()=>W("order_id"),children:["Order ID ",(0,y.jsx)(x.MjW,{})]}),(0,y.jsxs)("th",{className:"text-center er-th",onClick:()=>W("txn_id"),children:["Transaction ID ",(0,y.jsx)(x.MjW,{})]}),(0,y.jsxs)("th",{className:"text-center er-th",onClick:()=>W("amount"),children:["Amount ",(0,y.jsx)(x.MjW,{})]}),(0,y.jsxs)("th",{className:"text-center er-th",onClick:()=>W("trans_type"),children:["Transaction Type ",(0,y.jsx)(x.MjW,{})]}),(0,y.jsxs)("th",{className:"text-center er-th",onClick:()=>W("status"),children:["Status ",(0,y.jsx)(x.MjW,{})]}),(0,y.jsxs)("th",{className:"text-center er-th",onClick:()=>W("type"),children:["Type ",(0,y.jsx)(x.MjW,{})]}),(0,y.jsxs)("th",{className:"text-center er-th",onClick:()=>W("message"),children:["Message ",(0,y.jsx)(x.MjW,{})]}),(0,y.jsxs)("th",{className:"text-center er-th",onClick:()=>W("o_bal"),children:["Opening Balance ",(0,y.jsx)(x.MjW,{})]}),(0,y.jsxs)("th",{className:"text-center er-th",onClick:()=>W("c_bal"),children:["Closing Balance ",(0,y.jsx)(x.MjW,{})]})]})}),(0,y.jsx)("tbody",{children:R.length>0?R.map(((e,r)=>(0,y.jsxs)("tr",{className:"er-tr",style:{backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)"},children:[(0,y.jsx)("td",{className:"text-center",children:r+1}),(0,y.jsx)("td",{className:"text-center",children:e.createdAt}),(0,y.jsx)("td",{className:"text-center",children:e.order_id}),(0,y.jsx)("td",{className:"text-center",children:e.txn_id}),(0,y.jsx)("td",{className:"text-center",children:e.amount.toFixed(2)}),(0,y.jsx)("td",{className:"text-center",children:e.trans_type}),(0,y.jsx)("td",{className:"text-center",children:(()=>{const r=(e=>{switch(e){case"SUCCESS":return{text:"Successful",color:"#16a34a"};case"PENDING":case"PROCESSING":return{text:"Pending",color:"#f59e0b"};case"FAILED":case"REJECTED":return{text:"Failed",color:"#dc2626"};case"REVERSED":return{text:"Reversed",color:"#2563eb"};default:return{text:"-",color:"#6b7280"}}})(null===e||void 0===e?void 0:e.status);return(0,y.jsx)("span",{style:{color:r.color,fontWeight:600},children:r.text})})()}),(0,y.jsx)("td",{className:"text-center",children:e.type}),(0,y.jsx)("td",{className:"text-center",children:e.message}),(0,y.jsx)("td",{className:"text-center",children:e.o_bal.toFixed(2)}),(0,y.jsx)("td",{className:"text-center",children:e.c_bal.toFixed(2)})]},r))):(0,y.jsx)("tr",{children:(0,y.jsx)("td",{colSpan:"12",className:"text-center",children:"No data found"})})})]}),(0,y.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-3",style:{backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)",borderTop:"1px solid var(--bs-primary2)",padding:"10px"},children:[(0,y.jsxs)("div",{children:["Total ",j," entries"]}),(0,y.jsxs)(i.A,{className:"earning-pagination",children:[(0,y.jsx)(i.A.First,{onClick:()=>I(1),disabled:1===N}),(0,y.jsx)(i.A.Prev,{onClick:()=>I(N-1),disabled:1===N}),F>1&&(0,y.jsx)(i.A.Ellipsis,{}),B.map((e=>(0,y.jsx)(i.A.Item,{active:e===N,onClick:()=>I(e),children:e},e))),P<T&&(0,y.jsx)(i.A.Ellipsis,{}),(0,y.jsx)(i.A.Next,{onClick:()=>I(N+1),disabled:N===T}),(0,y.jsx)(i.A.Last,{onClick:()=>I(T),disabled:N===T})]})]})]})]})]})]})}},76323:()=>{}}]);
//# sourceMappingURL=5467.947473c5.chunk.js.map