"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[6515,523],{66264:(e,i,a)=>{a.d(i,{e:()=>n});var r=a(65043);const t=[{name:"Mantra",path:"/rd/capture",hosts:["https://localhost","https://127.0.0.1"],ports:[11100,11101,11102]},{name:"Morpho",path:"/rd/capture",hosts:["https://localhost"],ports:[11100]},{name:"Mantra L1",path:"/rd/capture",hosts:["https://localhost","https://127.0.0.1"],ports:[11100,11101,11102]}],n=e=>{let{wadhValue:i}=e;const[a,n]=(0,r.useState)(null),[o,l]=(0,r.useState)(!1);return{fingerprintData:a,loading:o,captureFingerprint:async e=>{l(!0);try{const a=null===t||void 0===t?void 0:t.find((i=>i.name.toLowerCase()===e.toLowerCase()));if(!a)throw new Error("Device config not found");const r=(e=>{const i=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("Resp")[0],a=null===i||void 0===i?void 0:i.getAttribute("errCode"),r=null===i||void 0===i?void 0:i.getAttribute("errInfo"),t=null===i||void 0===i?void 0:i.getAttribute("qScore");if("0"!==a)throw new Error(r||"Unknown capture error");return{status:"Captured",captureSuccess:!0,errCode:a,qScore:t,pidData:e}})((await(async(e,a,r)=>{for(let n of e)for(let e of a)try{const a="".concat(n,":").concat(e).concat(r),t=await fetch(a,{method:"CAPTURE",headers:{"Content-Type":"text/xml"},body:"<?xml version='1.0'?><PidOptions ver='1.0'><Opts fCount='1' fType='2' iCount='0' pCount='0' format='0' pidVer='2.0' timeout='10000' posh='UNKNOWN' env='P' wadh=\"".concat(i,'" /><CustOpts></CustOpts></PidOptions>')});if(t.ok)return{success:!0,data:await t.text(),url:a}}catch(t){continue}throw new Error("No available host/port for fingerprint capture.")})(a.hosts,a.ports,a.path)).data);return n(r),r}catch(a){throw a}finally{l(!1)}}}}},90523:(e,i,a)=>{a.r(i),a.d(i,{default:()=>l,useBankTransfer:()=>o});var r=a(65043),t=a(70579);const n=(0,r.createContext)(),o=()=>(0,r.useContext)(n),l=e=>{let{walletCall:i,children:a}=e;const[o,l]=(0,r.useState)(),[s,d]=(0,r.useState)(""),[c,u]=(0,r.useState)(!1),[m,v]=(0,r.useState)(""),[p,h]=(0,r.useState)({}),[x,b]=(0,r.useState)([]),[y,g]=(0,r.useState)("money-transfer"),[f,j]=(0,r.useState)("");return(0,t.jsx)(n.Provider,{value:{walletCall:i,invoiceId:f,setInvoiceId:j,setWadhValue:d,wadhValue:s,globalLoader:c,setGlobalLoader:u,mobile:m,setMobile:v,currentPage:y,setCurrentPage:g,setCustomer:h,customer:p,selectedBank:o,setSelectedBank:l,allBank:x,setAllBank:b},children:a})}},56515:(e,i,a)=>{a.r(i),a.d(i,{default:()=>ce});var r=a(65043),t=a(67784),n=a(94516),o=a(11906),l=a(90035),s=a(26600),d=a(94496),c=a(35316),u=a(29347),m=a(68903),v=a(17392),p=a(81045),h=a(81637),x=a(39336),b=a(12110),y=a(26494),g=a(57972),f=a(74605),j=a(14256),A=a(36591),C=a(2828),S=a(27108),k=a(95870),_=a(66360),w=a(68641),N=a(51387),I=a(44533),T=a(27149),P=a(34960),D=a(1281),W=a(73575),B=a(98606),M=a(73216),z=a(90523),O=a(54358),F=a(8751),E=a(63516),L=a(80899),V=a(72777),q=a(33262),R=a(45531),Y=a(60648),$=a(66264),G=a(93141),K=a(90074),U=a.n(K),H=a(45925),Z=a(70579);const J=e=>/^[6-9]\d{9}$/.test(e),X=e=>(0,Z.jsx)(t.A,{variant:"outlined",size:"small",InputLabelProps:{shrink:!0},sx:{"& label.Mui-focused":{color:"var(--bs-primary2)"},"& .MuiOutlinedInput-root":{height:40,"& .MuiOutlinedInput-input":{py:0},"&:hover fieldset":{borderColor:"var(--bs-primary1)"},"&.Mui-focused fieldset":{borderColor:"var(--bs-primary1)"}}},...e}),Q=e=>(0,Z.jsx)(t.A,{variant:"outlined",size:"small",InputLabelProps:{shrink:!0},className:"send-moeny-input",InputProps:{sx:{"&::placeholder":{fontSize:"8px"}}},sx:{"& .MuiOutlinedInput-root":{height:40,"& .MuiOutlinedInput-input":{py:0},"&:hover fieldset":{borderColor:"var(--bs-primary1)"},"&.Mui-focused fieldset":{borderColor:"var(--bs-primary1)"}}},...e}),ee=e=>(0,Z.jsx)(t.A,{variant:"outlined",InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{height:44,"& .MuiOutlinedInput-input":{py:0},"&:hover fieldset":{borderColor:"var(--bs-primary1)"},"&.Mui-focused fieldset":{borderColor:"var(--bs-primary1)"}}},...e}),ie=e=>{let{children:i}=e;return(0,Z.jsx)(n.A,{sx:{backgroundColor:"#ffffff",borderRadius:2,p:{xs:2,md:3},boxShadow:"0 6px 20px rgba(0,0,0,0.05)",mb:3,"& .MuiTextField-root":{"& .MuiInputLabel-root":{color:"var(--bs-primary2)"},"& .MuiOutlinedInput-input":{color:"var(--bs-primary2) !important"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"var(--bs-primary2)"},"&:hover fieldset":{borderColor:"var(--bs-primary2)"},"&.Mui-focused fieldset":{borderColor:"var(--bs-primary2)"}}}},children:i})},ae=e=>{let{otpResponse:i,setOtpResponse:a,amount:t,transferMode:m,otpSent:v,open:p,onClose:h,recipient:x}=e;const{setInvoiceId:b,setCurrentPage:y,walletCall:g,setGlobalLoader:f,customer:j,selectedBank:A,allBank:C}=(0,z.useBankTransfer)(),[S,k]=((0,M.Zp)(),(0,r.useState)("")),[_,w]=(0,r.useState)(""),[N,I]=(0,r.useState)(""),[T,P]=(0,r.useState)(!1),[D,B]=(0,r.useState)(""),[E,L]=(0,r.useState)(""),[V,q]=(0,r.useState)(!1),[R,Y]=(0,r.useState)(!1),$=(null===j||void 0===j||j.total_limit,null===j||void 0===j||j.used_limit,C.find((e=>(null===e||void 0===e?void 0:e._id)===A))),G=(null===$||void 0===$?void 0:$.name)||"",K=()=>{const e=(i=_)?/^\d{6}$/.test(i)?"":"OTP must be 6 digits":"OTP is required";var i;I(e),e||P(!0)},U=(0,F.A)((async(e,r)=>{const n=(o=D)?/^\d{4}$/.test(o)?"":"PIN must be 4 digits":"PIN is required";var o;if(L(n),!n){Y(!0);let n={recipient_id:x.recipient_id,amount:t,customer_mobile:x.recipient_mobile,channel:m,beneficiary_name:(null===x||void 0===x?void 0:x.bank_account_name)||(null===x||void 0===x?void 0:x.recipient_name),bank_name:x.bank,ifsc_code:x.ifsc,account_number:x.account,customer_name:null===j||void 0===j?void 0:j.name,api_id:A,user_id:window.localStorage.getItem("userIdToken"),latlong:"".concat(e,",").concat(r),tpin:D};"bank1"===G&&(n.otp=_,n.value=i);try{var l,s,d,c,u,p;const e=await(0,W.Nk1)(n);var f,C,S;if((0,O.A)(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.error,null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message),"200"===(null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.statusCode)||"127"===(null===e||void 0===e||null===(c=e.data)||void 0===c?void 0:c.statusCode))b(null===e||void 0===e||null===(f=e.data)||void 0===f||null===(C=f.data)||void 0===C||null===(S=C[0])||void 0===S?void 0:S.batchId),y("invoice"),g();"400"===(null===e||void 0===e||null===(u=e.data)||void 0===u?void 0:u.statusCode)&&setTimeout((()=>{h()}),400),"405"===(null===e||void 0===e||null===(p=e.data)||void 0===p?void 0:p.statusCode)&&(h(),a(""),P(!1),v(!1)),setTimeout((()=>{B("")}),500)}catch(k){}finally{Y(!1)}}}));return(0,Z.jsxs)(l.A,{open:p,maxWidth:"sm",fullWidth:!0,onClose:()=>{},disableEscapeKeyDown:!0,disableBackdropClick:!0,PaperProps:{onClick:e=>e.stopPropagation()},children:[(0,Z.jsx)(s.A,{align:"center",sx:{fontWeight:"bold",color:"var(--bs-primary2)"},children:"Send Money"}),(0,Z.jsxs)(d.A,{align:"center",color:"var(--bs-primary2)",fontWeight:"bold",mt:-2,children:[v&&!T&&"Please enter your otp",v&&T&&"Please enter your Tpin"]}),(0,Z.jsx)(c.A,{children:(0,Z.jsx)(n.A,{mt:2,children:(()=>{const e="bank1"===G&&v&&!T,i="bank1"===G&&T||"bank2"===G&&v;return(0,Z.jsxs)(Z.Fragment,{children:[e&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(X,{fullWidth:!0,label:"Enter OTP",placeholder:"Enter 6 Digit Otp",value:_,onChange:e=>{const i=e.target.value;/^\d{0,6}$/.test(i)&&w(i)},inputProps:{maxLength:6},error:!!N,helperText:N,size:"small",className:"mt-3"}),(0,Z.jsx)(o.A,{fullWidth:!0,variant:"contained",onClick:K,sx:{mt:2,backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)"},disabled:!_||6!=_.length,children:"Submit OTP"})]}),i&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(X,{fullWidth:!0,label:"4-digit PIN",type:"password",value:D,onChange:e=>{const i=e.target.value;/^\d{0,4}$/.test(i)&&B(i)},inputProps:{maxLength:4},error:!!E,helperText:E,size:"small",className:"mt-3"}),(0,Z.jsx)(o.A,{fullWidth:!0,variant:"contained",onClick:U,sx:{mt:2,backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)"},disabled:4!=D.length||R,children:R?"Sending...":"Send Money"})]})]})})()})}),(0,Z.jsx)(u.A,{sx:{justifyContent:"end",pb:2,pr:4},children:(0,Z.jsx)(o.A,{variant:"outlined",color:"var(--bs-primary2)",onClick:h,children:"Cancel"})})]})},re=()=>{var e;const{setGlobalLoader:i,selectedBank:a,customer:t,setCurrentPage:l,allBank:s}=(0,z.useBankTransfer)(),c=s.find((e=>(null===e||void 0===e?void 0:e._id)===a)),u=(null===c||void 0===c?void 0:c.name)||"",A=null===t||void 0===t?void 0:t.total_limit,C=null===t||void 0===t?void 0:t.used_limit,S=A-C,k=C/A*100,[_,B]=(0,r.useState)([]),[M,E]=(0,r.useState)(!1),[L,V]=(0,r.useState)(!1),[q,R]=(0,r.useState)(null),[Y,$]=(0,r.useState)({}),[G,K]=(0,r.useState)({}),[U,H]=(0,r.useState)({}),[J,X]=(0,r.useState)(!1),[ee,re]=(0,r.useState)("1"),[te,ne]=(0,r.useState)(""),[oe,le]=(0,r.useState)(""),se=()=>"bank1"===u?S>5e3?5e3:S:"bank2"===u?25e3:S,de=()=>"bank1"===u?100:"bank2"===u?1e4:0,ce=(e,i)=>{const a=(e=>{const i=Number(e),a=de(),r=se();return e?isNaN(i)?"Amount must be a number":i<a?"Min: \u20b9".concat(a):i>r?"Max: \u20b9".concat(r):i>S?"Only \u20b9".concat(S," available"):"":"Amount is required"})(i);$((a=>({...a,[e]:i}))),K((i=>({...i,[e]:a})))};(0,r.useEffect)((()=>{(async()=>{var e;let i={mobile:null===t||void 0===t?void 0:t.mobile,api_id:a},r=await(0,W.Cyg)(i);B((null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.data)||[])})()}),[M]);const ue=(0,F.A)((async(e,r,n,o,l)=>{console.log(n,"re"),i(!0);let s={recipient_id:n.recipient_id,amount:o,customer_mobile:n.recipient_mobile,channel:l,beneficiary_name:(null===n||void 0===n?void 0:n.bank_account_name)||(null===n||void 0===n?void 0:n.recipient_name),bank_name:n.bank,ifsc_code:n.ifsc,account_number:n.account,customer_name:null===t||void 0===t?void 0:t.name,api_id:a,user_id:window.localStorage.getItem("userIdToken"),latlong:"".concat(e,",").concat(r)};try{var d,c,u;let e=await(0,W.Ph1)(s);var m,v;if(!1===(null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.error))X(!0),V(!0),ne(null===e||void 0===e||null===(m=e.data)||void 0===m||null===(v=m.data)||void 0===v?void 0:v.value);(0,O.A)(null===e||void 0===e||null===(c=e.data)||void 0===c?void 0:c.error,null===e||void 0===e||null===(u=e.data)||void 0===u?void 0:u.message)}catch(p){}finally{i(!1)}}));return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(ie,{children:[(0,Z.jsxs)(m.Ay,{container:!0,alignItems:"center",justifyContent:"space-between",pr:{xs:0,md:4},spacing:{xs:2,md:0},children:[(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:"auto",children:(0,Z.jsxs)(n.A,{display:"flex",alignItems:"center",gap:2,flexDirection:{xs:"column",md:"row"},textAlign:{xs:"center",md:"left"},children:[(0,Z.jsx)(v.A,{onClick:()=>l("money-transfer"),sx:{alignSelf:{xs:"flex-start",md:"center"}},children:(0,Z.jsx)(w.A,{})}),(0,Z.jsx)(p.A,{sx:{width:{xs:36,md:40},height:{xs:36,md:40},fontSize:16},children:null===t||void 0===t||null===(e=t.name)||void 0===e?void 0:e.substring(0,1)}),(0,Z.jsx)(n.A,{children:(0,Z.jsxs)(d.A,{variant:"body2",fontWeight:600,fontSize:14,color:"var(--bs-primary2)",children:["Customer Name :",(0,Z.jsx)(d.A,{fontSize:14,component:"body2",color:"var(--bs-primary2)",sx:{opacity:.8},children:null===t||void 0===t?void 0:t.name})]})})]})}),"bank2"===u?(0,Z.jsx)(Z.Fragment,{children:null}):(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:"auto",children:(0,Z.jsxs)(n.A,{display:"flex",alignItems:"center",gap:2,flexDirection:{xs:"column",md:"row"},textAlign:{xs:"center",md:"left"},children:[(0,Z.jsxs)(n.A,{position:"relative",display:"inline-flex",sx:{width:80,height:80,alignItems:"center",justifyContent:"center"},children:[(0,Z.jsx)(h.A,{variant:"determinate",value:100,size:80,thickness:4,sx:{color:"#e0e0e0"}}),(0,Z.jsx)(h.A,{variant:"determinate",value:k,size:80,thickness:4,sx:{color:"var(--bs-primary2)",position:"absolute",left:0}}),(0,Z.jsxs)(n.A,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",children:[(0,Z.jsxs)(d.A,{variant:"caption",color:"var(--bs-primary2)",fontWeight:"bold",children:["\u20b9",C]}),(0,Z.jsx)(d.A,{variant:"caption",color:"var(--bs-primary2)",children:"Limit used"})]})]}),(0,Z.jsxs)(n.A,{children:[(0,Z.jsxs)(d.A,{variant:"body2",color:"var(--bs-primary2)",fontSize:13,fontWeight:600,children:["Available Transfer Limit:"," ",(0,Z.jsxs)(d.A,{component:"body2",color:"var(--bs-primary2)",fontSize:14,sx:{opacity:.8},children:["\u20b9",S]})]}),(0,Z.jsxs)(d.A,{variant:"body2",color:"var(--bs-primary2)",fontSize:13,fontWeight:600,mt:.5,children:["Total Transfer Limit:"," ",(0,Z.jsxs)(d.A,{component:"body2",color:"var(--bs-primary2)",fontSize:14,sx:{opacity:.8},children:["\u20b9",A]})]})]})]})})]}),(0,Z.jsx)(x.A,{sx:{my:2}}),(0,Z.jsxs)(n.A,{children:[(0,Z.jsx)(n.A,{display:"flex",justifyContent:"flex-end",children:(0,Z.jsx)(o.A,{variant:"contained",color:"var(--bs-primary2)",sx:{height:40,borderColor:"var(--bs-nav)",color:"var(--bs-primary2)"},onClick:()=>l("add-newBeneficiaryPage"),children:"Add New Beneficiary"})}),(0,Z.jsx)(b.A,{sx:{p:0,borderRadius:4,boxShadow:0,backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)"},children:(0,Z.jsxs)(y.A,{children:[(0,Z.jsx)(d.A,{variant:"h6",mb:2,children:"Send Money"}),(null===_||void 0===_?void 0:_.length)>0?null===_||void 0===_?void 0:_.map((e=>(0,Z.jsx)(b.A,{sx:{mb:2,p:2,borderRadius:3,backgroundColor:"#fff",boxShadow:"0 6px 20px rgba(0,0,0,0.08)",transition:"0.2s ease","&:hover":{boxShadow:"0 10px 26px rgba(0,0,0,0.12)"}},children:(0,Z.jsxs)(m.Ay,{container:!0,spacing:{xs:1.5,md:2},alignItems:"center",children:[(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:3,sx:{backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)"},children:(0,Z.jsxs)(n.A,{display:"flex",alignItems:"center",gap:2,children:[(0,Z.jsx)(p.A,{sx:{bgcolor:"transparent"},children:(0,Z.jsx)(I.A,{})}),(0,Z.jsxs)(n.A,{children:[(0,Z.jsx)(d.A,{fontWeight:"bold",fontSize:14,children:e.recipient_name}),(0,Z.jsx)(d.A,{variant:"body2",fontSize:12,children:e.bank}),(0,Z.jsx)(d.A,{variant:"body2",fontSize:12,children:e.ifsc}),(0,Z.jsxs)(d.A,{variant:"body2",fontSize:12,children:["AC: ",e.account]})]})]})}),(0,Z.jsx)(m.Ay,{item:!0,xs:6,md:1.5,children:(0,Z.jsxs)(n.A,{display:"flex",alignItems:"center",gap:.5,children:[e.isVerified?(0,Z.jsx)(T._IM,{style:{fontSize:"16px",color:"#2e7d32"}}):(0,Z.jsx)(P.oxH,{style:{fontSize:"16px",color:"#c62828"}}),(0,Z.jsx)(d.A,{fontWeight:600,fontSize:12,sx:{color:e.isVerified?"#2e7d32":"#c62828"},children:e.isVerified?"Verified":"Not Verified"})]})}),(0,Z.jsx)(m.Ay,{item:!0,xs:6,md:1.5,children:(0,Z.jsx)(o.A,{variant:"outlined",color:"var(--bs-primary2)",size:"small",disabled:e.isVerified,onClick:()=>(async e=>{const r={name:e.recipient_name,ifsc:e.ifsc,bankAccount:e.account,phone:e.recipient_mobile,recipient_id:e.recipient_id,bank_id:e.bankId,api_id:a,user_id:window.localStorage.getItem("userIdToken")};i(!0);try{var t,n;const e=await(0,W.ege)(r);(0,O.A)(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error,null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message),E((e=>!e))}catch(o){}finally{i(!1)}})(e),sx:{borderColor:"#000000",fontSize:"12px",color:"var(--bs-primary2)"},children:"Verify"})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,md:2,children:(0,Z.jsx)(Q,{fullWidth:!0,label:"Amount",placeholder:"\u20b9 Min: ".concat(de()," / Max: ").concat(se()),value:Y[e.recipient_id]||"",onChange:i=>ce(e.recipient_id,i.target.value),error:!!G[e.recipient_id],helperText:G[e.recipient_id],size:"small"})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,md:2,children:(0,Z.jsxs)(g.A,{row:!0,name:"transferType-".concat(e.recipient_id),sx:{justifyContent:"center","& .MuiFormControlLabel-label":{fontSize:10}},value:U[e.recipient_id]||"2",onChange:i=>H((a=>({...a,[e.recipient_id]:i.target.value}))),children:[(0,Z.jsx)(f.A,{value:"2",control:(0,Z.jsx)(j.A,{size:"small"}),label:"IMPS"}),(0,Z.jsx)(f.A,{value:"1",control:(0,Z.jsx)(j.A,{size:"small"}),label:"NEFT"})]})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:2,children:(0,Z.jsxs)(n.A,{display:"flex",justifyContent:{xs:"center",md:"flex-end"},gap:1,children:[(0,Z.jsx)(o.A,{disabled:!!G[e.recipient_id]||!Y[e.recipient_id],onClick:()=>(e=>{console.log(e);const i=Y[e.recipient_id],a=U[e.recipient_id]||"2";re(a),le(i),"bank1"===u?ue(e,i,a):(X(!0),V(!0)),R(e)})(e),variant:"contained",color:"var(--bs-primary2)",size:"small",sx:{borderColor:"var(--bs-primary1)",fontSize:"12px",backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)"},children:"Send"}),(0,Z.jsx)(D.A,{title:"Delete",description:"Are you sure to Delete ?",onConfirm:()=>(async e=>{let r={customer_mobile:null===t||void 0===t?void 0:t.mobile,recipient_id:null===e||void 0===e?void 0:e.recipient_id,user_id:window.localStorage.getItem("userIdToken"),api_id:a};i(!0);try{var n,o,l;let e=await(0,W.ZWd)(r);200==(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.statusCode)&&E((e=>!e)),(0,O.A)(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.error,null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.message)}catch(s){}finally{i(!1)}})(e),onCancel:()=>{},okText:"Yes",cancelText:"No",okButtonProps:{className:"popoverconfirm",style:{backgroundColor:"var(--bs-primary1)",borderColor:"var(--bs-primary1)"}},children:(0,Z.jsx)(o.A,{variant:"outlined",color:"var(--bs-primary2)",size:"small",children:(0,Z.jsx)(N.A,{sx:{fill:"red"}})})})]})})]})},e.recipient_id))):(0,Z.jsx)(d.A,{variant:"body2",textAlign:"center",children:"No Benefiaries Found"})]})})]})]}),L&&(0,Z.jsx)(ae,{otpResponse:te,transferMode:ee,amount:oe,otpSent:J,setOtpSent:X,open:L,onClose:()=>V(!1),recipient:q})]})},te=()=>{const{walletCall:e,setGlobalLoader:i,customer:a,selectedBank:t,setCurrentPage:p}=(0,z.useBankTransfer)(),[x,b]=(0,r.useState)(!1),[y,g]=(0,r.useState)(!1),[f,j]=(0,r.useState)(""),[A,C]=(0,r.useState)([]),[S,_]=(0,r.useState)(null),[N,I]=(0,r.useState)(!1),[T,P]=(0,r.useState)(),[D,B]=(0,r.useState)(!1),[M,F]=(0,r.useState)(""),E=()=>{P(""),B(!1),F("")},[L,V]=(0,r.useState)({name:"",account_number:"",ifsc:""});(0,r.useEffect)((()=>{(async()=>{try{var e,i;let a=await(0,W.OAj)(t);const r=(null===a||void 0===a||null===(e=a.data)||void 0===e||null===(i=e.data)||void 0===i?void 0:i.map((e=>({...e,label:e.bank_name,value:e.bankID}))))||[];C(r)}catch(a){}})(),(async()=>{try{var e,i;let a=await(0,W.$p4)();j(null===a||void 0===a||null===(e=a.data)||void 0===e||null===(i=e.data)||void 0===i?void 0:i.bankVerificationCharge)}catch(a){}})()}),[]);const q=e=>{const{name:i,value:a}=e.target;V((e=>({...e,[i]:"name"===i?a.replace(/[^a-zA-Z\s]/g,""):a})))},R=L.name&&L.account_number&&L.ifsc&&S;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(ie,{children:[(0,Z.jsxs)(n.A,{display:"flex",alignItems:"center",gap:2,children:[(0,Z.jsx)(v.A,{onClick:()=>a.hasOwnProperty("mobile")?p("send-money-page"):p("money-transfer"),children:(0,Z.jsx)(w.A,{})}),(0,Z.jsx)(d.A,{variant:"body2",color:"var(--bs-primary2)",fontWeight:"bold",fontSize:18,children:"Add New Beneficiary"})]}),(0,Z.jsxs)(n.A,{maxWidth:"800px",m:"auto",mt:3,children:[(0,Z.jsxs)(m.Ay,{container:!0,spacing:3,children:[(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,Z.jsx)(X,{fullWidth:!0,label:"Beneficiary Name",name:"name",value:L.name,onChange:q,disabled:N})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,Z.jsx)(k.Ay,{value:S,onChange:e=>{_(e),V((i=>({...i,ifsc:(null===e||void 0===e?void 0:e.ifsc_code)||""})))},options:A,placeholder:"Select Bank",isClearable:!0,isSearchable:!0,menuPortalTarget:document.body,isDisabled:N,styles:{control:(e,i)=>({...e,minHeight:40,borderRadius:4,borderColor:i.isFocused?"var(--bs-primary1)":"#ced4da",boxShadow:i.isFocused?"0 0 0 1px var(--bs-primary1)":"none","&:hover":{borderColor:"var(--bs-primary1)"}}),placeholder:e=>({...e,color:"var(--bs-primary2)",fontSize:14}),singleValue:e=>({...e,color:"var(--bs-primary2)",fontWeight:500,fontSize:14}),menu:e=>({...e,zIndex:20,fontSize:14}),option:(e,i)=>({...e,fontSize:14,fontWeight:i.isSelected?500:400,color:"var(--bs-primary2)",backgroundColor:(i.isSelected||i.isFocused,"white"),"&:hover":{backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)"}}),menuPortal:e=>({...e,zIndex:9999})}})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,Z.jsx)(X,{fullWidth:!0,label:"IFSC Code",name:"ifsc",value:L.ifsc,onChange:q,disabled:N})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,Z.jsx)(X,{fullWidth:!0,label:"Account Number",name:"account_number",value:L.account_number,onChange:q,type:"number",disabled:N})})]}),(0,Z.jsxs)(d.A,{color:"var(--bs-primary2)",sx:{mt:2},fontWeight:500,children:["Account Verification Charge: \u20b9 ",f||0]}),(0,Z.jsxs)(n.A,{sx:{display:"flex",gap:2,mt:2,justifyContent:"space-between"},children:[(0,Z.jsx)(o.A,{variant:"outlined",color:"var(--bs-primary2)",width:"200px",disabled:!R||N,onClick:async()=>{const i={account_number:L.account_number,ifsc:L.ifsc,bank_name:S.bank_name,name:L.name,bankAccount:L.account_number,phone:a.mobile};b(!0);try{var r,t,n;let a=await(0,W.ege)(i);"200"===(null===a||void 0===a||null===(r=a.data)||void 0===r?void 0:r.statusCode)&&(I(!0),V((()=>{var e,i,r,t,n,o;return{name:null===a||void 0===a||null===(e=a.data)||void 0===e||null===(i=e.data)||void 0===i?void 0:i.bank_account_name,ifsc:null===a||void 0===a||null===(r=a.data)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.bank_ifsc,account_number:null===a||void 0===a||null===(n=a.data)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.bank_account_number}})),e()),(0,O.A)(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.error,null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.message)}catch(o){}finally{b(!1)}},sx:{borderColor:"var(--bs-primary1)",color:"var(--bs-primary2)"},children:x?(0,Z.jsx)(h.A,{size:24,color:"var(--bs-primary2)"}):"Account Verification"}),(0,Z.jsx)(o.A,{variant:"outlined",color:"var(--bs-primary2)",width:"200px",sx:{borderColor:"var(--bs-primary1)",color:"var(--bs-primary2)"},disabled:!R,onClick:async()=>{localStorage.getItem("regisNumber");g(!0);const e={recipient_name:L.name,customer_mobile:null===a||void 0===a?void 0:a.mobile,account_number:null===L||void 0===L?void 0:L.account_number,ifsc:(null===L||void 0===L?void 0:L.ifsc)||"",bank_code:(null===S||void 0===S?void 0:S.bankID)||"",bank_id:null===S||void 0===S?void 0:S._id,recipient_mobile:null===a||void 0===a?void 0:a.mobile,isVerified:N,bank_name:(null===S||void 0===S?void 0:S.bank_name)||"",api_id:t,user_id:window.localStorage.getItem("userIdToken")};try{var i,r,n,o;const a=await(0,W.nJO)(e);var l,s;if(201===(null===a||void 0===a||null===(i=a.data)||void 0===i?void 0:i.statusCode))B(!0),F(null===a||void 0===a||null===(l=a.data)||void 0===l||null===(s=l.data)||void 0===s?void 0:s.recipient_id);200===(null===a||void 0===a||null===(r=a.data)||void 0===r?void 0:r.statusCode)&&p("send-money-page"),(0,O.A)(null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.error,null===a||void 0===a||null===(o=a.data)||void 0===o?void 0:o.message)}catch(d){}finally{g(!1)}},children:y?(0,Z.jsx)(h.A,{size:24,color:"var(--bs-primary2)"}):"Add Beneficiary"})]})]})]}),(0,Z.jsxs)(l.A,{open:D,onClose:E,maxWidth:"xs",fullWidth:!0,children:[(0,Z.jsx)(s.A,{sx:{color:"var(--bs-primary2)"},children:"OTP Verification"}),(0,Z.jsxs)(c.A,{children:[(0,Z.jsx)(d.A,{mb:2,sx:{color:"var(--bs-primary2)"},children:"Enter the 6-digit code sent to your mobile number."}),(0,Z.jsx)(ee,{fullWidth:!0,label:"Enter OTP",value:T,onChange:e=>{const i=e.target.value.replace(/\D/g,"");(null===i||void 0===i?void 0:i.length)<=6&&P(i)},inputProps:{maxLength:6},autoFocus:!0})]}),(0,Z.jsxs)(u.A,{children:[(0,Z.jsx)(o.A,{onClick:E,children:"Cancel"}),(0,Z.jsx)(o.A,{onClick:async()=>{let e={recipient_id:M,customer_mobile:null===a||void 0===a?void 0:a.mobile,otp:T};i(!0);try{var r,t,n;const i=await(0,W.NmZ)(e);200==(null===i||void 0===i||null===(r=i.data)||void 0===r?void 0:r.statusCode)&&(E(),p("send-money-page")),(0,O.A)(null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.error,null===i||void 0===i||null===(n=i.data)||void 0===n?void 0:n.message)}catch(o){}finally{i(!1)}},sx:{borderColor:"var(--bs-primary1)",backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)"},variant:"contained",disabled:(null===T||void 0===T?void 0:T.length)<6,children:"Verify"})]})]})]})},ne=()=>{const{selectedBank:e,setCurrentPage:i,mobile:a}=(0,z.useBankTransfer)(),t=new Date,l=new Date(t.getFullYear()-18,t.getMonth(),t.getDate()).toISOString().split("T")[0],s=new Date(t.getFullYear()-100,t.getMonth(),t.getDate()).toISOString().split("T")[0],[c,u]=(0,r.useState)({firstName:"",lastName:"",customerMobile:a,dob:"",country:"India",pinCode:"",state:"",city:"",district:"",area:"",aadharNumber:""}),p=L.Ik({firstName:L.Yj().required("First Name is required"),lastName:L.Yj().required("Last Name is required"),customerMobile:L.Yj().matches(/^[6-9]\d{9}$/,"Enter a valid 10-digit mobile number").required("Mobile number is required"),dob:L.Yj().required("Date of Birth is required"),pinCode:L.Yj().matches(/^\d{6}$/,"Pincode must be 6 digits").required("Pincode is required"),state:L.Yj().required("State is required"),city:L.Yj().required("City is required"),district:L.Yj().required("District is required"),area:L.Yj().required("Area is required"),aadharNumber:L.Yj().matches(/^\d{12}$/,"Aadhaar must be 12 digits").required("Aadhaar number is required")});return(0,Z.jsxs)(ie,{children:[(0,Z.jsxs)(n.A,{display:"flex",alignItems:"center",gap:2,children:[(0,Z.jsx)(v.A,{onClick:()=>i("money-transfer"),children:(0,Z.jsx)(w.A,{})}),(0,Z.jsx)(d.A,{variant:"body2",color:"var(--bs-primary2)",fontWeight:"bold",fontSize:18,children:"Add New Customer"})]}),(0,Z.jsx)(n.A,{maxWidth:"1000px",m:"auto",children:(0,Z.jsx)(E.l1,{initialValues:c,validationSchema:p,onSubmit:async(r,t)=>{let{setSubmitting:n}=t;await(async r=>{console.log("Submitted values:",r),u(r);let t={user_id:window.localStorage.getItem("userIdToken"),customer_mobile:a,name:r.firstName,dob:r.dob,country:r.country,city:r.city,state:r.state,pincode:r.pinCode,district:r.district,area:r.area,api_id:e,lastName:r.lastName,adhaar_number:r.aadharNumber};try{var n,o,l,s;const e=await(0,W.ffD)(t);"200"==(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.statusCode)&&i("otp-page"),"008"===(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.statusCode)&&i("otp-page"),(0,O.A)(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.error,null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)}catch(d){}})(r),n(!1)},enableReinitialize:!0,children:e=>{let{errors:i,touched:a,setErrors:r,setFieldValue:t,isSubmitting:d}=e;return(0,Z.jsx)(E.lV,{children:(0,Z.jsx)(n.A,{p:3,children:(0,Z.jsxs)(m.Ay,{container:!0,rowSpacing:6,columnSpacing:6,children:[(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(E.D0,{name:"firstName",as:ee,label:"First Name *",fullWidth:!0,error:a.firstName&&Boolean(i.firstName),helperText:a.firstName&&i.firstName})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(E.D0,{name:"lastName",as:ee,label:"Last Name *",fullWidth:!0,error:a.lastName&&Boolean(i.lastName),helperText:a.lastName&&i.lastName})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(E.D0,{name:"customerMobile",as:ee,label:"Customer Mobile *",fullWidth:!0,disabled:!0})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(E.D0,{name:"dob",as:ee,label:"Date Of Birth *",fullWidth:!0,type:"date",InputLabelProps:{shrink:!0},error:a.dob&&Boolean(i.dob),helperText:a.dob&&i.dob,inputProps:{max:l,min:s}})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(E.D0,{name:"country",as:ee,label:"Country *",fullWidth:!0,disabled:!0})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(E.D0,{name:"pinCode",as:ee,label:"Pin Code *",onChange:e=>{const i=e.target.value.replace(/\D/g,"").slice(0,6);t("pinCode",i),6===i.length&&(async(e,i,a)=>{try{var r;if(!e)return void a({pincode:"Pincode is required"});if(!/^[0-9]{6}$/.test(e))return void a({pincode:"Pincode must be exactly 6 digits"});a({pincode:""});const m=await(0,W.sal)(e);var t,n,o,l,s,d,c,u;null!==m&&void 0!==m&&null!==(r=m.data)&&void 0!==r&&r.error?a({pincode:"Invalid Pincode or not found"}):(i("city",(null===(t=m.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.city)||""),i("state",(null===(o=m.data)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.state)||""),i("district",(null===(s=m.data)||void 0===s||null===(d=s.data)||void 0===d?void 0:d.district)||""),i("area",(null===(c=m.data)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.sub_distance)||""))}catch(m){console.error("Error fetching pincode details:",m),a({pincode:"Something went wrong. Please try again."})}})(i,t,r)},fullWidth:!0,error:a.pinCode&&Boolean(i.pinCode),helperText:a.pinCode&&i.pinCode})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(E.D0,{name:"state",as:ee,label:"State *",fullWidth:!0,error:a.state&&Boolean(i.state),helperText:a.state&&i.state})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(E.D0,{name:"city",as:ee,label:"City *",fullWidth:!0,error:a.city&&Boolean(i.city),helperText:a.city&&i.city})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(E.D0,{name:"district",as:ee,label:"District *",fullWidth:!0,error:a.district&&Boolean(i.district),helperText:a.district&&i.district})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(E.D0,{name:"area",as:ee,label:"Area *",fullWidth:!0,error:a.area&&Boolean(i.area),helperText:a.area&&i.area})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,sm:6,children:(0,Z.jsx)(E.D0,{name:"aadharNumber",as:ee,label:"Aadhaar Number *",fullWidth:!0,error:a.aadharNumber&&Boolean(i.aadharNumber),helperText:a.aadharNumber&&i.aadharNumber})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,children:(0,Z.jsx)(o.A,{type:"submit",variant:"contained",color:"var(--bs-primary2)",sx:{borderColor:"var(--bs-primary1)",backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)"},disabled:d,children:"Submit"})})]})})})}})})]})},oe=()=>{const[e,i]=(0,r.useState)(!0),{walletCall:a,setWadhValue:t,selectedBank:n,mobile:m,setCurrentPage:v}=(0,z.useBankTransfer)(),[p,h]=(0,r.useState)(""),x=()=>{h(""),v("money-transfer"),i(!1)};return(0,Z.jsxs)(l.A,{open:e,onClose:x,maxWidth:"xs",fullWidth:!0,children:[(0,Z.jsx)(s.A,{sx:{color:"var(--bs-primary2)",zIndex:"9999999"},children:"OTP Verification"}),(0,Z.jsxs)(c.A,{children:[(0,Z.jsx)(d.A,{mb:2,sx:{color:"var(--bs-primary2)"},children:"Enter the 6-digit code sent to your mobile number."}),(0,Z.jsx)(ee,{fullWidth:!0,label:"Enter OTP",value:p,onChange:e=>{const i=e.target.value.replace(/\D/g,"");i.length<=6&&h(i)},inputProps:{maxLength:6},autoFocus:!0})]}),(0,Z.jsxs)(u.A,{children:[(0,Z.jsx)(o.A,{onClick:x,children:"Cancel"}),(0,Z.jsx)(o.A,{onClick:async()=>{const e={customer_mobile:m,api_id:n,otp:p,user_id:window.localStorage.getItem("userIdToken")};try{var i,a,r,o;const n=await(0,W.LOM)(e);var l,s;if(200===(null===n||void 0===n||null===(i=n.data)||void 0===i?void 0:i.statusCode)&&v("money-transfer"),200===(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.statusCode))v("KYC-page"),t(null===n||void 0===n||null===(l=n.data)||void 0===l||null===(s=l.data)||void 0===s?void 0:s.wadhValue);(0,O.A)(null===n||void 0===n||null===(r=n.data)||void 0===r?void 0:r.error,null===n||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message)}catch(d){}},sx:{borderColor:"var(--bs-primary1)",backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)"},variant:"contained",disabled:p.length<6,children:"Verify"})]})]})},le=()=>{const[e,i]=(0,r.useState)(!0),{setCurrentPage:a}=(0,z.useBankTransfer)(),[t,n]=(0,r.useState)(""),m=()=>{n(""),a("money-transfer"),i(!1)};return(0,Z.jsxs)(l.A,{open:e,onClose:m,maxWidth:"xs",fullWidth:!0,children:[(0,Z.jsx)(s.A,{sx:{color:"var(--bs-primary2)"},children:"Marchant Verification"}),(0,Z.jsxs)(c.A,{children:[(0,Z.jsx)(d.A,{mb:2,sx:{color:"var(--bs-primary2)"},children:"Enter the 6-digit code sent to your mobile number."}),(0,Z.jsx)(ee,{fullWidth:!0,label:"Enter OTP",value:t,onChange:e=>{const i=e.target.value.replace(/\D/g,"");i.length<=6&&n(i)},inputProps:{maxLength:6},autoFocus:!0})]}),(0,Z.jsxs)(u.A,{children:[(0,Z.jsx)(o.A,{onClick:m,children:"Cancel"}),(0,Z.jsx)(o.A,{onClick:async()=>{const e={mobile:window.localStorage.getItem("regisNumber").slice(-10),otp:t};try{var i,r,n;const t=await(0,W.K_R)(e);"200"===(null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.statusCode)&&a("money-transfer"),(0,O.A)(null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.error,null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)}catch(o){}},sx:{borderColor:"var(--bs-primary1)",backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)"},variant:"contained",disabled:t.length<6,children:"Verify"})]})]})},se=()=>{const e=[{id:"2",img:q,name:"Mantra"},{id:"3",img:R,name:"Mantra L1"},{id:"4",img:Y,name:"Morpho"}],{walletCall:i,wadhValue:a,selectedBank:t,mobile:l,setCurrentPage:s}=(0,z.useBankTransfer)(),[c,u]=(0,r.useState)(null),{loading:p,captureFingerprint:h}=(0,$.e)({wadhValue:a}),x=e.find((e=>e.id===c)),g=(0,F.A)((async(e,a)=>{if(!x)return alert("Please select a device.");try{var r,n,o,d;const c=(await h(x.name)).pidData+"<bookz/>",u=window.btoa((new XMLSerializer).serializeToString((new DOMParser).parseFromString(c,"application/xml"))),m={customer_mobile:l,latitude:e,longitude:a,biometric_data:u,api_id:t},v=await(0,W.Rc1)(m);"200"!==(null===v||void 0===v||null===(r=v.data)||void 0===r?void 0:r.statusCode)||null!==v&&void 0!==v&&null!==(n=v.data)&&void 0!==n&&n.error||(s("send-money-page"),i()),(0,O.A)(null===v||void 0===v||null===(o=v.data)||void 0===o?void 0:o.error,null===v||void 0===v||null===(d=v.data)||void 0===d?void 0:d.message)}catch(c){alert("Capture failed: "+c.message)}}));return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)(ie,{children:[(0,Z.jsxs)(n.A,{display:"flex",alignItems:"center",gap:2,mb:2,children:[(0,Z.jsx)(v.A,{onClick:()=>s("money-transfer"),children:(0,Z.jsx)(w.A,{})}),(0,Z.jsx)(d.A,{variant:"body2",color:"var(--bs-primary2)",fontWeight:"bold",fontSize:18,children:"Verify KYC"})]}),(0,Z.jsxs)(m.Ay,{container:!0,spacing:2,sx:{p:2},children:[(0,Z.jsx)(m.Ay,{item:!0,xs:12,children:(0,Z.jsx)(m.Ay,{container:!0,spacing:2,children:null===e||void 0===e?void 0:e.map(((e,i)=>(0,Z.jsx)(m.Ay,{item:!0,xs:6,sm:4,md:2,children:(0,Z.jsxs)(b.A,{onClick:()=>{return i=e.id,void u(i);var i},sx:{display:"flex",flexDirection:"column",alignItems:"center",p:1,height:"100%",border:c===e.id?"1px solid var(--bs-nav)":"1px solid #ddd",borderRadius:2,boxShadow:0,cursor:"pointer",transition:"all 0.3s ease"},children:[(0,Z.jsx)(A.A,{component:"img",image:e.img,alt:e.name,sx:{height:80,objectFit:"contain",mb:1}}),(0,Z.jsx)(y.A,{sx:{p:0},children:(0,Z.jsx)(d.A,{variant:"body2",align:"center",sx:{fontWeight:500},children:e.name})})]})},i)))})}),(0,Z.jsx)(m.Ay,{item:!0,xs:12,textAlign:"center",children:(0,Z.jsx)(o.A,{variant:"contained",disabled:!c||p,onClick:g,sx:{borderColor:"var(--bs-primary1)",mt:3,backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2)"},children:p?"Capturing...":"Capture Fingerprint"})})]})]})})},de=()=>{var e,i,a,t,n,o,l,s,d,c,u,m;const[p,h]=(0,r.useState)(!1),{invoiceId:x,setCurrentPage:b}=(0,z.useBankTransfer)(),[y,g]=(0,r.useState)(null),f=(0,r.useRef)(),j=(0,G.useReactToPrint)({content:()=>f.current,documentTitle:"DMT Data"});(0,r.useEffect)((()=>{(async()=>{h(!0);try{var e;const i=await(0,W.vJ9)(x);g(null===i||void 0===i||null===(e=i.data)||void 0===e?void 0:e.data)}catch(i){}h(!1)})()}),[x]);const A=(0,r.useRef)(null);(0,r.useEffect)((()=>{A.current&&(A.current.scrollTop=0)}),[]);return(0,r.useEffect)((()=>{(()=>{var e;null===A||void 0===A||null===(e=A.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"end"})})()}),[]),(0,Z.jsxs)(Z.Fragment,{children:[p&&(0,Z.jsx)(V.A,{}),(0,Z.jsx)("div",{ref:A}),(0,Z.jsx)("div",{className:"ContentArea",children:(0,Z.jsxs)("div",{className:"card",children:[(0,Z.jsxs)("div",{className:"card-header card-Details",children:[(0,Z.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Z.jsx)(v.A,{onClick:()=>b("send-money-page"),children:(0,Z.jsx)(w.A,{})}),(0,Z.jsx)("div",{className:"Details",children:(0,Z.jsx)("span",{children:"Details"})})]}),(0,Z.jsxs)("div",{className:"button-print",children:[(0,Z.jsxs)("div",{type:"button",className:"btn btn-warning mr-3",onClick:j,children:[" ",(0,Z.jsx)(P.ne7,{}),"Full Print"]}),(0,Z.jsxs)("div",{type:"button",className:"btn btn-warning mr-3",onClick:()=>{const e=document.getElementById("contentId1");U()().set({margin:1,format:[90,297],filename:"thermal_print_page.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"mm",format:[110,200],orientation:"portrait"}}).from(e).save()},children:[" ",(0,Z.jsx)(P.ne7,{}),"Thermal Print"]})]})]}),(0,Z.jsxs)("div",{ref:f,id:"contentId1",className:"contentId2",children:[(0,Z.jsx)("div",{className:"card-body",children:(0,Z.jsxs)("div",{className:"row",children:[(0,Z.jsx)("div",{className:"col-lg-12",children:(0,Z.jsx)("div",{className:"logo-print text-align-center pb-3",children:(0,Z.jsx)("img",{src:H,alt:""})})}),(0,Z.jsx)("div",{className:"col-lg-6 aabc",children:(0,Z.jsxs)("div",{className:"left-side-section",children:[(0,Z.jsxs)("div",{children:["CSP Name :"," ",(0,Z.jsx)("span",{style:{color:"var(--bs-primary2)"},children:null===y||void 0===y||null===(e=y.invoice[0])||void 0===e?void 0:e.shop_name})]}),(0,Z.jsxs)("div",{children:["Mobile Number :"," ",(0,Z.jsx)("span",{style:{color:"var(--bs-primary2)"},children:null===y||void 0===y||null===(i=y.invoice[0])||void 0===i?void 0:i.mobile_number})]}),(0,Z.jsxs)("div",{children:["Sender Name :"," ",(0,Z.jsx)("span",{style:{color:"var(--bs-primary2)"},children:null===y||void 0===y||null===(a=y.invoice[0])||void 0===a?void 0:a.customer_name})]}),(0,Z.jsxs)("div",{children:["Sender No :"," ",(0,Z.jsx)("span",{style:{color:"var(--bs-primary2)"},children:null===y||void 0===y||null===(t=y.invoice[0])||void 0===t?void 0:t.customer_mobile})]})]})}),(0,Z.jsx)("div",{className:"col-lg-6 aabc",children:(0,Z.jsxs)("div",{className:"right-side-section",children:[(0,Z.jsxs)("div",{children:["Beneficiary :"," ",(0,Z.jsx)("span",{style:{color:"var(--bs-primary2)"},children:null===y||void 0===y||null===(n=y.invoice[0])||void 0===n?void 0:n.beneficiary_name})]}),(0,Z.jsxs)("div",{children:["Bank Name :"," ",(0,Z.jsx)("span",{style:{color:"var(--bs-primary2)"},children:null===y||void 0===y||null===(o=y.invoice[0])||void 0===o?void 0:o.bank_name})]}),(0,Z.jsxs)("div",{children:["Account No :"," ",(0,Z.jsx)("span",{style:{color:"var(--bs-primary2)"},children:null===y||void 0===y||null===(l=y.invoice[0])||void 0===l?void 0:l.account_number})]}),(0,Z.jsxs)("div",{children:["Date :"," ",(0,Z.jsx)("span",{style:{color:"var(--bs-primary2)"},children:null===y||void 0===y||null===(s=y.invoice[0])||void 0===s?void 0:s.createdAt})]})]})})]})}),(0,Z.jsx)("div",{className:"col-lg-12",children:(0,Z.jsx)("div",{className:"card mt-4",style:{overflow:"auto"},children:(0,Z.jsxs)("div",{className:"card-body",children:[(0,Z.jsx)("div",{id:"myTable_wrapper",className:"dataTables_wrapper no-footer",children:(0,Z.jsxs)("table",{className:"table table-striped table-bordered table-hover display dataTable no-footer dtr-inline collapsed",role:"grid","aria-describedby":"myTable_info",children:[(0,Z.jsx)("thead",{children:(0,Z.jsxs)("tr",{role:"row",children:[(0,Z.jsx)("th",{className:"sorting",children:"TID"}),(0,Z.jsx)("th",{className:"sorting",children:"Status"}),(0,Z.jsx)("th",{className:"sorting",children:"UTR No"}),(0,Z.jsx)("th",{className:"sorting",children:"Amount"})]})}),(0,Z.jsxs)("tbody",{children:[y&&(null===y||void 0===y||null===(d=y.invoice[0])||void 0===d||null===(c=d.allTrans)||void 0===c?void 0:c.map((e=>(0,Z.jsxs)("tr",{children:[(0,Z.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.tid}),(0,Z.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.status}),(0,Z.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.utr}),(0,Z.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.amount})]},null===e||void 0===e?void 0:e._id)))),(0,Z.jsxs)("tr",{children:[(0,Z.jsx)("td",{valign:"top",className:"dataTables_empty",colSpan:3,children:"Total"}),(0,Z.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===y||void 0===y||null===(u=y.invoice[0])||void 0===u?void 0:u.totalAmount})]})]})]})}),(0,Z.jsx)("div",{className:"col-lg-12",children:(0,Z.jsx)("div",{className:"reserve",children:(0,Z.jsxs)("p",{children:["\xa9 ",null===(m=new Date)||void 0===m?void 0:m.getFullYear()," All Rights Reserved "]})})})]})})})]})]})})]})},ce=()=>{const[e,i]=(0,r.useState)([]),[a,t]=(0,r.useState)(""),{globalLoader:l,setGlobalLoader:s,mobile:c,setMobile:u,setCurrentPage:v,currentPage:p,setCustomer:h,selectedBank:x,setSelectedBank:g,allBank:f,setAllBank:j}=(0,z.useBankTransfer)();console.log("---------\x3e",p);const A=(0,r.useCallback)((async()=>{try{var e;const a=await(0,W.jnj)({mobile:c}),r=(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.data)||[];i(r)}catch(a){console.error("Error fetching suggestions:",a),i([])}}),[c]);(0,r.useEffect)((()=>{if(!c)return void i([]);const e=setTimeout(A,500);return()=>clearTimeout(e)}),[c,A]);(0,r.useEffect)((()=>{(async()=>{var e,i,a,r;let t=await(0,W.JqU)();j((null===t||void 0===t||null===(e=t.data)||void 0===e||null===(i=e.data)||void 0===i?void 0:i.dmtApiType)||[]),g(null===t||void 0===t||null===(a=t.data)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.defaultApi)})()}),[]);return(0,Z.jsxs)(n.A,{sx:{backgroundColor:"#F5F7FA",minHeight:"100vh",p:2},children:[l&&(0,Z.jsx)(V.A,{}),(0,Z.jsx)("div",{className:"PageHeading",children:(0,Z.jsx)("h1",{children:"Bank Transfer"})}),"money-transfer"===p&&(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)(ie,{children:[(0,Z.jsx)(d.A,{variant:"h6",fontWeight:"600",mb:2,children:"Bank Selection"}),(0,Z.jsx)(m.Ay,{container:!0,spacing:2,children:null===f||void 0===f?void 0:f.map((e=>{const i=x===e._id;return(0,Z.jsx)(m.Ay,{item:!0,xs:6,sm:3,md:3,lg:2,children:(0,Z.jsx)(b.A,{elevation:i?6:1,sx:{borderRadius:3,border:i?"2px solid var(--bs-nav)":"1px solid #ddd",boxShadow:i?"0 6px 18px rgba(0,0,0,0.12)":"none",transition:"all 0.25s ease",cursor:"pointer"},children:(0,Z.jsxs)(C.A,{onClick:()=>{return i=e._id,void g(i);var i},children:[(0,Z.jsx)(y.A,{sx:{p:1,color:"var(--bs-primary2)"},children:(0,Z.jsx)(d.A,{variant:"subtitle1",align:"center",sx:{fontSize:14,fontWeight:600,letterSpacing:"0.5px"},children:e.name.toUpperCase()})}),i&&(0,Z.jsx)(B.A,{sx:{position:"absolute",top:11,right:30,width:"17px",height:"17px",color:"var(--bs-primary2)",fill:"#28a745"}})]})})},e._id)}))}),(0,Z.jsxs)(n.A,{sx:{mt:3,p:2,borderRadius:2,backgroundColor:"#fff",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},children:[(0,Z.jsx)(d.A,{variant:"h6",fontWeight:"600",mb:2,children:"Customer Search"}),(0,Z.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!J(c))return void t("Please enter a valid mobile number.");s(!0);let i={mobile:c,api_id:x};try{var r,n,o,l,d,u;let e=await(0,W.dqk)(i);var m,p;if("401"===(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.statusCode)&&v("add-customer"),"008"===(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.statusCode)&&v("otp-page"),"007"===(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.statusCode)&&v("marchant-onboarding-otp"),"200"===(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.statusCode))h(null===e||void 0===e||null===(m=e.data)||void 0===m||null===(p=m.data)||void 0===p?void 0:p.response),v("send-money-page");(0,O.A)(null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.error,null===e||void 0===e||null===(u=e.data)||void 0===u?void 0:u.message)}catch(a){}finally{s(!1)}},children:[(0,Z.jsxs)(n.A,{display:"flex",flexDirection:{xs:"column",md:"row"},alignItems:"stretch",gap:1.5,children:[(0,Z.jsxs)(n.A,{display:"flex",alignItems:"center",gap:1,flex:1,children:[(0,Z.jsx)(n.A,{sx:{width:40,height:40,borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",color:"var(--bs-primary2)"},children:(0,Z.jsx)(_.A,{})}),(0,Z.jsx)(S.A,{freeSolo:!0,options:e,getOptionLabel:e=>"string"===typeof e?e:e.customer_number,inputValue:c,onInputChange:(e,i)=>{const a=i.replace(/\D/g,"").slice(0,10);u(a),a&&(a.length<10||!J(a))?t("Enter a valid 10-digit mobile number."):t("")},fullWidth:!0,renderInput:e=>(0,Z.jsx)(X,{...e,label:"Search customer mobile number",variant:"outlined",size:"small",error:!!a,helperText:a||null})})]}),(0,Z.jsx)(o.A,{variant:"contained",disabled:!J(c),type:"submit",sx:{width:{xs:"100%",md:"200px"},mt:{xs:1,md:0},backgroundColor:"var(--bs-primary1)",border:"1px solid var(--bs-primary2)",color:"var(--bs-primary2) !important","&:hover":{backgroundColor:"var(--bs-primary1)",color:"var(--bs-primary2) !important",opacity:.9},"&.Mui-disabled":{backgroundColor:"var(--bs-primary1) !important",color:"var(--bs-primary2) !important",borderColor:"var(--bs-primary2) !important",opacity:.5}},children:"Search"})]}),10!==(null===c||void 0===c?void 0:c.length)&&(0,Z.jsxs)(d.A,{variant:"caption",sx:{display:"block",textAlign:"right",color:10===c.length?"green":"red",mt:.5},children:["Your current mobile number length is ",c.length]})]})]})]})}),"send-money-page"===p&&(0,Z.jsx)(re,{}),"add-newBeneficiaryPage"===p&&(0,Z.jsx)(te,{}),"add-customer"===p&&(0,Z.jsx)(ne,{}),"otp-page"===p&&(0,Z.jsx)(oe,{}),"marchant-onboarding-otp"===p&&(0,Z.jsx)(le,{}),"KYC-page"===p&&(0,Z.jsx)(se,{}),"invoice"===p&&(0,Z.jsx)(de,{})]})}},89349:(e,i,a)=>{a.d(i,{g:()=>r});const r=()=>new Promise(((e,i)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((i=>{e({latitude:i.coords.latitude,longitude:i.coords.longitude})}),(e=>{e.code===e.PERMISSION_DENIED&&alert("Please Enable Location to Proceed"),i(e)}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):i(new Error("Geolocation is not supported"))}))},54358:(e,i,a)=>{a.d(i,{A:()=>t});var r=a(91036);function t(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"something went wrong";!1===e?r.oR.success(i):r.oR.error(i)}},8751:(e,i,a)=>{a.d(i,{A:()=>t});var r=a(89349);const t=e=>async function(){try{let{latitude:n,longitude:o}=await(0,r.g)();if(!n||!o)return alert("Please Enable Location");for(var i=arguments.length,a=new Array(i),t=0;t<i;t++)a[t]=arguments[t];return await e(n,o,...a)}catch(n){console.error("Error fetching location:",n)}}},33262:(e,i,a)=>{e.exports=a.p+"static/media/mantra.6c398cd6eba242d3496c.png"},45531:(e,i,a)=>{e.exports=a.p+"static/media/mantral1.cdc67b4cc75a0d886924.png"},60648:(e,i,a)=>{e.exports=a.p+"static/media/morpho.3d2243f00963167fc971.png"},45925:(e,i,a)=>{e.exports=a.p+"static/media/transparentLogo.b9ade7f4ea3f01c7af05.png"}}]);
//# sourceMappingURL=6515.d20790d3.chunk.js.map