"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[978],{10978:(e,a,t)=>{t.r(a),t.d(a,{default:()=>_});var l=t(65043),n=t(72777),s=t(22019),d=t(94434),i=t(73575),o=t(27108),r=t(94516),c=t(67784),u=t(53193),v=t(18356),m=t(72221),p=t(32143),x=t(94496),h=t(59135),b=t(14282),g=t(35475),j=t(11238),y=t(70579);const _=e=>{let{title:a}=e;const t=(new Date).toISOString().split("T")[0],[_,f]=(0,l.useState)(!1),[N,C]=(0,l.useState)(null),[w,S]=(0,l.useState)(1),[A,T]=(0,l.useState)([]),[I,k]=(0,l.useState)(null),[B,R]=(0,l.useState)(0),[O,D]=(0,l.useState)(!1),[M,E]=(0,l.useState)([]),[P,F]=(0,l.useState)(10),[z,W]=(0,l.useState)({response:"",start_date:"",end_date:"",txn_id:"",service_name:""}),L=e=>{const{name:a,value:t}=e.target;W((e=>"start_date"===a?{...e,start_date:t,end_date:e.end_date&&e.end_date<t?"":e.end_date}:"end_date"===a?e.start_date&&t<e.start_date?(s.Ay.error("End date cannot be earlier than Start date"),e):{...e,end_date:t}:{...e,[a]:t}))};(0,l.useEffect)((()=>{(async()=>{try{var e;let t=await(0,i.EpH)();var a;!1===(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.error)?T((null===(a=t.data)||void 0===a?void 0:a.data)||[]):T([])}catch(t){console.error(t),T([])}})()}),[]);(0,l.useEffect)((()=>{S(1),D((e=>!e))}),[]),(0,l.useEffect)((()=>{(async()=>{f(!0);try{var e;const o=await(0,i.xcq)({...z,retailer_id:(null===I||void 0===I?void 0:I._id)||"",page:w,limit:P});var a,t,l,n,d;!1===(null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.error)?(E((null===(a=o.data)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.bbpsAllTxns)||[]),R((null===(l=o.data)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.totalTxns)||0)):(E([]),R(0),s.Ay.error((null===(d=o.data)||void 0===d?void 0:d.message)||"Something went wrong"))}catch(o){s.Ay.error("Failed to fetch BBPS report")}finally{f(!1)}})()}),[O,w,P]);const U=Math.ceil(B/P);return(0,y.jsxs)(y.Fragment,{children:[_&&(0,y.jsx)(n.A,{}),a&&(0,y.jsx)("h3",{className:"mt-3 mb-3",style:{color:"var(--bs-primary2)",fontWeight:700,borderBottom:"1px solid var(--bs-primary2)",paddingBottom:"8px"},children:a}),(0,y.jsx)("div",{className:"card",children:(0,y.jsx)("div",{className:"card-body",children:(0,y.jsx)("form",{children:(0,y.jsxs)("div",{className:"form-row",style:{alignItems:"end"},children:[(0,y.jsxs)("div",{className:"form-group col-md-4",children:[(0,y.jsx)("label",{children:"Start Date"}),(0,y.jsx)("input",{type:"date",name:"start_date",className:"form-control input-white-bg",max:t,value:z.start_date,onChange:L})]}),(0,y.jsxs)("div",{className:"form-group col-md-4",children:[(0,y.jsx)("label",{children:"End Date"}),(0,y.jsx)("input",{type:"date",name:"end_date",className:"form-control input-white-bg",max:t,min:z.start_date||"",value:z.end_date,onChange:L})]}),(0,y.jsxs)("div",{className:"form-group col-md-4",children:[(0,y.jsx)("label",{children:"Txn Id"}),(0,y.jsx)("input",{type:"text",name:"txn_id",className:"form-control bs-autofill-fix",placeholder:"Enter Txn Id",value:z.txn_id,onChange:L})]}),(0,y.jsxs)("div",{className:"form-group col-md-4",children:[(0,y.jsx)("label",{children:"Service Name"}),(0,y.jsx)("input",{type:"text",name:"service_name",className:"form-control bs-autofill-fix",placeholder:"Enter Service Name",value:z.service_name,onChange:L})]}),(0,y.jsxs)("div",{className:"form-group col-md-4",children:[(0,y.jsx)("label",{children:"Status"}),(0,y.jsx)(d.A,{style:{width:"100%"},value:z.response,onChange:e=>((e,a)=>{W((t=>({...t,[a]:e})))})(e,"response"),options:[{value:"",label:"All"},{value:"1",label:"Pending"},{value:"2",label:"Success"},{value:"3",label:"Failed"},{value:"4",label:"Refunded"}]})]}),(0,y.jsxs)("div",{className:"form-group col-md-4",children:[(0,y.jsx)("label",{children:"Select Retailer"}),(0,y.jsx)(o.A,{options:A,getOptionLabel:e=>e.name||"",value:null!==I&&void 0!==I?I:null,size:"small",onChange:(e,a)=>k(a),renderOption:(e,a)=>(0,l.createElement)("li",{...e,key:a.retailer_id},(0,y.jsx)(r.A,{sx:{fontSize:"13px"},children:a.name})),renderInput:e=>(0,y.jsx)(c.A,{...e,label:"Select Retailer",InputLabelProps:{sx:{"&.MuiInputLabel-root:not(.MuiInputLabel-shrink)":{top:"-3px"}}},sx:{"& label.Mui-focused":{color:"#8b8b8bff"},"& .MuiInputBase-root":{backgroundColor:"#fff"},"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#ced4da"},"&.Mui-focused fieldset":{borderColor:"#ced4da"}}}})})]}),(0,y.jsxs)("div",{className:"form-group col-md-12",children:[(0,y.jsx)("button",{type:"button",className:"btn mr-3 text-white",style:{backgroundColor:"#6C757D"},onClick:()=>{S(1),D((e=>!e))},children:"Search"}),(0,y.jsx)("button",{type:"button",className:"btn btn-light",style:{backgroundColor:"#F8F9FA"},onClick:()=>{W({response:"",start_date:"",end_date:"",txn_id:"",service_name:""}),k(null),F(10),S(1),D((e=>!e))},children:"Reset"})]})]})})})}),(0,y.jsx)("div",{className:"card mt-4",style:{overflow:"auto"},children:(0,y.jsxs)("div",{className:"card-body",children:[(0,y.jsxs)("div",{id:"myTable_wrapper",className:"dataTables_wrapper no-footer",children:[(0,y.jsx)("div",{className:"d-flex  justify-content-end align-items-center",children:(0,y.jsx)("div",{className:"dataTables_length mb-3",id:"myTable_length",children:(0,y.jsx)(b.A,{className:"btn btn-success cusxel",onClick:async()=>{try{var e,a,t;f(!0);const d=await(0,i._Am)({...z,retailer_id:(null===I||void 0===I?void 0:I._id)||""});if((null===d||void 0===d||null===(e=d.data)||void 0===e||null===(a=e.data)||void 0===a||null===(t=a.bbpsAllTxns)||void 0===t?void 0:t.length)>0){var l,n;const e=null===d||void 0===d||null===(l=d.data)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.bbpsAllTxns.map(((e,a)=>({"Sr. No":a+1,"Date / Time":(null===e||void 0===e?void 0:e.createdAt)||"","Transaction ID":(null===e||void 0===e?void 0:e.txn_id)||"","Operator Name":(null===e||void 0===e?void 0:e.operator_name)||"",Amount:(null===e||void 0===e?void 0:e.amount)||"",Status:2===(null===e||void 0===e?void 0:e.status)?"Success":1===(null===e||void 0===e?void 0:e.status)?"Pending":3===(null===e||void 0===e?void 0:e.status)?"Failed":4===(null===e||void 0===e?void 0:e.status)?"Refund":"Unknown","CA Number":(null===e||void 0===e?void 0:e.ca_num)||"","Opening Balance":(null===e||void 0===e?void 0:e.open_bal)||"","Closing Balance":(null===e||void 0===e?void 0:e.close_bal)||"","Ref ID":(null===e||void 0===e?void 0:e.refId)||"","Biller Id ID":(null===e||void 0===e?void 0:e.biller_id)||"",Charges:(null===e||void 0===e?void 0:e.charges)||"","Service Name":(null===e||void 0===e?void 0:e.service_name)||"","Created By Name":(null===e||void 0===e?void 0:e.CreatedBy_name)||"","Created By Mobile":(null===e||void 0===e?void 0:e.CreatedBy_mobile)||"","Created By Refer ID":(null===e||void 0===e?void 0:e.CreatedBy_refer_id)||"","Retailer Name":(null===e||void 0===e?void 0:e.retailer_name)||"","Retailer Mobile":(null===e||void 0===e?void 0:e.retailer_mobile)||"","Retailer Refer ID":(null===e||void 0===e?void 0:e.retailer_refer_id)||"","Status Update Time":(null===e||void 0===e?void 0:e.status_update_time)||""}))),a=j.Wp.json_to_sheet(e),t=j.Wp.book_new();j.Wp.book_append_sheet(t,a,"BBPS Report"),j._h(t,"BBPS_Report_".concat((new Date).toLocaleDateString(),".xlsx"))}else s.Ay.error("No data available to export!")}catch(d){s.Ay.error("Failed to download Excel. Please try again.")}finally{f(!1)}},children:"Download Excel sheet"})})}),(0,y.jsx)("div",{className:"table-responsive",style:{maxHeight:"60vh",overflow:"auto",borderRadius:"10px",border:"1px solid #eaeaea"},children:(0,y.jsxs)("table",{className:"table table-hover table-bordered mb-0",style:{whiteSpace:"nowrap"},children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{role:"row",children:[(0,y.jsx)("th",{className:"",children:"S.No"}),(0,y.jsx)("th",{className:"",children:"Txn Date"}),(0,y.jsx)("th",{className:"",children:"Operator Name"}),(0,y.jsx)("th",{className:"",children:"CA Number"}),(0,y.jsx)("th",{className:"",children:"Txn Id"}),(0,y.jsx)("th",{className:"",children:"Service Name "}),(0,y.jsx)("th",{className:"",children:"Opening Balance"}),(0,y.jsx)("th",{className:"",children:"Amount"}),(0,y.jsx)("th",{className:"",children:"Closing Balance"}),(0,y.jsx)("th",{className:"",children:"Txn Status"}),(0,y.jsx)("th",{className:"",children:"Retailer Name"}),(0,y.jsx)("th",{className:"",children:"Retailer Code"}),(0,y.jsx)("th",{className:"",children:"Retailer Number"}),(0,y.jsx)("th",{className:"",children:"Status Update At"}),(0,y.jsx)("th",{className:"",children:"Enquiry"}),(0,y.jsx)("th",{className:"",children:"Invoice"})]})}),(0,y.jsxs)("tbody",{children:[null===M||void 0===M?void 0:M.map(((e,a)=>(0,y.jsxs)("tr",{className:"odd",children:[(0,y.jsx)("td",{valign:"top",className:"dataTables_empty",children:a+1+(w-1)*P}),(0,y.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.createdAt}),(0,y.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.operator_name}),(0,y.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.ca_num}),(0,y.jsx)("td",{valign:"top",className:"dataTables_empty",children:(null===e||void 0===e?void 0:e.txn_id)||"---"}),(0,y.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.service_name}),(0,y.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.open_bal}),(0,y.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.amount}),(0,y.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.close_bal}),(0,y.jsxs)("td",{valign:"top",className:"dataTables_empty",children:[1==(null===e||void 0===e?void 0:e.status)?(0,y.jsx)("button",{className:"btn btn-warning",style:{width:"130px"},children:"Pending"}):"",2==(null===e||void 0===e?void 0:e.status)?(0,y.jsx)("button",{className:"btn btn-success",style:{width:"130px"},children:"Success"}):"",3==(null===e||void 0===e?void 0:e.status)?(0,y.jsx)("button",{className:"btn btn-danger",style:{width:"130px"},children:"Failed"}):"",4==(null===e||void 0===e?void 0:e.status)?(0,y.jsx)("button",{className:"btn btn-light",style:{width:"130px"},children:"Refunded"}):"",5==(null===e||void 0===e?void 0:e.status)?(0,y.jsx)("button",{className:"btn btn-light",style:{width:"130px"},children:"Not Initiated"}):""]}),(0,y.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.retailer_name}),(0,y.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.retailer_refer_id}),(0,y.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.retailer_mobile}),(0,y.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.status_update_time}),(0,y.jsx)("td",{valign:"top",className:"dataTables_empty",children:(0,y.jsx)(b.A,{onClick:()=>(async e=>{f(!0);try{var a;let n=await(0,i.Et2)(e);var t,l;!1===(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.error)?(s.Ay.success(null===(t=n.data)||void 0===t?void 0:t.message),D((e=>!e))):s.Ay.error(null===(l=n.data)||void 0===l?void 0:l.message)}catch(n){}finally{f(!1)}})(null===e||void 0===e?void 0:e.txn_id),disabled:_||1!==(null===e||void 0===e?void 0:e.status),children:"Enquiry"})}),(0,y.jsx)("td",{valign:"top",className:"dataTables_empty",children:(0,y.jsx)(g.N_,{className:"btn btn-primary",to:"/bill-invoice/".concat(null===e||void 0===e?void 0:e._id),children:"Invoice"})})]},null===e||void 0===e?void 0:e._id))),0===(null===M||void 0===M?void 0:M.length)&&(0,y.jsx)("td",{style:{textAlign:"center"},colSpan:17,valign:"top",className:"dataTables_empty",children:"No Record Found"})]})]})})]}),(0,y.jsxs)(r.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2,flexWrap:"wrap",gap:2,children:[(0,y.jsxs)(r.A,{display:"flex",alignItems:"center",gap:2,children:[(0,y.jsxs)(u.A,{size:"small",sx:{width:"150px"},children:[(0,y.jsx)(v.A,{children:"Rows per page"}),(0,y.jsx)(m.A,{value:P,onChange:e=>{F(e.target.value),S(1)},label:"Rows per page",sx:{fontSize:"14px","& .MuiOutlinedInput-notchedOutline":{borderColor:"#ccc"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"var(--bs-primary1)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"var(--bs-primary1)"}},children:[5,10,25,50].map((e=>(0,y.jsx)(p.A,{value:e,children:e},e)))})]}),(0,y.jsxs)(x.A,{variant:"body2",sx:{fontSize:"14px",color:"#555"},children:["Total Entries: ",B]})]}),(0,y.jsx)(h.A,{count:U,page:w,onChange:(e,a)=>{S(a)},shape:"rounded",showFirstButton:!0,showLastButton:!0,sx:{"& .MuiPaginationItem-root":{color:"var(--bs-primary1)",borderRadius:"8px"},"& .MuiPaginationItem-root.Mui-selected":{backgroundColor:"var(--bs-primary1)",color:"#fff",fontWeight:"bold","&:hover":{backgroundColor:"var(--bs-primary1)"}}}})]})]})})]})}},14140:(e,a,t)=>{t.d(a,{Am:()=>d,Ay:()=>o});var l=t(65043),n=t(70579);const s=["as","disabled"];function d(e){let{tagName:a,disabled:t,href:l,target:n,rel:s,role:d,onClick:i,tabIndex:o=0,type:r}=e;a||(a=null!=l||null!=n||null!=s?"a":"button");const c={tagName:a};if("button"===a)return[{type:r||"button",disabled:t},c];const u=e=>{(t||"a"===a&&function(e){return!e||"#"===e.trim()}(l))&&e.preventDefault(),t?e.stopPropagation():null==i||i(e)};return"a"===a&&(l||(l="#"),t&&(l=void 0)),[{role:null!=d?d:"button",disabled:void 0,tabIndex:t?void 0:o,href:l,target:"a"===a?n:void 0,"aria-disabled":t||void 0,rel:"a"===a?s:void 0,onClick:u,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),u(e))}},c]}const i=l.forwardRef(((e,a)=>{let{as:t,disabled:l}=e,i=function(e,a){if(null==e)return{};var t,l,n={},s=Object.keys(e);for(l=0;l<s.length;l++)t=s[l],a.indexOf(t)>=0||(n[t]=e[t]);return n}(e,s);const[o,{tagName:r}]=d(Object.assign({tagName:t,disabled:l},i));return(0,n.jsx)(r,Object.assign({},i,o,{ref:a}))}));i.displayName="Button";const o=i},14282:(e,a,t)=>{t.d(a,{A:()=>c});var l=t(98139),n=t.n(l),s=t(65043),d=t(14140),i=t(67852),o=t(70579);const r=s.forwardRef(((e,a)=>{let{as:t,bsPrefix:l,variant:s="primary",size:r,active:c=!1,disabled:u=!1,className:v,...m}=e;const p=(0,i.oU)(l,"btn"),[x,{tagName:h}]=(0,d.Am)({tagName:t,disabled:u,...m}),b=h;return(0,o.jsx)(b,{...x,...m,ref:a,disabled:u,className:n()(v,p,c&&"active",s&&"".concat(p,"-").concat(s),r&&"".concat(p,"-").concat(r),m.href&&u&&"disabled")})}));r.displayName="Button";const c=r},67852:(e,a,t)=>{t.d(a,{Jm:()=>u,Wz:()=>v,gy:()=>c,oU:()=>r});var l=t(65043);t(70579);const n=["xxl","xl","lg","md","sm","xs"],s="xs",d=l.createContext({prefixes:{},breakpoints:n,minBreakpoint:s}),{Consumer:i,Provider:o}=d;function r(e,a){const{prefixes:t}=(0,l.useContext)(d);return e||t[a]||a}function c(){const{breakpoints:e}=(0,l.useContext)(d);return e}function u(){const{minBreakpoint:e}=(0,l.useContext)(d);return e}function v(){const{dir:e}=(0,l.useContext)(d);return"rtl"===e}}}]);
//# sourceMappingURL=978.d28cc456.chunk.js.map