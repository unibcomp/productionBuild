/*! For license information please see 5729.f8178654.chunk.js.LICENSE.txt */
(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[5729],{15729:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>d});var s=t(65043),r=t(91036),a=t(73575),o=t(25284),l=t(70579);const i=function(e){var n;const[t,r]=(0,s.useState)(new Array(6).fill("")),[i,c]=(0,s.useState)(new Array(4).fill("")),[d,u]=(0,s.useState)(new Array(4).fill("")),[m,f]=(0,s.useState)(180),[p,h]=(0,s.useState)(!0),[v,g]=(0,s.useState)(!1),[x,y]=(0,s.useState)(""),[w,N]=(0,s.useState)(""),j=(0,s.useRef)([]),b=(0,s.useRef)(null),P=(0,s.useRef)([]),C=(0,s.useRef)([]),A=(e,n,t)=>{if(/^\d?$/.test(t)){if("new"===e){const e=[...i];e[n]=t,c(e),t&&P.current[n+1]&&P.current[n+1].focus()}if("confirm"===e){const e=[...d];e[n]=t,u(e),t&&C.current[n+1]&&C.current[n+1].focus()}}},T=(0,s.useCallback)((()=>{b.current&&clearInterval(b.current),f(180),h(!0),b.current=setInterval((()=>{f((e=>e<=1?(clearInterval(b.current),h(!1),0):e-1))}),1e3)}),[]);(0,s.useEffect)((()=>{if(e.show)return T(),()=>{b.current&&clearInterval(b.current)}}),[e.show,T]);const S=async()=>{const n=i.join(""),s=d.join("");if(4!==n.length||4!==s.length)return void e.toastErrorMessage("PIN must be exactly 4 digits");if(n!==s)return void e.toastErrorMessage("New PIN and Confirm PIN do not match");g(!0);const o={user_id:window.localStorage.getItem("userIdToken"),otp:t.join(""),newPin:n,confirmPin:s};try{var l;const n=await(0,a.Cl)(o);var m,f;if(200===(null===n||void 0===n||null===(l=n.data)||void 0===l?void 0:l.statusCode))e.toastSuccessMessage(null===n||void 0===n||null===(m=n.data)||void 0===m?void 0:m.message),r(new Array(6).fill("")),c(new Array(4).fill("")),u(new Array(4).fill("")),setTimeout((()=>e.handleClose()),500);else e.toastErrorMessage(null===n||void 0===n||null===(f=n.data)||void 0===f?void 0:f.message)}catch{e.toastErrorMessage("OTP verification failed")}finally{g(!1)}};return(0,l.jsx)(o.A,{show:e.show,onHide:e.handleClose,centered:!0,className:"email-optp-modle",children:(0,l.jsx)(o.A.Body,{style:{backgroundColor:"#23627e",border:"2px solid #23627e"},children:(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsxs)("div",{className:"col-lg-12",children:[(0,l.jsxs)("div",{className:"heading-otp text-white text-center",children:[(0,l.jsx)("h2",{children:"OTP Verification"}),(0,l.jsx)("p",{className:"set-lage",children:"Enter the 6-digit OTP sent to your registered mobile number."}),(0,l.jsx)("p",{className:"set-lage",children:null===e||void 0===e||null===(n=e.OtpMsg)||void 0===n?void 0:n.message})]}),(0,l.jsxs)("div",{className:"verification-code text-white",children:[(0,l.jsx)("p",{children:"Verify Code "}),(0,l.jsx)("div",{className:"resend-otp",children:(0,l.jsx)("p",{onClick:async()=>{try{h(!0);window.localStorage.getItem("userIdToken"),t.join("");const n=await e.ForgotPinGet();200===n.status?(r(new Array(6).fill("")),y((null===n||void 0===n?void 0:n.message)||"OTP resent successfully"),N(""),T()):N((null===n||void 0===n?void 0:n.message)||"Failed to resend OTP")}catch(w){N("An error occurred while resending OTP")}finally{h(!1)}},style:{cursor:p?"default":"pointer",color:p?"gray":"blue",pointerEvents:p?"none":"auto"},children:p?"Resend in ".concat((e=>{const n=Math.floor(e/60),t=e%60;return"".concat(n.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"))})(m)):"Resend OTP"})})]})]}),(0,l.jsx)("div",{className:"col-lg-12",children:(0,l.jsx)("div",{className:"otp-inputs",children:t.map(((e,n)=>(0,l.jsx)("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:"1",value:e,className:"otp-input otp-input-login",onChange:e=>((e,n)=>{const s=n.replace(/[^0-9]/g,"");if(s.length>1)return;const a=[...t];a[e]=s,r(a),s&&j.current[e+1]&&j.current[e+1].focus()})(n,e.target.value),onKeyDown:e=>((e,n)=>{"Backspace"===n.key&&!t[e]&&j.current[e-1]&&j.current[e-1].focus()})(n,e),ref:e=>j.current[n]=e,onKeyPress:e=>{/[0-9]/.test(e.key)||e.preventDefault(),n===t.length-1&&(e=>{"Enter"===e.key&&t.every((e=>1===e.length))&&S()})(e)},onPaste:e=>e.preventDefault()},n)))})}),(0,l.jsxs)("div",{className:"col-lg-12",children:[(0,l.jsx)("label",{style:{color:"#fff"},children:"New PIN"}),(0,l.jsx)("div",{className:"d-flex gap-2",children:i.map(((e,n)=>(0,l.jsx)("input",{ref:e=>P.current[n]=e,type:"password",maxLength:"1",className:"otp-input otp-input-login",value:e,onChange:e=>A("new",n,e.target.value),onPaste:e=>e.preventDefault()},n)))})]}),(0,l.jsxs)("div",{className:"col-lg-12",children:[(0,l.jsx)("label",{style:{color:"#fff"},children:"Confirm PIN"}),(0,l.jsx)("div",{className:"d-flex gap-2",children:d.map(((e,n)=>(0,l.jsx)("input",{ref:e=>C.current[n]=e,type:"password",maxLength:"1",className:"otp-input otp-input-login",value:e,onChange:e=>A("confirm",n,e.target.value),onPaste:e=>e.preventDefault()},n)))})]}),(0,l.jsx)("div",{className:"col-lg-12",children:(0,l.jsx)("div",{className:"input-group mt-3",children:(0,l.jsxs)("button",{type:"button",disabled:6!==t.join("").length||4!==i.join("").length||4!==d.join("").length||v,onClick:S,className:"form-control btn ".concat((t.join("").length,"btn-login")),children:["Submit OTP",v&&(0,l.jsx)("div",{style:{height:"16px",width:"16px"},className:"spinner-border",role:"status",children:(0,l.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]})})}),x&&(0,l.jsx)("div",{className:"col-lg-12 text-success",children:x}),w&&(0,l.jsx)("div",{className:"col-lg-12 text-danger",children:w})]})})})})};const c=function(){const[e,n]=(0,s.useState)(!1),[t,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)(null),[u,m]=(0,s.useState)({user_id:"",oldPin:"",newPin:"",confirmPin:""}),f=e=>{const n={...u},t=e.target.value;if(/^\d{0,4}$/.test(t)){n[e.target.name]=t,m(n)}},p=e=>{r.oR.success("".concat(e),{position:"top-center",autoClose:2e3})},h=e=>{r.oR.error("".concat(e),{position:"top-center",autoClose:2e3})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"PageHeading",children:(0,l.jsx)("h1",{children:"Transaction Pin"})}),(0,l.jsx)("div",{className:"ContentArea",children:(0,l.jsxs)("div",{className:"card",children:[(0,l.jsxs)("div",{className:"card-header Forget_Pin over-color",children:[(0,l.jsx)("span",{children:"Change Your Transaction Pin"}),(0,l.jsx)("button",{type:"button",className:"btn btn-primary",onClick:async()=>{var e;o(!0);const n=await(0,a.XUy)();var t;200==(null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.statusCode)&&(p("OTP send Customer Mobile Number"),d(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.data))},children:"Forgot Pin"})]}),(0,l.jsx)("div",{className:"card-body",children:(0,l.jsxs)("form",{action:"",children:[(0,l.jsxs)("div",{className:"form-row",children:[(0,l.jsxs)("div",{className:"form-group col-md-4",children:[(0,l.jsxs)("label",{htmlFor:"txtOldPassword",children:["Old Transaction Pin ",(0,l.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,l.jsx)("input",{className:"form-control",id:"txtOldPassword",name:"oldPin",type:"password",placeholder:"Old Transaction Pin",value:u.oldPin,onChange:f})]}),(0,l.jsxs)("div",{className:"form-group col-md-4",children:[(0,l.jsxs)("label",{htmlFor:"txtNewPassword",children:["New Transaction Pin ",(0,l.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,l.jsx)("input",{className:"form-control",id:"txtNewPassword",name:"newPin",type:"password",placeholder:"New Transaction Pin",value:u.newPin,onChange:f})]}),(0,l.jsxs)("div",{className:"form-group col-md-4",children:[(0,l.jsxs)("label",{htmlFor:"txtCnfPassword",children:["Confirm Transaction Pin ",(0,l.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,l.jsx)("input",{className:"form-control",id:"txtCnfPassword",name:"confirmPin",type:"password",placeholder:"Confirm New Transaction Pin",value:u.confirmPin,onChange:f})]})]}),(0,l.jsx)("div",{className:"text-align-center",children:(0,l.jsxs)("button",{type:"button",className:"btn",disabled:!u.oldPin||!u.newPin||!u.confirmPin||e,onClick:async()=>{n(!0);const e={...u,user_id:window.localStorage.getItem("userIdToken")};try{var t,s;const i=await(0,a.WcE)(e);var r,o,l;if("200"==(null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.statusCode))p(null===i||void 0===i||null===(r=i.data)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.mesage),m({user_id:"",oldPin:"",newPin:"",confirmPin:""});if("403"==(null===i||void 0===i||null===(s=i.data)||void 0===s?void 0:s.statusCode))h(null===i||void 0===i||null===(l=i.data)||void 0===l?void 0:l.message);n(!1)}catch(i){n(!1)}},onMouseEnter:e=>{e.currentTarget.disabled||(e.currentTarget.style.opacity="0.9")},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},style:{width:"200px",backgroundColor:"var(--bs-primary1)",border:"1px solid var(--bs-primary2)",color:"var(--bs-primary2)",opacity:u.oldPin&&u.newPin&&u.confirmPin?1:.5,cursor:u.oldPin&&u.newPin&&u.confirmPin?"pointer":"not-allowed"},children:["Change Tpin",e&&(0,l.jsx)("div",{style:{height:"16px",width:"16px"},className:"spinner-border",role:"status",children:(0,l.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]})})]})})]})}),(0,l.jsx)(i,{handleClose:()=>{o(!1)},show:t,toastSuccessMessage:p,toastErrorMessage:h,OtpMsg:c,ForgotPinGet:a.XUy})]})};const d=function(){return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(c,{})})}},92667:(e,n,t)=>{"use strict";t.d(n,{A:()=>r});var s=t(65043);function r(){return(0,s.useState)(null)}},25284:(e,n,t)=>{"use strict";t.d(n,{A:()=>L});var s,r=t(98139),a=t.n(r),o=t(63043),l=t(18279),i=t(80182),c=t(8260);function d(e){if((!s&&0!==s||e)&&l.A){var n=document.createElement("div");n.style.position="absolute",n.style.top="-9999px",n.style.width="50px",n.style.height="50px",n.style.overflow="scroll",document.body.appendChild(n),s=n.offsetWidth-n.clientWidth,document.body.removeChild(n)}return s}var u=t(92667),m=t(71456),f=t(38293),p=t(59109),h=t(94232),v=t(65043),g=t(79600),x=t(95675),y=t(18072),w=t(67852),N=t(70579);const j=v.forwardRef(((e,n)=>{let{className:t,bsPrefix:s,as:r="div",...o}=e;return s=(0,w.oU)(s,"modal-body"),(0,N.jsx)(r,{ref:n,className:a()(t,s),...o})}));j.displayName="ModalBody";const b=j;var P=t(31602);const C=v.forwardRef(((e,n)=>{let{bsPrefix:t,className:s,contentClassName:r,centered:o,size:l,fullscreen:i,children:c,scrollable:d,...u}=e;t=(0,w.oU)(t,"modal");const m="".concat(t,"-dialog"),f="string"===typeof i?"".concat(t,"-fullscreen-").concat(i):"".concat(t,"-fullscreen");return(0,N.jsx)("div",{...u,ref:n,className:a()(m,s,l&&"".concat(t,"-").concat(l),o&&"".concat(m,"-centered"),d&&"".concat(m,"-scrollable"),i&&f),children:(0,N.jsx)("div",{className:a()("".concat(t,"-content"),r),children:c})})}));C.displayName="ModalDialog";const A=C,T=v.forwardRef(((e,n)=>{let{className:t,bsPrefix:s,as:r="div",...o}=e;return s=(0,w.oU)(s,"modal-footer"),(0,N.jsx)(r,{ref:n,className:a()(t,s),...o})}));T.displayName="ModalFooter";const S=T;var k=t(42258);const E=v.forwardRef(((e,n)=>{let{bsPrefix:t,className:s,closeLabel:r="Close",closeButton:o=!1,...l}=e;return t=(0,w.oU)(t,"modal-header"),(0,N.jsx)(k.A,{ref:n,...l,className:a()(s,t),closeLabel:r,closeButton:o})}));E.displayName="ModalHeader";const O=E;const R=(0,t(4488).A)("h4"),M=v.forwardRef(((e,n)=>{let{className:t,bsPrefix:s,as:r=R,...o}=e;return s=(0,w.oU)(s,"modal-title"),(0,N.jsx)(r,{ref:n,className:a()(t,s),...o})}));M.displayName="ModalTitle";const I=M;function F(e){return(0,N.jsx)(y.A,{...e,timeout:null})}function D(e){return(0,N.jsx)(y.A,{...e,timeout:null})}const U=v.forwardRef(((e,n)=>{let{bsPrefix:t,className:s,style:r,dialogClassName:y,contentClassName:j,children:b,dialogAs:C=A,"data-bs-theme":T,"aria-labelledby":S,"aria-describedby":k,"aria-label":E,show:O=!1,animation:R=!0,backdrop:M=!0,keyboard:I=!0,onEscapeKeyDown:U,onShow:L,onHide:H,container:B,autoFocus:_=!0,enforceFocus:z=!0,restoreFocus:K=!0,restoreFocusOptions:W,onEntered:G,onExit:V,onExiting:X,onEnter:$,onEntering:Y,onExited:q,backdropClassName:J,manager:Q,...Z}=e;const[ee,ne]=(0,v.useState)({}),[te,se]=(0,v.useState)(!1),re=(0,v.useRef)(!1),ae=(0,v.useRef)(!1),oe=(0,v.useRef)(null),[le,ie]=(0,u.A)(),ce=(0,f.A)(n,ie),de=(0,m.A)(H),ue=(0,w.Wz)();t=(0,w.oU)(t,"modal");const me=(0,v.useMemo)((()=>({onHide:de})),[de]);function fe(){return Q||(0,x.R)({isRTL:ue})}function pe(e){if(!l.A)return;const n=fe().getScrollbarWidth()>0,t=e.scrollHeight>(0,i.A)(e).documentElement.clientHeight;ne({paddingRight:n&&!t?d():void 0,paddingLeft:!n&&t?d():void 0})}const he=(0,m.A)((()=>{le&&pe(le.dialog)}));(0,p.A)((()=>{(0,c.A)(window,"resize",he),null==oe.current||oe.current()}));const ve=()=>{re.current=!0},ge=e=>{re.current&&le&&e.target===le.dialog&&(ae.current=!0),re.current=!1},xe=()=>{se(!0),oe.current=(0,h.A)(le.dialog,(()=>{se(!1)}))},ye=e=>{"static"!==M?ae.current||e.target!==e.currentTarget?ae.current=!1:null==H||H():(e=>{e.target===e.currentTarget&&xe()})(e)},we=(0,v.useCallback)((e=>(0,N.jsx)("div",{...e,className:a()("".concat(t,"-backdrop"),J,!R&&"show")})),[R,J,t]),Ne={...r,...ee};Ne.display="block";return(0,N.jsx)(P.A.Provider,{value:me,children:(0,N.jsx)(g.A,{show:O,ref:ce,backdrop:M,container:B,keyboard:!0,autoFocus:_,enforceFocus:z,restoreFocus:K,restoreFocusOptions:W,onEscapeKeyDown:e=>{I?null==U||U(e):(e.preventDefault(),"static"===M&&xe())},onShow:L,onHide:H,onEnter:(e,n)=>{e&&pe(e),null==$||$(e,n)},onEntering:(e,n)=>{null==Y||Y(e,n),(0,o.Ay)(window,"resize",he)},onEntered:G,onExit:e=>{null==oe.current||oe.current(),null==V||V(e)},onExiting:X,onExited:e=>{e&&(e.style.display=""),null==q||q(e),(0,c.A)(window,"resize",he)},manager:fe(),transition:R?F:void 0,backdropTransition:R?D:void 0,renderBackdrop:we,renderDialog:e=>(0,N.jsx)("div",{role:"dialog",...e,style:Ne,className:a()(s,t,te&&"".concat(t,"-static"),!R&&"show"),onClick:M?ye:void 0,onMouseUp:ge,"data-bs-theme":T,"aria-label":E,"aria-labelledby":S,"aria-describedby":k,children:(0,N.jsx)(C,{...Z,onMouseDown:ve,className:y,contentClassName:j,children:b})})})})}));U.displayName="Modal";const L=Object.assign(U,{Body:b,Header:O,Title:I,Footer:S,Dialog:A,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150})},98139:(e,n)=>{var t;!function(){"use strict";var s={}.hasOwnProperty;function r(){for(var e="",n=0;n<arguments.length;n++){var t=arguments[n];t&&(e=o(e,a(t)))}return e}function a(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var n="";for(var t in e)s.call(e,t)&&e[t]&&(n=o(n,t));return n}function o(e,n){return n?e?e+" "+n:e+n:e}e.exports?(r.default=r,e.exports=r):void 0===(t=function(){return r}.apply(n,[]))||(e.exports=t)}()}}]);
//# sourceMappingURL=5729.f8178654.chunk.js.map