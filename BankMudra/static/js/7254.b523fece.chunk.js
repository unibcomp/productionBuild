"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[7254,556],{26925:(e,a,s)=>{s.d(a,{W:()=>n,f:()=>l});var i=s(91036);const n=e=>{i.oR.success("".concat(e),{position:"top-center",autoClose:2e3})},l=e=>{i.oR.error("".concat(e),{position:"top-center",autoClose:2e3})}},60556:(e,a,s)=>{s.r(a),s.d(a,{default:()=>n});var i=s(70579);const n=function(e){let{activeMessage:a,buyMessage:s,head:n}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"PageHeading",children:(0,i.jsx)("h1",{children:n})}),(0,i.jsx)("div",{className:"ContentArea",children:(0,i.jsx)("div",{className:"card",children:(0,i.jsxs)("div",{className:"card-header",children:[a&&(0,i.jsxs)("p",{className:"alert alert-2 py-1 px-2 d-inline-block",children:[(0,i.jsx)("b",{children:"Note :"})," ",(0,i.jsx)("strong",{children:a})," "]}),s&&(0,i.jsxs)("p",{className:"alert alert-2 py-1 px-2 d-inline-block",children:[(0,i.jsx)("b",{children:"Note :"})," ",(0,i.jsx)("strong",{children:s})," "]})]})})})]})}},26798:(e,a,s)=>{s.r(a),s.d(a,{default:()=>F});var i=s(65043),n=s(73575),l=s(72777),o=s(95870),t=s(27149),r=s(37070),d=s(91036),u=s(26925),c=s(83141),m=s(73216),p=s(70579);const h=function(e){let{apiAepsType:a,walletShowHeader:s}=e;console.log("apiAepsType",a);const[h,v]=(0,i.useState)(!1),[b,g]=(0,i.useState)(null),[x,A]=(0,i.useState)(!1),[y,j]=(0,i.useState)(null),[f,N]=(0,i.useState)(!1),[S,w]=(0,i.useState)(null),[C,k]=(0,i.useState)(!1),P=(0,m.Zp)(),[E,D]=(0,i.useState)(!0),[O,B]=(0,i.useState)(!1),[_,F]=(0,i.useState)(!0),[I,T]=(0,i.useState)({latitude:null,longitude:null}),[q,R]=(0,i.useState)(),[M,H]=(0,i.useState)({mobilenumber:"",adhaarnumber:"",amount:""}),[V,z]=(0,i.useState)({accessmodetype:"site",latitude:"",longitude:"",mobilenumber:"",adhaarnumber:"",nationalbankidentification:"",requestremarks:"Aeps Balance Enquiry",user_id:"",is_iris:"NO",data:"",amount:""}),W=e=>{const a="string"===typeof e?parseInt(e):e;return isNaN(a)?{isValid:!1,error:"Please enter a valid number"}:a<100?{isValid:!1,error:"Minimum amount is \u20b9100"}:a>1e4?{isValid:!1,error:"Maximum amount is \u20b910,000"}:a%50!==0?{isValid:!1,error:"Amount must be a multiple of \u20b950"}:{isValid:!0,error:""}},K=(e,a)=>{const s={...V},i=e.target.value,n=e.target.name;let l={...M};if("mobilenumber"===n&&(10!==i.length?l.mobilenumber="Mobile number must be 10 digits long":l.mobilenumber=""),"adhaarnumber"===n&&(12!==i.length?l.adhaarnumber="Aadhaar number must be 12 digits long":l.adhaarnumber=""),"amount"===n){const e=W(i);B(e.isValid),e.isValid?(l.amount="",j(null)):l.amount=e.error}s[n]=i,"mobilenumber"==a&&11==i.length||"adhaarnumber"==a&&13==i.length||(z(s),H(l))},[L,U]=(0,i.useState)(),X=async()=>{try{const e=new r.N("http://127.0.0.1:11100/rd/capture",G);console.log(e)}catch(e){console.log(e)}},G=e=>{console.log(e);const a=(null===e||void 0===e?void 0:e.pid_data)+"<bookz/>";var s=(new DOMParser).parseFromString(a,"application/xml");"0"==(null===e||void 0===e?void 0:e.errCode)&&((0,u.W)("Finger Capture Successfully."),D(!1)),"700"==(null===e||void 0===e?void 0:e.errCode)&&Q("Finger Capture Not Successfully."),1==(null===e||void 0===e?void 0:e.httpSuccess)&&R(window.btoa((new XMLSerializer).serializeToString(s)))},Q=e=>{d.oR.error("".concat(e),{position:"top-center",autoClose:4e3})};return(0,i.useEffect)((()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(e){T({latitude:e.coords.latitude,longitude:e.coords.longitude})})):alert("Geolocation is not available in your browser.")}),[]),(0,i.useEffect)((()=>{(async()=>{try{var e,a;const s=await(0,n.zVQ)();console.log(null===s||void 0===s?void 0:s.data);const i=null===s||void 0===s||null===(e=s.data)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.map((e=>({...e,label:e.bankName})));g(i)}catch(s){}})()}),[]),(0,p.jsxs)(p.Fragment,{children:[h&&(0,p.jsx)(l.A,{}),(0,p.jsxs)("div",{className:"card",children:[(0,p.jsx)("div",{className:"card-header",children:(0,p.jsx)("span",{children:"Aeps Cash Deposit"})}),(0,p.jsx)("div",{className:"card-body",children:(0,p.jsx)("form",{action:"#",method:"post",name:"frmCallAction",id:"frmCallAction",children:(0,p.jsxs)("div",{className:"form-row",children:[(0,p.jsxs)("div",{className:"col-lg-6",children:[(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsxs)("label",{htmlFor:"txtNumId",children:["Customer Mobile Number ",(0,p.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,p.jsx)("input",{type:"number",name:"mobilenumber",id:"account_no",className:"form-control ".concat(V.mobilenumber&&(M.mobilenumber?"is-invalid":"")),placeholder:"Enter Customer Mobile",value:V.mobilenumber,onChange:e=>K(e,"mobilenumber")}),M.mobilenumber&&(0,p.jsx)("div",{className:"invalid-feedback",children:M.mobilenumber})]}),(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsxs)("label",{htmlFor:"txtNumId",children:["Customer Aadhaar Number ",(0,p.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,p.jsx)("input",{type:"number",name:"adhaarnumber",id:"account_no",className:"form-control ".concat(V.adhaarnumber&&(M.adhaarnumber?"is-invalid":"")),placeholder:"Enter Customer Aadhaar",value:V.adhaarnumber,onChange:e=>K(e,"adhaarnumber")}),M.adhaarnumber&&(0,p.jsx)("div",{className:"invalid-feedback",children:M.adhaarnumber})]}),(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsxs)("label",{htmlFor:"ddldb",children:["Select bank ",(0,p.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,p.jsx)(o.Ay,{value:L,name:"showBanak",options:b,className:"games-dropdown-2 customsection",classNamePrefix:"select",onChange:e=>{console.log(e);b.find((a=>(null===a||void 0===a?void 0:a.bankID)==e.bankID));U(e)}})]}),(0,p.jsxs)("div",{className:"form-group grid-sed",children:[(0,p.jsxs)("label",{htmlFor:"txtUserId",children:["Scan Finger Print ",(0,p.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,p.jsx)("button",{type:"button",className:"btn btn-success",disabled:!((null!==y||O)&&V.adhaarnumber&&V.mobilenumber&&L),onClick:X,children:"Capture Finger"})]})]}),(0,p.jsxs)("div",{className:"col-lg-6",children:[(0,p.jsx)("label",{htmlFor:"ddldb",children:"Amount"}),(0,p.jsx)("div",{className:"form-group Amount-group",children:[500,1e3,1500,2e3,2500,3e3,5e3,1e4].map(((e,a)=>(0,p.jsx)("div",{className:"Amount-set ".concat(y===a?"selected":"first-color"),onClick:()=>((e,a)=>{const s=W(a);if(s.isValid){const s={...V,amount:a};z(s),j(e),B(!0),H((e=>({...e,amount:""})))}else H((e=>({...e,amount:s.error}))),B(!1),D(!0)})(a,e),children:(0,p.jsxs)("p",{style:{margin:"0px"},children:[(0,p.jsx)(t.YHz,{})," ",(0,p.jsx)("span",{children:e})]})},a)))}),(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsxs)("label",{htmlFor:"txtNumId",children:["OR Enter Amount ",(0,p.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,p.jsx)("input",{className:"form-control ".concat(V.amount&&(M.amount?"is-invalid":"is-valid")),id:"txtNumId",name:"amount",type:"number",placeholder:"Enter Amount multiple of Fifty",value:null===V||void 0===V?void 0:V.amount,onChange:K}),M.amount&&(0,p.jsx)("div",{className:"invalid-feedback",children:M.amount})]})]}),(0,p.jsxs)("div",{className:"form-group col-md-12 text-align-center",children:[(0,p.jsx)("label",{children:"\xa0"}),(0,p.jsx)("button",{type:"button",className:"btn btn-primary",disabled:!(!E&&V.mobilenumber&&V.adhaarnumber&&L&&O&&!C),onClick:async()=>{k(!0);const e={...V,nationalbankidentification:null===L||void 0===L?void 0:L.iinno,latitude:I.latitude,longitude:I.longitude,data:q,user_id:window.localStorage.getItem("userIdToken"),bank:a};console.log(e);try{var i,l;const a=await(0,n.biX)(e);var o,t;if(console.log(a),1==(null===a||void 0===a||null===(i=a.data)||void 0===i?void 0:i.error))Q((null===a||void 0===a||null===(o=a.data)||void 0===o?void 0:o.message)||(null===a||void 0===a?void 0:a.message)||"Transction failed");if(0==(null===a||void 0===a||null===(l=a.data)||void 0===l?void 0:l.error))(0,u.W)(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message),w(null===a||void 0===a?void 0:a.data),N(!0),z({accessmodetype:"site",latitude:I.latitude,longitude:I.longitude,mobilenumber:"",adhaarnumber:"",nationalbankidentification:"",requestremarks:"Aeps Balance Enquiry",user_id:"",is_iris:"NO",data:"",amount:""}),s&&s(),U(null),j(null),R(null),D(!0),F(!0)}catch(r){console.error(r),Q("An error occurred while processing your request.")}finally{k(!1)}},children:C?(0,p.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):"Submit"})]})]})})})]}),(0,p.jsx)(c.A,{show:f,onHide:()=>(P("/aeps-OnBoarded"),void N(!1)),adharPay:"Cash Deposite",dataModal:S})]})};s(60556);var v=s(79422),b=s(5328),g=(s(76796),s(14016));const x=function(e){let{balanceEnquiryPermission:a,depositPermission:s,isInstantpayOnBoarded:n,apiAepsType:l,walletShowHeader:o}=e;const[t,r]=(0,i.useState)(!0),[d,u]=(0,i.useState)("Cash Deposit");return(0,i.useEffect)((()=>{u(n?"Balance Enquiry":"Cash Deposit")}),[n]),(0,p.jsx)(p.Fragment,{children:s?(0,p.jsx)("div",{className:"ContentArea",children:(0,p.jsxs)("div",{className:"card",children:[(0,p.jsx)("div",{className:"card-header",children:(0,p.jsx)("span",{children:"AEPS Services"})}),(0,p.jsx)("div",{className:"row p-4",children:(0,p.jsx)("div",{className:"col-lg-12",children:(0,p.jsx)("div",{className:"aeps-tab-section",children:(0,p.jsx)(v.A,{activeKey:d,id:"aeps-services-tabs",className:"mb-3",onSelect:e=>{u(e),r(!1)},children:!n&&s&&(0,p.jsx)(b.A,{eventKey:"Cash Deposit",title:"Cash Deposit",children:(0,p.jsx)(h,{active:t,apiAepsType:l,walletShowHeader:o})})})})})})]})}):(0,p.jsx)(g.A,{message:"Services is Disable by Admin",type:"warning",showIcon:!0})})};var A=s(69347),y=s(70929),j=s(66259),f=s(77583),N=s(65251),S=s(80878),w=s(40794),C=s(17392),k=s(74802),P=s(53193),E=s(51292),D=s(57972),O=s(74605),B=s(14256),_=s(29716);const F=function(e){var a,s;let{profiledata:o,walletShowHeader:t}=e;const[r,d]=(0,i.useState)(!1),[u,c]=(0,i.useState)("Aeps2"),m="Aeps2"===u?"aeps2":"Aeps4"===u?"aeps4":"",[h,v]=(0,i.useState)(!1),[b,g]=(0,i.useState)(!1),[F,I]=(0,i.useState)(null),[T,q]=(0,i.useState)({}),[R,M]=(0,i.useState)({Aeps2:{isPlanPurchased:!1,isOnboarded:!1,hasBankPermission:!1,isAuthRegistered:!1,hasDailyAuth:!1,permissions:{deposite:!1,balanceEnquiry:!1}},Aeps4:{isPlanPurchased:!1,isOnboarded:!1,hasBankPermission:!1,isAuthRegistered:!1,hasDailyAuth:!1,permissions:{deposite:!1,balanceEnquiry:!1}}}),[H,V]=(0,i.useState)({show:!1,message:"",type:"error"}),z=()=>{V({...H,show:!1})},W=function(e){V({show:!0,message:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error"})},K=(e,a)=>!(null===e||void 0===e||!e.bankActiveStatus)&&("Aeps2"===a?e.bankActiveStatus.Bank2||e.bankActiveStatus.Bank3:e.bankActiveStatus.Bank4),L=async()=>{d(!0);try{var e,a,s;const d=await(0,n.Ug7)(),j=await(0,n.sCV)();if("200"==(null===d||void 0===d||null===(e=d.data)||void 0===e?void 0:e.statusCode)){var i,l,o,t,r,u,m,p,h,b,x,A;const e=d.data.data;I(e.merchantCode);const a={Aeps2:{isPlanPurchased:e.is_active&&e.is_buy,isOnboarded:(null===(i=e.Aeps2)||void 0===i?void 0:i.is_onboarding)||!1,hasBankPermission:K(e.Aeps2,"Aeps2"),isAuthRegistered:(null===(l=e.Aeps2)||void 0===l?void 0:l.authRegistered)||!1,hasDailyAuth:(null===(o=e.Aeps2)||void 0===o?void 0:o.dailyAuth)||!1,permissions:{deposite:null===j||void 0===j||null===(t=j.data)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.some((e=>"aeps2"===e.bank&&"CD"===e.slug&&e.status)),balanceEnquiry:e.is_active&&e.is_buy&&(null===j||void 0===j||null===(u=j.data)||void 0===u||null===(m=u.data)||void 0===m?void 0:m.some((e=>"aeps2"===e.bank&&"BE"===e.slug&&e.status)))}},Aeps4:{isPlanPurchased:e.is_active&&e.is_buy,isOnboarded:(null===(p=e.Aeps4)||void 0===p?void 0:p.is_onboarding)||!1,hasBankPermission:K(e.Aeps4,"Aeps4"),isAuthRegistered:(null===(h=e.Aeps4)||void 0===h?void 0:h.authRegistered)||!1,hasDailyAuth:(null===(b=e.Aeps4)||void 0===b?void 0:b.dailyAuth)||!1,permissions:{balanceEnquiry:e.is_active&&e.is_buy&&(null===j||void 0===j||null===(x=j.data)||void 0===x||null===(A=x.data)||void 0===A?void 0:A.some((e=>"aeps4"===e.bank&&"BE"===e.slug&&e.status)))}}};M(a),!a.Aeps2.isOnboarded&&a.Aeps4.isOnboarded&&c("Aeps4")}else if("00127"===(null===d||void 0===d||null===(a=d.data)||void 0===a?void 0:a.statusCode))g(!0);else if("007"===(null===d||void 0===d||null===(s=d.data)||void 0===s?void 0:s.statusCode))v(!0);else{var y;W((null===d||void 0===d||null===(y=d.data)||void 0===y?void 0:y.message)||(null===d||void 0===d?void 0:d.message))}}catch(H){W(H.message||"Failed to fetch permissions")}finally{d(!1)}},U=async()=>{d(!0);try{var e;const i={user_id:localStorage.getItem("userIdToken"),bank:m},l=await(0,n.hWt)(i);var a,s;if(200!=(null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.statusCode))throw new Error((null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.message)||"Onboarding failed");window.open(l.data.data.url,"_blank"),W((null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.message)||(null===l||void 0===l?void 0:l.message)||"Onboarding successful","success"),await L()}catch(H){W(H.message)}finally{d(!1)}};(0,i.useEffect)((()=>{L(),X()}),[]);const X=async()=>{try{var e,a,s,i,l,o;let t=await(0,n.MhF)();q(null===t||void 0===t?void 0:t.data);let r="aeps2"===(null===t||void 0===t||null===(e=t.data)||void 0===e||null===(a=e.data)||void 0===a||null===(s=a.defaultAepsApiObj)||void 0===s?void 0:s.slug)||null!==t&&void 0!==t&&null!==(i=t.data)&&void 0!==i&&null!==(l=i.data)&&void 0!==l&&null!==(o=l.defaultAepsApiObj)&&void 0!==o&&o.slug?"Aeps2":"";console.log(r,"ativvetype"),c(r)}catch(H){}};return(0,p.jsxs)("div",{className:"cash-deposit-page",children:[r&&(0,p.jsx)(l.A,{}),(0,p.jsx)("div",{className:"aeps-type-selector",style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",marginTop:"2%"},children:(0,p.jsxs)(P.A,{component:"fieldset",style:{width:"100%",maxWidth:"400px"},children:[(0,p.jsx)(E.A,{children:"Select AEPS Type"}),(null===T||void 0===T||null===(a=T.data)||void 0===a||null===(s=a.aepsApi)||void 0===s?void 0:s.some((e=>"aeps2"===(null===e||void 0===e?void 0:e.slug))))&&(0,p.jsx)(D.A,{value:u,onChange:e=>{c(e.target.value)},style:{display:"flex",justifyContent:"space-between"},children:(0,p.jsx)(O.A,{value:"Aeps2",control:(0,p.jsx)(B.A,{}),label:(0,p.jsxs)(p.Fragment,{children:["AEPS 2",R.Aeps2.isOnboarded&&(0,p.jsx)("span",{style:{color:"green",marginLeft:"8px"},children:"\u2714 (Onboarded)"})]})})})]})}),(()=>{const e=R[u];return""===u?(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(_.A,{message:"Services is Disable by Admin",type:"warning",showIcon:!0})}):e.isPlanPurchased?e.isOnboarded?e.hasBankPermission?e.isAuthRegistered?e.hasDailyAuth?(0,p.jsx)(x,{isInstantpayOnBoarded:"Aeps4"===u,apiAepsType:m,depositPermission:e.permissions.deposite,balanceEnquiryPermission:e.permissions.balanceEnquiry,walletShowHeader:t}):(0,p.jsx)(N.A,{onDailyAuthComplete:()=>L(),apiAepsType:m}):(0,p.jsx)(f.A,{onDailyAuthComplete:()=>L(),apiAepsType:m}):(0,p.jsx)(j.A,{profiledata:o,onDailyAuthComplete:()=>L(),apiAepsType:m,merchnadecode:F}):(0,p.jsx)(y.A,{onBoardingApiCall:U,apiAepsType:m,permissionAeps:L,setbankverify:v,isInstantpayOnBoarded:"Aeps4"===u,merchnadecode:F}):(0,p.jsx)(A.A,{})})(),(0,p.jsx)(S.A,{show:h,onHide:()=>v(!1),permissionAeps:L}),b&&(0,p.jsxs)("div",{style:{textAlign:"center",padding:"20px",backgroundColor:"#ffcccc",borderRadius:"5px",margin:"20px auto",maxWidth:"400px"},children:[(0,p.jsx)("h2",{style:{color:"#cc0000"},children:"Bank Server is Down"}),(0,p.jsx)("p",{children:"We apologize for the inconvenience. Please try again later."})]}),(0,p.jsx)(w.A,{open:H.show,autoHideDuration:6e3,onClose:z,message:H.message,action:(0,p.jsx)(C.A,{size:"small",onClick:z,children:(0,p.jsx)(k.A,{})})})]})}}}]);
//# sourceMappingURL=7254.b523fece.chunk.js.map