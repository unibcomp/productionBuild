"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[2791],{2791:(i,e,n)=>{n.r(e),n.d(e,{default:()=>_});var l=n(65043),o=n(26240),t=n(73036),s=n(94516),r=n(17392),d=n(68903),a=n(12110),c=n(67807),v=n(94496),u=n(11906),x=n(39336),h=n(90035),p=n(26600),m=n(35316),A=n(29347),j=n(68641),b=n(85502),f=n(19778),g=n(73216),y=n(73575),w=n(72777),k=n(54358),S=(n(91036),n(46698),n(70579));const _=()=>{var i,e,n,_,z,D,I,R,P;const{orderId:T,trackingId:N}=(0,g.g)(),F=(0,o.A)(),O=(0,t.A)(F.breakpoints.down("sm")),[B,E]=(0,l.useState)(),[H,K]=(0,l.useState)(!0),M=(0,g.Zp)(),[Q,U]=(0,l.useState)(!1),[Y,q]=(0,l.useState)(null),G=["Ready To Ship","Manifested"];(0,l.useEffect)((()=>{(async()=>{if(T){K(!0);try{var i;const o=await(0,y.IAQ)({order_id:T});var e,n,l;!1===(null===o||void 0===o||null===(i=o.data)||void 0===i?void 0:i.error)?(E(null===o||void 0===o||null===(e=o.data)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.orderData),setTimeout((()=>{window.scrollTo({top:0,behavior:"smooth"})}),100)):console.warn("Error fetching order data:",null===o||void 0===o||null===(l=o.data)||void 0===l?void 0:l.message)}catch(o){console.error("Failed to fetch order:",o)}finally{K(!1)}}else M("/order-details")})(),N&&(async()=>{try{var i,e;let n=await(0,y.qSY)(N);q((null===n||void 0===n||null===(i=n.data)||void 0===i||null===(e=i.data)||void 0===e?void 0:e.tracking_data)||null)}catch(n){}})()}),[Q]);const[L,V]=(0,l.useState)(!1),X=()=>{V(!1)};return(0,S.jsxs)(S.Fragment,{children:[H&&(0,S.jsx)(w.A,{}),(0,S.jsxs)(s.A,{p:{xs:2,sm:3,md:4},bgcolor:"#f9f9f9",children:[(0,S.jsx)(r.A,{onClick:()=>{M("/order-details")},sx:{mb:2},children:(0,S.jsx)(j.A,{})}),(0,S.jsxs)(d.Ay,{container:!0,spacing:3,children:[(0,S.jsxs)(d.Ay,{item:!0,xs:12,md:7,children:[N&&(0,S.jsx)(a.A,{sx:{p:3,mb:4,borderRadius:3},children:(0,S.jsxs)(d.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,S.jsx)(d.Ay,{item:!0,xs:12,md:9,children:(0,S.jsxs)(c.A,{spacing:1,children:[(0,S.jsxs)(v.A,{variant:"h6",fontWeight:600,color:"var(--bs-nav)",fontSize:18,children:["Tracking No: ",N]}),(0,S.jsx)(s.A,{sx:{overflowX:"auto",pb:1}})]})}),(0,S.jsx)(d.Ay,{item:!0,xs:12,md:3,textAlign:O?"left":"right"})]})}),(0,S.jsx)(d.Ay,{container:!0,item:!0,xs:12,sm:12,md:12,mb:2,justifyContent:"flex-end",children:(0,S.jsx)(c.A,{spacing:2,children:G.includes(null===B||void 0===B?void 0:B.orderStatus)&&(0,S.jsx)(u.A,{variant:"outlined",fullWidth:!0,color:"error",startIcon:(0,S.jsx)(b.A,{}),disabled:!G.includes(null===B||void 0===B?void 0:B.orderStatus),onClick:()=>{V(!0)},children:"Cancel Shipment"})})}),(0,S.jsxs)(a.A,{sx:{p:3,mb:4,borderRadius:3,boxShadow:1},children:[(0,S.jsx)(v.A,{variant:"subtitle1",fontWeight:600,color:"var(--bs-nav)",fontSize:18,children:"Order Details"}),(0,S.jsx)(x.A,{}),[["Order ID",null===B||void 0===B?void 0:B.order_id],["Order Status",null===B||void 0===B?void 0:B.orderStatus],["LR Number",null===B||void 0===B?void 0:B.lrnum],["Payment",null===B||void 0===B?void 0:B.mode],["Amount",null!==B&&void 0!==B&&B.amount?"\u20b9".concat(null===B||void 0===B?void 0:B.amount):null],["Plateform Charge",null!==B&&void 0!==B&&B.plateformCharge?"\u20b9".concat(null===B||void 0===B?void 0:B.plateformCharge):null],["Final Amount",null!==B&&void 0!==B&&B.finalAmount?"\u20b9".concat(null===B||void 0===B?void 0:B.finalAmount):null]].filter((i=>{let[e,n]=i;return n})).map(((i,e)=>{let[n,l]=i;return(0,S.jsx)(W,{label:n,value:l},e)}))]}),(0,S.jsxs)(a.A,{sx:{p:3,mb:4,borderRadius:3},children:[(0,S.jsx)(v.A,{variant:"subtitle1",fontWeight:600,color:"var(--bs-nav)",fontSize:18,children:"Customer Details"}),(0,S.jsx)(x.A,{sx:{mb:2}}),[["Name",null===B||void 0===B||null===(i=B.shipping_address)||void 0===i?void 0:i.shipping_customer_name],["Phone",null===B||void 0===B||null===(e=B.shipping_address)||void 0===e?void 0:e.shipping_phone],["Address",null===B||void 0===B||null===(n=B.shipping_address)||void 0===n?void 0:n.shipping_address],["Pincode",null===B||void 0===B||null===(_=B.shipping_address)||void 0===_?void 0:_.shipping_state],["City",null===B||void 0===B||null===(z=B.shipping_address)||void 0===z?void 0:z.shipping_city],["State",null===B||void 0===B||null===(D=B.shipping_address)||void 0===D?void 0:D.shipping_customer_name]].filter((i=>{let[e,n]=i;return n})).map(((i,e)=>{let[n,l]=i;return(0,S.jsx)(W,{label:n,value:l},e)}))]}),(i=>{const e=null===Y||void 0===Y||null===(i=Y.shipment_track)||void 0===i?void 0:i[0];return e?(0,S.jsxs)(a.A,{sx:{p:3,mb:4,borderRadius:3},children:[(0,S.jsx)(v.A,{variant:"subtitle1",fontWeight:600,color:"var(--bs-nav)",fontSize:18,children:"Shipment Details"}),(0,S.jsx)(x.A,{sx:{mb:2}}),[["Courier",e.courier_name],["AWB Number",e.awb_code],["Pickup Date",e.pickup_date],["Estimated Delivery",e.edd]].filter((i=>{let[e,n]=i;return n})).map(((i,e)=>{let[n,l]=i;return(0,S.jsx)(W,{label:n,value:l},e)}))]}):null})(),(0,S.jsxs)(a.A,{sx:{p:3,mb:4,borderRadius:3},children:[(0,S.jsx)(v.A,{variant:"subtitle1",fontWeight:600,color:"var(--bs-nav)",fontSize:18,children:"Package Details"}),(0,S.jsx)(x.A,{sx:{mb:2}}),(()=>{const i=(null===B||void 0===B?void 0:B.weight)||0,e=(null===B||void 0===B?void 0:B.length)||0,n=(null===B||void 0===B?void 0:B.width)||0,l=(null===B||void 0===B?void 0:B.height)||0,o=+(e*n*l/5e3).toFixed(2),t=Math.max(i,o);return[["Dead Weight in (kg)",i],["Dimensions in (cm)","".concat(e," * ").concat(n," * ").concat(l)],["Volumetric Weight in (kg)",o],["Applied Weight in (kg)",t]].filter((i=>{let[e,n]=i;return null!==n&&void 0!==n})).map(((i,e)=>{let[n,l]=i;return(0,S.jsx)(W,{label:n,value:l},e)}))})()]}),(0,S.jsxs)(a.A,{sx:{p:3,mb:4,borderRadius:3},children:[(0,S.jsx)(v.A,{variant:"subtitle1",fontWeight:600,color:"var(--bs-nav)",fontSize:18,children:"Product Details"}),(0,S.jsx)(x.A,{sx:{mb:2}}),(0,S.jsxs)(s.A,{display:"flex",justifyContent:"space-between",fontWeight:600,px:2,py:1,children:[(0,S.jsx)(s.A,{sx:C,width:"40%",children:"Name"}),(0,S.jsx)(s.A,{sx:C,width:"15%",children:"SKU"}),(0,S.jsx)(s.A,{sx:C,width:"18%",children:"Qty"}),(0,S.jsx)(s.A,{sx:C,width:"17%",children:"Unit Price"})]}),(0,S.jsx)(x.A,{}),null===B||void 0===B||null===(I=B.order_items)||void 0===I?void 0:I.map((i=>(0,S.jsxs)(s.A,{display:"flex",justifyContent:"space-between",alignItems:"center",px:2,py:1,children:[(0,S.jsxs)(s.A,{width:"40%",sx:C,children:[i.name," "]}),(0,S.jsx)(s.A,{width:"15%",sx:C,children:i.sku}),(0,S.jsx)(s.A,{width:"18%",sx:C,children:i.units}),(0,S.jsxs)(s.A,{width:"17%",sx:C,children:["\u20b9",i.selling_price]})]},i._id))),(0,S.jsx)(x.A,{sx:{mt:2}})]})]}),(null===Y||void 0===Y||null===(R=Y.shipment_track_activities)||void 0===R?void 0:R.length)>0&&(0,S.jsx)(d.Ay,{item:!0,xs:12,md:5,children:(0,S.jsxs)(a.A,{sx:{p:3,borderRadius:3},children:[(0,S.jsx)(v.A,{variant:"subtitle1",fontWeight:600,color:"var(--bs-nav)",fontSize:18,children:"Tracking History"}),(0,S.jsx)(x.A,{sx:{mb:2}}),(0,S.jsx)(c.A,{spacing:3,pl:1,maxHeight:"500px",overflow:"auto",children:null===Y||void 0===Y||null===(P=Y.shipment_track_activities)||void 0===P?void 0:P.map(((i,e)=>(0,S.jsxs)(c.A,{direction:"row",spacing:2,alignItems:"flex-start",children:[(0,S.jsx)(f.A,{color:"success"}),(0,S.jsxs)(s.A,{children:[(0,S.jsx)(v.A,{sx:{fontSize:"15px",color:"var(--bs-nav)",fontWeight:600},children:null===i||void 0===i?void 0:i.activity}),(0,S.jsx)(v.A,{variant:"body2",sx:{color:"var(--bs-nav)"},children:null===i||void 0===i?void 0:i.location}),(0,S.jsx)(v.A,{variant:"caption",color:"text.secondary",children:null===i||void 0===i?void 0:i.date})]})]},e)))})]})})]})]}),(0,S.jsxs)(h.A,{open:L,onClose:X,children:[(0,S.jsx)(p.A,{sx:{fontWeight:600,color:"var(--bs-nav)"},children:"Confirm Cancellation"}),(0,S.jsx)(m.A,{children:(0,S.jsx)(v.A,{variant:"body2",sx:{fontSize:14},children:"Are you sure you want to cancel this shipment? This action cannot be undone."})}),(0,S.jsxs)(A.A,{sx:{px:3,pb:2},children:[(0,S.jsx)(u.A,{onClick:X,color:"inherit",children:"No, Keep Order"}),(0,S.jsx)(u.A,{onClick:async()=>{K(!0);try{var i,e,n;let l=await(0,y.acT)({waybill:N});!1===(null===l||void 0===l||null===(i=l.data)||void 0===i?void 0:i.error)&&(V(!1),U((i=>!i))),(0,k.A)(null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.error,null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message)}catch(l){}finally{K(!1)}},color:"error",variant:"contained",sx:{backgroundColor:"red",color:"white"},children:"Yes, Cancel It"})]})]})]})},C={fontSize:"14px",color:"var(--bs-nav)",opacity:.8,wordBreak:"break-word",mt:.5},W=i=>{let{label:e,value:n}=i;return(0,S.jsxs)(s.A,{display:"flex",mb:1,columnGap:10,children:[(0,S.jsxs)(v.A,{flex:3,sx:{fontSize:"14px",color:"var(--bs-nav)",minWidth:"130px",fontWeight:600},children:[e,":"]}),(0,S.jsx)(v.A,{flex:5,sx:{fontSize:"14px",color:"var(--bs-nav)",opacity:.8,wordBreak:"break-word"},children:n})]})}}}]);
//# sourceMappingURL=2791.d1570559.chunk.js.map