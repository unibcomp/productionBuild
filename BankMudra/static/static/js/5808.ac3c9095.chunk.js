"use strict";(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[5808],{75808:(e,l,a)=>{a.r(l),a.d(l,{default:()=>C});var s=a(65043),t=a(72777),n=a(22019),d=a(94434),i=a(73575),o=a(27108),r=a(94516),c=a(67784),u=a(53193),p=a(18356),m=a(72221),v=a(91449),h=a(94496),x=a(59135),b=a(14282),j=a(35475),N=a(85369),g=a(25284),_=a(64196),y=a(11238),f=a(39574),T=a(70579);const C=()=>{const e=(new Date).toISOString().split("T")[0],{startDate:l,endDate:a}=(0,f.x)(),[C,S]=(0,s.useState)(!1),[w,A]=(0,s.useState)(null),[k,I]=(0,s.useState)(1),[B,R]=(0,s.useState)([]),[D,M]=(0,s.useState)(null),[E,O]=(0,s.useState)(0),[F,z]=(0,s.useState)(!1),[P,L]=(0,s.useState)([]),[U,W]=(0,s.useState)(10),[H,q]=(0,s.useState)({customer_mobile:"",response:"",start_date:l,end_date:a,txn_id:"",batch_id:"",bank:"",addhar_no:""}),V=e=>{const{name:l,value:a}=e.target;q((e=>({...e,[l]:a})))},G=(e,l)=>{q((a=>({...a,[l]:e})))};(0,s.useEffect)((()=>{(async()=>{try{var e;let a=await(0,i.EpH)();var l;!1===(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.error)?R((null===(l=a.data)||void 0===l?void 0:l.data)||[]):R([])}catch(a){console.error(a),R([])}})()}),[]);(0,s.useEffect)((()=>{(async()=>{S(!0);try{var e;const o=await(0,i.pTr)({...H,retailer_id:(null===D||void 0===D?void 0:D._id)||"",page:k,limit:U});var l,a,s,t,d;!1===(null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.error)?(L((null===(l=o.data)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.dmtTxns)||[]),O((null===(s=o.data)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.totalTxns)||0)):(L([]),O(0),n.Ay.error((null===(d=o.data)||void 0===d?void 0:d.message)||"Something went wrong"))}catch(o){}finally{S(!1)}})()}),[F,k,U]);const J=Math.ceil(E/U);return(0,T.jsxs)(T.Fragment,{children:[C&&(0,T.jsx)(t.A,{}),(0,T.jsx)("div",{className:"card",children:(0,T.jsx)("div",{className:"card-body",children:(0,T.jsx)("form",{children:(0,T.jsxs)("div",{className:"form-row",style:{alignItems:"end"},children:[(0,T.jsxs)("div",{className:"form-group col-md-4",children:[(0,T.jsx)("label",{children:"Start Date"}),(0,T.jsx)("input",{type:"date",name:"start_date",className:"form-control",max:e,value:H.start_date,onChange:V})]}),(0,T.jsxs)("div",{className:"form-group col-md-4",children:[(0,T.jsx)("label",{children:"End Date"}),(0,T.jsx)("input",{type:"date",name:"end_date",className:"form-control",max:e,value:H.end_date,onChange:V})]}),(0,T.jsxs)("div",{className:"form-group col-md-4",children:[(0,T.jsx)("label",{children:"Customer Mobile"}),(0,T.jsx)("input",{type:"number",name:"customer_mobile",className:"form-control",placeholder:"Enter Customer Mobile",value:H.customer_mobile,onChange:V})]}),(0,T.jsxs)("div",{className:"form-group col-md-4",children:[(0,T.jsx)("label",{children:"Txn Id"}),(0,T.jsx)("input",{type:"text",name:"txn_id",className:"form-control",placeholder:"Enter Txn Id",value:H.txn_id,onChange:V})]}),(0,T.jsxs)("div",{className:"form-group col-md-4",children:[(0,T.jsx)("label",{children:"Batch Id"}),(0,T.jsx)("input",{type:"text",name:"batch_id",className:"form-control",placeholder:"Enter Batch Id",value:H.batch_id,onChange:V})]}),(0,T.jsxs)("div",{className:"form-group col-md-4",children:[(0,T.jsx)("label",{children:"Bank"}),(0,T.jsx)(d.A,{style:{width:"100%"},value:H.bank,onChange:e=>G(e,"bank"),options:[{value:"",label:"All"},{value:"bank1",label:"Bank 1"},{value:"bank2",label:"Bank 2"}]})]}),(0,T.jsxs)("div",{className:"form-group col-md-4",children:[(0,T.jsx)("label",{children:"Status"}),(0,T.jsx)(d.A,{style:{width:"100%"},value:H.response,onChange:e=>G(e,"response"),options:[{value:"",label:"All"},{value:"1",label:"Pending"},{value:"2",label:"Success"},{value:"3",label:"Failed"},{value:"4",label:"Refunded"}]})]}),(0,T.jsxs)("div",{className:"form-group col-md-4",children:[(0,T.jsx)("label",{children:"Select Retailer"}),(0,T.jsx)(o.A,{options:B,getOptionLabel:e=>e.name||"",value:null!==D&&void 0!==D?D:null,size:"small",onChange:(e,l)=>M(l),renderOption:(e,l)=>(0,s.createElement)("li",{...e,key:l.retailer_id},(0,T.jsx)(r.A,{sx:{fontSize:"13px",color:"var(--bs-nav)"},children:l.name})),renderInput:e=>(0,T.jsx)(c.A,{...e,label:"Select Retailer",InputLabelProps:{sx:{"&.MuiInputLabel-root:not(.MuiInputLabel-shrink)":{top:"-3px"}}},sx:{"& label.Mui-focused":{color:"var(--bs-nav)"},"& .MuiInputBase-root":{backgroundColor:"#fff"},"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"var(--bs-primary1)"},"&.Mui-focused fieldset":{borderColor:"var(--bs-primary1)"}}}})})]}),(0,T.jsxs)("div",{className:"form-group col-md-12",children:[(0,T.jsx)("button",{type:"button",className:"btn btn-primary mr-3",onClick:()=>{I(1),z((e=>!e))},children:"Search"}),(0,T.jsx)("button",{type:"button",className:"btn btn-light",onClick:()=>{q({customer_mobile:"",response:"",start_date:"",end_date:"",txn_id:"",batch_id:"",bank:"",addhar_no:""}),M(null),z((e=>!e)),W(10),I(1)},children:"Reset"})]})]})})})}),(0,T.jsx)("div",{className:"card mt-4",style:{overflow:"auto"},children:(0,T.jsxs)("div",{className:"card-body",children:[(0,T.jsxs)("div",{id:"myTable_wrapper",className:"dataTables_wrapper no-footer",children:[(0,T.jsx)("div",{className:"d-flex  justify-content-end align-items-center",children:(0,T.jsx)("div",{className:"dataTables_length mb-3",id:"myTable_length",children:(0,T.jsx)(b.A,{className:"btn btn-success cusxel",onClick:async()=>{try{var e,l,a;S(!0);const o=await(0,i.ELn)({...H,retailer_id:(null===D||void 0===D?void 0:D._id)||""});if((null===o||void 0===o||null===(e=o.data)||void 0===e||null===(l=e.data)||void 0===l||null===(a=l.dmtTxns)||void 0===a?void 0:a.length)>0){var s,t,d;const e=null===o||void 0===o||null===(s=o.data)||void 0===s||null===(t=s.data)||void 0===t||null===(d=t.dmtTxns)||void 0===d?void 0:d.map(((e,l)=>({"Sr. No":l+1,"Date / Time":(null===e||void 0===e?void 0:e.createdAt)||"","Transaction ID":(null===e||void 0===e?void 0:e.txn_id)||"","Batch ID":(null===e||void 0===e?void 0:e.batchId)||"","Transaction Mode":(null===e||void 0===e?void 0:e.txn_mode)||"",Amount:(null===e||void 0===e?void 0:e.amount)||"",Charges:(null===e||void 0===e?void 0:e.charges)||"",TDS:(null===e||void 0===e?void 0:e.tds)||"",Commission:(null===e||void 0===e?void 0:e.commission)||"","Distributor Commission":(null===e||void 0===e?void 0:e.distributor_commission)||"","Super Distributor Commission":(null===e||void 0===e?void 0:e.master_dist_commission)||"","Opening Balance":(null===e||void 0===e?void 0:e.o_bal)||"","Closing Balance":(null===e||void 0===e?void 0:e.c_bal)||"",Status:2===(null===e||void 0===e?void 0:e.response)?"Success":1===(null===e||void 0===e?void 0:e.response)?"Pending":3===(null===e||void 0===e?void 0:e.response)?"Failed":4===(null===e||void 0===e?void 0:e.response)?"Refund":"Unknown",UTR:(null===e||void 0===e?void 0:e.utr)||"","Beneficiary Name":(null===e||void 0===e?void 0:e.beneficiary_name)||"","Customer Name":(null===e||void 0===e?void 0:e.customer_name)||"","Customer Mobile":(null===e||void 0===e?void 0:e.customer_mobile)||"","Bank Name":(null===e||void 0===e?void 0:e.bank_name)||"","IFSC Code":(null===e||void 0===e?void 0:e.ifsc_code)||"","Account Number":(null===e||void 0===e?void 0:e.account_number)||"","Retailer Name":(null===e||void 0===e?void 0:e.retailer_name)||"","Retailer Mobile":(null===e||void 0===e?void 0:e.retailer_mobile)||"","Retailer Refer ID":(null===e||void 0===e?void 0:e.retailer_refer_id)||"","Created By Name":(null===e||void 0===e?void 0:e.CreatedBy_name)||"","Created By Mobile":(null===e||void 0===e?void 0:e.CreatedBy_mobile)||"","Created By Refer ID":(null===e||void 0===e?void 0:e.CreatedBy_refer_id)||"","Status Update Time":(null===e||void 0===e?void 0:e.status_update_time)||""}))),l=y.Wp.json_to_sheet(e),a=y.Wp.book_new();y.Wp.book_append_sheet(a,l,"Bank Transfer Report"),y._h(a,"BankTransfer_Report_".concat((new Date).toLocaleDateString(),".xlsx"))}else n.Ay.error("No data available to export!")}catch(o){n.Ay.error("Failed to download Excel. Please try again.")}finally{S(!1)}},children:"Download Excel sheet"})})}),(0,T.jsx)("div",{className:"table-responsive",children:(0,T.jsxs)("table",{className:"table table-striped table-bordered table-hover display dataTable no-footer dtr-inline collapsed",role:"grid","aria-describedby":"myTable_info",children:[(0,T.jsx)("thead",{children:(0,T.jsxs)("tr",{role:"row",children:[(0,T.jsx)("th",{className:"sorting",children:"S.No"}),(0,T.jsx)("th",{className:"sorting",children:"Txn Date"}),(0,T.jsx)("th",{className:"sorting",children:"Batch ID"}),(0,T.jsx)("th",{className:"sorting",children:"Txn Id"}),(0,T.jsx)("th",{className:"sorting",children:"UTR No "}),(0,T.jsx)("th",{className:"sorting",children:"Bank Name"}),(0,T.jsx)("th",{className:"sorting",children:"Amount"}),(0,T.jsx)("th",{className:"sorting",children:"Txn Status"}),(0,T.jsx)("th",{className:"sorting",children:"View"}),(0,T.jsx)("th",{className:"sorting",children:"Txn. Mode"}),(0,T.jsx)("th",{className:"sorting",children:"Retailer Name"}),(0,T.jsx)("th",{className:"sorting",children:"Retailer Code"}),(0,T.jsx)("th",{className:"sorting",children:"Retailer Number"}),(0,T.jsx)("th",{className:"sorting",children:"Status Update At"}),(0,T.jsx)("th",{className:"sorting",children:"Enquiry"}),(0,T.jsx)("th",{className:"sorting",children:"Invoice"}),(0,T.jsx)("th",{className:"sorting",children:"Dispute"})]})}),(0,T.jsxs)("tbody",{children:[null===P||void 0===P?void 0:P.map(((e,l)=>(0,T.jsxs)("tr",{className:"odd",children:[(0,T.jsx)("td",{valign:"top",className:"dataTables_empty",children:l+1+(k-1)*U}),(0,T.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.createdAt}),(0,T.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.batchId}),(0,T.jsx)("td",{valign:"top",className:"dataTables_empty",children:(null===e||void 0===e?void 0:e.txn_id)||"---"}),(0,T.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.utr}),(0,T.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.bank}),(0,T.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.amount}),(0,T.jsxs)("td",{valign:"top",className:"dataTables_empty",children:[1==(null===e||void 0===e?void 0:e.response)?(0,T.jsx)("button",{className:"btn btn-warning",style:{width:"130px"},children:"Pending"}):"",2==(null===e||void 0===e?void 0:e.response)?(0,T.jsx)("button",{className:"btn btn-success",style:{width:"130px"},children:"Success"}):"",3==(null===e||void 0===e?void 0:e.response)?(0,T.jsx)("button",{className:"btn btn-danger",style:{width:"130px"},children:"Failed"}):"",4==(null===e||void 0===e?void 0:e.response)?(0,T.jsx)("button",{className:"btn btn-light",style:{width:"130px"},children:"Refunded"}):"",5==(null===e||void 0===e?void 0:e.response)?(0,T.jsx)("button",{className:"btn btn-light",style:{width:"130px"},children:"Not Initiated"}):""]}),(0,T.jsx)("td",{valign:"top",className:"dataTables_empty text-center",children:(0,T.jsx)(N.Ny1,{className:"eyeiconreport",onClick:()=>(e=>{A(e)})(e)})}),(0,T.jsx)("td",{valign:"top",className:"dataTables_empty",children:"1"==(null===e||void 0===e?void 0:e.txn_mode)?"NEFT":"2"==(null===e||void 0===e?void 0:e.txn_mode)?"IMPS":null===e||void 0===e?void 0:e.txn_mode}),(0,T.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.retailer_name}),(0,T.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.retailer_refer_id}),(0,T.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.retailer_mobile}),(0,T.jsx)("td",{valign:"top",className:"dataTables_empty",children:null===e||void 0===e?void 0:e.status_update_time}),(0,T.jsx)("td",{valign:"top",className:"dataTables_empty",children:(0,T.jsx)(b.A,{onClick:()=>(async e=>{S(!0);try{var l;let t=await(0,i.aM0)(e);var a,s;!1===(null===t||void 0===t||null===(l=t.data)||void 0===l?void 0:l.error)?(n.Ay.success(null===(a=t.data)||void 0===a?void 0:a.message),z((e=>!e))):n.Ay.error(null===(s=t.data)||void 0===s?void 0:s.message)}catch(t){}finally{S(!1)}})(null===e||void 0===e?void 0:e._id),disabled:C||1==(null===e||void 0===e?void 0:e.response)&&0==(null===e||void 0===e?void 0:e.tx_status)||2==(null===e||void 0===e?void 0:e.response)||4==(null===e||void 0===e?void 0:e.response)||5==(null===e||void 0===e?void 0:e.response),children:"Enquiry"})}),(0,T.jsx)("td",{valign:"top",className:"dataTables_empty",children:(0,T.jsx)(j.N_,{className:"btn btn-primary",to:"/details/".concat(null===e||void 0===e?void 0:e.batchId),children:"Invoice"})}),(0,T.jsx)("td",{valign:"top",className:"dataTables_empty",children:(0,T.jsx)(j.N_,{className:"btn btn-primary",to:"/add-ticket/".concat(null===e||void 0===e?void 0:e._id),state:{item:e,serviceId:"65f9484a26eb74e182c640fc"},children:(0,T.jsx)("span",{style:{color:"#fff"},children:"Dispute"})})})]},null===e||void 0===e?void 0:e._id))),0===(null===P||void 0===P?void 0:P.length)&&(0,T.jsx)("td",{style:{textAlign:"center"},colSpan:14,valign:"top",className:"dataTables_empty",children:"No Record Found"})]})]})})]}),(0,T.jsxs)(r.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2,flexWrap:"wrap",gap:2,children:[(0,T.jsxs)(r.A,{display:"flex",alignItems:"center",gap:2,children:[(0,T.jsxs)(u.A,{size:"small",sx:{width:"150px"},children:[(0,T.jsx)(p.A,{children:"Rows per page"}),(0,T.jsx)(m.A,{value:U,onChange:e=>{W(e.target.value),I(1)},label:"Rows per page",sx:{fontSize:"14px","& .MuiOutlinedInput-notchedOutline":{borderColor:"#ccc"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"var(--bs-primary1)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"var(--bs-primary1)"}},children:[5,10,25,50].map((e=>(0,T.jsx)(v.A,{value:e,children:e},e)))})]}),(0,T.jsxs)(h.A,{variant:"body2",sx:{fontSize:"14px",color:"#555"},children:["Total Entries: ",E]})]}),(0,T.jsx)(x.A,{count:J,page:k,onChange:(e,l)=>{I(l)},shape:"rounded",showFirstButton:!0,showLastButton:!0,sx:{"& .MuiPaginationItem-root":{color:"var(--bs-primary1)",borderRadius:"8px"},"& .MuiPaginationItem-root.Mui-selected":{backgroundColor:"var(--bs-primary1)",color:"#fff",fontWeight:"bold","&:hover":{backgroundColor:"var(--bs-primary1)"}}}})]})]})}),w&&(0,T.jsxs)(g.A,{show:!!w,onHide:()=>A(null),centered:!0,className:"transaction-modal",children:[(0,T.jsx)(g.A.Header,{closeButton:!0,className:"bg-primary text-white",children:(0,T.jsxs)(g.A.Title,{children:["Transaction ID # ",w.txn_id]})}),(0,T.jsx)(g.A.Body,{className:"bg-white",children:(0,T.jsx)(_.A,{borderless:!0,style:{border:"none"},children:(0,T.jsxs)("tbody",{children:[(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:"trportpopup",children:"Beneficiary Name:"}),(0,T.jsx)("td",{className:"trportpopup",children:null===w||void 0===w?void 0:w.beneficiary_name})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:"trportpopup",children:"Account No:"}),(0,T.jsx)("td",{className:"trportpopup",children:null===w||void 0===w?void 0:w.account_number})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:"trportpopup",children:"Transaction Date:"}),(0,T.jsx)("td",{className:"trportpopup",children:null===w||void 0===w?void 0:w.createdAt.split(" ")[0]})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:"trportpopup",children:"Bank Name:"}),(0,T.jsx)("td",{className:"trportpopup",children:null===w||void 0===w?void 0:w.bank_name})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:"trportpopup",children:"Beneficiary Name:"}),(0,T.jsx)("td",{className:"trportpopup",children:null===w||void 0===w?void 0:w.beneficiary_name})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:"trportpopup",children:"IFSC Code:"}),(0,T.jsx)("td",{className:"trportpopup",children:null===w||void 0===w?void 0:w.ifsc_code})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:"trportpopup",children:"Remitter Mobile No:"}),(0,T.jsx)("td",{className:"trportpopup",children:null===w||void 0===w?void 0:w.customer_mobile})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:"trportpopup",children:"Amount:"}),(0,T.jsxs)("td",{className:"trportpopup",children:["\u20b9",null===w||void 0===w?void 0:w.amount]})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:"trportpopup",children:"Charges:"}),(0,T.jsxs)("td",{className:"trportpopup",children:["\u20b9",null===w||void 0===w?void 0:w.charges]})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:"trportpopup",children:"Commissions:"}),(0,T.jsxs)("td",{className:"trportpopup",children:["\u20b9",null===w||void 0===w?void 0:w.commission]})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:"trportpopup",children:"TDS:"}),(0,T.jsxs)("td",{className:"trportpopup",children:["\u20b9",null===w||void 0===w?void 0:w.tds]})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:"trportpopup",children:"UTR No/RRN No:"}),(0,T.jsx)("td",{className:"trportpopup",children:null===w||void 0===w?void 0:w.utr})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:"trportpopup",children:"Opening Balance:"}),(0,T.jsx)("td",{className:"trportpopup",children:null===w||void 0===w?void 0:w.o_bal})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:"trportpopup",children:"Closing Balance:"}),(0,T.jsx)("td",{className:"trportpopup",children:null===w||void 0===w?void 0:w.c_bal})]}),(0,T.jsxs)("tr",{children:[(0,T.jsx)("td",{className:"trportpopup",children:"Status:"}),(0,T.jsxs)("td",{className:"trportpopup",children:[1==(null===w||void 0===w?void 0:w.response)&&(0,T.jsx)("span",{className:"badge bg-warning",style:{fontSize:"12px"},children:"Pending"}),2==(null===w||void 0===w?void 0:w.response)&&(0,T.jsx)("span",{className:"badge bg-success",style:{fontSize:"12px"},children:"Success"}),3==(null===w||void 0===w?void 0:w.response)&&(0,T.jsx)("span",{className:"badge bg-danger",style:{fontSize:"12px"},children:"Failed"}),4===(null===w||void 0===w?void 0:w.response)&&(0,T.jsx)("span",{className:"",style:{fontSize:"12px",background:"#e9ecef",padding:"1%"},children:"Refunded"})]})]})]})})}),(0,T.jsx)(g.A.Footer,{children:(0,T.jsx)(b.A,{variant:"secondary",onClick:()=>A(null),children:"Close"})})]})]})}},39574:(e,l,a)=>{a.d(l,{x:()=>t});var s=a(73216);const t=()=>{const{search:e}=(0,s.zy)(),l=new URLSearchParams(e),a=e=>{if(l.has(e)){const a=l.get(e);return""===a?"":a}return(new Date).toISOString().split("T")[0]};return{startDate:a("start-date"),endDate:a("end-date")}}}}]);
//# sourceMappingURL=5808.ac3c9095.chunk.js.map