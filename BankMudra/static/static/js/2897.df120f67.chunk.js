(self.webpackChunkpaymaster=self.webpackChunkpaymaster||[]).push([[2897],{22187:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var n=a(22019),o=a(94434),r=a(76245),l=a(65043),s=a(95702),i=a(72777),d=a(73575),c=a(70579);const u=function(){const e=()=>(new Date).toISOString().substr(0,10),[t,a]=(0,l.useState)(!1),[u,h]=(0,l.useState)(10),[x,p]=(0,l.useState)(0),[m,f]=(0,l.useState)(null),[v,b]=(0,l.useState)([]),[y,j]=(0,l.useState)([]),[g,k]=(0,l.useState)([]),[w]=(0,l.useState)(e()),[_,N]=((0,l.useRef)(10),(0,l.useState)(!1)),[T,E]=(0,l.useState)(null),[S,D]=(0,l.useState)({user_id:window.localStorage.getItem("userIdToken"),count:10,page:0,end_date:e(),start_date:e(),sortKey:"",sortType:"",package_name:"",amount:"",package_id:""}),O=e=>{const{name:t,value:a}=e.target;D((e=>({...e,[t]:a})))},C=async function(){a(!0);try{var e,t;const a=await(0,d.R24)(S);f((null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.totalCount)||0),b(Array.isArray(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.data)?a.data.data:[])}catch(n){console.error("error",n),b([])}a(!1)};return(0,l.useEffect)((()=>{(async()=>{try{var e;const t=await(0,d.H8z)();k(Array.isArray(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.data)?t.data.data:[])}catch(t){k([])}})()}),[]),(0,l.useEffect)((()=>{C()}),[x,_]),(0,c.jsxs)(c.Fragment,{children:[t&&(0,c.jsx)(i.A,{}),(0,c.jsx)("div",{className:"PageHeading",children:(0,c.jsx)("h1",{children:"Package History"})}),(0,c.jsxs)("div",{className:"ContentArea",children:[(0,c.jsxs)("div",{className:"card",children:[(0,c.jsx)("div",{className:"card-header",children:" "}),(0,c.jsx)("div",{className:"card-body",children:(0,c.jsxs)("form",{name:"frmReport",id:"frmReport",children:[(0,c.jsx)("input",{type:"hidden",id:"hidID",name:"hidID"}),(0,c.jsxs)("div",{className:"form-row",style:{alignItems:"end"},children:[(0,c.jsxs)("div",{className:"form-group col-md-4",children:[(0,c.jsx)("label",{htmlFor:"start_date",children:"Start Date"}),(0,c.jsx)("input",{type:"date",name:"start_date",className:"form-control",max:w,value:S.start_date,onChange:O})]}),(0,c.jsxs)("div",{className:"form-group col-md-4",children:[(0,c.jsx)("label",{htmlFor:"end_date",children:"End Date"}),(0,c.jsx)("input",{type:"date",name:"end_date",className:"form-control",max:w,value:S.end_date,onChange:O})]}),(0,c.jsxs)("div",{className:"form-group col-md-4",children:[(0,c.jsx)("label",{htmlFor:"package_id",children:"Package"}),(0,c.jsxs)("select",{className:"form-select",name:"package_id",value:S.package_id,onChange:O,children:[(0,c.jsx)("option",{value:"",children:"Select Package"}),g.length>0?g.map((e=>(0,c.jsx)("option",{value:null===e||void 0===e?void 0:e.package_id,children:null===e||void 0===e?void 0:e.package_name},null===e||void 0===e?void 0:e._id))):(0,c.jsx)("option",{disabled:!0,children:"No packages available"})]})]}),(0,c.jsxs)("div",{className:"form-group col-md-4",children:[(0,c.jsx)("label",{htmlFor:"end_date",children:"Amount"}),(0,c.jsx)("input",{type:"number",name:"amount",className:"form-control",placeholder:"Enter Amount",value:S.amount,onChange:O})]}),(0,c.jsxs)("div",{className:"form-group col-md-2",children:[(0,c.jsx)("label",{children:"\xa0"}),(0,c.jsx)("button",{type:"button",className:"btn btn-secondary mr-3",onClick:()=>{C(0),p(0)},children:"Search"}),(0,c.jsx)("button",{type:"button",className:"btn btn-light",onClick:()=>{const e={...S,end_date:"",start_date:"",package_id:"",package_name:"",amount:""};D(e),N((e=>!e)),p(0)},children:"Reset"})]})]})]})})]}),(0,c.jsx)("div",{className:"card mt-4",style:{overflow:"auto"},children:(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsx)("div",{className:"d-flex justify-content-end align-items-center",children:(0,c.jsxs)("div",{className:"dataTables_length mb-3",children:[(0,c.jsx)("button",{onClick:async()=>{a(!0);window.localStorage.getItem("userIdToken");try{var e,t,o;const r=await(0,d.AZL)(S),l=null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.data;if(!l||0===l.length)return n.Ay.error("No data available to export."),void a(!1);E(Array.isArray(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.data)?null===(o=r.data)||void 0===o?void 0:o.data:[]),setTimeout((()=>{document.getElementById("test-table-xls-button").click(),a(!1),n.Ay.success("Excel file download initiated.")}),100)}catch(r){console.error("Error preparing data for export:",r),n.Ay.error("Failed to prepare data for export. Please try again."),a(!1)}},style:{backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"8px",padding:"10px 24px",fontSize:"15px",fontWeight:"600",cursor:"pointer",minWidth:"160px",height:"42px",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",opacity:t?.7:1,transform:t?"none":"translateY(0)",":hover":{backgroundColor:"#059669",transform:"translateY(-1px)"},":active":{transform:"translateY(0)"},":disabled":{backgroundColor:"#9ca3af",cursor:"not-allowed"}},children:"Download Excel"}),(0,c.jsx)(s.A,{id:"test-table-xls-button",className:"download-table-xls-button d-none",table:"table-to-xlsx",filename:"Package Report",sheet:"Sheet1",buttonText:"Download Excel"})]})}),(0,c.jsxs)("table",{id:"table-to-xlsx",style:{display:"none"},children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Date / Time"}),(0,c.jsx)("th",{children:"Duration"}),(0,c.jsx)("th",{children:"Expiry Date"}),(0,c.jsx)("th",{children:"Duration Type"}),(0,c.jsx)("th",{children:"Package Name"}),(0,c.jsx)("th",{children:"MRP"}),(0,c.jsx)("th",{children:"Purchase Amount"}),(0,c.jsx)("th",{children:"Tax"}),(0,c.jsx)("th",{children:"Tax Type"})]})}),(0,c.jsx)("tbody",{children:T&&(null===T||void 0===T?void 0:T.map(((e,t)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:new Date(null===e||void 0===e?void 0:e.createdAt).toLocaleString()}),(0,c.jsx)("td",{children:null===e||void 0===e?void 0:e.duration}),(0,c.jsx)("td",{children:new Date(null===e||void 0===e?void 0:e.expiryDate).toLocaleString()}),(0,c.jsx)("td",{children:null===e||void 0===e?void 0:e.duration_type}),(0,c.jsx)("td",{children:null===e||void 0===e?void 0:e.package_name}),(0,c.jsx)("td",{children:null===e||void 0===e?void 0:e.mrp}),(0,c.jsx)("td",{children:null===e||void 0===e?void 0:e.amount}),(0,c.jsx)("td",{children:null===e||void 0===e?void 0:e.tax}),(0,c.jsx)("td",{children:null===e||void 0===e?void 0:e.tax_type})]},null===e||void 0===e?void 0:e._id))))})]}),(0,c.jsxs)("table",{className:"table table-striped table-bordered",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"S.No"}),(0,c.jsx)("th",{children:"Date / Time"}),(0,c.jsx)("th",{children:"Duration"}),(0,c.jsx)("th",{children:"Expiry Date"}),(0,c.jsx)("th",{children:"Duration Type"}),(0,c.jsx)("th",{children:"Package Name"}),(0,c.jsx)("th",{children:"MRP"}),(0,c.jsx)("th",{children:"Purchase Amount"}),(0,c.jsx)("th",{children:"Tax"}),(0,c.jsx)("th",{children:"Tax Type"})]})}),(0,c.jsx)("tbody",{children:v.length>0?v.map(((e,t)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:t+1+x*u}),(0,c.jsx)("td",{children:new Date(null===e||void 0===e?void 0:e.createdAt).toLocaleDateString()+" / "+new Date(null===e||void 0===e?void 0:e.createdAt).toLocaleTimeString()}),(0,c.jsx)("td",{children:null===e||void 0===e?void 0:e.duration}),(0,c.jsx)("td",{children:new Date(null===e||void 0===e?void 0:e.expiryDate).toLocaleString()}),(0,c.jsx)("td",{children:null===e||void 0===e?void 0:e.duration_type}),(0,c.jsx)("td",{children:null===e||void 0===e?void 0:e.package_name}),(0,c.jsx)("td",{children:null===e||void 0===e?void 0:e.mrp}),(0,c.jsx)("td",{children:null===e||void 0===e?void 0:e.amount}),(0,c.jsx)("td",{children:null===e||void 0===e?void 0:e.tax}),(0,c.jsx)("td",{children:null===e||void 0===e?void 0:e.tax_type})]},t))):(0,c.jsx)("tr",{children:(0,c.jsx)("td",{colSpan:10,className:"text-center",children:"No data available."})})})]}),(0,c.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[(0,c.jsx)(o.A,{value:u,onChange:e=>{h(e),p(0),D((t=>({...t,count:e,page:0}))),N((e=>!e))},options:[{value:10,label:"10 /pages"},{value:25,label:"25 /pages"},{value:50,label:"50 /pages"},{value:100,label:"100 /pages"}]}),(0,c.jsx)(r.A,{total:m,onChange:e=>{p(e-1),D((t=>({...t,page:e-1}))),N((e=>!e))},current:x+1,pageSize:u})]}),(0,c.jsxs)("div",{className:"dataTables_info pt-2",id:"empoloyees-tblwrapper_info",role:"status","aria-live":"polite",children:["Total ",m," entries"]})]})})]})]})}},41497:(e,t,a)=>{"use strict";var n=a(13218);function o(){}function r(){}r.resetWarningCache=o,e.exports=function(){function e(e,t,a,o,r,l){if(l!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:o};return a.PropTypes=a,a}},65173:(e,t,a)=>{e.exports=a(41497)()},13218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},95702:(e,t,a)=>{"use strict";var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(65043),r=s(o),l=s(a(65173));function s(e){return e&&e.__esModule?e:{default:e}}var i={table:l.default.string.isRequired,filename:l.default.string.isRequired,sheet:l.default.string.isRequired,id:l.default.string,className:l.default.string,buttonText:l.default.string},d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleDownload=a.handleDownload.bind(a),a}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"handleDownload",value:function(){if(!document)return null;if(1!==document.getElementById(this.props.table).nodeType||"TABLE"!==document.getElementById(this.props.table).nodeName)return null;var e=document.getElementById(this.props.table).outerHTML,a=String(this.props.sheet),n=String(this.props.filename)+".xls",o={worksheet:a||"Worksheet",table:e};if(window.navigator.msSaveOrOpenBlob){var r=new Blob(['<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><meta charset="UTF-8">\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body>'+e+"</body></html>"]);return document.getElementById("react-html-table-to-excel").click()((function(){window.navigator.msSaveOrOpenBlob(r,n)})),!0}var l=window.document.createElement("a");return l.href="data:application/vnd.ms-excel;base64,"+t.base64(t.format('<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><meta charset="UTF-8">\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body>{table}</body></html>',o)),l.download=n,document.body.appendChild(l),l.click(),document.body.removeChild(l),!0}},{key:"render",value:function(){return r.default.createElement("button",{id:this.props.id,className:this.props.className,type:"button",onClick:this.handleDownload},this.props.buttonText)}}],[{key:"base64",value:function(e){return window.btoa(unescape(encodeURIComponent(e)))}},{key:"format",value:function(e,t){return e.replace(/{(\w+)}/g,(function(e,a){return t[a]}))}}]),t}(o.Component);d.propTypes=i,d.defaultProps={id:"button-download-as-xls",className:"button-download",buttonText:"Download"},t.A=d},98587:(e,t,a)=>{"use strict";function n(e,t){if(null==e)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;a[n]=e[n]}return a}a.d(t,{A:()=>n})},63662:(e,t,a)=>{"use strict";function n(e,t){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},n(e,t)}a.d(t,{A:()=>n})}}]);
//# sourceMappingURL=2897.df120f67.chunk.js.map