import{b as u,l as d,j as e}from"./index.DNjfNSSq.js";import{u as o}from"./useMutation.C-meR6bg.js";import{a as h}from"./queryToast.CysgzmFw.js";import{e as m}from"./crypto.Bj26Nf7D.js";const f=async t=>(await d.post("https://api.unibcomp.co.in/api/v1/user/payment/pay",{payment_session_id:t})).data,x=async t=>(await u.post("/check/deposit",{payment_session_id:t})).data,R=async t=>(await d.put(`https://api.unibcomp.in/api/v1/user/deposit/update/${t}`)).data,j=async t=>(await u.post("/payment/update",t)).data,z=()=>{const t=o({mutationFn:f}),s=o({mutationFn:x}),i=o({mutationFn:R}),a=o({mutationFn:j});return{depositRequestMutation:t,depositProcessMutation:s,depositStatusUpdateMutation:i,depositUpdate2:a}},N=()=>{const{depositUpdate2:t}=z();return{openRazorpayCheckout:({key:i,order_id:a,amount:r,currency:l,customer:c})=>{if(!window.Razorpay){alert("Razorpay SDK not loaded properly.");return}const y={key:i,order_id:a,amount:r*100,currency:l||"INR",name:"UnibComp",description:"Order Payment",prefill:{name:c?.name||"",email:c?.email||"",contact:c?.contact||""},theme:{color:"#3399cc"},handler:function(n){t.mutate({order_id:a,status:"SUCCESS",payment_id:n.razorpay_payment_id,signature:n.razorpay_signature});const w=m({amount:r,orderId:a,status:"success"});window.location.replace(`/payment-status/${encodeURIComponent(w)}`)},modal:{ondismiss:function(){t.mutate({order_id:a,status:"FAILED"},h(()=>window.location.replace("/")));const n=m({amount:r,orderId:a,status:"failed"});window.location.replace(`/payment-status/${encodeURIComponent(n)}`)}}};new window.Razorpay(y).open()}}},p=({className:t})=>e.jsx("div",{className:`animate-pulse bg-gray-200 rounded ${t}`}),b=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 w-full max-w-md space-y-4",children:[e.jsx(p,{className:"h-6 w-3/4 mx-auto"}),e.jsx(p,{className:"h-4 w-full"}),e.jsx(p,{className:"h-4 w-5/6"}),e.jsx(p,{className:"h-10 w-full rounded-md mt-4"})]})});export{b as D,N as r,z as u};
