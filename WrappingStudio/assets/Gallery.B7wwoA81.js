import{k as p,r as o,b,j as e,i as y}from"./index.XqRDOWna.js";import{N as f}from"./NotDataFound.Rt9xVozJ.js";import{u as v,P as j}from"./usePagination.CETP7TEF.js";import{P as w}from"./PageHeadline.BIumgUXH.js";import{C as N,a as k}from"./chevron-right.DOC4Rsnw.js";import"./proxy.Bs5TNfde.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],P=p("image",L),C=(t=1,a=30)=>{const[d,n]=o.useState([]),[i,g]=o.useState(0),[m,c]=o.useState(1),[l,u]=o.useState(!0),[s,r]=o.useState(null);return o.useEffect(()=>{let x=!0;return(async()=>{try{u(!0),r(null);const{data:h}=await b.get("/gallery",{params:{pageNumber:t,pageSize:a},headers:{Accept:"application/json"}});if(!x)return;n(h.results||[]),g(h.pagination?.total||0),c(h.pagination?.totalPages||1)}catch(h){x&&r(h?.message||"Failed to load galleries")}finally{x&&u(!1)}})(),()=>{x=!1}},[t,a]),{data:d,total:i,pages:m,loading:l,error:s}},S=t=>/\.(mp4|webm|ogg)$/i.test(t),E=({item:t})=>{const a=o.useMemo(()=>{const s=[];for(const r of t.images??[])s.push({type:S(r)?"video":"image",src:r});return s},[t.images]),[d,n]=o.useState(0),[i,g]=o.useState(!0),m=()=>n(s=>(s+1)%a.length),c=()=>n(s=>(s-1+a.length)%a.length),l=a[d],u=a.length>0;return o.useEffect(()=>{const s=r=>{r.key==="ArrowLeft"&&c(),r.key==="ArrowRight"&&m()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[a]),e.jsxs("section",{className:"rounded-2xl overflow-hidden border bg-white shadow-md hover:shadow-lg transition-all duration-300",children:[e.jsx("div",{className:"relative bg-gray-100",children:u?e.jsxs("div",{className:"relative flex justify-center items-center overflow-hidden",style:{minHeight:"40vh"},children:[l.type==="video"?e.jsx("video",{src:l.src,className:"max-h-[60vh] w-auto rounded-lg object-contain transition-all duration-300",controls:!0,playsInline:!0}):e.jsx("img",{src:l.src,alt:t.title,className:`block w-auto h-auto max-h-[60vh] object-contain transition-opacity duration-500  ${i?"opacity-50 blur-sm":"opacity-100 blur-0"}`,loading:"lazy",onLoad:()=>g(!1)}),(t.title||t.description)&&e.jsx("div",{className:"absolute bottom-0 inset-x-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent",children:e.jsxs("div",{className:"px-4 py-3 text-white text-center",children:[t.title&&e.jsx("h3",{className:"text-lg font-semibold tracking-wide",children:t.title}),t.description&&e.jsx("p",{className:"mt-1 text-sm opacity-90",children:t.description})]})}),a.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:c,className:"absolute left-4 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-black/40 text-white hover:bg-black/60 grid place-items-center backdrop-blur-sm transition","aria-label":"Previous",children:e.jsx(N,{className:"w-6 h-6"})}),e.jsx("button",{onClick:m,className:"absolute right-4 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-black/40 text-white hover:bg-black/60 grid place-items-center backdrop-blur-sm transition","aria-label":"Next",children:e.jsx(k,{className:"w-6 h-6"})})]})]}):e.jsx("div",{className:"w-full aspect-[4/3] grid place-items-center text-gray-400",children:e.jsx(P,{className:"w-10 h-10"})})}),a.length>1&&e.jsx("div",{className:"px-4 sm:px-6 py-4 border-t bg-gray-50",children:e.jsx("div",{className:"flex items-center justify-center gap-3 overflow-x-auto",children:a.map((s,r)=>e.jsx("button",{onClick:()=>n(r),className:`relative h-12 w-16 overflow-hidden rounded-md border transition-all duration-200 ${r===d?"border-blue-500 ring-2 ring-blue-400":"border-gray-300 hover:border-gray-400"}`,children:s.type==="video"?e.jsx("video",{src:s.src,className:"object-cover w-full h-full opacity-80"}):e.jsx("img",{src:s.src,alt:`Thumbnail ${r+1}`,className:"object-cover w-full h-full opacity-90"})},r))})})]})},R=()=>{const{pageNumber:t,pageSizeValue:a,handlePageChange:d,handlePageSizeChange:n}=v(),{data:i,total:g,loading:m,error:c}=C(t,a);return e.jsx("div",{className:"bg-gray-50 min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 sm:py-8",children:[e.jsx("div",{className:"sticky top-20 sm:top-22 md:top-28 z-30 -mx-3 sm:-mx-6 lg:-mx-8 px-3 sm:px-6 lg:px-8 bg-gray-50/90 backdrop-blur supports-[backdrop-filter]:bg-gray-50/70 border-b border-gray-200",children:e.jsx(w,{title:"Gallery"})}),e.jsx("div",{className:"h-3 sm:h-4"}),m?e.jsx(y,{isNotFixed:!0,h:"h-[60vh]"}):c?e.jsx("div",{className:"p-4 border rounded-xl bg-red-50 text-red-700",children:c}):!i||i.length===0?e.jsx(f,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-8",children:i.map(l=>e.jsx(E,{item:l},l._id))}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(j,{handlePageChange:d,handlePageSizeChange:n,currentPage:t,pageSize:a,totalCount:g})})]})]})})};export{R as default};
