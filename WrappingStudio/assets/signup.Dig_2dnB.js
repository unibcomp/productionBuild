import{e as S,r as u,j as e,L as y,z as d}from"./index.DtIBEexY.js";import{F}from"./index.Dyrt9Wgh.js";import{u as E}from"./unibcompLogo3.CCLcFMez.js";import{a as U,b as q}from"./useUser.6sFcAhHS.js";import{u as O}from"./index.esm.BgOUue9R.js";import"./iconBase.CZ72J5A5.js";import"./useMutation.CN_b9VxY.js";const t=o=>o?typeof o=="string"?o:"message"in o&&typeof o.message=="string"?o.message:null:null,I=()=>{const o=S(),[a,x]=u.useState(!1),[m,g]=u.useState(!1),[p,h]=u.useState(null),{register:i,handleSubmit:w,setError:c,clearErrors:f,formState:{errors:s}}=O(),j=U(),N=q(),v=async r=>{if(!r.email&&!r.mobile){c("email",{type:"manual",message:"Email or Mobile is required"}),c("mobile",{type:"manual",message:"Email or Mobile is required"});return}f(["email","mobile"]),j.mutate({data:r},{onSuccess:l=>{d.success(l?.message||"User created successfully!"),h(l?.result?.id||null),x(!0)},onError:l=>{d.error(l?.response?.data?.message||l?.response?.data?.error||"Something went wrong!"),x(!1)}})},P=async r=>{if(!p){d.error("User not found. Please register again.");return}if(r.password!==r.confirmPassword){c("confirmPassword",{type:"manual",message:"Passwords do not match"});return}f("confirmPassword");const l={id:p,otp:r.otp,password:r.password,confirmPassword:r.confirmPassword};try{const n=await N.mutateAsync(l);d.success(n?.message||"Account verified successfully!"),o("/login")}catch(n){const b=n?.response?.data?.error||n?.response?.data?.message||n?.message||"Verification failed";d.error(b),c("otp",{type:"manual",message:b})}};return e.jsx("div",{className:"bg-gray-100 flex  items-center justify-center",style:{height:"84vh"},children:e.jsxs("div",{className:"w-full max-w-4xl bg-white shadow-lg flex md:flex-row flex-col mt-2",style:{height:"80vh"},children:[e.jsxs("div",{className:"md:w-2/5 w-full bg-[#2874F0] text-white p-8 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("img",{src:E,alt:"Unibcomp",className:"w-36 mb-6"}),e.jsx("h1",{className:"text-2xl font-semibold mb-3",children:"Sign Up"}),e.jsx("p",{className:"text-sm opacity-90 leading-relaxed",children:"Get access to your Orders, Wishlist, and Recommendations"})]}),e.jsxs("p",{className:"text-xs opacity-80",children:["© ",new Date().getFullYear()," Unibcomp"]})]}),e.jsxs("div",{className:"md:w-3/5 w-full px-10 py-8 flex flex-col justify-center",children:[e.jsxs("form",{onSubmit:w(a?P:v),className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Enter your full name",...i("fullName",{required:"Full Name is required"}),disabled:a,className:"w-full border-b border-gray-300 py-2.5 text-sm focus:outline-none focus:border-[#2874F0]"}),t(s.fullName)&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:t(s.fullName)})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Enter your mobile number",...i("mobile"),disabled:a,className:"w-full border-b border-gray-300 py-2.5 text-sm focus:outline-none focus:border-[#2874F0]"}),t(s.mobile)&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:t(s.mobile)})]}),e.jsxs("div",{children:[e.jsx("input",{type:"email",placeholder:"Enter your email",...i("email"),disabled:a,className:"w-full border-b border-gray-300 py-2.5 text-sm focus:outline-none focus:border-[#2874F0]"}),t(s.email)&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:t(s.email)})]}),a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Enter OTP",...i("otp",{required:"OTP is required"}),className:"w-full border-b border-gray-300 py-2.5 text-sm focus:outline-none focus:border-[#2874F0]"}),t(s.otp)&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:t(s.otp)})]}),e.jsxs("div",{children:[e.jsx("input",{type:m?"text":"password",placeholder:"Enter your password",...i("password",{required:"Password is required"}),className:"w-full border-b border-gray-300 py-2.5 text-sm focus:outline-none focus:border-[#2874F0]"}),e.jsx("button",{type:"button",onClick:()=>g(r=>!r),className:"absolute right-0 top-1/2 -translate-y-1/2 text-xs font-semibold text-[#2874F0]",children:m?"HIDE":"SHOW"}),t(s.password)&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:t(s.password)})]}),e.jsxs("div",{children:[e.jsx("input",{type:m?"text":"password",placeholder:"Confirm your password",...i("confirmPassword",{required:"Confirm Password is required"}),className:"w-full border-b border-gray-300 py-2.5 text-sm focus:outline-none focus:border-[#2874F0]"}),t(s.confirmPassword)&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:t(s.confirmPassword)})]})]}),e.jsx("button",{type:"submit",className:`w-full bg-[#FB641B] text-white py-2.5 text-sm font-semibold rounded-sm
                         hover:opacity-90 transition ${a?"bg-green-600":"bg-[#2874F0]"} 
                         disabled:opacity-60`,children:a?"Verify OTP":"Sign Up"})]}),e.jsx("div",{className:"text-center text-xs text-gray-400 my-4",children:"OR"}),e.jsxs("button",{className:"w-full flex items-center justify-center gap-3 border border-gray-300 py-2.5 rounded-sm text-sm font-medium hover:bg-gray-50 transition disabled:opacity-60",children:[e.jsx(F,{className:"text-lg"}),"Continue with Google"]}),e.jsxs("div",{className:"text-center mt-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Already have an account?"}),e.jsx(y,{to:"/login",className:"inline-block px-4 py-1 text-blue-600 font-medium text-sm rounded-full hover:bg-blue-100 hover:text-blue-800 transition",children:"Login?"})]}),e.jsx("div",{className:"text-center md:mt-4 ",children:e.jsx(y,{to:"/",className:"text-xs text-gray-500 underline",children:"← Back to Store"})})]})]})})};export{I as default};
