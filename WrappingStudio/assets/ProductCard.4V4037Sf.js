import{a as d,b as l,j as s,L as x}from"./index.CcjL_5p2.js";import{u as h}from"./useMutation.B7IGJ_ZR.js";const g=()=>d({queryKey:["wishlist"],queryFn:async()=>{const{data:e}=await l.get("/wishlist");return console.log("📥 Wishlist fetched:",e),e?.data??[]},enabled:!1}),u=()=>h({mutationFn:async e=>{console.log("📤 Sending productId to API:",e);const{data:t}=await l.post(`/create-remove-wishlist/${e}`);return t},onSuccess:(e,t)=>{console.log("✅ API Success Response:",e),console.log("🆔 Product toggled:",t)},onError:e=>{console.error("❌ API Error:",e)}}),f=({product:e,isFullDetail:t})=>{const i=e.variant?e.variant.images[0]:void 0,r=`/product/detail/${e._id}?variant=${e.variant?._id}&&size=${e.variant?.size?._id}`,{data:o=[]}=g(),c=u(),n=o.some(a=>a.product._id===e._id);return console.log(t),s.jsxs("div",{className:"border rounded-lg shadow-sm hover:shadow-md p-3 relative",children:[s.jsx("button",{onClick:a=>{a.preventDefault(),console.log("🖱️ Button clicked for product:",e._id),c.mutate(e._id)},className:`absolute top-2 right-2 text-xl ${n?"text-red-500":"text-gray-400"} hover:scale-110 transition`,children:n?"❤️":"🤍"}),s.jsxs(x,{to:r,className:"block",children:[i?s.jsx("img",{src:i,alt:e.name,className:"w-full h-40 object-contain rounded-md"}):s.jsx("div",{className:"w-full h-40 bg-gray-200 flex items-center justify-center rounded-md text-gray-500 text-sm",children:"No Image"}),s.jsx("h3",{className:"text-sm font-semibold mt-2 truncate",children:e.name}),s.jsxs("div",{className:"flex",children:[s.jsxs("p",{className:"text-gray-700 font-bold",children:["₹ ",Number(e.variant?.size?.sell_price).toFixed(2)]}),e.variant?.size&&e.variant?.size?.original_price>e.variant?.size?.sell_price&&s.jsxs("p",{className:"text-gray-500 text-xs line-through flex mt-2 ml-1",children:["₹ ",Number(e.variant?.size?.original_price).toFixed(2)]})]}),s.jsx("p",{className:"text-gray-700 font-bold",children:e.brand.name}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[s.jsxs("div",{className:"flex items-center bg-green-600 text-white px-1.5 py-0.5 rounded-sm font-semibold",children:[s.jsx("span",{children:e?.ratings?.average.toFixed(1)}),s.jsx("span",{className:"material-symbols-outlined text-xs ml-1",children:"star"})]}),s.jsxs("span",{className:"text-gray-500 font-medium",children:[e?.ratings?.count," Ratings"]})]}),t&&s.jsx("div",{className:"mt-2",children:s.jsx("ul",{className:"list-disc list-inside space-y-1 text-gray-700 text-sm",children:e.variant?.size?.highlights.map((a,m)=>s.jsx("li",{children:a},m))})})]})]})};export{f as P,g as u};
