import{r as t,d as x,j as e,i as c}from"./index.BQOoNfp6.js";import{u as g}from"./useDepositInit.BmMyubuV.js";import"./useMutation.4jg92Mjg.js";import"./queryToast.Cr7KOoVh.js";import"./crypto.DNll6t3S.js";const w=()=>{const[m,r]=t.useState("â³ Navigating to payment gateway..."),[s,i]=t.useState("loading"),[u]=x(),n=u.get("payment_session_id"),{depositRequestMutation:p}=g(),[o,y]=t.useState(null);return t.useEffect(()=>{if(!n){i("error"),r("âŒ Payment link is invalid, expired, or already used.");return}p.mutate(n,{onSuccess:async d=>{const{paymentMode:a,data:l}=d;y(d),a==="PHONEPAY"||a==="PAYU"||a==="GATEPAY"||a==="RAZORPAY"?l.redirectUrl&&window.open(l.redirectUrl,"_self"):(i("error"),r("âŒ Payment link is invalid, expired, or already used."))},onError:()=>{i("error"),r("âŒ Payment link is invalid, expired, or already used.")}})},[n]),e.jsx("div",{className:"deposit-container",children:e.jsxs("div",{className:"deposit-card",children:[s==="loading"&&!o&&e.jsx(c,{}),e.jsxs("p",{className:`message ${s}`,children:[s==="loading"&&e.jsx(c,{}),m]}),s==="error"&&e.jsx("button",{className:"retry-btn",onClick:()=>window.history.back(),children:"ğŸ” Try Again"}),o?.amount&&e.jsx("div",{className:"text-gray-600",children:e.jsxs("p",{className:"text-sm",children:["Please wait while we process your payment of â‚¹",o.amount]})})]})})};export{w as default};
