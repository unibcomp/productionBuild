import{a as R,b as B,j as e,r as c,d as E}from"./index.CcjL_5p2.js";import{P as G}from"./ProductCard.4V4037Sf.js";import{u as A,P as I}from"./usePagination.CvmUUGO2.js";import{m as Q}from"./proxy.D4OhoTyC.js";import{P as U,K as u,h as v}from"./PageHeadline.BlS9do2u.js";const V=async s=>{const{data:t}=await B.get("/get-product",{params:s});return t},W=async s=>{const{data:t}=await B.get(`/product-details/${s}`);return t},X=({category:s,subcategory:t,brand:i,_id:a,pageSize:g=10,pageNumber:o=1})=>{const r={pageSize:g,pageNumber:o,...s&&{category:s},...t&&{subcategory:t},...i&&{brand:i},...a&&{_id:a}};return R({queryKey:["products",r],queryFn:()=>V(r)})},le=s=>R({queryKey:["product",s],queryFn:()=>W(s),enabled:!!s,staleTime:1e3*60*5}),J=({message:s="No data found.",className:t=""})=>e.jsx(Q.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},transition:{duration:.3},className:`h-[63vh] w-full flex items-center justify-center text-gray-400 ${t}`,children:e.jsx("p",{className:"text-lg font-medium",children:s})}),P=["Nike","Adidas","Puma","Reebok"],S=["Men","Women","Unisex"],k=["Red","Blue","Green","Black"],z=["S","M","L","XL"],L=["₹199 - ₹249","₹249 - ₹299","₹299 - ₹349","₹399+"],O=[5,4,3,2,1],_=({filters:s,setFilters:t,isMobile:i=!1})=>{const[a,g]=c.useState({}),o=l=>{g(d=>({...d,[l]:!d[l]}))},r=(l,d)=>{t(x=>{const m=x[l]||[],p=m.includes(d)?m.filter(h=>h!==d):[...m,d];return{...x,[l]:p}})};return i?e.jsxs("div",{className:"p-2 space-y-1",children:[e.jsx(n,{label:"Brand",category:"brand",items:P,open:a.brand,onToggle:()=>o("brand"),filters:s,onFilterToggle:r}),e.jsx(n,{label:"Gender",category:"gender",items:S,open:a.gender,onToggle:()=>o("gender"),filters:s,onFilterToggle:r}),e.jsx(n,{label:"Color",category:"color",items:k,open:a.color,onToggle:()=>o("color"),filters:s,onFilterToggle:r}),e.jsx(n,{label:"Size",category:"size",items:z,open:a.size,onToggle:()=>o("size"),filters:s,onFilterToggle:r}),e.jsx(n,{label:"Price",category:"price",items:L,open:a.price,onToggle:()=>o("price"),filters:s,onFilterToggle:r}),e.jsx(n,{label:"Customer Rating",category:"rating",items:O,open:a.rating,onToggle:()=>o("rating"),filters:s,onFilterToggle:r})]}):e.jsxs("div",{className:"p-2 space-y-1 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-bold mb-4 px-1",children:"Filters"}),e.jsx(n,{label:"Brand",category:"brand",items:P,open:a.brand,onToggle:()=>o("brand"),filters:s,onFilterToggle:r}),e.jsx(n,{label:"Gender",category:"gender",items:S,open:a.gender,onToggle:()=>o("gender"),filters:s,onFilterToggle:r}),e.jsx(n,{label:"Color",category:"color",items:k,open:a.color,onToggle:()=>o("color"),filters:s,onFilterToggle:r}),e.jsx(n,{label:"Size",category:"size",items:z,open:a.size,onToggle:()=>o("size"),filters:s,onFilterToggle:r}),e.jsx(n,{label:"Price",category:"price",items:L,open:a.price,onToggle:()=>o("price"),filters:s,onFilterToggle:r}),e.jsx(n,{label:"Customer Rating",category:"rating",items:O,open:a.rating,onToggle:()=>o("rating"),filters:s,onFilterToggle:r})]})},n=({label:s,category:t,items:i,open:a,onToggle:g,filters:o,onFilterToggle:r})=>e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between items-center font-semibold mb-2 px-3 py-2 border rounded-lg cursor-pointer hover:bg-gray-100",onClick:g,children:[s,e.jsx("span",{className:"material-symbols-outlined",children:a?"expand_more":"arrow_forward_ios"})]}),a&&e.jsx("div",{className:"pl-4",children:i.map(l=>e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("input",{type:"checkbox",className:"mr-2 cursor-pointer",onChange:()=>r(t,l),checked:o[t]?.includes(l)||!1}),e.jsx("span",{className:"select-none",children:l})]},l))})]}),Y=()=>{const[s,t]=c.useState({});return{filters:s,setFilters:t}},Z=({category:s,subcategory:t,title:i,horizontal:a=!1,brand:g,showFilters:o=!1,isFullDetail:r=!1})=>{const[l]=E(),d=l.get("category"),x=l.get("subcategory"),m=l.get("brand"),{filters:p,setFilters:h}=Y(),{handlePageChange:q,handlePageSizeChange:H,pageNumber:w,pageSizeValue:T}=A(),[K,b]=c.useState(!1),[M,j]=c.useState(!1),[N,F]=c.useState("relevance"),{data:y,isLoading:C,isError:$}=X({category:d||s,subcategory:x||t,brand:m||g,pageNumber:w,pageSize:T,...p}),D=[{label:"Relevance",value:"relevance"},{label:"Price: Low to High",value:"lowToHigh"},{label:"Price: High to Low",value:"highToLow"}];return e.jsxs("div",{className:"min-h-screen bg-gray-50 relative",children:[e.jsx("div",{className:"md:hidden sticky top-0 z-10 bg-white shadow-md flex justify-between items-center px-4 py-2 mt-2",children:o&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"text-gray-800 font-medium flex items-center gap-1",onClick:()=>b(!0),children:"= Sort"}),e.jsx("button",{className:"text-gray-800 font-medium flex items-center gap-1",onClick:()=>j(!0),children:"= Filter"})]})}),e.jsxs("div",{className:" mx-auto sm:px-8 py-6 grid grid-cols-1 md:grid-cols-4 gap-6",children:[o&&e.jsx("aside",{className:"hidden md:block md:col-span-1 md:sticky md:top-24 md:self-start bg-white rounded-lg shadow-md border border-gray-200",children:e.jsx(_,{filters:p,setFilters:h,sort:N,onSortChange:F})}),e.jsxs("main",{className:`col-span-1 ${o?"md:col-span-3":"md:col-span-4"}`,children:[i&&e.jsx(U,{title:i||"Product"}),C&&e.jsx("p",{className:"text-gray-500",children:"Loading products..."}),$&&e.jsx("p",{className:"text-red-500",children:"Failed to load products."}),y?.results&&y.results.length>0?e.jsx(ee,{data:y.results,horizontal:a,isFullDetail:r}):!C&&e.jsx(J,{}),!a&&e.jsx(I,{handlePageChange:q,handlePageSizeChange:H,currentPage:w,pageSize:T,totalCount:y?.pagination?.total||0})]})]}),e.jsx(u,{appear:!0,show:K,as:c.Fragment,children:e.jsxs(v,{as:"div",className:"relative z-50",onClose:()=>b(!1),children:[e.jsx(u.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),e.jsx("div",{className:"fixed inset-0 overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 overflow-hidden",children:e.jsx(u.Child,{as:c.Fragment,enter:"ease-in-out duration-300",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"ease-in-out duration-200",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:e.jsxs(v.Panel,{className:"pointer-events-auto absolute right-0 top-0 h-full w-80 bg-white shadow-xl overflow-y-auto p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Sort By"}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-500",children:"Close"})]}),e.jsx("div",{className:"space-y-2",children:D.map(f=>e.jsx("button",{onClick:()=>{F(f.value),b(!1)},className:`w-full text-left px-4 py-2 rounded-md ${N===f.value?"bg-blue-100 text-blue-800":"hover:bg-gray-100"}`,children:f.label},f.value))})]})})})})]})}),e.jsx(u,{appear:!0,show:M,as:c.Fragment,children:e.jsxs(v,{as:"div",className:"relative z-50",onClose:()=>j(!1),children:[e.jsx(u.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),e.jsx("div",{className:"fixed inset-0 overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 overflow-hidden",children:e.jsx(u.Child,{as:c.Fragment,enter:"ease-in-out duration-300",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"ease-in-out duration-200",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:e.jsxs(v.Panel,{className:"pointer-events-auto absolute right-0 top-0 h-full w-80 bg-white shadow-xl overflow-y-auto p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),e.jsx("button",{onClick:()=>j(!1),className:"text-gray-500",children:"Close"})]}),e.jsx(_,{filters:p,setFilters:h,sort:N,onSortChange:F,isMobile:!0}),e.jsx("div",{className:"sticky bottom-0 bg-white p-4 border-t",children:e.jsx("button",{className:"w-full py-2 bg-blue-600 text-white rounded-md",onClick:()=>j(!1),children:"Apply Filters"})})]})})})})]})})]})},ee=({data:s,horizontal:t=!1,isFullDetail:i=!1})=>e.jsx("div",{className:t?"flex overflow-x-auto space-x-4 pb-2":"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:s.map(a=>e.jsx("div",{className:t?"min-w-[200px] flex-shrink-0":"",children:e.jsx(G,{product:a,isFullDetail:i})},a._id))}),ne=Object.freeze(Object.defineProperty({__proto__:null,default:Z},Symbol.toStringTag,{value:"Module"}));export{Z as P,ne as a,le as u};
