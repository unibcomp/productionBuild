import{e as E,d as L,r as O,j as s,i as V}from"./index.ChAS2J0r.js";import{b as q,c as z,F as A,S as D,C as H,d as R,e as G,P as I}from"./CarsouelSelector.VY6GyC_s.js";import{P as J}from"./PaginationSelecctor.Dk_8xSGH.js";import{u as K}from"./usePagination.BYX28xlW.js";import{N as Q}from"./NotDataFound.YvgRQSlA.js";import{P as U}from"./PageHeadline.QeC8fClk.js";import{u as W}from"./useModal.PLXovBHl.js";import{B as X}from"./ButtonBar.DpQ3Zfx4.js";import"./WishlistButton.CiaIgxm-.js";import"./useMutation.DFv3bXrL.js";import"./proxy.BEu15Ss1.js";const ns=({category:a,subcategory:t,title:c,horizontal:e=!1,brand:u,showFilters:m=!1,isFullDetail:F=!1,exclude:p,productType:x})=>{const M=E(),[d]=L(),r=d.get("category"),o=d.get("subcategory"),n=d.get("slug"),l=d.get("brand"),y=d.get("exclude"),{openModal:S,closeModal:N,isModalOpen:f}=W(),{filters:g,setFilters:P,sorts:j,setSorts:v}=q(),{handlePageChange:C,handlePageSizeChange:_,pageNumber:b,pageSizeValue:h}=K(),{data:i,isLoading:$,isError:k}=z({category:r||a,subcategory:o||t,brand:l||u,pageNumber:b,pageSize:h,...g,slug:n?String(n):void 0,sort:j,exclude:y||p,productType:x});O.useEffect(()=>{window.scroll(0,0)},[Object.entries(g).flat().join(",")]);const B=k||(i?.results?.length??0)<1&&!x;return s.jsxs("div",{className:`${!e&&"min-h-screen"} bg-gray-50 relative`,children:[s.jsxs("div",{className:"mx-auto sm:px-8 py-2 grid grid-cols-1 md:grid-cols-4 gap-6 w-full h-auto",children:[m&&s.jsx("aside",{className:"hidden md:flex md:flex-col md:col-span-1 md:sticky md:top-36 md:bottom-36 space-y-4 self-start ",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-4 flex flex-col space-y-4",children:[s.jsx(A,{filters:g,setFilters:P,category:r||a,subcategory:o||t,brand:l||u,slug:n||""}),s.jsx(D,{sort:j,setSort:v})]})}),s.jsx("div",{className:m?"md:col-span-3":"md:col-span-4",children:$?s.jsx(V,{isNotFixed:!0,h:e?"h-[290px]":"h-[85vh]"}):B?s.jsx(Q,{}):i?.results&&i.results.length>0&&s.jsxs("main",{className:`col-span-1 ${m?"md:col-span-3":"md:col-span-4"}`,children:[c&&e&&s.jsx(U,{title:c,component:x?s.jsx(s.Fragment,{}):s.jsx(X,{buttons:[{label:"View All",onClick:()=>{const w=[a?`category=${a}`:"",p?`exclude=${p}`:""].filter(Boolean).join("&");M(`/product${w?`?${w}`:""}`)},colorClass:"bg-blue-600 text-white hover:bg-blue-700"}]})}),s.jsx(Y,{data:i?.results||[],horizontal:e,isFullDetail:F}),e?s.jsx(H,{handlePageChange:C,currentPage:b,pageSize:h,totalCount:i?.pagination?.total||0}):s.jsx(J,{handlePageChange:C,handlePageSizeChange:_,currentPage:b,pageSize:h,totalCount:i?.pagination?.total||0})]})})]}),m&&s.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50 bg-white shadow-lg border-t border-gray-200 flex justify-between items-center px-4 py-3",children:s.jsxs(s.Fragment,{children:[s.jsxs("button",{className:"flex-1 mr-2 bg-gray-100 text-gray-800 font-semibold py-2 rounded-md flex items-center justify-center gap-1",onClick:()=>S({isSort:!0}),children:[s.jsx("span",{className:"material-symbols-outlined",children:"sort"})," Sort"]}),s.jsxs("button",{className:"flex-1 bg-gray-100 text-gray-800 font-semibold py-2 rounded-md flex items-center justify-center gap-1",onClick:()=>S({isFilter:!0},{}),children:[s.jsx("span",{className:"material-symbols-outlined",children:"filter_list"})," Filter"]})]})}),s.jsx(R,{show:f?.isFilter||!1,handleClose:()=>{N({isFilter:!1})},filters:g,setFilters:P,category:r||a,subcategory:o||t,brand:l||u,slug:n||""},f?.isFilter+""),s.jsx(G,{show:f.isSort||!1,setSort:v,sort:j,handleClose:()=>N({isSort:!1})})]},[r||"",o||"",l||""].join("-"))},Y=({data:a,horizontal:t=!1,isFullDetail:c=!1})=>s.jsx("div",{className:t?"flex custom-scroll space-x-4 pb-2":"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6",children:a.map(e=>s.jsx("div",{className:t?"w-[300px] flex-shrink-0":"",children:s.jsx(I,{product:e,isFullDetail:c})},e._id))});export{ns as default};
