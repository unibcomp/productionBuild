import{r as o,d as f,j as e,i as w}from"./index.CEWEvIZy.js";import{u as j,r as P}from"./useDepositInit.DjsdbmQG.js";import"./useMutation.D-0Fvbq0.js";import"./queryToast.BqNI3b4q.js";import"./crypto.A4PgpP2Z.js";const R=()=>{const[u,r]=o.useState("â³ Navigating to payment gateway..."),[t,s]=o.useState("loading"),[x]=f(),n=x.get("payment_session_id"),{depositProcessMutation:g}=j(),{openRazorpayCheckout:p}=P(),[d,y]=o.useState(0);return o.useEffect(()=>{if(!n){s("error"),r("âŒ Payment link is invalid, expired, or already used.");return}g.mutate(n,{onSuccess:a=>{if(!a||!a.data){s("error"),r("âŒ Invalid response from server.");return}const{paymentMode:l,data:b}=a,{key:c,order_id:m,amount:i,customer:h}=b;l==="razorpay"?c&&m&&i?(y(i),p({key:c,order_id:m,amount:i,customer:h,currency:"INR"}),s("success"),r("ğŸš€ Redirecting to Razorpay...")):(s("error"),r("âŒ Missing Razorpay configuration.")):(s("error"),r(`âŒ Payment mode ${l} not supported yet.`))},onError:a=>{console.error("Deposit API Error:",a),s("error"),r("âŒ Payment link is invalid, expired, or already used.")}})},[n]),e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gradient-to-br from-gray-900 via-gray-800 to-black px-4 py-6",children:e.jsxs("div",{className:"w-full max-w-md bg-white/10 backdrop-blur-xl p-6 rounded-2xl shadow-2xl border border-white/20 text-center animate-fadeIn",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-white tracking-wide",children:"Secure Payment Processing"}),e.jsx("p",{className:"text-gray-300 text-sm",children:"Powered by Razorpay"})]}),t==="loading"&&e.jsx(w,{}),e.jsx("div",{className:`p-4 rounded-xl mt-4 text-sm font-medium transition-all duration-300
            ${t==="loading"?"bg-blue-600/20 text-blue-300 border border-blue-500/30":""}
            ${t==="success"?"bg-green-600/20 text-green-300 border border-green-500/30":""}
            ${t==="error"?"bg-red-600/20 text-red-300 border border-red-500/30":""}
          `,children:u}),t==="success"&&d>0&&e.jsxs("div",{className:"mt-6 text-gray-200",children:[e.jsx("p",{className:"text-sm mb-1",children:"Processing Payment"}),e.jsxs("p",{className:"text-3xl font-bold text-green-400",children:["â‚¹",d]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Please wait while we redirect you..."})]}),t==="error"&&e.jsx("button",{className:"mt-5 w-full py-3 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-xl transition-all shadow-lg",onClick:()=>window.history.back(),children:"ğŸ” Try Again"})]})})};export{R as default};
