import{b as c,n as u}from"./index.kHeCUqgD.js";import{u as e}from"./useMutation.tTKQ-mwc.js";import{a as l}from"./queryToast.D5cnosND.js";import{e as r}from"./crypto.B3tY5Unt.js";const w=async t=>(await u.post("https://api.unibcomp.co.in/api/v1/user/payment/pay",{payment_session_id:t})).data,f=async t=>(await c.post("/check/deposit",{payment_session_id:t})).data,z=async t=>(await u.put(`https://api.unibcomp.in/api/v1/user/deposit/update/${t}`)).data,R=async t=>(await c.post("/payment/update",t)).data,U=()=>{const t=e({mutationFn:w}),n=e({mutationFn:f}),s=e({mutationFn:z}),a=e({mutationFn:R});return{depositRequestMutation:t,depositProcessMutation:n,depositStatusUpdateMutation:s,depositUpdate2:a}},P=()=>{const{depositUpdate2:t}=U();return{openRazorpayCheckout:({key:s,order_id:a,amount:p,currency:d,customer:i})=>{if(!window.Razorpay){alert("Razorpay SDK not loaded properly.");return}const m={key:s,order_id:a,amount:p*100,currency:d||"INR",name:"UnibComp",description:"Order Payment",prefill:{name:i?.name||"",email:i?.email||"",contact:i?.contact||""},theme:{color:"#3399cc"},handler:function(o){t.mutate({order_id:a,status:"SUCCESS",payment_id:o.razorpay_payment_id,signature:o.razorpay_signature});const y=r({amount:p,orderId:a,status:"success"});window.location.replace(`/payment-status/${encodeURIComponent(y)}`)},modal:{ondismiss:function(){t.mutate({order_id:a,status:"FAILED"},l(()=>window.location.replace("/")));const o=r({amount:p,orderId:a,status:"failed"});window.location.replace(`/payment-status/${encodeURIComponent(o)}`)}}};new window.Razorpay(m).open()}}};export{P as r,U as u};
