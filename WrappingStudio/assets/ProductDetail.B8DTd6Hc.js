import{k as K,a as ee,l as Q,b as U,r as u,j as e,z as E,m as se,e as H,g as Z,R as te,d as ae,u as re,i as ie,L as V}from"./index.CEWEvIZy.js";import{u as X}from"./useModal.BZbKYXaF.js";import{u as le}from"./index.esm.r9kVo4cN.js";import{P as G}from"./PageHeadline.C-udrzfz.js";import{u as q}from"./useMutation.D-0Fvbq0.js";import{a as ne}from"./queryToast.BqNI3b4q.js";import{K as I,h as T,B as oe}from"./ButtonBar.sWoSqgnf.js";import{u as de,a as ce}from"./CarsouelSelector.a3274Z_F.js";import{a as me,u as ue}from"./useCart.CjIKx50B.js";import W from"./Product.5iOv8j3-.js";import{W as D}from"./WishlistButton.BOwnQPPE.js";import{N as ge}from"./NotDataFound.VgXO8480.js";import"./PaginationSelecctor.u8WcnQdq.js";import"./usePagination.CpB7XyoP.js";import"./proxy.DCnVAXhc.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],he=K("star",xe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],be=K("thumbs-up",pe),ye=async s=>(await U.post("/add-rating",s)).data,fe=async s=>(await U.post(`/like/${s}`)).data,je=async({productId:s,...a})=>(await U.get(`/rating-list/${s}`,a)).data;function ve({productId:s=""}){const a={...s&&{productId:s}};return ee({queryKey:["ratings",a],queryFn:()=>je(a),enabled:!!a?.productId})}function Ne(){const s=Q();return q({mutationFn:a=>ye(a),onSuccess:(a,l)=>{s.invalidateQueries({queryKey:["ratings",{productId:l.productId}]}),s.invalidateQueries({queryKey:["product",l.productId]})}})}function we(s){const a=Q();return q({mutationFn:l=>fe(l),onSuccess:(l,o)=>{const t=l._doc??l;a.setQueryData(["ratings",{productId:s}],g=>g&&{...g,ratings:g.ratings.map(n=>n._id===o?{...n,likes:t.likes??n.likes,likes_by:t.likes_by??n.likes_by}:n)})}})}function ke(s){return s??(()=>{})}const _e=()=>q({mutationFn:async s=>(await U.post("/uploads",s)).data}),Se=[1,2,3,4,5],J=({handleClose:s,isAdd:a=!0,show:l,productId:o,refetch:t})=>{const{register:g,handleSubmit:n,setValue:b,watch:x,formState:{errors:j}}=le({defaultValues:{rating:5,comment:"",productId:o??void 0,title:"",images:null}});u.useEffect(()=>{o&&b("productId",o)},[o,b]);const S=x("rating")??5,h=Ne(),C=_e(),[y,k]=u.useState([]),m=u.useRef(null),r=async p=>{const P=Array.from(p.target.files??[]).filter(c=>c.type.startsWith("image/")),R=6,F=5,B=Math.max(0,R-y.length),d=P.slice(0,B).filter(c=>c.size<=F*1024*1024);if(!d.length){m.current&&(m.current.value="");return}const N=new FormData;d.forEach(c=>{N.append("images",c)});try{const c=await C.mutateAsync(N);if(c?.data){const z=c.data.map(i=>i.url);k(i=>[...i,...z]),E.success("Images uploaded successfully ðŸ‘")}}catch(c){console.error("Upload error:",c);const z=C.error?.response?.data?.message||c?.response?.data?.message||c?.message||"Failed to upload images. Please try again.";E.error(z)}finally{m.current&&(m.current.value="")}},$=p=>{k(P=>P.filter((R,F)=>F!==p))},A=async p=>{h.mutate({productId:p.productId,rating:p.rating,title:p.title??void 0,description:p.comment??void 0,images:y},ne(ke(t),s))},_=C.isPending,f=h.isPending,v=_||f;return e.jsx(I,{appear:!0,show:l,as:u.Fragment,children:e.jsxs(T,{as:"div",className:"relative z-50",onClose:s,children:[e.jsx(I.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm transition-opacity"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(I.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(T.Panel,{className:"w-full max-w-lg transform overflow-hidden rounded-2xl bg-white p-6 shadow-xl transition-all border border-gray-200",children:[e.jsx(G,{title:a?"Add Rating":"Edit Rating"}),e.jsxs("form",{onSubmit:n(A),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating *"}),e.jsx("div",{className:"flex items-center gap-2",children:Se.map(p=>e.jsx("button",{type:"button",onClick:()=>b("rating",p),className:`p-2 rounded-md transition ${(S??0)>=p?"bg-yellow-400 text-white":"bg-gray-100 text-gray-600"}`,"aria-label":`${p} star`,disabled:v,children:"â˜…"},p))}),j.rating?.message&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.rating?.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Comment"}),e.jsx("textarea",{placeholder:"Write an optional comment...",...g("comment"),className:"mt-1 block w-full rounded-lg border border-gray-300 shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500",rows:4,disabled:v})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title (optional)"}),e.jsx("input",{...g("title"),type:"text",placeholder:"Short title (e.g. 'Great quality')",className:"mt-1 block w-full rounded-lg border border-gray-300 shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500",disabled:v})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Images (optional)"}),e.jsx("input",{ref:m,type:"file",accept:"image/*",multiple:!0,onChange:r,className:"block",disabled:v}),_&&e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Uploadingâ€¦"}),y.length>0&&e.jsx("div",{className:"mt-4 grid grid-cols-3 gap-3",children:y.map((p,P)=>e.jsxs("div",{className:"relative group rounded-lg overflow-hidden border border-gray-200",children:[e.jsx("img",{src:p,alt:`Selected ${P+1}`,className:"h-24 w-full object-cover"}),e.jsx("button",{type:"button",onClick:()=>$(P),className:"absolute top-1 right-1 h-6 w-6 flex items-center justify-center rounded-full bg-black/70 text-white text-sm opacity-90 group-hover:opacity-100","aria-label":`Remove image ${P+1}`,disabled:v,title:"Remove",children:"Ã—"})]},`${p}-${P}`))})]}),e.jsx("input",{type:"hidden",...g("productId")}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition",disabled:v,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",disabled:v,children:f?"Saving...":a?"Submit":"Save"})]})]})]})})})})]})})},Ce=(s,a)=>{const{_id:l}=se(),o=H(),{data:t,isLoading:g,refetch:n}=de(String(l)),{addIteamMutation:b}=me(),{refetch:x}=ue({type:"through_cart"}),[j,S]=u.useState(null),[h,C]=u.useState(!1),[y,k]=u.useState({x:0,y:0}),m=t,r=m?.productVariant??[],[$,A]=u.useState(s||""),[_,f]=u.useState(a||"");u.useEffect(()=>{(r.length>0||s)&&A(s||r[0]._id)},[r,s]);const v=u.useMemo(()=>r.find(d=>d._id===$),[$,r,s]);u.useEffect(()=>{if(v){const d=v.sizes||[];_?d.length>0&&!d.some(N=>N._id===_)&&f(d[0]?._id??""):f(a||(d[0]?._id??""))}},[v,a]);const p=d=>{A(d);const N=r.find(c=>c._id===d);N?.sizes?.length?f(N.sizes[0]._id):f(""),N?.images?.length&&S(N.images[0])},P=d=>{f(d)},R=d=>{const{left:N,top:c,width:z,height:i}=d.currentTarget.getBoundingClientRect(),w=(d.clientX-N)/z*100-20,M=(d.clientY-c)/i*100-20;k({x:w,y:M})},F=d=>{if(!Z()){o("/login");return}b.mutate(d,{onSuccess:N=>{x();const{data:c}=N;if(c.type==="direct"){o(`/checkout?cart_id=${c._id}&&type=direct`);return}E.success("Item added to cart!")},onError:()=>{E.error("Failed to add item to cart.")}})},B=v?.images?.length?v.images:m?.images||["/placeholder.png"];return{product:m,isLoading:g,refetchProduct:n,selectedImg:j,setSelectedImg:S,zoom:h,setZoom:C,mousePos:y,handleMouseMove:R,selectedVariantId:$,selectedVariant:v,selectedSizeId:_,handleColorSelect:p,handleSizeSelect:P,handleAddtoCart:F,addIteamMutation:b,images:B}},L=({label:s,value:a})=>e.jsxs("div",{className:"grid grid-cols-2 gap-2 py-1 border-b border-gray-100 last:border-b-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-600",children:s}),e.jsx("div",{className:"text-sm text-gray-900 break-words",children:a??"â€”"})]}),Ae=({manufacturingInfo:s,attributes:a=[],className:l=""})=>{const[o,t]=u.useState(!0),g=()=>!a||a.length===0?null:a.map(n=>{const b=Array.isArray(n.value)?n.value.join(", "):String(n.value);return e.jsx(L,{label:n.name,value:b},n.name)});return e.jsxs("div",{className:`mt-4 rounded-lg bg-white border border-gray-200 shadow-sm overflow-hidden ${l}`,children:[e.jsxs("button",{type:"button",onClick:()=>t(n=>!n),"aria-expanded":o,className:"w-full px-4 py-2 flex items-center justify-between text-left bg-gray-50 hover:bg-gray-100 focus:outline-none transition-all duration-200",children:[e.jsx("h3",{className:"text-md font-semibold text-gray-800",children:"Manufacturing Details"}),e.jsx("span",{className:"text-gray-600",children:o?"â–¾":"â–¸"})]}),o&&e.jsxs("div",{className:"px-4 py-3",children:[s?e.jsxs("div",{className:"bg-white p-2",children:[e.jsx(L,{label:"Generic Name",value:s.genericName}),e.jsx(L,{label:"Country of Origin",value:s.countryOfOrigin}),e.jsx(L,{label:"Manufacturer",value:s.manufacturer?`${s.manufacturer.name}${s.manufacturer.address?`, ${s.manufacturer.address}`:""}${s.manufacturer.contact?` (${s.manufacturer.contact})`:""}`:"â€”"}),s.importer&&e.jsx(L,{label:"Importer",value:`${s.importer.name}${s.importer.address?`, ${s.importer.address}`:""}${s.importer.contact?` (${s.importer.contact})`:""}`}),s.packer&&e.jsx(L,{label:"Packer",value:`${s.packer.name}${s.packer.address?`, ${s.packer.address}`:""}${s.packer.contact?` (${s.packer.contact})`:""}`})]}):null,a&&a.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Technical Specifications"}),e.jsx("div",{className:"bg-white p-2",children:g()})]}),!s&&(!a||a.length===0)&&e.jsx("div",{className:"text-sm text-gray-500 text-center py-2",children:"No specifications available for this product."})]})]})},Pe=({label:s,value:a})=>e.jsxs("div",{className:"grid grid-cols-2 gap-2 py-1 border-b border-gray-100 last:border-b-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-600",children:s}),e.jsx("div",{className:"text-sm text-gray-900 break-words",children:a??"â€”"})]}),$e=({attributes:s=[],productVariants:a=[],selectedVariantId:l,selectedSizeId:o,className:t=""})=>{const[g,n]=u.useState(!0),b=u.useMemo(()=>{const x=[];if(Array.isArray(s))for(const j of s)x.push({name:j.name,value:j.value});if(Array.isArray(a)&&a.length>0){const j=a.find(h=>h._id===l)??a[0],S=j?.sizes?.find(h=>h._id===o)??j?.sizes?.[0];if(S&&Array.isArray(S.attributes))for(const h of S.attributes){const C=x.find(y=>y.name===h.name);C?C.value=h.value:x.push({name:h.name,value:h.value})}}return x},[s,a,l,o]);return e.jsxs("div",{className:`mt-4 rounded-lg bg-white border border-gray-200 shadow-sm overflow-hidden ${t}`,children:[e.jsxs("button",{type:"button",onClick:()=>n(x=>!x),"aria-expanded":g,className:"w-full px-4 py-2 flex items-center justify-between text-left bg-gray-50 hover:bg-gray-100 focus:outline-none transition-all duration-200",children:[e.jsx("h3",{className:"text-md font-semibold text-gray-800",children:"Specifications"}),e.jsx("span",{className:"text-gray-600",children:g?"â–¾":"â–¸"})]}),g&&e.jsx("div",{className:"px-4 py-3",children:b&&b.length>0?e.jsx("div",{className:"bg-white p-2",children:b.map(x=>{const j=Array.isArray(x.value)?x.value.join(", "):String(x.value);return e.jsx(Pe,{label:x.name,value:j},x.name)})}):e.jsx("div",{className:"text-sm text-gray-500 text-center py-2",children:"No specifications available for this product."})})]})},Me=({show:s,onClose:a,imageUrl:l})=>e.jsx(I,{appear:!0,show:s,as:u.Fragment,children:e.jsxs(T,{as:"div",className:"relative z-50",onClose:a,children:[e.jsx(I.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsx(I.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(T.Panel,{className:"relative max-w-3xl w-full rounded-lg bg-black overflow-hidden",children:[l?e.jsx("img",{src:l,alt:"Preview",className:"w-full h-auto object-contain"}):e.jsx("div",{className:"p-8 text-center text-white",children:"No image found"}),e.jsx("button",{onClick:a,className:"absolute top-3 right-3 text-white text-lg bg-black/60 rounded-full px-3 py-1 hover:bg-black/80 transition",children:"âœ•"})]})})})]})}),Re=()=>{try{const s=localStorage.getItem("token");if(!s)return null;const a=JSON.parse(atob(s.split(".")[1]||""));return a?.id||a?._id||a?.userId||null}catch{return null}},Fe=(s,a)=>{const l=Array.isArray(s.likes_by)?s.likes_by:[],o=typeof s.likes=="number"?s.likes:l.length,t=!!(a&&l.includes(a));return{count:o,likedByMe:t}},ze=({data:s,isError:a,isLoading:l,product_id:o})=>{const{openModal:t,closeModal:g,isModalOpen:n,data:b}=X(),x=H(),[j,S]=te.useState(null),{mutate:h}=we(o),C=Re(),y=r=>{r&&j!==r&&(S(r),h(r,{onSettled:()=>{S(null)},onError:$=>{console.error("Failed to like rating:",$),alert("Failed to like the rating. Please try again.")}}))},k=r=>{t(n,{imageUrl:r})},m=()=>{t(n,{imageUrl:null})};return e.jsxs("div",{className:"mt-6",children:[e.jsx(G,{title:"Review",component:e.jsx(oe,{buttons:[{label:"Add",colorClass:"bg-blue-500",onClick:()=>Z()?t({isRating:!0}):x("/login")}]})}),l?e.jsx("p",{children:"Loading ratings..."}):a?e.jsx("p",{className:"text-red-500",children:"Failed to load ratings"}):s?.ratings?.length?e.jsx("div",{className:"space-y-4 mt-4 max-h-[40vh] custom-scroll",children:s?.ratings?.map(r=>{const{count:$,likedByMe:A}=Fe(r,C);return e.jsxs("div",{className:"p-4 border rounded-md bg-white shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"font-medium",children:r.title||"Untitled"}),e.jsx("div",{className:"flex items-center text-yellow-400",children:Array.from({length:5}).map((_,f)=>e.jsx(he,{size:16,fill:f<(r.rating??0)?"currentColor":"none"},f))})]}),e.jsx("div",{className:"text-sm text-gray-500",children:r.user?.name??"Anonymous"})]}),e.jsx("div",{className:"mt-2 text-gray-700",children:r.description??r.comment??""}),Array.isArray(r.images)&&r.images.length>0&&e.jsx("div",{className:"mt-3 flex gap-2 flex-wrap",children:r.images.map((_,f)=>e.jsx("button",{type:"button",onClick:()=>k(_),className:"block w-16 h-16 border rounded-md overflow-hidden bg-gray-50 focus:outline-none",title:"Click to view",children:e.jsx("img",{src:_,alt:`review-image-${f+1}`,className:"w-full h-full object-cover",loading:"lazy"})},f))}),e.jsxs("div",{className:"flex items-center justify-between mt-3 text-sm text-gray-500",children:[e.jsx("div",{children:r.createdAt?new Date(r.createdAt).toLocaleDateString():""}),e.jsxs("button",{onClick:()=>y(r._id),disabled:j===r._id,className:"flex items-center gap-1 text-gray-600 hover:text-blue-600 transition",children:[e.jsx(be,{size:16,className:A?"text-white":"text-blue-600",fill:A?"currentColor":"none"}),$]})]})]},r._id)})}):e.jsx("p",{className:"text-gray-500",children:"No ratings yet. Be the first to review!"}),e.jsx(J,{show:n?.isRating||!1,handleClose:()=>g({isRating:!1}),isAdd:!0,productId:o}),e.jsx(Me,{show:!!b?.imageUrl,onClose:m,imageUrl:b?.imageUrl})]})},Xe=()=>{const[s]=ae(),a=s.get("variant"),l=s.get("size"),{user:o}=re(),{product:t,isLoading:g,refetchProduct:n,selectedImg:b,setSelectedImg:x,zoom:j,setZoom:S,mousePos:h,handleMouseMove:C,selectedVariantId:y,selectedVariant:k,selectedSizeId:m,handleColorSelect:r,handleSizeSelect:$,handleAddtoCart:A,addIteamMutation:_,images:f}=Ce(a,l),{openModal:v,closeModal:p,isModalOpen:P}=X(),{data:R,isLoading:F,isError:B}=ve({productId:t?._id||""}),d=R?.ratings&&R?.ratings.length>0,{selectedPrice:N,originalPrice:c,discount:z}=u.useMemo(()=>{const i=k?.sizes.find(Y=>Y._id===m),w=i?.sell_price||0,M=i?.original_price||0,O=M?Math.round((M-w)/M*100):0;return{selectedPrice:w,originalPrice:M,discount:O}},[k,m]);return g?e.jsx(ie,{isNotFixed:!0,h:"h-[85vh]"}):t?e.jsx("div",{className:"p-2 sm:p-4 bg-gray-50 min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-8",children:[e.jsx("div",{className:"md:col-span-6 space-y-4 min-w-0",children:e.jsxs("div",{className:"md:sticky md:top-32 md:self-start",children:[e.jsx("div",{className:"md:hidden w-full overflow-x-auto flex gap-3 snap-x snap-mandatory",children:f.map((i,w)=>e.jsxs("div",{className:"relative w-full flex-shrink-0 h-64",children:[e.jsx("img",{src:i,alt:t.name||"Product image",className:"w-full max-w-full h-64 object-contain rounded-lg border border-gray-200 bg-white snap-center shadow-sm"}),e.jsx(D,{productId:t._id,variantId:y,isInWishlist:t.isInWishlist,className:"absolute top-2 right-2"})]},w))}),e.jsxs("div",{className:"hidden md:flex gap-4 min-w-0",children:[e.jsx("div",{className:"flex flex-col gap-2 overflow-hidden max-h-[70vh] pr-2 min-w-0",children:f.map((i,w)=>e.jsx("div",{className:`w-20 h-20 rounded-md border cursor-pointer transition-all ${b===i?"border-blue-600 ring-2 ring-blue-100 scale-105":"border-gray-200 hover:border-gray-300 hover:scale-105"}`,onClick:()=>x(i),children:e.jsx("img",{src:i,alt:`${t.name||"Product"} image ${w+1}`,className:"w-full h-full object-cover rounded-md"})},w))}),e.jsxs("div",{className:"w-full h-[50vh] md:h-[60vh] lg:h-[73vh]",children:[e.jsxs("div",{className:"relative flex-1 overflow-hidden rounded-xl border border-gray-200 bg-white shadow-md min-w-0 max-w-full h-[45vh] md:h-[55vh] lg:h-[65vh]",children:[e.jsx(D,{productId:t._id,variantId:y,isInWishlist:t.isInWishlist,className:"absolute top-3 right-3 z-20"}),e.jsx("img",{onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1),onMouseMove:C,src:b||f[0],alt:t.name||"Product",className:"w-full h-full object-contain"})]}),m&&k&&e.jsxs("div",{className:"hidden md:flex gap-4 mt-2",children:[e.jsx("button",{disabled:_.isPending,onClick:()=>A({product_id:t._id,size_Id:m,variant_id:y,type:"through_cart"}),className:"flex-1 py-3 bg-yellow-400 hover:bg-yellow-500 rounded-lg font-semibold transition disabled:opacity-70",children:"Add to Cart"}),e.jsx("button",{disabled:_.isPending,onClick:()=>A({product_id:t._id,size_Id:m,variant_id:y,type:"direct"}),className:"flex-1 py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-semibold transition disabled:opacity-70",children:"Buy Now"})]})]})]})]})}),e.jsxs("div",{className:"md:col-span-6 flex flex-col space-y-4",children:[e.jsxs("div",{className:"text-sm text-gray-500 space-x-1",children:[e.jsx(V,{to:"/",className:"hover:underline text-gray-500",children:"Home"}),e.jsx("span",{children:"â†’"}),e.jsx(V,{to:"/product",className:"hover:underline text-gray-500",children:"Products"}),e.jsx("span",{children:"â†’"}),t.category?.name&&e.jsxs(e.Fragment,{children:[e.jsx(V,{to:`/product?category_id=${t.category._id}`,className:"hover:underline text-gray-500",children:t.category.name}),e.jsx("span",{children:"â†’"})]}),e.jsx("span",{className:"text-gray-800 font-medium",children:t.name})]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("img",{src:ce,alt:"Assured Logo",className:"w-5 h-5 object-contain mix-blend-multiply rounded-full"}),e.jsx("span",{className:"text-xs font-medium text-green-600",children:"Assured"})]}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsxs("p",{className:"text-sm text-gray-700 truncate",children:[t.category?.name," â€“ ",t.brand?.name]})]}),t?.ratings?.average>0&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsxs("div",{className:"flex items-center bg-green-600 text-white px-1.5 py-0.5 rounded-sm font-semibold",children:[e.jsx("span",{children:t?.ratings?.average.toFixed(1)}),e.jsx("span",{className:"material-symbols-outlined text-xs ml-1",children:"star"})]}),e.jsxs("span",{className:"text-gray-500 font-medium",children:[t?.ratings?.count," Ratings"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-4xl font-bold text-green-700",children:["â‚¹",N.toLocaleString("en-IN")]}),c>N&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-xl line-through text-gray-500",children:["â‚¹",c.toLocaleString("en-IN")]}),e.jsxs("span",{className:"bg-red-100 text-red-800 text-xs font-semibold px-2.5 py-0.5 rounded",children:[z,"% off"]})]})]}),t.offers?.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Available offers"}),e.jsx("ul",{className:"text-xs space-y-1",children:t.offers.map((i,w)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-600 text-lg",children:"âœ”"}),e.jsx("span",{children:i})]},w))}),t.offers.length>3&&e.jsxs("button",{className:"text-blue-600 text-xs mt-1",children:["View ",t.offers.length-3," more offers"]})]}),k&&k.sizes.length>0&&e.jsx("ul",{className:"list-disc list-inside text-sm text-gray-700 space-y-1",children:(k.sizes[0].highlights||[]).map((i,w)=>e.jsx("li",{children:i},w))}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800 mb-2",children:"Color"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:t.productVariant.map(i=>e.jsx("button",{onClick:()=>r(i._id),className:`px-4 py-2 rounded-full border transition-all ${y===i._id?"border-blue-600 bg-blue-100 text-blue-800 shadow-sm":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"} text-sm font-medium`,children:i.color},i._id))})]}),k&&e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800 mb-2",children:"Size"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:k.sizes.map(i=>{const w=i.attributes.find(O=>O.name==="Storage"),M=w?w.value:null;return e.jsxs("button",{onClick:()=>$(i._id),className:`px-4 py-2 rounded-full border transition-all ${m===i._id?"border-green-600 bg-green-100 text-green-800 shadow-sm":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"} text-sm font-medium`,children:[i.size," ",M&&`/ ${M}`]},i._id)})})]}),e.jsx($e,{attributes:t.attributes,productVariants:t.productVariant,selectedVariantId:y,selectedSizeId:m}),e.jsx(Ae,{manufacturingInfo:t.manufacturingInfo,attributes:t.attributes}),o&&!d&&e.jsx("button",{onClick:()=>v({isRating:!0}),className:"px-6 py-3 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition shadow-md",children:"Rate this product"}),e.jsx(ze,{data:R,isError:B,isLoading:F,product_id:t._id})]})]}),j&&e.jsx("div",{className:"fixed right-24 top-28 z-50 w-[600px] h-[450px] overflow-hidden rounded-xl border-2 border-gray-200 bg-white shadow-md",children:e.jsx("img",{src:b||f[0],alt:"Zoomed view",className:"w-full h-full object-contain transition-transform duration-200 ease-out",style:{transform:`scale(2) translate(-${h.x}%, -${h.y}%)`,transformOrigin:`${h.x}% ${h.y}%`}})}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t shadow-md flex md:hidden gap-3 p-3 z-10",children:[e.jsx("button",{disabled:_.isPending,onClick:()=>A({product_id:t._id,type:"through_cart",size_Id:m,variant_id:y}),className:"flex-1 py-3 bg-yellow-400 hover:bg-yellow-500 rounded-lg font-semibold transition disabled:opacity-70",children:"Add to Cart"}),e.jsx("button",{disabled:_.isPending,onClick:()=>A({product_id:t._id,type:"direct",size_Id:m,variant_id:y}),className:"flex-1 py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-semibold transition disabled:opacity-70",children:"Buy Now"})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(W,{category:t.category?._id,title:"Related Products",exclude:t._id,horizontal:!0}),e.jsx(W,{horizontal:!0,title:"Recent View",productType:"recent_look"})]}),e.jsx(J,{show:P?.isRating||!1,handleClose:()=>p({isRating:!1}),isAdd:!0,productId:t._id,refetch:n})]})}):e.jsx(ge,{message:"Product Not Found"})};export{Xe as default};
