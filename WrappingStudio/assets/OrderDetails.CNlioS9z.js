import{j as e,d as O,h as P}from"./index.BV23clpT.js";import{b as k}from"./useOrder.DqLJqKoz.js";import"./useMutation.goc4WQDO.js";const n={Placed:"Placed",Shipped:"Shipped",OutForDelivery:"Out for Delivery",Delivered:"Delivered"},N=[{key:n.Placed,label:"Order Confirmed"},{key:n.Shipped,label:"Shipped"},{key:n.OutForDelivery,label:"Out For Delivery"},{key:n.Delivered,label:"Delivered"}];function z(r){if(!r)return"";try{return new Date(r).toLocaleDateString()}catch{return r}}const _=({currentStatus:r=n.Placed,timestamps:h={},size:c="normal"})=>{const p=String(r),i=N.findIndex(a=>a.key===p),u=c==="small"?"w-6 h-6":"w-8 h-8";return e.jsx("div",{className:"flex items-center w-full",children:N.map((a,l)=>{const d=l<i,m=l===i;return e.jsxs("div",{className:"flex-1 flex flex-col items-center relative",children:[e.jsxs("div",{className:"flex items-center w-full",children:[l!==0&&e.jsx("div",{className:`h-1 flex-1 ${d?"bg-indigo-500":"bg-gray-200"}`}),e.jsx("div",{className:`rounded-full border-2 ${u} flex items-center justify-center z-10 ${d?"bg-indigo-500 border-indigo-500 text-white":m?"border-indigo-500 bg-white text-indigo-500":"bg-white border-gray-300 text-gray-300"}`,children:d&&e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 00-1.414-1.414L8 11.172 4.707 7.879a1 1 0 00-1.414 1.414l4 4a1 1 0 001.414 0l8-8z",clipRule:"evenodd"})})}),l!==N.length-1&&e.jsx("div",{className:`h-1 flex-1 ${l<i?"bg-indigo-500":"bg-gray-200"}`})]}),e.jsxs("div",{className:"mt-1 text-center",children:[e.jsx("div",{className:`${d?"text-gray-800 font-semibold text-xs":m?"text-indigo-600 font-semibold text-xs":"text-gray-400 text-xs"}`,children:a.label}),e.jsx("div",{className:"text-gray-400 text-[10px] mt-1",children:z(h[a.key])})]})]},a.key)})})},C=()=>{const[r]=O(),h=P(),c=r.get("order_id")??"",p=r.get("item_id")??"",{data:i,isLoading:u,isError:a,error:l}=k({orderId:c,item_id:p,orderStatus:""});if(!c)return e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Missing order id"}),e.jsx("p",{className:"text-sm text-gray-600",children:"This page needs order_id in the query string."}),e.jsx("button",{onClick:()=>h("/"),className:"mt-3 px-3 py-2 bg-blue-600 text-white rounded",children:"Back to orders"})]});if(u)return e.jsx("div",{className:"flex justify-center items-center h-40 text-gray-500",children:"Loading order details..."});if(a)return e.jsxs("div",{className:"p-4 bg-red-100 text-red-700 rounded-lg",children:["Failed to load order: ",l?.message??"Unknown error"]});const d=i?.result,{_id:m,orderStatus:j,paymentStatus:S,paymentMethod:f,transaction_id:D,totalAmount:y,shippingAddress:t,item:b=[],refundAmount:v,refundStatus:w,priceDetails:g={},timeline:o=[]}=d;return e.jsxs("div",{className:"max-w-5xl mx-auto bg-gray-50 p-6 space-y-6",children:[v&&e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 border",children:[e.jsxs("h2",{className:"text-lg font-semibold",children:["Total refund - â‚¹",v]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Refund was added to your ",f," account."," ",e.jsx("span",{className:`font-medium ${w==="Completed"?"text-green-600":"text-yellow-600"}`,children:w})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 border space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Order Details"}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Order ID:"})," ",m]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Status:"})," ",e.jsx("span",{className:`px-2 py-1 rounded text-sm ${j==="Cancelled"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:j})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Payment:"})," ",S," (",f,")"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Transaction ID:"})," ",D]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Total:"})," â‚¹",y]})]}),e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 border space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Items"}),b.length?b.map(s=>e.jsxs("div",{className:"flex gap-4 border rounded-lg p-3",children:[e.jsx("img",{src:s.image||"/placeholder.png",alt:s.name,className:"w-20 h-20 object-cover rounded"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.color?`${s.color} - `:"",s.size?.size," ",s.size?.sizeName]}),e.jsxs("p",{className:"text-sm",children:["Price: ",e.jsxs("span",{className:"line-through text-gray-500",children:["â‚¹",s.size?.original_price]})," ",e.jsxs("span",{className:"font-medium text-green-600 ml-1",children:["â‚¹",s.size?.sell_price]})]}),e.jsxs("p",{className:"text-sm",children:["Quantity: ",s.quantity??1]}),e.jsxs("p",{className:"font-medium",children:["Total: â‚¹",s.total]})]})]},s._id)):e.jsx("p",{children:"No items found in this order."}),o.length>0&&e.jsx("div",{className:"mt-6",children:e.jsx(_,{currentStatus:j,timestamps:o.reduce((s,x)=>(s[x.status]=x.date,s),{}),size:"normal"})})]}),o.length>0&&e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 border space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Order Updates"}),e.jsx("div",{className:"space-y-3",children:o.map((s,x)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-4 h-4 mt-1 rounded-full ${s.status==="Cancelled"?"bg-red-500":"bg-green-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.status}),e.jsx("p",{className:"text-sm text-gray-600",children:s.date})]})]},x))})]})]}),e.jsxs("div",{className:"space-y-6",children:[t&&e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 border",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Delivery details"}),e.jsx("p",{className:"font-medium",children:t.name}),e.jsxs("p",{children:[t.addressLine1,", ",t.addressLine2]}),e.jsxs("p",{children:[t.city,", ",t.state," - ",t.postalCode]}),e.jsx("p",{children:t.country}),e.jsxs("p",{className:"text-sm mt-2",children:["ðŸ“ž ",t.phone]})]}),e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 border space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Price details"}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Listing price"}),e.jsxs("span",{children:["â‚¹",g?.listingPrice||0]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Selling price"}),e.jsxs("span",{children:["â‚¹",g?.sellingPrice||0]})]}),e.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{children:["-â‚¹",g?.discount||0]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Total amount"}),e.jsxs("span",{children:["â‚¹",y]})]})]})]})]})]})};export{C as default};
