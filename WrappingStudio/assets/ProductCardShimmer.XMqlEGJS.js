import{a as N,b as w,j as e,L as _,r as m}from"./index.B_APUxUE.js";import{W as k}from"./WishlistButton.C_l2MG2i.js";import{K as g,h as j}from"./dialog.D5BAZoAN.js";const T="/assets/assured.DZu9WNCG.jpg",S=async s=>{const{data:a}=await w.get("/get-product",{params:s});return a},P=async s=>{const{data:a}=await w.get(`/product-details/${s}`);return a},E=({category:s,subcategory:a,brand:t,_id:r,pageSize:l=10,pageNumber:d=1,sort:n,slug:i,exclude:o,size:x=[],colour:u=[],productType:b,offer:v})=>{const f={pageSize:l,pageNumber:d,...s&&{category:s},...a&&{subcategory:a},...t&&{brand:t},...r&&{_id:r},...n&&{sort:n},...i&&{slug:i},...o&&{exclude:o},...x.length>0&&{size:x},...u.length>0&&{colour:u},...b&&{productType:b},...v&&{offer:v}};return N({queryKey:["products",s??"",a??"",t??"",d,l,n??"",i??"",o??"",b??"",v??"",x.join(","),u.join(",")],queryFn:()=>S(f),enabled:!0,staleTime:1e3*60*5,refetchOnWindowFocus:!1})},O=s=>N({queryKey:["product",s],queryFn:()=>P(s),enabled:!!s,staleTime:1e3*60*5}),H=({product:s,isFullDetail:a})=>{const t=s.variant?.images?.[0],r=`/product/detail/${s._id}?variant=${s.variant?._id}&size=${s.variant?.size?._id}`,l=s?.name?.length>60?`${s.name.slice(0,57)}...`:s?.name,d=Number(s?.variant?.size?.sell_price||0),n=Number(s?.variant?.size?.original_price||0),i=n>d?Math.round((n-d)/n*100):0;return e.jsxs("div",{className:"relative flex flex-col h-full border border-gray-200 bg-white shadow-sm hover:shadow-md hover:border-gray-300 transition-all duration-200 overflow-hidden group",children:[e.jsx("div",{className:"absolute top-2 right-2 z-10",children:e.jsx(k,{productId:s._id,variantId:s.variant?._id,isInWishlist:s.isInWishlist})}),e.jsxs(_,{to:r,className:"flex flex-col flex-grow p-3 relative",children:[i>0&&e.jsxs("div",{className:"absolute top-4 left-4 z-10 bg-red-500 text-white text-xs font-semibold px-2 py-1 rounded",children:[i,"% OFF"]}),t?e.jsx("img",{src:t,alt:l,loading:"lazy",className:"w-full h-44 object-contain rounded-lg transition-transform duration-300 group-hover:scale-105"}):e.jsx("div",{className:"w-full h-44 bg-gray-100 flex items-center justify-center rounded-lg text-gray-400 text-sm",children:"No Image"}),e.jsxs("div",{className:"mt-3 flex flex-col flex-grow justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1 flex-col",children:[e.jsx("img",{src:T,alt:"Assured Logo",className:"w-5 h-5 object-contain mix-blend-multiply rounded-full"}),e.jsx("i",{className:"text-xs font-medium text-green-600",children:"Assured"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 truncate max-w-[160px]",title:s?.name,children:s?.name}),e.jsx("p",{className:"text-xs text-gray-500 font-medium truncate",children:s?.brand?.name})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("p",{className:"text-base font-bold text-gray-900",children:["₹ ",d.toFixed(2)]}),i>0&&e.jsxs("p",{className:"text-gray-400 text-xs line-through",children:["₹ ",n.toFixed(2)]})]}),i>0&&e.jsxs("p",{className:"text-xs text-green-600 font-medium mt-0.5",children:["You save ₹ ",(n-d).toFixed(2)]})]}),s?.ratings?.average>0&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm mt-2",children:[e.jsxs("div",{className:"flex items-center bg-green-600 text-white px-2 py-0.5 rounded-md font-semibold",children:[e.jsx("span",{children:s.ratings.average.toFixed(1)}),e.jsx("span",{className:"material-symbols-outlined text-xs ml-1",children:"star"})]}),e.jsxs("span",{className:"text-gray-500 font-medium",children:[s?.ratings?.count||0," Ratings"]})]}),a&&e.jsx("div",{className:"mt-3 border-t border-gray-100 pt-2",children:e.jsx("ul",{className:"list-disc list-inside space-y-1 text-gray-700 text-xs",children:s?.variant?.size?.highlights?.map((o,x)=>e.jsx("li",{className:"truncate",title:o,children:o},x))})})]})]})]})},R=()=>{const[s,a]=m.useState({}),[t,r]=m.useState("relevance");return{filters:s,setFilters:a,sorts:t,setSorts:r}},q=async s=>{const{data:a}=await w.get("/filters",{params:s});return a},z=({category:s="",subcategory:a="",brand:t="",slug:r=""})=>{const l={...s&&{category:s},...a&&{subcategory:a},...t&&{brand:t},...r&&{slug:r}};return N({queryKey:["filters",l],queryFn:()=>q(l),staleTime:300*1e3})},I=()=>e.jsxs("div",{className:"space-y-6 animate-pulse",children:[e.jsx("div",{className:"h-5 w-32 bg-gray-200 rounded shimmer"}),Array.from({length:6}).map((s,a)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-200 rounded shimmer"}),e.jsx("div",{className:"h-4 w-32 bg-gray-200 rounded shimmer"})]},a)),e.jsx("div",{className:"h-px bg-gray-200 my-4"}),e.jsx("div",{className:"h-5 w-28 bg-gray-200 rounded shimmer"}),Array.from({length:5}).map((s,a)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-200 rounded shimmer"}),e.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded shimmer"})]},a)),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("div",{className:"h-5 w-24 bg-gray-200 rounded shimmer"}),e.jsx("div",{className:"h-2 w-full bg-gray-200 rounded shimmer"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"h-4 w-10 bg-gray-200 rounded shimmer"}),e.jsx("div",{className:"h-4 w-10 bg-gray-200 rounded shimmer"})]})]})]}),L=({filters:s,setFilters:a,isMobile:t=!1,category:r,subcategory:l,brand:d,handleClose:n,slug:i})=>{const[o,x]=m.useState({}),{data:u,isLoading:b}=z({category:r,subcategory:l,brand:d,slug:i});m.useEffect(()=>a({}),[d]);const v=c=>x(h=>({...h,[c]:!h[c]})),f=(c,h)=>{h&&(a(p=>{const y=p[c]||[],F=y.includes(h)?y.filter(C=>C!==h):[...y,h];return{...p,[c]:F}}),n?.())};return b?e.jsx("div",{className:"p-3 max-h-[80vh] w-64 bg-white rounded-lg shadow-md",children:e.jsx(I,{})}):e.jsxs("div",{className:`p-3 space-y-2 ${t?"":"border-b border-gray-200"} max-h-[80vh] w-64 overflow-y-auto custom-scroll bg-white rounded-lg shadow-md`,children:[!t&&e.jsx("h2",{className:"text-md font-semibold mb-2 border-b pb-1 text-gray-800",children:"Filters"}),u?.results?.length?u.results.map(c=>e.jsx($,{label:K(c.name),queryName:c.queryName,items:c.value||[],open:o[c.queryName]||!1,onToggle:()=>v(c.queryName),filters:s,onFilterToggle:f},c.queryName)):e.jsx("p",{className:"text-sm text-gray-500 italic",children:"No filters available."})]})},$=({label:s,queryName:a,items:t,open:r,onToggle:l,filters:d,onFilterToggle:n})=>e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between items-center font-medium mb-1 px-2 py-1 border rounded-md cursor-pointer hover:bg-gray-100",onClick:l,role:"button",tabIndex:0,onKeyDown:i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),l())},children:[s,e.jsx("span",{className:"material-symbols-outlined text-sm",children:r?"expand_more":"arrow_forward_ios"})]}),r&&e.jsx("div",{className:"pl-3 max-h-40 overflow-auto custom-scroll",children:t.map(i=>{const o=i._id||i.name||"",x=d[a]?.includes(o)||!1;return e.jsxs("label",{className:"flex items-center mb-1 cursor-pointer text-sm",children:[e.jsx("input",{type:"checkbox",className:"mr-2",checked:x,onChange:()=>n(a,o)}),i.name]},o)})})]}),K=s=>s.charAt(0).toUpperCase()+s.slice(1),W=({close:s,sort:a,setSort:t})=>{const r=[{label:"Relevance",value:"relevance"},{label:"Price: Low to High",value:"lowToHigh"},{label:"Price: High to Low",value:"highToLow"}];return e.jsxs("div",{className:"p-3 space-y-2 w-64 bg-white rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-md font-semibold mb-2 border-b pb-1 text-gray-800",children:"Sort"}),r.map(l=>e.jsx("button",{onClick:()=>{t(l.value),s?.()},className:`w-full px-3 py-1 text-left rounded-md text-sm ${a===l.value?"bg-blue-100 text-blue-800":"hover:bg-gray-100"}`,children:l.label},l.value))]})},B=({show:s,filters:a,setFilters:t,handleClose:r,category:l,subcategory:d,brand:n,slug:i})=>e.jsx(g,{appear:!0,show:s,as:m.Fragment,children:e.jsxs(j,{as:"div",className:"relative z-50",onClose:r,children:[e.jsx(g.Child,{as:m.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),e.jsx("div",{className:"fixed inset-0 overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 overflow-hidden",children:e.jsx(g.Child,{as:m.Fragment,enter:"ease-in-out duration-300",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"ease-in-out duration-200",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:e.jsxs(j.Panel,{className:"pointer-events-auto absolute right-0 top-0 h-full w-80 bg-white shadow-xl overflow-y-auto flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),e.jsx("div",{className:"flex-1 p-4",children:e.jsx(L,{filters:a,setFilters:t,category:l,subcategory:d,handleClose:r,brand:n,slug:i,isMobile:!0})})]})})})})]})}),G=({show:s,handleClose:a,sort:t,setSort:r})=>e.jsx(g,{appear:!0,show:s,as:m.Fragment,children:e.jsxs(j,{as:"div",className:"relative z-50",onClose:a,children:[e.jsx(g.Child,{as:m.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),e.jsx("div",{className:"fixed inset-0 overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 overflow-hidden",children:e.jsx(g.Child,{as:m.Fragment,enter:"ease-in-out duration-300",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"ease-in-out duration-200",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:e.jsxs(j.Panel,{className:"pointer-events-auto absolute right-0 top-0 h-full w-80 bg-white shadow-xl overflow-y-auto p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Sort By"}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-800",children:"✕"})]}),e.jsx(W,{close:a,sort:t,setSort:r})]})})})})]})}),Q=({currentPage:s,handlePageChange:a,pageSize:t,totalCount:r})=>{const l=m.useMemo(()=>Math.ceil(r/t),[r,t]);return e.jsxs("div",{className:"flex items-center justify-center gap-3 mt-4",children:[e.jsx("button",{onClick:()=>a(s-1,l),disabled:s===1,className:`flex items-center justify-center w-9 h-9 rounded-full border border-gray-300 bg-white text-gray-700 \r
                   hover:bg-emerald-100 hover:text-emerald-700 \r
                   disabled:opacity-40 disabled:cursor-not-allowed transition`,children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"arrow_back_ios"})}),e.jsxs("span",{className:"text-sm text-gray-700 font-medium select-none px-3",children:[s," / ",l]}),e.jsx("button",{onClick:()=>a(s+1,l),disabled:s===l,className:`flex items-center justify-center w-9 h-9 rounded-full border border-gray-300 bg-white text-gray-700 \r
                   hover:bg-emerald-100 hover:text-emerald-700 \r
                   disabled:opacity-40 disabled:cursor-not-allowed transition`,children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"arrow_forward_ios"})})]})},U=({isFullDetail:s=!1})=>e.jsxs("div",{className:"relative flex flex-col h-full border border-gray-200 bg-white shadow-sm overflow-hidden",children:[e.jsx("div",{className:"absolute top-2 right-2 w-8 h-8 bg-gray-200 rounded-full shimmer"}),e.jsxs("div",{className:"flex flex-col flex-grow p-3 relative",children:[e.jsx("div",{className:"absolute top-4 left-4 w-16 h-5 bg-gray-200 rounded shimmer"}),e.jsx("div",{className:"w-full h-44 bg-gray-200 rounded-lg shimmer"}),e.jsxs("div",{className:"mt-3 flex flex-col flex-grow justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded-full shimmer"}),e.jsx("div",{className:"w-12 h-3 bg-gray-200 rounded shimmer"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"w-40 h-4 bg-gray-200 rounded shimmer"}),e.jsx("div",{className:"w-28 h-3 bg-gray-200 rounded shimmer"})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 h-5 bg-gray-200 rounded shimmer"}),e.jsx("div",{className:"w-16 h-4 bg-gray-200 rounded shimmer"})]}),e.jsx("div",{className:"w-24 h-3 bg-gray-200 rounded mt-2 shimmer"})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-5 bg-gray-200 rounded shimmer"}),e.jsx("div",{className:"w-20 h-4 bg-gray-200 rounded shimmer"})]}),s&&e.jsxs("div",{className:"mt-3 border-t border-gray-100 pt-2 space-y-2",children:[e.jsx("div",{className:"w-full h-3 bg-gray-200 rounded shimmer"}),e.jsx("div",{className:"w-5/6 h-3 bg-gray-200 rounded shimmer"}),e.jsx("div",{className:"w-4/6 h-3 bg-gray-200 rounded shimmer"})]})]})]})]});export{Q as C,I as F,U as P,W as S,T as a,R as b,E as c,L as d,B as e,G as f,H as g,O as u};
