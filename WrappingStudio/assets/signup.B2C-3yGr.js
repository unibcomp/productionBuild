import{e as E,u as q,r as u,j as e,L as h,z as i}from"./index.DNjfNSSq.js";import{F as U,s as C,a as T,g as A}from"./firebase.StGHOsum.js";import{u as F}from"./unbcompY.4VGBDMNV.js";import{a as L,b as z}from"./useUser.Bv01oe3G.js";import{u as G}from"./index.esm.D6hUNeUD.js";import"./useMutation.C-meR6bg.js";const r=a=>a?typeof a=="string"?a:"message"in a&&typeof a.message=="string"?a.message:null:null,B=()=>{const a=E(),{login:y}=q(),[o,g]=u.useState(!1),[m,w]=u.useState(!1),[x,j]=u.useState(null),{register:d,handleSubmit:N,setError:c,clearErrors:p,formState:{errors:s}}=G(),f=L(),v=z(),P=async l=>{if(!l.email&&!l.mobile){c("email",{type:"manual",message:"Email or Mobile is required"}),c("mobile",{type:"manual",message:"Email or Mobile is required"});return}p(["email","mobile"]),f.mutate({data:l},{onSuccess:n=>{i.success(n?.message||"User created successfully!"),j(n?.result?.id||null),g(!0)},onError:n=>{i.error(n?.response?.data?.message||n?.response?.data?.error||"Something went wrong!"),g(!1)}})},S=async l=>{if(!x){i.error("User not found. Please register again.");return}if(l.password!==l.confirmPassword){c("confirmPassword",{type:"manual",message:"Passwords do not match"});return}p("confirmPassword");const n={id:x,otp:l.otp,password:l.password,confirmPassword:l.confirmPassword};try{const t=await v.mutateAsync(n);i.success(t?.message||"Account verified successfully!"),a("/login")}catch(t){const b=t?.response?.data?.error||t?.response?.data?.message||t?.message||"Verification failed";i.error(b),c("otp",{type:"manual",message:b})}},k=async()=>{try{const n=await(await C(T,A)).user.getIdToken();f.mutate({headers:{provider:"google",authorization:`Bearer ${n}`}},{onSuccess:t=>{i.success(t?.message||"Signup successful"),t?.token?(y(t),a("/")):a("/login")},onError:t=>{i.error(t?.response?.data?.message||"Google signup failed")}})}catch{i.error("Google signup cancelled")}};return e.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row",children:[e.jsxs("div",{className:"hidden md:flex md:w-1/2 bg-cover bg-center relative",style:{backgroundImage:"url(https://image3.luatvietnam.vn/uploaded/665twebp/images/original/2024/11/27/state-management-of-e-commerce-to-be-tightened_2711091334.jpg)"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-700 via-indigo-600 to-blue-500 opacity-50"}),e.jsxs("div",{className:"flex flex-col items-start justify-center w-full h-full px-12 z-10",children:[e.jsxs("h2",{className:"text-white text-4xl md:text-5xl font-extrabold mb-4 drop-shadow-lg",children:["Join ",e.jsx("span",{className:"text-yellow-400",children:"Unibcomp"})," Today!"]}),e.jsxs("p",{className:"text-white text-lg md:text-xl mb-6 drop-shadow-md",children:["Sign up and discover ",e.jsx("span",{className:"text-pink-400 font-semibold",children:"amazing products"})]}),e.jsx(h,{to:"/login",className:"bg-yellow-400 text-gray-900 font-semibold py-3 px-6 rounded-lg hover:bg-yellow-300 transition transform hover:scale-105",children:"Already a member? Login"})]})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-100 p-8",children:e.jsxs("div",{className:"bg-white shadow-2xl rounded-3xl p-10 w-full max-w-md transform hover:scale-[1.01] transition-all duration-300",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("img",{src:F,alt:"Logo",className:"w-60 mx-auto mb-3"}),e.jsx("h1",{className:"text-3xl font-extrabold text-gray-800",children:"Create Account"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Sign up to start shopping"})]}),e.jsxs("form",{onSubmit:N(o?S:P),className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Full Name"}),e.jsx("input",{type:"text",placeholder:"Enter your full name",...d("fullName",{required:"Full Name is required"}),disabled:o,className:`w-full border px-4 py-3 rounded-lg focus:outline-none focus:ring-2 shadow-sm ${o?"bg-gray-100 border-gray-300":"border-gray-300 focus:ring-blue-500"}`}),r(s.fullName)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r(s.fullName)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Mobile"}),e.jsx("input",{type:"text",placeholder:"Enter your mobile number",...d("mobile"),disabled:o,className:`w-full border px-4 py-3 rounded-lg focus:outline-none focus:ring-2 shadow-sm ${o?"bg-gray-100 border-gray-300":"border-gray-300 focus:ring-blue-500"}`}),r(s.mobile)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r(s.mobile)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Email Address"}),e.jsx("input",{type:"email",placeholder:"Enter your email",...d("email"),disabled:o,className:`w-full border px-4 py-3 rounded-lg focus:outline-none focus:ring-2 shadow-sm ${o?"bg-gray-100 border-gray-300":"border-gray-300 focus:ring-blue-500"}`}),r(s.email)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r(s.email)})]}),o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"OTP"}),e.jsx("input",{type:"text",placeholder:"Enter OTP",...d("otp",{required:"OTP is required"}),className:"w-full border border-gray-300 px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm"}),r(s.otp)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r(s.otp)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:m?"text":"password",placeholder:"Enter your password",...d("password",{required:"Password is required"}),className:"w-full border border-gray-300 px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm"}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 font-medium",onClick:()=>w(!m),children:m?"Hide":"Show"})]}),r(s.password)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r(s.password)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Confirm Password"}),e.jsx("input",{type:m?"text":"password",placeholder:"Confirm your password",...d("confirmPassword",{required:"Confirm Password is required"}),className:"w-full border border-gray-300 px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm"}),r(s.confirmPassword)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r(s.confirmPassword)})]})]}),e.jsx("button",{type:"submit",className:`w-full ${o?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"} text-white py-3 rounded-lg font-semibold transition transform hover:scale-[1.02] shadow-md`,children:o?"Verify OTP":"Sign Up"})]}),e.jsxs("button",{onClick:k,className:"w-full flex items-center justify-center gap-3 border border-gray-300 rounded-lg py-2.5 font-medium text-gray-700 hover:bg-gray-100 transition transform hover:scale-[1.02] mt-4",children:[e.jsx(U,{className:"text-xl"})," Continue with Google"]}),e.jsxs("div",{className:"text-center mt-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Already have an account?"}),e.jsx(h,{to:"/login",className:"inline-block px-4 py-1 text-blue-600 font-medium text-sm rounded-full hover:bg-blue-100 hover:text-blue-800 transition",children:"Login?"})]})]})})]})};export{B as default};
