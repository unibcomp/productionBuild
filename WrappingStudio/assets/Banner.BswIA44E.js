import{a as C,b as N,r,e as E,j as s}from"./index.C0EwQNyI.js";import{A as I}from"./index.CjNFPwC2.js";import{m as d}from"./proxy.BJ_9IFGh.js";import{C as R,a as S}from"./chevron-right.CyEKCznT.js";const k=()=>C({queryKey:["carousels"],queryFn:async()=>(await N.get("/carousel")).data.data,staleTime:1e3*60,refetchOnWindowFocus:!1});function z(t=768){const[m,f]=r.useState(()=>typeof window<"u"?window.innerWidth<=t:!1);return r.useEffect(()=>{const n=()=>{f(window.innerWidth<=t)};return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[t]),m}const q=()=>{const{data:t,isLoading:m}=k(),f=z(),[n,l]=r.useState(0),[g,h]=r.useState(5e3),[c,p]=r.useState(!1),[u,i]=r.useState("right"),w=r.useRef([]),o=r.useRef(null),x=E();r.useEffect(()=>{if(!(!t||t.length===0))return o.current&&clearInterval(o.current),o.current=setInterval(()=>{i("right"),l(e=>(e+1)%t.length)},g),()=>{o.current&&clearInterval(o.current)}},[t,g,n]),r.useEffect(()=>{w.current.forEach((e,a)=>{e&&(a===n?(e.currentTime=0,e.play().catch(()=>{})):e.pause())})},[n]);const v=()=>{t&&(i("left"),l(e=>(e-1+t.length)%t.length),h(8e3))},b=()=>{t&&(i("right"),l(e=>(e+1)%t.length),h(8e3))},y=e=>e.endsWith(".mp4")||e.endsWith(".webm")||e.endsWith(".ogg");return s.jsxs("div",{className:`\r
        relative w-full \r
        h-[150px] sm:h-[280px] md:h-[35vh] lg:h-[45vh] xl:h-[50vh] \r
        overflow-hidden shadow-lg\r
        transition-all duration-500 ease-in-out  \r
      `,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[s.jsx(I,{initial:!1,custom:u,children:t?.map((e,a)=>a===n?s.jsx(d.div,{className:"absolute w-full h-full cursor-pointer",onClick:()=>x("/product?offer=high"),custom:u,initial:{opacity:0,x:u==="right"?100:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:u==="right"?-100:100},transition:{duration:.7,ease:"easeInOut"},children:y(e.image)?s.jsx("video",{ref:j=>{w.current[a]=j},src:e.image,className:"w-full h-full ",muted:!0,loop:!0,playsInline:!0}):s.jsx("img",{src:f?e?.mobileImage:e.image,alt:e.title,className:"w-full h-full "})},e._id):null)}),s.jsx(d.button,{onClick:v,initial:{opacity:0,x:-20},animate:{opacity:c?1:0,x:c?0:-20},transition:{duration:.3},whileHover:{scale:1.15,backgroundColor:"rgba(0,0,0,0.6)"},className:"absolute left-3 top-1/2 -translate-y-1/2 bg-black/40 text-white w-11 h-11 flex items-center justify-center rounded-full z-10",children:s.jsx(R,{className:"w-6 h-6"})}),s.jsx(d.button,{onClick:b,initial:{opacity:0,x:20},animate:{opacity:c?1:0,x:c?0:20},transition:{duration:.3},whileHover:{scale:1.15,backgroundColor:"rgba(0,0,0,0.6)"},className:"absolute right-3 top-1/2 -translate-y-1/2 bg-black/40 text-white w-11 h-11 flex items-center justify-center rounded-full z-10",children:s.jsx(S,{className:"w-6 h-6"})}),s.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-2 z-10",children:t?.map((e,a)=>s.jsx("div",{onClick:()=>{a>n?i("right"):i("left"),l(a),h(8e3)},className:`w-3 h-3 rounded-full cursor-pointer transition-colors ${a===n?"bg-white":"bg-gray-400"}`},a))})]})};export{q as default};
