import{r as i,e as v,j as e,L as S,z as m}from"./index.B_APUxUE.js";import{u as q}from"./index.esm.CjfYtTqh.js";import{u as F}from"./unibcompLogo3.CCLcFMez.js";import{c as E,b as O}from"./useUser.BisuxYaH.js";import{h as c}from"./queryToast.Cuci1cUk.js";import"./useMutation.CgsvOYr-.js";const C=()=>{const[r,u]=i.useState(!1),[a,l]=i.useState("mobile"),[x,p]=i.useState(""),b=v(),{register:o,handleSubmit:w,watch:f,formState:{errors:t}}=q(),{mutate:h,isPending:n}=E(),{mutate:g,isPending:d}=O(),y=s=>{const N=a==="mobile"?{mobile:s.mobile}:{email:s.email};h(N,{...c({onSuccess:P=>{p(P.data.id),u(!0)}})})},j=s=>{if(!s.otp||!s.newPassword||!s.confirmPassword){m.error("All fields are required");return}if(s.newPassword!==s.confirmPassword){m.error("Passwords do not match");return}g({id:x,otp:s.otp,password:s.newPassword,confirmPassword:s.confirmPassword},{...c({onSuccess:()=>b("/login")})})};return e.jsx("div",{className:"h-screen bg-gray-100 flex justify-center items-center ",style:{height:"84vh"},children:e.jsxs("div",{className:"w-full max-w-4xl bg-white shadow-lg flex md:flex-row  flex-col overflow-hidden mt-2",style:{height:"80vh"},children:[e.jsxs("div",{className:"md:w-2/5 w-full bg-[#2874F0] text-white p-8 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("img",{src:F,alt:"Unibcomp",className:"w-36 mb-6"}),e.jsx("h1",{className:"text-2xl font-semibold mb-3",children:"Forgot Password"}),e.jsx("p",{className:"text-sm leading-relaxed opacity-90",children:"Choose a method to reset your password. Enter your details and we'll send you an OTP for verification."})]}),e.jsxs("p",{className:"text-xs opacity-80",children:["© ",new Date().getFullYear()," Unibcomp"]})]}),e.jsxs("div",{className:"md:w-3/5 w-full px-10  flex flex-col justify-center pb-24",children:[e.jsxs("form",{onSubmit:w(r?j:y),className:"space-y-5",children:[e.jsxs("div",{className:"flex justify-center mb-6",children:[e.jsx("button",{type:"button",onClick:()=>l("mobile"),disabled:r,className:`px-6 py-3 rounded-l-xl border ${a==="mobile"?"text-blue-600 bg-gray-100 ":"text-gray-600"} ${r?"opacity-50 cursor-not-allowed":""}`,children:"Phone"}),e.jsx("button",{type:"button",onClick:()=>l("email"),disabled:r,className:`px-6 py-3 rounded-r-xl border ${a==="email"?"text-blue-600 bg-gray-100 ":" text-gray-600"} ${r?"opacity-50 cursor-not-allowed":""}`,children:"Email"})]}),a==="mobile"?e.jsxs("div",{children:[e.jsx("input",{type:"text",...o("mobile",{required:"Mobile number is required",minLength:{value:10,message:"Mobile must be 10 digits"},maxLength:{value:10,message:"Mobile must be 10 digits"}}),placeholder:"Mobile Number",className:`w-full border-b border-gray-300 py-2.5 text-sm
                           focus:outline-none focus:border-[#2874F0] ${r?"bg-gray-100 cursor-not-allowed":""}`,disabled:r}),t.mobile&&e.jsx("p",{className:"text-sm text-red-500",children:t.mobile.message})]}):e.jsxs("div",{children:[e.jsx("input",{type:"email",...o("email",{required:"Email is required",pattern:{value:/^[A-Za-z][A-Za-z0-9._%+-]*@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/,message:"Email must start with a letter and be valid."}}),placeholder:"Email Address",className:`w-full border-b border-gray-300 py-2.5 text-sm
                           focus:outline-none focus:border-[#2874F0] ${r?"bg-gray-100 cursor-not-allowed":""}`,disabled:r}),t.email&&e.jsx("p",{className:"text-sm text-red-500",children:t.email.message})]}),r&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",maxLength:6,inputMode:"numeric",...o("otp",{required:"OTP is required"}),placeholder:"Enter OTP",className:"w-full border border-gray-300 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm"}),t.otp&&e.jsx("p",{className:"text-sm text-red-500",children:t.otp.message}),e.jsx("input",{type:"password",...o("newPassword",{required:"New password is required"}),placeholder:"New Password",className:"w-full border border-gray-300 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm"}),t.newPassword&&e.jsx("p",{className:"text-sm text-red-500",children:t.newPassword.message}),e.jsx("input",{type:"password",...o("confirmPassword",{required:"Confirm password is required",validate:s=>s===f("newPassword")||"Passwords do not match"}),placeholder:"Confirm Password",className:"w-full border border-gray-300 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm"}),t.confirmPassword&&e.jsx("p",{className:"text-sm text-red-500",children:t.confirmPassword.message})]}),e.jsx("button",{type:"submit",className:`w-full bg-[#FB641B] text-white py-2.5\r
                         text-sm font-semibold rounded-sm\r
                         hover:opacity-90 transition\r
                         disabled:opacity-60`,disabled:n||d,children:r?d?"Resetting...":"Reset Password":n?"Sending...":"Send OTP"})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs(S,{to:"/login",className:"inline-flex items-center text-blue-600 font-medium text-sm hover:text-blue-800 hover:underline transition",children:[e.jsx("span",{className:"mr-1",children:"←"})," Back to Login"]})})]})]})})};export{C as default};
