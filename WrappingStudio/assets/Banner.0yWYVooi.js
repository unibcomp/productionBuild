import{a as j,b as C,r,j as s}from"./index.ChAS2J0r.js";import{A as N}from"./index.LK_IRj-a.js";import{m as h}from"./proxy.BEu15Ss1.js";import{C as E,a as I}from"./chevron-right.BoDAP0OZ.js";const R=()=>j({queryKey:["carousels"],queryFn:async()=>(await C.get("/carousel")).data.data,staleTime:1e3*60,refetchOnWindowFocus:!1});function S(t=768){const[m,d]=r.useState(()=>typeof window<"u"?window.innerWidth<=t:!1);return r.useEffect(()=>{const n=()=>{d(window.innerWidth<=t)};return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[t]),m}const L=()=>{const{data:t,isLoading:m}=R(),d=S(),[n,o]=r.useState(0),[g,f]=r.useState(5e3),[u,x]=r.useState(!1),[c,i]=r.useState("right"),w=r.useRef([]),l=r.useRef(null);r.useEffect(()=>{if(!(!t||t.length===0))return l.current&&clearInterval(l.current),l.current=setInterval(()=>{i("right"),o(e=>(e+1)%t.length)},g),()=>{l.current&&clearInterval(l.current)}},[t,g,n]),r.useEffect(()=>{w.current.forEach((e,a)=>{e&&(a===n?(e.currentTime=0,e.play().catch(()=>{})):e.pause())})},[n]);const p=()=>{t&&(i("left"),o(e=>(e-1+t.length)%t.length),f(8e3))},b=()=>{t&&(i("right"),o(e=>(e+1)%t.length),f(8e3))},v=e=>e.endsWith(".mp4")||e.endsWith(".webm")||e.endsWith(".ogg");return s.jsxs("div",{className:`\r
        relative w-full \r
        h-[150px] sm:h-[280px] md:h-[35vh] lg:h-[40vh] xl:h-[43vh]\r
        overflow-hidden rounded-xl shadow-lg\r
        transition-all duration-500 ease-in-out\r
      `,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:[s.jsx(N,{initial:!1,custom:c,children:t?.map((e,a)=>a===n?s.jsx(h.div,{className:"absolute w-full h-full",custom:c,initial:{opacity:0,x:c==="right"?100:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:c==="right"?-100:100},transition:{duration:.7,ease:"easeInOut"},children:v(e.image)?s.jsx("video",{ref:y=>{w.current[a]=y},src:e.image,className:"w-full h-full  rounded-xl",muted:!0,loop:!0,playsInline:!0}):s.jsx("img",{src:d?e?.mobileImage:e.image,alt:e.title,className:"w-full h-full  rounded-xl"})},e._id):null)}),s.jsx(h.button,{onClick:p,initial:{opacity:0,x:-20},animate:{opacity:u?1:0,x:u?0:-20},transition:{duration:.3},whileHover:{scale:1.15,backgroundColor:"rgba(0,0,0,0.6)"},className:"absolute left-3 top-1/2 -translate-y-1/2 bg-black/40 text-white w-11 h-11 flex items-center justify-center rounded-full z-10",children:s.jsx(E,{className:"w-6 h-6"})}),s.jsx(h.button,{onClick:b,initial:{opacity:0,x:20},animate:{opacity:u?1:0,x:u?0:20},transition:{duration:.3},whileHover:{scale:1.15,backgroundColor:"rgba(0,0,0,0.6)"},className:"absolute right-3 top-1/2 -translate-y-1/2 bg-black/40 text-white w-11 h-11 flex items-center justify-center rounded-full z-10",children:s.jsx(I,{className:"w-6 h-6"})}),s.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-2 z-10",children:t?.map((e,a)=>s.jsx("div",{onClick:()=>{a>n?i("right"):i("left"),o(a),f(8e3)},className:`w-3 h-3 rounded-full cursor-pointer transition-colors ${a===n?"bg-white":"bg-gray-400"}`},a))})]})};export{L as default};
