import{a as p,k as y,b as o,o as k,j as e,r as l,z as m}from"./index.CGZbVMlQ.js";import{u as q}from"./index.esm.DSuH4LeC.js";import{u}from"./useMutation.smoziTVG.js";import{K as c,h as x,P as A,B as F}from"./ButtonBar.DBFN_AtQ.js";const P=async s=>(await o.get("/get-address",{params:s})).data,S=async s=>(await o.post("/create-address",s)).data,$=async s=>(await o.delete(`/delete-address/${s}`)).data,B=({pageNumber:s=1,pageSize:t=10}={})=>{const d={pageNumber:s,pageSize:t};return p({queryKey:["address",d],queryFn:()=>P(d)})},L=()=>{const s=y();return u({mutationFn:S,onSuccess:()=>s.invalidateQueries({queryKey:["address"],exact:!1})})},M=()=>{const s=y();return u({mutationFn:$,onSuccess:()=>s.invalidateQueries({queryKey:["address"],exact:!1})})},I=()=>u({mutationFn:async s=>(await o.put("/update-profile",s,{})).data}),K=async s=>(await k.get(`https://pinlookup.in/api/pincode?pincode=${s}`)).data,E=s=>p({queryKey:["pincodeData",s],queryFn:()=>K(s),enabled:!!s,staleTime:1e3*60*5}),V=({show:s,handleClose:t,isAdd:d,data:b,refetch:g})=>{const{register:a,handleSubmit:h,reset:f,watch:j,setValue:n,formState:{errors:r}}=q({defaultValues:b||{}}),N=j("postalCode"),{data:i}=E(N||"");i?.data&&(n("city",i.data.district_name),n("state",i.data.state_name),n("country","India"));const w=L(),v=C=>{d&&w.mutate(C,{onSuccess:()=>{m.success("Address added successfully"),g?.(),f(),t()},onError:()=>{m.error("Failed to add address")}})};return e.jsx(c,{appear:!0,show:s,as:l.Fragment,children:e.jsxs(x,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(c.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm transition-opacity"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(c.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(x.Panel,{className:"w-full max-w-2xl transform overflow-hidden rounded-2xl bg-white p-6 shadow-xl transition-all border border-gray-200",children:[e.jsx(A,{title:d?"Add New Address":"Edit Address",component:e.jsx(F,{buttons:[{label:"X",onClick:t,colorClass:"bg-red-500"}]})}),e.jsxs("form",{onSubmit:h(v),className:"space-y-6 max-h-[60vh] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Full Name *"}),e.jsx("input",{type:"text",placeholder:"Enter full name",...a("name",{required:"Name is required"}),className:`mt-1 block w-full rounded-lg border border-gray-300 shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500 ${r.name?"border-red-500":""}`}),r.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address Line 1 *"}),e.jsx("input",{type:"text",placeholder:"Street address",...a("addressLine1",{required:"Address Line 1 is required"}),className:`mt-1 block w-full rounded-lg border border-gray-300 shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500 ${r.addressLine1?"border-red-500":""}`}),r.addressLine1&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.addressLine1.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address Line 2"}),e.jsx("input",{type:"text",placeholder:"Apartment, suite, etc. (optional)",...a("addressLine2"),className:"mt-1 block w-full rounded-lg border border-gray-300 shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Postal Code *"}),e.jsx("input",{type:"text",placeholder:"ZIP / Postal Code",...a("postalCode",{required:"Postal Code is required"}),className:`mt-1 block w-full rounded-lg border border-gray-300 shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500 ${r.postalCode?"border-red-500":""}`}),r.postalCode&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.postalCode.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"City *"}),e.jsx("input",{type:"text",placeholder:"City",...a("city",{required:"City is required"}),className:`mt-1 block w-full rounded-lg border border-gray-300 shadow-sm p-3 bg-gray-100 ${r.city?"border-red-500":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"State *"}),e.jsx("input",{type:"text",placeholder:"State",...a("state",{required:"State is required"}),className:`mt-1 block w-full rounded-lg border border-gray-300 shadow-sm p-3 bg-gray-100 ${r.state?"border-red-500":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Country *"}),e.jsx("input",{type:"text",placeholder:"Country",...a("country",{required:"Country is required"}),className:`mt-1 block w-full rounded-lg border border-gray-300 shadow-sm p-3 bg-gray-100 ${r.country?"border-red-500":""}`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone *"}),e.jsx("input",{type:"text",placeholder:"Phone number",...a("phone",{required:"Phone is required"}),className:`mt-1 block w-full rounded-lg border border-gray-300 shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500 ${r.phone?"border-red-500":""}`}),r.phone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.phone.message})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:t,className:"px-5 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-5 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:"Save"})]})]})]})})})})]})})};export{V as A,I as a,M as b,B as u};
