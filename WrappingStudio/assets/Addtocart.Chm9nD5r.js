import{e as h,j as e,i as n}from"./index.BQOoNfp6.js";import{u as p,b as u}from"./useCart.Cj0rOkT_.js";import{N as g}from"./NotDataFound.Bw1SZ0i6.js";import"./useMutation.4jg92Mjg.js";import"./queryToast.Cr7KOoVh.js";import"./proxy.CvIZv2a1.js";const v=()=>{const l=h(),{data:s,isLoading:i,refetch:o}=p({type:"through_cart"}),{handleIncrease:c,handleDecrease:d,handleRemove:x,isPending:m}=u(o);return i?e.jsx(n,{}):!s||s.results.length===0?e.jsx(g,{name:"Cart",message:"Your cart is empty.",iconName:"shopping_cart_off",className:"p-6"}):e.jsxs("div",{className:"p-6 flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"flex-1 space-y-6",children:m?e.jsx(n,{}):s.results.map(a=>{const t=a.product_id,r=Math.round((t.total_original_price-t.total_sell_price)/t.total_original_price*100);return e.jsxs("div",{className:`border rounded-lg shadow-md p-4 bg-white flex flex-col md:flex-row gap-4 hover:shadow-xl transition-shadow duration-300 ${t.inStock?"":"opacity-80"}`,children:[e.jsx("button",{onClick:()=>l(`/product/detail/${t._id}`),className:"flex-shrink-0 flex justify-center md:justify-start items-center hover:scale-105 transform transition-transform duration-200",children:e.jsx("img",{src:t.images||"https://via.placeholder.com/150",alt:t.name,className:"w-28 h-28 object-cover rounded-lg"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:`font-semibold text-lg cursor-pointer ${t.inStock?"hover:text-orange-500":"text-red-600"}`,children:t.name}),e.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:["Seller: ",t.brand||"Unknown"]}),e.jsx("p",{className:`text-sm mt-1 ${t.inStock?"text-gray-500":"text-red-600"}`,children:t.inStock?"Delivery by Thu Sep 18":"Out of Stock"}),t.inStock&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1 font-bold",children:[Number(t?.stock||0)-(a.quantity||0)," left in stock"]}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsxs("span",{className:"line-through text-gray-400",children:["₹",t?.total_original_price]}),e.jsxs("span",{className:"font-bold text-green-600",children:["₹",t?.total_sell_price]}),r>0&&e.jsxs("span",{className:"ml-2 text-green-600 text-sm",children:[r,"% Off"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center border rounded-lg overflow-hidden",children:[e.jsx("button",{onClick:()=>d(a),className:"px-2 py-1 bg-gray-100 hover:bg-gray-200 transition disabled:opacity-50",disabled:!t.inStock||a.quantity<=1,children:e.jsx("span",{className:"material-symbols-outlined text-base",children:"remove"})}),e.jsx("span",{className:"px-4",children:a.quantity}),e.jsx("button",{onClick:()=>c(a),disabled:a.quantity>=t.stock||!t.inStock,className:`px-3 py-1 transition ${a.quantity>=t.stock||!t.inStock?"bg-gray-200 cursor-not-allowed":"bg-gray-100 hover:bg-gray-200"}`,children:e.jsx("span",{className:"material-symbols-outlined text-base",children:"add"})})]}),e.jsxs("button",{className:"flex items-center text-blue-600 text-sm hover:underline",disabled:!t.inStock,children:[e.jsx("span",{className:"material-symbols-outlined mr-1 text-base",children:"bookmark"}),"Save for Later"]}),e.jsxs("button",{onClick:()=>x(a),className:"flex items-center text-red-600 text-sm hover:underline",children:[e.jsx("span",{className:"material-symbols-outlined mr-1 text-base",children:"delete"}),"Remove"]})]})]})]},a._id)})}),e.jsxs("div",{className:"w-full lg:w-96 p-4 border rounded bg-white h-fit",children:[e.jsx("h2",{className:"font-semibold text-lg mb-4",children:"PRICE DETAILS"}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsxs("span",{children:["Price (",s.total_carts.total_quantity," item",s.total_carts.total_quantity>1?"s":"",")"]}),e.jsxs("span",{children:["₹",s.total_carts.total_original_price]})]}),e.jsxs("div",{className:"flex justify-between mb-2 text-green-600",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{children:["- ₹",s.total_carts.total_original_price-s.total_carts.total_sell_price]})]}),e.jsxs("div",{className:"flex justify-between font-bold text-lg border-t pt-2 mt-2",children:[e.jsx("span",{children:"Total Amount"}),e.jsxs("span",{children:["₹",s.total_carts.total_sell_price]})]}),e.jsxs("p",{className:"text-green-600 text-sm mt-1",children:["You will save ₹",s.total_carts.total_original_price-s.total_carts.total_sell_price," ","on this order"]}),e.jsxs("button",{className:"mt-4 w-full bg-orange-500 text-white py-2 rounded font-semibold",onClick:()=>l("/checkout?type=through_cart"),disabled:s.results.every(a=>!a.product_id.inStock),children:[e.jsx("span",{className:"material-symbols-outlined",children:"shopping_cart_checkout"}),"PLACE ORDER"]}),e.jsx("p",{className:"text-gray-500 text-xs mt-3",children:"Safe and Secure Payments. Easy returns. 100% Authentic products."})]})]})};export{v as default};
