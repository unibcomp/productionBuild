import{d as _,h as D,j as e}from"./index.CcjL_5p2.js";import{b as P}from"./useOrder.YOEO_2Yz.js";import"./useMutation.B7IGJ_ZR.js";const T=()=>{const[r]=_(),h=D(),t=r.get("order_id")??"",p=r.get("item_id")??"",j="",{data:u,isLoading:g,isError:N,error:f}=P({orderId:t,item_id:p,orderStatus:j});if(!t)return e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Missing order id"}),e.jsx("p",{className:"text-sm text-gray-600",children:"This page needs order_id in the query string."}),e.jsx("p",{className:"mt-3",children:e.jsx("button",{onClick:()=>h("/"),className:"px-3 py-2 bg-blue-600 text-white rounded",children:"Back to orders"})})]});if(g)return e.jsx("div",{className:"flex justify-center items-center h-40 text-gray-500",children:"Loading order details..."});if(N)return e.jsxs("div",{className:"p-4 bg-red-100 text-red-700 rounded-lg",children:["Failed to load order: ",f?.message??"Unknown error"]});const b=u?.result,{_id:y,orderStatus:l,paymentStatus:v,paymentMethod:i,transaction_id:w,totalAmount:n,shippingAddress:a,item:c=[],refundAmount:m,refundStatus:o,priceDetails:d={},timeline:x=[]}=b;return e.jsxs("div",{className:"max-w-5xl mx-auto bg-gray-50 p-6 space-y-6",children:[m&&e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 border",children:[e.jsxs("h2",{className:"text-lg font-semibold",children:["Total refund - â‚¹",m]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Refund was added to your ",i," account."," ",o==="Completed"?e.jsx("span",{className:"text-green-600 font-medium",children:"Completed"}):e.jsx("span",{className:"text-yellow-600 font-medium",children:o})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 border space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Order Details"}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Order ID:"})," ",y]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Status:"})," ",e.jsx("span",{className:`px-2 py-1 rounded text-sm ${l==="Cancelled"?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:l})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Payment:"})," ",v," (",i,")"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Transaction ID:"})," ",w]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Total:"})," â‚¹",n]})]}),e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 border space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Items"}),c.length?c.map(s=>e.jsxs("div",{className:"flex gap-4 border rounded-lg p-3",children:[e.jsx("img",{src:s.image||"/placeholder.png",alt:s.name,className:"w-20 h-20 object-cover rounded"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.color?`${s.color} - `:"",s.size?.size," ",s.size?.sizeName]}),e.jsxs("p",{className:"text-sm",children:["Price:"," ",e.jsxs("span",{className:"line-through text-gray-500",children:["â‚¹",s.size?.original_price," "]})," "," ",e.jsxs("span",{className:"font-medium text-green-600 ml-1",children:["â‚¹",s.size?.sell_price," "]})]}),e.jsxs("p",{className:"text-sm",children:["Quantity: ",s.quantity??1]}),e.jsxs("p",{className:"font-medium",children:["Total: â‚¹",s.total]})]})]},s._id)):e.jsx("p",{children:"No items found in this order."})]}),x.length>0&&e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 border space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Order Updates"}),e.jsx("div",{className:"space-y-3",children:x.map((s,S)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-4 h-4 mt-1 rounded-full ${s.status==="Cancelled"?"bg-red-500":"bg-green-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.status}),e.jsx("p",{className:"text-sm text-gray-600",children:s.date})]})]},S))})]})]}),e.jsxs("div",{className:"space-y-6",children:[a&&e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 border",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Delivery details"}),e.jsx("p",{className:"font-medium",children:a.name}),e.jsxs("p",{children:[a.addressLine1,", ",a.addressLine2]}),e.jsxs("p",{children:[a.city,", ",a.state," - ",a.postalCode]}),e.jsx("p",{children:a.country}),e.jsxs("p",{className:"text-sm mt-2",children:["ðŸ“ž ",a.phone]})]}),e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 border space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Price details"}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Listing price"}),e.jsxs("span",{children:["â‚¹",d?.listingPrice||0]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Selling price"}),e.jsxs("span",{children:["â‚¹",d?.sellingPrice||0]})]}),e.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{children:["-â‚¹",d?.discount||0]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Total amount"}),e.jsxs("span",{children:["â‚¹",n]})]})]})]})]})]})};export{T as default};
