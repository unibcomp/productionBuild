import{r as o,j as e,o as S,L as C}from"./index.CNHQEq2V.js";import{P as L}from"./PaginationSelecctor.Z1LY79_9.js";import{u as P}from"./usePagination.CQKK8MFE.js";import{a as I}from"./useOrder.D5x_Ii6Z.js";import"./useMutation.CvRzDxQd.js";const E=()=>{const{pageNumber:x,pageSizeValue:u,handlePageChange:h,handlePageSizeChange:g}=P(),{data:n,isLoading:p,isError:f}=I(),[a,j]=o.useState(""),[l,b]=o.useState([]),N=s=>{b(t=>t.includes(s)?t.filter(r=>r!==s):[...t,s])},c=o.useMemo(()=>n?.results?n.results.filter(s=>{const t=l.length===0||l.includes(s.orderStatus),r=a.trim()===""||s.transaction_id?.toLowerCase().includes(a.toLowerCase())||s.items?.some(i=>i.name?.toLowerCase().includes(a.toLowerCase()));return t&&r}):[],[n?.results,l,a]);return p?e.jsxs("div",{className:"flex justify-center items-center min-h-screen text-blue-600",children:[e.jsx(S,{className:"animate-spin mr-2"})," Loading orders..."]}):f?e.jsx("p",{className:"text-center text-red-500 mt-10",children:"Failed to load orders. Try again later."}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"max-w-7xl mx-auto p-4 md:p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("aside",{className:"w-full md:w-64",children:e.jsxs("div",{className:"sticky top-20 bg-white p-4 rounded shadow",children:[e.jsx("h3",{className:"font-semibold mb-3 text-gray-700",children:"Filters"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"font-medium mb-2 text-gray-800",children:"ORDER STATUS"}),["Delivered","Pending","Cancelled"].map(s=>e.jsxs("label",{className:"block cursor-pointer select-none text-gray-700 hover:text-blue-600 transition-colors",children:[e.jsx("input",{type:"checkbox",className:"mr-2 accent-blue-600",checked:l.includes(s),onChange:()=>N(s)}),s]},s))]})]})}),e.jsxs("main",{className:"flex-1",children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:"Search by product or transaction ID...",value:a,onChange:s=>j(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-300 focus:outline-none"})}),e.jsx("div",{className:"space-y-4",children:c.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"No matching orders found."}):c.map(s=>{const t=s.items?.[0]||s.item,r=Array.isArray(s.items)?s.items.reduce((w,v)=>w+(v.quantity||0),0):s.item?.quantity||0,i=encodeURIComponent(s._id),d=t?encodeURIComponent(t._id):"",m=t&&d?`/order-details?order_id=${i}&item_id=${d}`:null,y=s.orderStatus==="Delivered"?"bg-green-100 text-green-700":s.orderStatus==="Pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700";return e.jsxs("div",{className:"bg-white p-4 rounded shadow hover:shadow-md border border-gray-200 hover:border-blue-300 transition-all duration-200",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[t&&e.jsx("img",{src:t.image||"/placeholder.png",alt:t.name||"Product",className:"w-14 h-14 object-cover rounded"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:t?.name||"Unnamed Product"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Items: ",r]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Transaction:"," ",e.jsx("span",{className:"text-blue-600 font-mono",children:s.transaction_id})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3",children:[e.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${y}`,children:s.orderStatus}),m&&e.jsx(C,{to:m,className:"px-4 py-2 text-sm font-medium bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"View Details"})]})]}),e.jsx("div",{className:"text-right mt-2",children:e.jsxs("p",{className:"font-bold text-lg text-gray-900",children:["â‚¹",s.totalAmount.toLocaleString()]})})]},s._id)})}),e.jsx(L,{currentPage:x,handlePageChange:h,pageSize:u,handlePageSizeChange:g,totalCount:n?.pagination.total||0})]})]})})})};export{E as default};
