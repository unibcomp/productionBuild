import{r as a,d as x,j as e}from"./index.DtIBEexY.js";import{u as g,D as l}from"./DepositInitShimmer.B24ti1uL.js";import"./useMutation.CN_b9VxY.js";import"./queryToast.C1UcMnjS.js";import"./crypto.DSj7Oa7V.js";const N=()=>{const[m,r]=a.useState("â³ Navigating to payment gateway..."),[s,i]=a.useState("loading"),[p]=x(),n=p.get("payment_session_id"),{depositRequestMutation:u}=g(),[o,y]=a.useState(null);return a.useEffect(()=>{if(!n){i("error"),r("âŒ Payment link is invalid, expired, or already used.");return}u.mutate(n,{onSuccess:async d=>{const{paymentMode:t,data:c}=d;y(d),t==="PHONEPAY"||t==="PAYU"||t==="GATEPAY"||t==="RAZORPAY"?c.redirectUrl&&window.open(c.redirectUrl,"_self"):(i("error"),r("âŒ Payment link is invalid, expired, or already used."))},onError:()=>{i("error"),r("âŒ Payment link is invalid, expired, or already used.")}})},[n]),e.jsx("div",{className:"deposit-container",children:e.jsxs("div",{className:"deposit-card",children:[s==="loading"&&!o&&e.jsx(l,{}),e.jsxs("p",{className:`message ${s}`,children:[s==="loading"&&e.jsx(l,{}),m]}),s==="error"&&e.jsx("button",{className:"retry-btn",onClick:()=>window.history.back(),children:"ğŸ” Try Again"}),o?.amount&&e.jsx("div",{className:"text-gray-600",children:e.jsxs("p",{className:"text-sm",children:["Please wait while we process your payment of â‚¹",o.amount]})})]})})};export{N as default};
