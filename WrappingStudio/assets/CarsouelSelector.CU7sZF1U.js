import{a as y,b as p,j as e,L as _,r as c,i as k}from"./index.bXKJJq9E.js";import{W as T}from"./WishlistButton.BtaNy-jm.js";import{K as h,h as v}from"./ButtonBar.C5On5S_O.js";const z="/assets/assured.DZu9WNCG.jpg",S=async s=>{const{data:t}=await p.get("/get-product",{params:s});return t},q=async s=>{const{data:t}=await p.get(`/product-details/${s}`);return t},A=({category:s,subcategory:t,brand:r,_id:a,pageSize:l=10,pageNumber:o=1,sort:d,slug:i,exclude:m,size:u=[],colour:g=[],productType:b})=>{const f={pageSize:l,pageNumber:o,...s&&{category:s},...t&&{subcategory:t},...r&&{brand:r},...a&&{_id:a},...d&&{sort:d},...i&&{slug:i},...m&&{exclude:m},...u.length>0&&{size:u},...g.length>0&&{colour:g},...b&&{productType:b}};return y({queryKey:["products",f],queryFn:()=>S(f)})},H=s=>y({queryKey:["product",s],queryFn:()=>q(s),enabled:!!s,staleTime:1e3*60*5}),O=({product:s,isFullDetail:t})=>{const r=s.variant?.images?.[0],a=`/product/detail/${s._id}?variant=${s.variant?._id}&size=${s.variant?.size?._id}`,l=s?.name?.length>60?`${s.name.slice(0,57)}...`:s?.name;return e.jsxs("div",{className:"relative flex flex-col h-full border border-gray-200 rounded-xl bg-white shadow-sm hover:shadow-md hover:border-gray-300 transition-all duration-200 overflow-hidden group",children:[e.jsx("div",{className:"absolute top-2 right-2 z-10",children:e.jsx(T,{productId:s._id,variantId:s.variant?._id,isInWishlist:s.isInWishlist})}),e.jsxs(_,{to:a,className:"flex flex-col flex-grow p-3",children:[r?e.jsx("img",{src:r,alt:l,loading:"lazy",className:"w-full h-44 object-contain rounded-lg transition-transform duration-300 group-hover:scale-105 "}):e.jsx("div",{className:"w-full h-44 bg-gray-100 flex items-center justify-center rounded-lg text-gray-400 text-sm",children:"No Image"}),e.jsxs("div",{className:"mt-3 flex flex-col flex-grow justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1 flex-col",children:[e.jsx("img",{src:z,alt:"Assured Logo",className:"w-5 h-5 object-contain mix-blend-multiply rounded-full "}),e.jsx("i",{className:"text-xs font-medium text-green-600",children:"Assured"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 truncate max-w-[160px]",title:s.name,children:s.name}),e.jsx("p",{className:"text-xs text-gray-500 font-medium truncate",children:s.brand?.name})]})]}),e.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[e.jsxs("p",{className:"text-base font-bold text-gray-900",children:["₹ ",Number(s.variant?.size?.sell_price).toFixed(2)]}),s.variant?.size&&s.variant?.size?.original_price>s.variant?.size?.sell_price&&e.jsxs("p",{className:"text-gray-400 text-xs line-through",children:["₹ ",Number(s.variant?.size?.original_price).toFixed(2)]})]}),s.ratings?.average>0&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm mt-2",children:[e.jsxs("div",{className:"flex items-center bg-green-600 text-white px-2 py-0.5 rounded-md font-semibold",children:[e.jsx("span",{children:s?.ratings?.average.toFixed(1)}),e.jsx("span",{className:"material-symbols-outlined text-xs ml-1",children:"star"})]}),e.jsxs("span",{className:"text-gray-500 font-medium",children:[s?.ratings?.count||0," Ratings"]})]}),t&&e.jsx("div",{className:"mt-3 border-t border-gray-100 pt-2",children:e.jsx("ul",{className:"list-disc list-inside space-y-1 text-gray-700 text-xs",children:s?.variant?.size?.highlights.map((o,d)=>e.jsx("li",{className:"truncate",title:o,children:o},d))})})]})]})]})},R=()=>{const[s,t]=c.useState({}),[r,a]=c.useState("relevance");return{filters:s,setFilters:t,sorts:r,setSorts:a}},L=async s=>{const{data:t}=await p.get("/filters",{params:s});return t},I=({category:s="",subcategory:t="",brand:r="",slug:a=""})=>{const l={...s&&{category:s},...t&&{subcategory:t},...r&&{brand:r},...a&&{slug:a}};return y({queryKey:["filters",l],queryFn:()=>L(l),staleTime:300*1e3})},P=({filters:s,setFilters:t,isMobile:r=!1,category:a,subcategory:l,brand:o,handleClose:d,slug:i})=>{const[m,u]=c.useState({}),{data:g,isLoading:b}=I({category:a,subcategory:l,brand:o,slug:i});c.useEffect(()=>t({}),[o]);const f=n=>u(x=>({...x,[n]:!x[n]})),w=(n,x)=>{x&&(t(N=>{const j=N[n]||[],F=j.includes(x)?j.filter(C=>C!==x):[...j,x];return{...N,[n]:F}}),d?.())};return b?e.jsx(k,{isNotFixed:!0}):e.jsxs("div",{className:`p-3 space-y-2 ${r?"":"border-b border-gray-200"} max-h-[80vh] w-64 overflow-y-auto custom-scroll bg-white rounded-lg shadow-md`,children:[!r&&e.jsx("h2",{className:"text-md font-semibold mb-2 border-b pb-1 text-gray-800",children:"Filters"}),g?.results?.length?g.results.map(n=>e.jsx($,{label:K(n.name),queryName:n.queryName,items:n.value||[],open:m[n.queryName]||!1,onToggle:()=>f(n.queryName),filters:s,onFilterToggle:w},n.queryName)):e.jsx("p",{className:"text-sm text-gray-500 italic",children:"No filters available."})]})},$=({label:s,queryName:t,items:r,open:a,onToggle:l,filters:o,onFilterToggle:d})=>e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between items-center font-medium mb-1 px-2 py-1 border rounded-md cursor-pointer hover:bg-gray-100",onClick:l,role:"button",tabIndex:0,onKeyDown:i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),l())},children:[s,e.jsx("span",{className:"material-symbols-outlined text-sm",children:a?"expand_more":"arrow_forward_ios"})]}),a&&e.jsx("div",{className:"pl-3 max-h-40 overflow-auto custom-scroll",children:r.map(i=>{const m=i._id||i.name||"",u=o[t]?.includes(m)||!1;return e.jsxs("label",{className:"flex items-center mb-1 cursor-pointer text-sm",children:[e.jsx("input",{type:"checkbox",className:"mr-2",checked:u,onChange:()=>d(t,m)}),i.name]},m)})})]}),K=s=>s.charAt(0).toUpperCase()+s.slice(1),D=({close:s,sort:t,setSort:r})=>{const a=[{label:"Relevance",value:"relevance"},{label:"Price: Low to High",value:"lowToHigh"},{label:"Price: High to Low",value:"highToLow"}];return e.jsxs("div",{className:"p-3 space-y-2 w-64 bg-white rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-md font-semibold mb-2 border-b pb-1 text-gray-800",children:"Sort"}),a.map(l=>e.jsx("button",{onClick:()=>{r(l.value),s?.()},className:`w-full px-3 py-1 text-left rounded-md text-sm ${t===l.value?"bg-blue-100 text-blue-800":"hover:bg-gray-100"}`,children:l.label},l.value))]})},B=({show:s,filters:t,setFilters:r,handleClose:a,category:l,subcategory:o,brand:d,slug:i})=>e.jsx(h,{appear:!0,show:s,as:c.Fragment,children:e.jsxs(v,{as:"div",className:"relative z-50",onClose:a,children:[e.jsx(h.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),e.jsx("div",{className:"fixed inset-0 overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 overflow-hidden",children:e.jsx(h.Child,{as:c.Fragment,enter:"ease-in-out duration-300",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"ease-in-out duration-200",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:e.jsxs(v.Panel,{className:"pointer-events-auto absolute right-0 top-0 h-full w-80 bg-white shadow-xl overflow-y-auto flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Filters"}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),e.jsx("div",{className:"flex-1 p-4",children:e.jsx(P,{filters:t,setFilters:r,category:l,subcategory:o,handleClose:a,brand:d,slug:i,isMobile:!0})})]})})})})]})}),G=({show:s,handleClose:t,sort:r,setSort:a})=>e.jsx(h,{appear:!0,show:s,as:c.Fragment,children:e.jsxs(v,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(h.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),e.jsx("div",{className:"fixed inset-0 overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 overflow-hidden",children:e.jsx(h.Child,{as:c.Fragment,enter:"ease-in-out duration-300",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"ease-in-out duration-200",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:e.jsxs(v.Panel,{className:"pointer-events-auto absolute right-0 top-0 h-full w-80 bg-white shadow-xl overflow-y-auto p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Sort By"}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-800",children:"✕"})]}),e.jsx(D,{close:t,sort:r,setSort:a})]})})})})]})}),Q=({currentPage:s,handlePageChange:t,pageSize:r,totalCount:a})=>{const l=c.useMemo(()=>Math.ceil(a/r),[a,r]);return e.jsxs("div",{className:"flex items-center justify-center gap-3 mt-4",children:[e.jsx("button",{onClick:()=>t(s-1,l),disabled:s===1,className:`flex items-center justify-center w-9 h-9 rounded-full border border-gray-300 bg-white text-gray-700 \r
                   hover:bg-emerald-100 hover:text-emerald-700 \r
                   disabled:opacity-40 disabled:cursor-not-allowed transition`,children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"arrow_back_ios"})}),e.jsxs("span",{className:"text-sm text-gray-700 font-medium select-none px-3",children:[s," / ",l]}),e.jsx("button",{onClick:()=>t(s+1,l),disabled:s===l,className:`flex items-center justify-center w-9 h-9 rounded-full border border-gray-300 bg-white text-gray-700 \r
                   hover:bg-emerald-100 hover:text-emerald-700 \r
                   disabled:opacity-40 disabled:cursor-not-allowed transition`,children:e.jsx("span",{className:"material-symbols-outlined text-lg",children:"arrow_forward_ios"})})]})};export{Q as C,P as F,O as P,D as S,z as a,R as b,A as c,B as d,G as e,H as u};
