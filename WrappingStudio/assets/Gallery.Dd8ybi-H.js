import{r as i,b,j as e}from"./index.DtIBEexY.js";import{L as f}from"./Loading.W5PXwINv.js";import{N as j}from"./NotDataFound.h-xYpUgV.js";import{P as y}from"./PaginationSelecctor.C426SQRN.js";import{P as v}from"./PageHeadline.DeVw2uh8.js";import{u as w}from"./usePagination.RCOujgDl.js";import{c as N}from"./createLucideIcon.BCX05kV3.js";import{C as k,a as C}from"./chevron-right.Cg15UYqv.js";import{X as P}from"./x.CcEl3v_g.js";import"./loader.BSmhWCUV.js";import"./proxy.Br7zSXCL.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],p=N("image",L),S=(t=1,r=30)=>{const[g,n]=i.useState([]),[c,x]=i.useState(0),[h,d]=i.useState(1),[o,m]=i.useState(!0),[s,a]=i.useState(null);return i.useEffect(()=>{let l=!0;return(async()=>{try{m(!0),a(null);const{data:u}=await b.get("/gallery",{params:{pageNumber:t,pageSize:r},headers:{Accept:"application/json"}});if(!l)return;n(u.results||[]),x(u.pagination?.total||0),d(u.pagination?.totalPages||1)}catch(u){l&&a(u?.message||"Failed to load galleries")}finally{l&&m(!1)}})(),()=>{l=!1}},[t,r]),{data:g,total:c,pages:h,loading:o,error:s}},I=t=>/\.(mp4|webm|ogg)$/i.test(t),E=({item:t})=>{const r=i.useMemo(()=>{const s=[];for(const a of t.images??[])s.push({type:I(a)?"video":"image",src:a});return s},[t.images]),[g,n]=i.useState(0),[c,x]=i.useState(!0),h=()=>n(s=>(s+1)%r.length),d=()=>n(s=>(s-1+r.length)%r.length),o=r[g],m=r.length>0;return i.useEffect(()=>{const s=a=>{a.key==="ArrowLeft"&&d(),a.key==="ArrowRight"&&h()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[r]),e.jsxs("section",{className:"rounded-2xl overflow-hidden border bg-white shadow-md hover:shadow-lg transition-all duration-300",children:[e.jsx("div",{className:"relative bg-gray-100",children:m?e.jsxs("div",{className:"relative flex justify-center items-center overflow-hidden",style:{minHeight:"40vh"},children:[o.type==="video"?e.jsx("video",{src:o.src,className:"max-h-[60vh] w-auto rounded-lg object-contain transition-all duration-300",controls:!0,playsInline:!0}):e.jsx("img",{src:o.src,alt:t.title,className:`block w-auto h-auto max-h-[60vh] object-contain transition-opacity duration-500 ${c?"opacity-50 blur-sm":"opacity-100 blur-0"}`,loading:"lazy",onLoad:()=>x(!1)}),(t.title||t.description)&&e.jsx("div",{className:"absolute bottom-0 inset-x-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent",children:e.jsxs("div",{className:"px-4 py-3 text-white text-center",children:[t.title&&e.jsx("h3",{className:"text-lg font-semibold tracking-wide",children:t.title}),t.description&&e.jsx("p",{className:"mt-1 text-sm opacity-90",children:t.description})]})}),r.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:d,className:"absolute left-4 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-black/40 text-white hover:bg-black/60 grid place-items-center backdrop-blur-sm transition","aria-label":"Previous",children:e.jsx(k,{className:"w-6 h-6"})}),e.jsx("button",{onClick:h,className:"absolute right-4 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-black/40 text-white hover:bg-black/60 grid place-items-center backdrop-blur-sm transition","aria-label":"Next",children:e.jsx(C,{className:"w-6 h-6"})})]})]}):e.jsx("div",{className:"w-full aspect-[4/3] grid place-items-center text-gray-400",children:e.jsx(p,{className:"w-10 h-10"})})}),r.length>1&&e.jsx("div",{className:"px-4 sm:px-6 py-4 border-t bg-gray-50",children:e.jsx("div",{className:"flex items-center justify-center gap-3 overflow-x-auto",children:r.map((s,a)=>e.jsx("button",{onClick:()=>n(a),className:`relative h-12 w-16 overflow-hidden rounded-md border transition-all duration-200 ${a===g?"border-blue-500 ring-2 ring-blue-400":"border-gray-300 hover:border-gray-400"}`,children:s.type==="video"?e.jsx("video",{src:s.src,className:"object-cover w-full h-full opacity-80"}):e.jsx("img",{src:s.src,alt:`Thumbnail ${a+1}`,className:"object-cover w-full h-full opacity-90"})},a))})})]})},z=t=>Array.isArray(t.images)&&t.images.length>0?t.images[0]:"/no-image.png",K=()=>{const{pageNumber:t,pageSizeValue:r,handlePageChange:g,handlePageSizeChange:n}=w(),{data:c,total:x,loading:h,error:d}=S(t,r),[o,m]=i.useState(null),s=l=>{m(z(l))},a=()=>m(null);return e.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 sm:py-8",children:[e.jsx("div",{className:"sticky top-20 sm:top-22 md:top-28 z-30 -mx-3 sm:-mx-6 lg:-mx-8 px-3 sm:px-6 lg:px-8 bg-gray-50/90 backdrop-blur supports-[backdrop-filter]:bg-gray-50/70 border-b border-gray-200",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 py-3",children:e.jsx(v,{title:"Gallery"})})}),e.jsx("div",{className:"h-4"}),h?e.jsx(f,{isNotFixed:!0,h:"h-[60vh]"}):d?e.jsx("div",{className:"p-4 border rounded-xl bg-red-50 text-red-700",children:d}):!c||c.length===0?e.jsx(j,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(l=>e.jsxs("div",{className:"group bg-white rounded-2xl shadow-sm hover:shadow-lg transition overflow-hidden cursor-pointer",children:[e.jsx(E,{item:l}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:l.description||"No description"}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm",children:[e.jsx(p,{className:"w-4 h-4"}),e.jsxs("span",{children:[l.images?.length||1," Photo"]})]}),e.jsx("button",{onClick:()=>s(l),className:"text-sm font-medium text-gray-900 hover:underline",children:"View â†’"})]})]})]},l._id))}),e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsx(y,{handlePageChange:g,handlePageSizeChange:n,currentPage:t,pageSize:r,totalCount:x})})]})]}),o&&e.jsxs("div",{className:"fixed inset-0 z-50 bg-black flex items-center justify-center",onClick:a,children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 z-50 bg-black/70 text-white p-2 rounded-full hover:bg-black",children:e.jsx(P,{className:"w-7 h-7"})}),e.jsx("img",{src:o,alt:"Full view",className:"w-full h-full object-contain",onClick:l=>l.stopPropagation()})]})]})};export{K as default};
