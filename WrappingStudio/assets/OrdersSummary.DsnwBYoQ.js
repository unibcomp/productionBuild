import{r as o,j as e,L as x}from"./index.BV23clpT.js";import{u as v,P as S}from"./usePagination.CopvNDwc.js";import{a as C}from"./useOrder.DqLJqKoz.js";import"./useMutation.goc4WQDO.js";const D=()=>{const{pageNumber:h,pageSizeValue:g,handlePageChange:p,handlePageSizeChange:u}=v(),{data:i,isLoading:j,isError:N}=C(),[c,m]=o.useState(""),[f,y]=o.useState([]),b=s=>{y(t=>t.includes(s)?t.filter(a=>a!==s):[...t,s])};return j?e.jsx("p",{className:"p-6 text-center",children:"Loading orders..."}):N?e.jsx("p",{className:"p-6 text-center text-red-500",children:"Failed to load orders"}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"max-w-7xl mx-auto p-4 md:p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("aside",{className:"w-full md:w-64",children:e.jsxs("div",{className:"sticky top-20 bg-white p-4 rounded shadow",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Filters"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"font-medium mb-2",children:"ORDER STATUS"}),["Delivered","Pending","Cancelled"].map(s=>e.jsxs("label",{className:"block cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",className:"mr-2",checked:f.includes(s),onChange:()=>b(s)}),s]},s))]})]})}),e.jsxs("main",{className:"flex-1",children:[e.jsx("div",{className:"sticky top-20 z-20 mb-4",children:e.jsx("div",{className:"relative bg-white rounded shadow p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsxs("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"11",cy:"11",r:"6"}),e.jsx("path",{d:"M21 21l-4.35-4.35"})]}),e.jsx("input",{type:"text",placeholder:"Search your orders here",value:c,onChange:s=>m(s.target.value),className:"w-full pl-10 pr-3 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-300"})]}),c&&e.jsx("button",{onClick:()=>m(""),className:"px-3 py-2 text-sm bg-gray-100 rounded hover:bg-gray-200","aria-label":"Clear search",children:"Clear"})]})})}),e.jsx("div",{className:"space-y-4",children:i?.result?.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"No orders found."}):i?.result?.map(s=>{const t=s.items?.[0]||s.item,a=Array.isArray(s.items)?s.items.reduce((n,r)=>n+(r.quantity||0),0):s.item?.quantity||0,w=encodeURIComponent(s._id),d=t?encodeURIComponent(t._id):"",l=t&&d?`/order-details?order_id=${w}&item_id=${d}`:null;return e.jsxs("div",{className:"bg-white p-4 rounded shadow flex flex-col sm:grid sm:grid-cols-[1fr_auto] gap-4",children:[e.jsxs("div",{className:"flex flex-row items-center gap-2 sm:hidden",children:[t&&e.jsx("img",{src:t.image||"/placeholder.png",alt:t.name||"Product",className:"w-12 h-12 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h2",{className:"font-semibold text-lg truncate",children:[t?.name||"No item"," (",a," item",a>1?"s":"",")"]}),e.jsx("p",{className:`text-sm font-semibold ${s.orderStatus==="Delivered"?"text-green-600":s?.orderStatus==="Pending"?"text-yellow-600":"text-red-600"}`,children:s.orderStatus})]}),l?e.jsx(x,{to:l,className:"text-blue-600 text-sm ml-2","aria-label":`View details for order ${s._id}`,children:"View"}):e.jsx("span",{className:"text-gray-400 text-sm ml-2",children:"No details"})]}),e.jsxs("div",{className:"hidden sm:flex sm:flex-row items-center gap-4",children:[t?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:t.image||"/placeholder.png",alt:t.name||"Product",className:"w-16 h-16 object-cover rounded"}),e.jsxs("div",{className:"min-w-0 w-40",children:[e.jsx("h2",{className:"font-semibold text-lg truncate",children:t.name}),t.color&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Color: ",t.color]}),t.size?.sizeName&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Size: ",t.size.sizeName]}),s.items?.length&&s.items.length>1&&e.jsxs("p",{className:"text-sm text-gray-500",children:["+",s.items.length-1," more item(s)"]})]})]}):e.jsx("p",{className:"text-gray-500 italic",children:"No items in this order"}),e.jsxs("div",{className:"ml-2",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Transaction: ",e.jsx("span",{className:"font-mono",children:s.transaction_id})]}),e.jsxs("p",{className:"text-sm",children:["Payment:"," ",e.jsx("span",{className:s.paymentStatus.toLowerCase()==="paid"?"text-green-600":"text-yellow-600",children:s.paymentStatus})]})]})]}),e.jsxs("div",{className:"hidden sm:block text-right mt-2 sm:mt-0 space-y-2",children:[e.jsxs("p",{className:"font-bold text-lg",children:["₹",s.totalAmount.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.items?.reduce((n,r)=>n+r.quantity,0)??0," item(s)"]}),e.jsx("p",{className:`text-sm font-semibold ${s.orderStatus==="Delivered"?"text-green-600":s.orderStatus==="Pending"?"text-yellow-600":"text-red-600"}`,children:s.orderStatus}),l?e.jsx(x,{to:l,className:"text-blue-600 text-sm block",children:"View Details →"}):e.jsx("span",{className:"text-gray-400 text-sm block",children:"No details"})]})]},s._id)})}),e.jsx(S,{currentPage:h,handlePageChange:p,pageSize:g,handlePageSizeChange:u,totalCount:i?.pagination.total||0})]})]})})})};export{D as default};
