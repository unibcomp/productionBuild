import{e as L,d as O,r as V,j as s,i as q}from"./index.C0EwQNyI.js";import{b as z,c as A,F as D,S as H,C as R,d as G,e as I,P as J}from"./CarsouelSelector.BF1Bk1R8.js";import{P as K}from"./PaginationSelecctor.COIvrxUP.js";import{u as Q}from"./usePagination.UHgsokOS.js";import{N as U}from"./NotDataFound.2fnHYRYM.js";import{P as W}from"./PageHeadline.Bd94_W4Q.js";import{u as X}from"./useModal.BtUm1eIn.js";import{B as Y}from"./ButtonBar.Bwb62gkH.js";import"./WishlistButton.B2jMIpyJ.js";import"./useMutation.CzFcMCQ9.js";import"./dialog.ByyMxi6R.js";import"./proxy.BJ_9IFGh.js";const ms=({category:a,subcategory:t,title:g,horizontal:e=!1,brand:d,showFilters:c=!1,isFullDetail:F=!1,exclude:p,productType:x})=>{const _=L(),[r]=O(),o=r.get("category"),l=r.get("subcategory"),m=r.get("slug"),i=r.get("brand"),y=r.get("exclude"),M=r.get("offer"),{openModal:S,closeModal:N,isModalOpen:f}=X(),{filters:u,setFilters:P,sorts:j,setSorts:v}=z(),{handlePageChange:C,handlePageSizeChange:$,pageNumber:h,pageSizeValue:b}=Q(),{data:n,isLoading:k,isError:B}=A({category:o||a,subcategory:l||t,brand:i||d,pageNumber:h,pageSize:b,...u,slug:m?String(m):void 0,sort:j,exclude:y||p,productType:x,offer:M||void 0});V.useEffect(()=>{window.scroll(0,0)},[Object.entries(u).flat().join(",")]);const E=B||(n?.results?.length??0)<1&&!x;return s.jsxs("div",{className:`${!e&&"min-h-screen"} bg-white relative`,children:[s.jsxs("div",{className:c?"mx-auto sm:px-8 py-2 w-full h-auto md:flex md:gap-6":"mx-auto sm:px-8 py-2 grid grid-cols-1 md:grid-cols-4 gap-6 w-full h-auto",children:[c&&s.jsx("aside",{className:"hidden md:flex md:flex-col w-[260px] xl:w-[300px] md:sticky md:top-20 lg:top-32 space-y-4 self-start",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(D,{filters:u,setFilters:P,category:o||a,subcategory:l||t,brand:i||d,slug:m||""}),s.jsx(H,{sort:j,setSort:v})]})}),s.jsx("div",{className:c?"md:col-span-3":"md:col-span-4",children:k?s.jsx(q,{isNotFixed:!0,h:e?"h-[290px]":"h-[85vh]"}):E?s.jsx(U,{}):n?.results&&n.results.length>0&&s.jsxs("main",{className:`col-span-1 ${c?"md:col-span-3":"md:col-span-4"}`,children:[g&&e&&s.jsx(W,{title:g,component:x?s.jsx(s.Fragment,{}):s.jsx(Y,{buttons:[{label:"View All",onClick:()=>{const w=[a?`category=${a}`:"",p?`exclude=${p}`:""].filter(Boolean).join("&");_(`/product${w?`?${w}`:""}`)},colorClass:"bg-blue-600 text-white hover:bg-blue-700"}]})}),s.jsx(Z,{data:n?.results||[],horizontal:e,isFullDetail:F}),e?s.jsx(R,{handlePageChange:C,currentPage:h,pageSize:b,totalCount:n?.pagination?.total||0}):s.jsx(K,{handlePageChange:C,handlePageSizeChange:$,currentPage:h,pageSize:b,totalCount:n?.pagination?.total||0})]})})]}),c&&s.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50 bg-white shadow-lg border-t border-gray-200 flex justify-between items-center px-4 py-3",children:s.jsxs(s.Fragment,{children:[s.jsxs("button",{className:"flex-1 mr-2 bg-gray-100 text-gray-800 font-semibold py-2 rounded-md flex items-center justify-center gap-1",onClick:()=>S({isSort:!0}),children:[s.jsx("span",{className:"material-symbols-outlined",children:"sort"})," Sort"]}),s.jsxs("button",{className:"flex-1 bg-gray-100 text-gray-800 font-semibold py-2 rounded-md flex items-center justify-center gap-1",onClick:()=>S({isFilter:!0},{}),children:[s.jsx("span",{className:"material-symbols-outlined",children:"filter_list"})," Filter"]})]})}),s.jsx(G,{show:f?.isFilter||!1,handleClose:()=>{N({isFilter:!1})},filters:u,setFilters:P,category:o||a,subcategory:l||t,brand:i||d,slug:m||""},f?.isFilter+""),s.jsx(I,{show:f.isSort||!1,setSort:v,sort:j,handleClose:()=>N({isSort:!1})})]},[o||"",l||"",i||""].join("-"))},Z=({data:a,horizontal:t=!1,isFullDetail:g=!1})=>s.jsx("div",{className:t?"flex custom-scroll space-x-4 pb-2":"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6",children:a.map((e,d)=>(console.log(d,e?._id),s.jsx("div",{className:t?"w-[300px] flex-shrink-0":"",children:s.jsx(J,{product:e,isFullDetail:g})},e?._id)))});export{ms as default};
