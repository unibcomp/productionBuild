import{n as R,o as k,r as p,V as P,j as a,z as b,p as w,P as F,B as U,L as B,X as E,m as T}from"./index.BvmzF7-c.js";import{a as I}from"./RegisterUserModal.BtVcZ5K6.js";import{u as q}from"./useSetting.BEzqV0vF.js";const Y=(x,y,c,r)=>_=>{if(r){const o=Number(c[x]??0);return _>=o?!0:`${y} must be greater than or equal to ${o}`}return!0},L=[{value:"PHONEPAY",label:"PHONEPAY"},{value:"PAYU",label:"PAYU"},{value:"GATEPAY",label:"GATEPAY"}],D=({user_id:x,isOpen:y,closeModal:c,isUser:r,role:_,reseller_name:o,reseller_url:g})=>{const{data:f,isLoading:A,refetch:v}=q({user_id:x}),{createOrUpdate:d}=I(),{user:m}=R(),u=(m==null?void 0:m.Setting)||{},e=f||u,{register:h,handleSubmit:S,control:j,reset:C,formState:{errors:i}}=k({defaultValues:{reseller_name:(e==null?void 0:e.reseller_name)||o,reseller_url:(e==null?void 0:e.reseller_url)||g,paymentMode:(e==null?void 0:e.paymentMode)||"PAYU",payoutMode:(e==null?void 0:e.payoutMode)||"UPI",dispute_days:(e==null?void 0:e.dispute_days)||7,breach_penalty_perce:(e==null?void 0:e.breach_penalty_perce)||0,breach_penalty_refund:(e==null?void 0:e.breach_penalty_refund)||0,breach_penalty_payout:(e==null?void 0:e.breach_penalty_payout)||0,transaction_payment_fees:(e==null?void 0:e.transaction_payment_fees)||0,transaction_vendor_payout_fee:(e==null?void 0:e.transaction_vendor_payout_fee)||0,transaction_refund_fees:(e==null?void 0:e.transaction_refund_fees)||0,transaction_at_onetime:(e==null?void 0:e.transaction_at_onetime)||0,transaction_montly_fees:(e==null?void 0:e.transaction_montly_fees)||0,user_id:e==null?void 0:e.user_id,upi:(e==null?void 0:e.upi)||.35,wallet:(e==null?void 0:e.wallet)||3.1,netBanking:(e==null?void 0:e.netBanking)||3,visaCard:(e==null?void 0:e.visaCard)||3,amexCard:(e==null?void 0:e.amexCard)||0,dinerclubCard:(e==null?void 0:e.dinerclubCard)||4.1,emiCard:(e==null?void 0:e.emiCard)||3.3,masterCard:(e==null?void 0:e.masterCard)||3,debitCardUpto2000:(e==null?void 0:e.debitCardAbove2000)||1.45,debitCardAbove2000:(e==null?void 0:e.debitCardAbove2000)||1.95,status:(e==null?void 0:e.status)??!1,minPayOut:(e==null?void 0:e.minPayOut)||10,maxPayOut:(e==null?void 0:e.maxPayOut)||.3,settlment_hold_percentage:e.settlment_hold_percentage||0}});p.useEffect(()=>{(e||o||g)&&C({reseller_name:e.reseller_name||o,reseller_url:e.reseller_url||g,paymentMode:e.paymentMode||"CASHFREE",payoutMode:e.payoutMode||"UPI",dispute_days:e.dispute_days||7,breach_penalty_perce:e.breach_penalty_perce||0,breach_penalty_refund:e.breach_penalty_refund||0,breach_penalty_payout:e.breach_penalty_payout||0,transaction_payment_fees:e.transaction_payment_fees||0,transaction_vendor_payout_fee:e.transaction_vendor_payout_fee||0,transaction_refund_fees:e.transaction_refund_fees||0,transaction_at_onetime:e.transaction_at_onetime||0,transaction_montly_fees:e.transaction_montly_fees||0,user_id:e.user_id,upi:e.upi||.35,wallet:e.wallet||3.1,netBanking:e.netBanking||3,visaCard:e.visaCard||3,amexCard:e.amexCard||0,dinerclubCard:e.dinerclubCard||4.1,emiCard:e.emiCard||3.3,masterCard:e.masterCard||3,debitCardUpto2000:e.debitCardUpto2000||1.45,debitCardAbove2000:e.debitCardAbove2000||1.95,status:e.status??!1,minPayOut:e.minPayOut||10,maxPayOut:e.maxPayOut||.3,settlment_hold_percentage:e.settlment_hold_percentage||0})},[f,C,v,u,o,g]);const O=n=>{d.mutate({user_id:x,data:n})};p.useEffect(()=>{var n;if(d.isSuccess)P.success("Updated successfully"),c(),v();else if(d.isError){const l=(n=d.error.response)==null?void 0:n.data;P.error((l==null?void 0:l.error)||(l==null?void 0:l.message))}},[d.isError,d.isSuccess]);const t=(n,s,l,M="0.01")=>{var N;return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:n}),a.jsx("input",{type:"number",step:M,placeholder:l,...h(s,{required:`${n} is required`,valueAsNumber:!0,validate:Y(s,n,u,r)}),className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:outline-none"}),i[s]&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:((N=i[s])==null?void 0:N.message)??""})]})};return a.jsx(b,{show:y,as:p.Fragment,children:a.jsxs(w,{as:"div",className:"relative z-50",onClose:c,children:[a.jsx(b.Child,{as:p.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx("div",{className:"fixed inset-0 bg-black/60"})}),a.jsx("div",{className:"fixed inset-0 ",children:a.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:a.jsx(b.Child,{as:p.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-90",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-90",children:a.jsxs(w.Panel,{className:"custom-scroll h-[90vh] relative w-full max-w-5xl transform overflow-hidden rounded-lg bg-white p-0 text-left align-middle shadow-xl transition-all z-100",children:[a.jsx("div",{className:"sticky top-0 z-50 bg-white border-b px-4 py-3 flex items-center justify-between shadow-sm ",children:a.jsx(F,{title:`${r?"User":"Admin"} Setting`,searchComponent:a.jsx(U,{buttons:[{label:"Close",onClick:()=>c(),variant:"danger"}]})})}),a.jsx("div",{className:"p-4",children:A?a.jsx(B,{}):r&&(m==null?void 0:m.role)==="ADMIN"&&u&&Object.keys(u).length<1?a.jsx("div",{children:"Failed To Load"}):a.jsxs("form",{onSubmit:S(O),className:"space-y-4",children:[!r&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Reseller Name"}),a.jsx("input",{type:"text",disabled:!0,placeholder:"Enter reseller name",...h("reseller_name",{required:"Reseller name is required"}),className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:outline-none"}),i.reseller_name&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.reseller_name.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Reseller URL"}),a.jsx("input",{type:"url",disabled:!0,placeholder:"https://example.com",...h("reseller_url",{required:"Reseller URL is required",pattern:{value:/^(https?:\/\/)?([\w\-])+\.\w{2,}(\S*)?$/i,message:"Enter a valid URL"}}),className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:outline-none"}),i.reseller_url&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.reseller_url.message})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Payment Mode"}),a.jsx(E,{name:"paymentMode",control:j,rules:{required:"Payment mode is required"},render:({field:n})=>a.jsxs("select",{...n,className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:outline-none",children:[a.jsx("option",{value:"",children:"Select payment mode"}),L.map(s=>a.jsx("option",{value:s.value,children:s.label},s.value))]})}),i.paymentMode&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.paymentMode.message})]})}),t("Dispute Days","dispute_days","Enter dispute days","1"),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t("Breach Penalty %","breach_penalty_perce","Percentage"),t("Breach Penalty Refund","breach_penalty_refund","Refund amount"),t("Breach Penalty Payout","breach_penalty_payout","Payout amount")]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t("Payment Fees","transaction_payment_fees","Payment fees"),t("Vendor Payout Fees","transaction_vendor_payout_fee","Vendor payout fees"),t("Refund Fees","transaction_refund_fees","Refund fees")]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("One‑time Fees","transaction_at_onetime","One‑time fees"),t("Monthly Fees","transaction_montly_fees","Monthly fees")]}),!["PAYOUT_APP_USER"].includes(_??"")&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold text-white bg-blue-600 px-4 py-2 rounded-md mt-6 mb-4 shadow-sm",children:"PayIn Charge Configuration"}),a.jsxs("div",{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t("UPI  (%)","upi","Ex: 0.95"),t("Wallet  (%)","wallet","Ex: 1.2"),t("Net Banking  (%)","netBanking","Ex: 1.5")]}),a.jsx("h4",{className:"text-md font-semibold text-gray-700 mt-4",children:"Card Wise (%)"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t("Visa Card","visaCard","Ex: 1.2"),t("MasterCard","masterCard","Ex: 1.25"),t("Amex Card","amexCard","Ex: 1.3"),t("Diner Club","dinerclubCard","Ex: 1.4"),t("EMI Card","emiCard","Ex: 2.0")]}),a.jsx("h4",{className:"text-md font-semibold text-gray-700 mt-4",children:"Debit Card Slabs (%)"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("Upto INR 2000","debitCardUpto2000","Ex: 1.45"),t("Above INR 2000","debitCardAbove2000","Ex: 1.95"),t("Settlment Hold (%)","settlment_hold_percentage","Ex: 1")]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold text-white bg-blue-600 px-4 py-2 rounded-md mt-6 mb-4 shadow-sm",children:"PayOut Charge  Configuration"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t("Min(Flat)","minPayOut","Ex: 0.95"),t("max(%) ","maxPayOut","Ex: 1.2")]})]}),r&&a.jsxs(a.Fragment,{children:[a.jsx("h4",{className:"text-md font-semibold text-gray-700 mt-4",children:"Status"}),a.jsx(E,{name:"status",control:j,render:({field:n})=>a.jsx("button",{type:"button",role:"switch","aria-checked":n.value,onClick:()=>n.onChange(!n.value),className:`w-12 h-6 flex items-center rounded-full transition duration-300 focus:outline-none ${n.value?"bg-green-500":"bg-gray-300"}`,children:a.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform duration-300 ${n.value?"translate-x-6":"translate-x-1"}`})})})]}),a.jsx(T.button,{type:"submit",whileHover:{scale:1.03},whileTap:{scale:.97},disabled:d.isPending,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-md transition",children:d.isPending?"Saving...":"Save"})]})})]})})})})]})})};export{D as A};
