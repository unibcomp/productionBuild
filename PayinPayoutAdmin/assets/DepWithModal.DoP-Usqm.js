import{b as q,c as z,l as B,r as l,j as e,z as g,n as h,B as C,V as F}from"./index.lh4JBQzm.js";import{a as V}from"./useManualPayin.B7Lamn0z.js";import{u as W}from"./useTransaction.CAJjZMro.js";const R=()=>q({mutationFn:async r=>(await z.post("/mannual-withdraw/",r)).data}),G=({onClose:r,isOpen:b,isWithdraw:d,user_id:c,isHold:o,refetch:P,isRealesed:i,transaction_id:s})=>{const{register:m,handleSubmit:T,reset:A,setValue:y,formState:{errors:n}}=B();l.useEffect(()=>{s&&y("transaction_id",s)},[s,y]);const{mutate:S,isPending:f}=V(),{mutate:D,isPending:j}=R(),{updateTransactionMutation:p,updateTransactionRealseMutation:x}=W(),E=t=>{const u={onSuccess:()=>{F.success("Action successful!"),A(),r(),P()},onError:a=>{var w,v,N,k;const M=((v=(w=a==null?void 0:a.response)==null?void 0:w.data)==null?void 0:v.message)||((k=(N=a==null?void 0:a.response)==null?void 0:N.data)==null?void 0:k.error)||(a==null?void 0:a.message)||"Something went wrong!";F.error(M)}};if(i&&s){x.mutate({transaction_id:s,remark:t.remark},u);return}if(o&&t.amount){p.mutate({user_id:c,amount:t.amount,remark:t.remark},u);return}if(d&&t.amount){D({user_id:c,amount:t.amount,remark:t.remark},u);return}t.amount&&S({user_id:c,amount:t.amount,utr:t.utr||void 0,remark:t.remark},u)};return e.jsx(g,{appear:!0,show:b,as:l.Fragment,children:e.jsxs(h,{as:"div",className:"relative z-50",onClose:r,children:[e.jsx(g.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center px-4 py-6 text-center",children:e.jsx(g.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(h.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-xl bg-[#1a2c33] border border-[#2a3e4c] p-6 text-white align-middle shadow-xl transition-all",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(h.Title,{as:"h3",className:"text-lg font-semibold",children:d?"Withdraw Funds":o?"Hold Amount":i?"Release Funds":"Deposit Funds"}),e.jsx(C,{buttons:[{label:"Close",onClick:()=>r(),variant:"danger"}]})]}),e.jsxs("form",{onSubmit:T(E),className:"mt-4 space-y-4",children:[(i||o)&&s&&e.jsx("div",{children:e.jsx("input",{type:"text",...m("transaction_id"),value:s,disabled:!0,className:"w-full py-2 px-3 rounded-md bg-white text-gray-900 border border-gray-300"})}),!i&&e.jsxs("div",{children:[e.jsx("input",{type:"text",...m("amount",{required:"Amount is required",valueAsNumber:!0}),className:"w-full py-2 px-3 rounded-md bg-white text-gray-900 border border-gray-300",placeholder:"Amount"}),(n==null?void 0:n.amount)&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:n.amount.message})]}),!d&&!o&&!i&&e.jsx("div",{children:e.jsx("input",{type:"text",...m("utr"),className:"w-full py-2 px-3 rounded-md bg-white text-gray-900 border border-gray-300",placeholder:"UTR"})}),e.jsxs("div",{children:[e.jsx("input",{type:"text",...m("remark",{required:"Remark is required"}),className:"w-full py-2 px-3 rounded-md bg-white text-gray-900 border border-gray-300",placeholder:"Enter Remarks"}),n.remark&&e.jsx("p",{className:"text-red-400 text-sm mt-1",children:n.remark.message})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{type:"submit",disabled:f||j||p.isPending||x.isPending,className:"w-full py-3 bg-[#185e91] hover:bg-[#144e7a] text-white font-semibold rounded-md transition cursor-pointer",children:f||j||p.isPending||x.isPending?"Processing...":"Submit"})})]})]})})})})]})})};export{G as D};
