import{b as w,h as S,c as _,j as e,m as y,f as A,P as v,S as C,L as D,N as E,C as P,V as p,g as k,r as W,p as R,q as u}from"./index.BQuySKhI.js";import{u as z,C as H,A as U}from"./AdminSetting.DiqjPK_j.js";import{B as F}from"./ActionButton.gYbFbsue.js";import{D as $}from"./DepWithModal.CGzs81bk.js";import{u as f}from"./useDeleteAndSuspendUser.DkmrpNfw.js";import"./useSetting.D4PDM03O.js";import"./useManualPayin.DXUD3Emi.js";import"./useTransaction.DDxQGdnD.js";const K=()=>{var N;const{handlePageChange:h,handlePageSizeChange:r,pageNumber:x,pageSizeValue:o}=w(),{isModalOpen:t,openModal:c,closeModal:n,data:s}=S(),{setSearchQuery:l,searchQuery:g}=_(),{mutate:i}=f(),{data:a,isError:d,isLoading:b,refetch:m}=z({pageNumber:x,pageSize:o,searchQuery:g});return e.jsxs(y.div,{className:"bg-white shadow-lg rounded-2xl",variants:A,initial:"hidden",animate:"visible",children:[e.jsx(v,{title:"All Reseller",searchComponent:e.jsxs(e.Fragment,{children:[e.jsx(C,{handlePageSizeChange:r,pageSizeOptions:[10,20,30],pageSize:o,setSearchQuery:l}),e.jsx(F,{buttons:[{label:"Create",onClick:()=>c({isRegister:!0},{isRegister:!0}),variant:"primary"}]})]})}),e.jsxs("div",{className:"custom-scroll h-[72vh] overflow-auto",children:[e.jsxs("table",{className:"min-w-full text-sm text-left text-gray-700",children:[e.jsx("thead",{className:"bg-gray-100 border-b text-xs uppercase text-gray-500 sticky top-0 z-40",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"S.N"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Full Name"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Mobile"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Account status"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Hold"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Settled"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"UnSettled"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Wallet Status"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Created At"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Updated At"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Actions"})]})}),!d&&(a==null?void 0:a.data.length)!=0&&!b&&e.jsx(V,{data:(a==null?void 0:a.data)||[],openModal:c,refetch:m})]}),b?e.jsx(D,{}):(d||((N=a==null?void 0:a.data)==null?void 0:N.length)===0)&&e.jsx(E,{})]}),e.jsx(H,{isOpen:t.isRegister||!1,isSeller:!0,closeModal:()=>n({isRegister:!1}),refetch:m}),e.jsx(U,{isOpen:(t==null?void 0:t.isAdminSetting)||!1,user_id:(s==null?void 0:s.user_id)||null,reseller_name:(s==null?void 0:s.reseller_name)||null,reseller_url:(s==null?void 0:s.reseller_url)||null,closeModal:()=>n({isAdminSetting:!1})}),e.jsx($,{isOpen:t.isWithdraw||t.isDeposit||t.isHold||!1,onClose:()=>n({...t!=null&&t.isWithdraw?{isWithdraw:!1}:{},...t!=null&&t.isDeposit?{isDeposit:!1}:{},...t!=null&&t.isHold?{isHold:!1}:{}}),isHold:t.isHold||!1,refetch:m,user_id:s==null?void 0:s.user_id,isWithdraw:t.isWithdraw||!1,isRealesed:t.isRealesed||!1}),e.jsx(P,{isOpen:t.confirm||!1,onClose:()=>n({confirm:!1}),onConfirm:()=>{s!=null&&s.user_id&&i({user_id:s.user_id,isDeleted:!0},{onSuccess:j=>{n({confirm:!1}),p.success(j.message||"deleted successfully")},onError:j=>{p.error(j.message)}})},title:"Delete User",description:"Are you sure you want to delete this item ?"}),e.jsx(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.3},children:e.jsx(k,{currentPage:x,handlePageChange:h,pageSize:o,handlePageSizeChange:r,totalCount:(a==null?void 0:a.pagination.total)||1})})]})},V=({data:h,openModal:r,refetch:x})=>{const{mutate:o}=f(),[t,c]=W.useState(null),n=({item:s,account_status:l,isFrozen:g})=>{c(s.user_id),console.log(l),o({user_id:s.user_id,...l&&{accountStatus:s.accountStatus==="SUSPENDED"?"ACTIVE":"SUSPENDED"},...g&&{isFrozen:!s.isFrozen}},{onSuccess:i=>{x(),p.success(i.message||"Account status updated successfully")},onError:i=>{var a,d;p.error(((d=(a=i==null?void 0:i.response)==null?void 0:a.data)==null?void 0:d.message)||"Something went wrong while updating status")},onSettled:()=>{c(null)}})};return e.jsx("tbody",{className:"custom-scroll",children:h.map((s,l)=>e.jsxs(y.tr,{className:"hover:bg-gray-50 transition-all duration-150",variants:R,initial:"hidden",animate:"visible",custom:l,children:[e.jsx("td",{className:"px-4 py-3 font-bold",children:l+1}),e.jsx("td",{className:"px-4 py-3 font-bold",children:s.full_name}),e.jsx("td",{className:"px-4 py-3",children:s.mobile}),e.jsx("td",{className:"px-4 py-3",children:s.email}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{onClick:()=>n({item:s,account_status:!0}),disabled:t===s.user_id,className:`w-10 h-5 cursor-pointer flex items-center rounded-full p-1 transition-colors duration-300
        ${s.accountStatus==="ACTIVE"?"bg-blue-600":"bg-gray-300"}
        ${t===s.user_id?"opacity-50 cursor-not-allowed":""}
    `,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow transform transition-transform ${s.accountStatus==="ACTIVE"?"translate-x-5":"translate-x-0"}`})})}),e.jsx("td",{className:"px-4 py-3",children:s.holdAmount}),e.jsx("td",{className:"px-4 py-3",children:s.settled_amount.toFixed(2)}),e.jsx("td",{className:"px-4 py-3",children:s.un_settled_amount.toFixed(2)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{onClick:()=>n({item:s,isFrozen:!0}),disabled:t===s.user_id,className:`w-10 h-5 cursor-pointer flex items-center rounded-full p-1 transition-colors duration-300
        ${s.isFrozen?"bg-gray-300":"bg-blue-600"}
        ${t===s.user_id?"opacity-50 cursor-not-allowed":""}
    `,children:e.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow transform transition-transform ${s.isFrozen?"translate-x-0":"translate-x-5"}`})})}),e.jsx("td",{className:"px-4 py-3",children:s.createdAt}),e.jsx("td",{className:"px-4 py-3",children:s.updatedAt}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex gap-3 flex-wrap w-[300px]",children:[e.jsxs(u,{to:"/permission",className:"cursor-pointer flex items-center gap-1 text-green-600 hover:text-green-700 transition-colors font-medium","aria-label":"Grant Permission",children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:"check_circle"}),e.jsx("span",{className:"text-sm",children:"Permission"})]}),e.jsxs("button",{className:"cursor-pointer flex items-center gap-1 text-blue-600 hover:text-blue-700 transition-colors font-medium cursor-pointer","aria-label":"Edit User",onClick:()=>r({isAdminSetting:!0},{user_id:s.user_id,reseller_name:s==null?void 0:s.reseller_name,reseller_url:s==null?void 0:s.reseller_url}),children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:"edit"}),e.jsx("span",{className:"text-sm",children:"Edit"})]}),e.jsxs("button",{onClick:()=>r==null?void 0:r({confirm:!0},{user_id:s.user_id}),className:"flex items-center gap-1 px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 transition whitespace-nowrap cursor-pointer",children:[e.jsx("span",{className:"material-symbols-outlined text-[12px] leading-none",children:"delete"}),"Delete"]}),e.jsxs("button",{className:"flex items-center gap-1 px-2 py-1 text-xs bg-green-100 text-green-800 rounded hover:bg-green-200 transition whitespace-nowrap cursor-pointer",onClick:()=>r==null?void 0:r({isDeposit:!0},s),children:[e.jsx("span",{className:"material-symbols-outlined text-[12px] leading-none",children:"payments"}),"Deposit"]}),e.jsxs("button",{className:"flex items-center gap-1 px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 transition whitespace-nowrap cursor-pointer",onClick:()=>r==null?void 0:r({isWithdraw:!0},s),children:[e.jsx("span",{className:"material-symbols-outlined text-[12px] leading-none",children:"undo"}),"Reverse"]}),e.jsxs("button",{className:"flex items-center gap-1 px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 transition whitespace-nowrap cursor-pointer",onClick:()=>r==null?void 0:r({isHold:!0},s),children:[e.jsx("span",{className:"material-symbols-outlined text-[12px] leading-none",children:"hand_package"}),"Hold"]}),e.jsxs(u,{className:"flex items-center gap-1 px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 transition whitespace-nowrap cursor-pointer",to:`/transaction/${s==null?void 0:s.user_id}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[12px] leading-none ",children:"receipt_long"}),"Transaction"]}),e.jsxs(u,{className:"flex items-center gap-1 px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 transition whitespace-nowrap cursor-pointer",to:`/gateway/${s==null?void 0:s.user_id}/WITHDRAW`,children:[e.jsx("span",{className:"material-symbols-outlined text-[12px] leading-none ",children:"assured_workload"}),"Withdraw GateWay"]}),e.jsxs(u,{className:"flex items-center gap-1 px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 transition whitespace-nowrap cursor-pointer",to:`/gateway/${s==null?void 0:s.user_id}/DEPOSIT`,children:[e.jsx("span",{className:"material-symbols-outlined text-[12px] leading-none ",children:"assured_workload"}),"Deposit GateWay"]})]})})]},l))})};export{K as default};
