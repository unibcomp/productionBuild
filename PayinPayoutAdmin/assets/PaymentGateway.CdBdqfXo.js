import{u as P,a as v,e as f,h as A,j as a,m as w,c as G,P as C,S as L,B as z,L as k,N as M,d as B,r as V,i as _,k as $,V as j}from"./index.D2Os02VC.js";import{u as D,a as E,P as O}from"./PaymentGateWayModel.DgmM5KsY.js";const F=()=>{var m,g,y;const{handlePageChange:d,handlePageSizeChange:i,pageNumber:l,pageSizeValue:n}=P(),{setSearchQuery:r,searchQuery:u}=v(),{user_id:s,source:t}=f(),{openModal:o,closeModal:c,data:N,isModalOpen:b}=A(),{updateGateway:S}=D(),{data:e,isError:p,isLoading:x,refetch:h}=E({pageNumber:l,pageSize:n,searchQuery:u,user_id:s});return a.jsxs(w.div,{className:"bg-white shadow-lg rounded-2xl",variants:G,initial:"hidden",animate:"visible",children:[a.jsx(C,{title:`${t} Payment Gateway List`,searchComponent:a.jsxs(a.Fragment,{children:[a.jsx(L,{handlePageSizeChange:i,pageSizeOptions:[10,20,30],pageSize:n,setSearchQuery:r}),a.jsx(z,{buttons:[{label:"Create",onClick:()=>o({isGateway:!0},{source:t,user_id:s}),variant:"primary"}]})]})}),a.jsxs("div",{className:"custom-scroll h-[70vh] overflow-auto",children:[a.jsxs("table",{className:"min-w-full text-sm text-left text-gray-700",children:[a.jsx("thead",{className:"bg-gray-100 border-b text-xs uppercase text-gray-500 sticky top-0 z-40",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-nowrap",children:"S.N"}),a.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Name"}),a.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Is Active"}),a.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Created At"}),a.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Updated At"}),a.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Actions"})]})}),!p&&((m=e==null?void 0:e.results)==null?void 0:m.length)!=0&&!x&&a.jsx(H,{data:(e==null?void 0:e.results)||[],updateGateway:S,refetch:h})]}),x?a.jsx(k,{}):(p||((g=e==null?void 0:e.results)==null?void 0:g.length)===0)&&a.jsx(M,{})]}),a.jsx(B,{currentPage:l,handlePageChange:d,pageSize:n,handlePageSizeChange:i,totalCount:((y=e==null?void 0:e.pagination)==null?void 0:y.total)||1}),a.jsx(O,{isOpen:b.isGateway||!1,data:N,onClose:()=>c({isGateway:!1}),refetch:h})]})},H=({data:d,updateGateway:i,refetch:l})=>{const[n,r]=V.useState(null),u=s=>{r(s.user_id),i.mutate({id:s.id,data:{isActive:!s.isActive}},{onSuccess:t=>{l(),j.success(t.message||"Account status updated successfully")},onError:t=>{var o,c;j.error(((c=(o=t==null?void 0:t.response)==null?void 0:o.data)==null?void 0:c.message)||"Something went wrong while updating status")},onSettled:()=>{r(null)}})};return a.jsx("tbody",{className:"custom-scroll",children:d.map((s,t)=>a.jsxs(w.tr,{className:"hover:bg-gray-50 transition-all duration-150",variants:_,initial:"hidden",animate:"visible",custom:t,children:[a.jsx("td",{className:"px-4 py-3 font-bold",children:t+1}),a.jsx("td",{className:"px-4 py-3",children:s.name}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("button",{onClick:()=>u(s),disabled:n===s.user_id,className:`w-10 h-5 cursor-pointer flex items-center rounded-full p-1 transition-colors duration-300
        ${s.isActive?"bg-blue-600":"bg-gray-300"}
        ${n===s.user_id?"opacity-50 cursor-not-allowed":""}
    `,children:a.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow transform transition-transform ${s.isActive?"translate-x-5":"translate-x-0"}`})})}),a.jsx("td",{className:"px-4 py-3",children:new Date(s.createdAt).toLocaleString()}),a.jsx("td",{className:"px-4 py-3",children:new Date(s.updatedAt).toLocaleString()}),a.jsx("td",{className:"px-4 py-3",children:a.jsx($,{to:`/PaymentMethodList/${s.id}`,children:a.jsx("span",{className:"material-symbols-outlined",children:"visibility"})})})]},s.id))})};export{F as default};
