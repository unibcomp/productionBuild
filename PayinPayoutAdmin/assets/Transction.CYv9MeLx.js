import{u as g,a as m,e as j,j as s,m as c,c as N,P as b,S,D as w,L as f,N as v,d as A,i as C}from"./index.Bqg2avR3.js";import{a as P}from"./useTransaction.C0INfSQ9.js";const z=()=>{var x,p,h;const{handlePageChange:l,handlePageSizeChange:n,pageNumber:e,pageSizeValue:t,startItem:r}=g(),{setSearchQuery:y,searchQuery:u}=m(),{user_id:i}=j(),{data:a,isError:o,isLoading:d}=P({searchQuery:u,...i&&{user_id:i},pageNumber:e,pageSize:t});return s.jsxs(c.div,{className:"bg-gradient-to-br from-slate-100 to-indigo-100 shadow-lg rounded-2xl p-2",variants:N,initial:"hidden",animate:"visible",children:[s.jsx(b,{title:"Recent Transactions",searchComponent:s.jsx(S,{handlePageSizeChange:n,pageSizeOptions:[10,20,30],pageSize:t,setSearchQuery:y})}),Array.isArray(a==null?void 0:a.results)&&a.results.length>0&&s.jsx("div",{className:"flex justify-end mt-2 mr-2",children:s.jsxs("button",{className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg shadow hover:bg-green-700 transition duration-200 cursor-pointer",onClick:()=>w(a.results,"transactions"),children:[s.jsx("span",{className:"material-symbols-outlined text-lg",children:"download"}),"Export to CSV"]})}),s.jsxs("div",{className:"custom-scroll h-[67vh] overflow-auto mt-2",children:[s.jsxs("table",{className:"min-w-full text-sm text-left text-gray-700 bg-gradient-to-br from-slate-100 to-indigo-100 bg-transparent",children:[s.jsx("thead",{className:"bg-gray-100 border-b text-xs uppercase text-gray-500 sticky top-0 z-100 ",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3",children:"S.N"}),s.jsx("th",{className:"px-4 py-3",children:"Transaction ID"}),s.jsx("th",{className:"px-4 py-3",children:"User"}),s.jsx("th",{className:"px-4 py-3",children:"Prev Balance"}),s.jsx("th",{className:"px-4 py-3",children:"Amount"}),s.jsx("th",{className:"px-4 py-3",children:"Tax"}),s.jsx("th",{className:"px-4 py-3",children:"Total"}),s.jsx("th",{className:"px-4 py-3",children:"Type"}),s.jsx("th",{className:"px-4 py-3",children:"Current Balance"}),s.jsx("th",{className:"px-4 py-3",children:"Status"}),s.jsx("th",{className:"px-4 py-3",children:"Created At"}),s.jsx("th",{className:"px-4 py-3",children:"CompletedAt"}),s.jsx("th",{className:"px-4 py-3",children:"Remark"})]})}),!o&&((x=a==null?void 0:a.results)==null?void 0:x.length)!==0&&!d&&s.jsx(T,{data:(a==null?void 0:a.results)||[],startItem:r})]}),d?s.jsx(f,{}):(o||((p=a==null?void 0:a.results)==null?void 0:p.length)===0)&&s.jsx(v,{})]}),s.jsx(c.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.3},children:s.jsx(A,{currentPage:e,handlePageChange:l,pageSize:t,handlePageSizeChange:n,totalCount:((h=a==null?void 0:a.pagination)==null?void 0:h.total)||1})})]})},T=({data:l,startItem:n})=>s.jsx("tbody",{className:"custom-scroll",children:l.map((e,t)=>{var r;return s.jsxs(c.tr,{className:"hover:bg-gray-50 transition-all duration-150",variants:C,initial:"hidden",animate:"visible",custom:t,children:[s.jsx("td",{className:"px-4 py-3 font-bold",children:t+n}),s.jsx("td",{className:"px-4 py-3",children:e.transactionId}),s.jsx("td",{className:"px-4 py-3",children:e.user}),s.jsx("td",{className:"px-4 py-3",children:e.prevBalance}),s.jsx("td",{className:"px-4 py-3",children:e.amount.toFixed(2)}),s.jsx("td",{className:"px-4 py-3",children:((r=e.tax)==null?void 0:r.toFixed(2))??"0.00"}),s.jsx("td",{className:"px-4 py-3",children:e.totalAmount.toFixed(2)}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("span",{className:`px-2 py-1 rounded-sm text-xs font-semibold
    ${e.type==="DEBIT"?"bg-red-500 text-white":""}
    ${e.type==="CREDIT"?"bg-green-500 text-white":""}
    ${e.type==="HOLD"?"bg-yellow-100 text-yellow-700":""}
    ${e.type==="RELEASE"?"bg-blue-100 text-blue-700":""}
    ${e.type==="ADJUST"?"bg-purple-100 text-purple-700":""}`,children:e.type})}),s.jsx("td",{className:"px-4 py-3 ",children:e.currentBalance.toFixed(2)}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${e.status==="SUCCESS"?"text-green-600 bg-green-100":e.status==="PENDING"?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100"}`,children:e.status.toLowerCase()})}),s.jsx("td",{className:"px-4 py-3",children:e.initiatedAt||e.createdAt}),s.jsx("td",{className:"px-4 py-3",children:e.completedAt||e.createdAt}),s.jsx("td",{className:"px-4 py-3",children:e==null?void 0:e.description})]},e.transactionId)})});export{z as default};
