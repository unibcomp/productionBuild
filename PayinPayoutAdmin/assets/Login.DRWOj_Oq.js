import{k,K as F,Q as L,g as _,r as p,o as C,n as A,R as P,j as e,m,T as S,U as I,J as $,V as b,W as E}from"./index.CV2AEKHB.js";const M="/assets/loginAdmin.CUmFEuXf.jpg",U=t=>F.post("/login",t).then(s=>s.data),q=()=>k({mutationFn:U,mutationKey:["login"]}),T=()=>{let t=localStorage.getItem("device_id");return t||(t=crypto.randomUUID(),localStorage.setItem("device_id",t)),t},z=()=>new Promise(t=>{if(!navigator.geolocation)return t(null);navigator.geolocation.getCurrentPosition(s=>t(s.coords.latitude),s=>{console.warn("Failed to get latitude:",s.message),t(null)},{enableHighAccuracy:!0,timeout:1e4})}),R=()=>new Promise(t=>{if(!navigator.geolocation)return t(null);navigator.geolocation.getCurrentPosition(s=>t(s.coords.longitude),s=>{console.warn("Failed to get longitude:",s.message),t(null)},{enableHighAccuracy:!0,timeout:1e4})}),c=$(),B=S[c==null?void 0:c.reseller_name]||I,d=({delay:t=0,inside:s=!1,variant:u="small"})=>{let o=0,l=1;switch(u){case"small":o=Math.random()*6+4,l=1;break;case"medium":o=Math.random()*12+8,l=2;break;case"large":o=Math.random()*20+16,l=4;break}const f=Math.random()*100,g=Math.random()*100;return e.jsx(m.div,{initial:{opacity:0,x:"-10vw",y:0},animate:{opacity:[0,1,0],x:["-5vw","5vw","0vw"],y:["0vh","10vh","-5vh"]},transition:{duration:6,repeat:1/0,delay:t,ease:"easeInOut"},className:`absolute rounded-full shadow-lg ${s?"opacity-60":"opacity-40"}`,style:{width:o,height:o,top:`${g}%`,left:`${f}%`,background:"radial-gradient(circle, #FFD700, #FF8C00)",filter:`blur(${l}px)`}})},K=()=>{const t=L(),s=_(),[u,o]=p.useState(!1),[l,f]=p.useState(!1),{register:g,handleSubmit:w,formState:{errors:x}}=C(),{login:v}=A(),{mutateAsync:j,isPending:y}=q(),N=async i=>{var a;try{o(!0);const[h,r]=await Promise.all([z(),R()]);if(!h||!r)return o(!1),b.error("Failed to get location.");o(!1);const n=await j({...i,device_id:T(),latitude:h,longitude:r});return v(n),E(n.token),b.success(n.message),s("/")}catch(h){o(!1);const r=h,n=(a=r.response)==null?void 0:a.data;b.error((n==null?void 0:n.message)||(r==null?void 0:r.message)||(n==null?void 0:n.error)||"Login failed.")}};return p.useEffect(()=>{P()&&s("/")},[t.pathname]),e.jsxs("div",{className:"relative min-h-screen flex items-center justify-center bg-gradient-to-b from-[#123C82] to-[#0D2B2F] px-4 overflow-hidden",children:[Array.from({length:15}).map((i,a)=>e.jsx(d,{delay:a*.6,variant:"small"},`bg-${a}`)),Array.from({length:5}).map((i,a)=>e.jsx(d,{delay:a*1.2,variant:"medium"},`bg-mid-${a}`)),Array.from({length:3}).map((i,a)=>e.jsx(d,{delay:a*2,variant:"large"},`bg-big-${a}`)),e.jsxs(m.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"relative flex flex-col md:flex-row w-full max-w-6xl rounded-3xl shadow-2xl overflow-hidden border border-gray-200 backdrop-blur-xl bg-white/80",children:[e.jsxs("div",{className:"hidden md:flex md:w-1/2 flex-col justify-between p-12 bg-gradient-to-b from-blue-50 to-gray-100 rounded-l-3xl relative overflow-hidden",children:[Array.from({length:8}).map((i,a)=>e.jsx(d,{delay:a*.5,inside:!0},`left-${a}`)),e.jsxs("div",{className:"absolute top-8 left-8 flex items-center gap-3 z-20",children:[e.jsx("img",{src:B,alt:"Company Logo",className:"w-12 h-12 rounded-lg shadow-md"}),e.jsx("span",{className:"text-2xl font-bold text-[#123C82]",children:(c==null?void 0:c.reseller_name)||""})]}),e.jsxs("div",{className:"flex flex-col items-center text-center gap-5 relative z-10 mt-12",children:[e.jsx("img",{src:M,alt:"Illustration",className:"w-full max-w-lg h-auto object-contain rounded-xl"}),e.jsx("h2",{className:"text-4xl font-bold text-[#123C82]",children:"Welcome Back!"}),e.jsx("p",{className:"text-base text-gray-700 max-w-md",children:"Securely access your dashboard and manage transactions with ease."})]})]}),e.jsxs("div",{className:"w-full md:w-1/2 p-12 rounded-r-3xl bg-white relative",children:[Array.from({length:10}).map((i,a)=>e.jsx(d,{delay:a*.4,inside:!0},`form-${a}`)),e.jsx("h2",{className:"text-5xl font-extrabold text-center text-[#123C82]",children:"Login"}),e.jsx("p",{className:"text-center text-gray-500 mb-8 text-base",children:"Enter your credentials to continue"}),e.jsxs("form",{onSubmit:w(N),className:"space-y-7",children:[e.jsxs(m.div,{whileFocus:{scale:1.02},children:[e.jsx("label",{className:"block mb-1 text-base font-medium text-gray-700",children:"Email *"}),e.jsx("input",{type:"email",placeholder:"Enter your email",...g("email",{required:"Email is required"}),className:"w-full px-5 py-3 border rounded-lg text-lg focus:ring-2 focus:ring-[#185e91] outline-none"}),x.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.email.message})]}),e.jsxs(m.div,{whileFocus:{scale:1.02},children:[e.jsx("label",{className:"block mb-1 text-base font-medium text-gray-700",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:l?"text":"password",placeholder:"Enter your password",...g("password",{required:"Password is required"}),className:"w-full px-5 py-3 border rounded-lg text-lg focus:ring-2 focus:ring-[#185e91] outline-none"}),e.jsx("span",{onClick:()=>f(!l),className:"material-symbols-outlined absolute right-4 top-3 text-gray-500 cursor-pointer text-xl",children:l?"visibility_off":"visibility"})]}),x.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.password.message})]}),e.jsx("div",{className:"text-right",children:e.jsx("button",{type:"button",onClick:()=>s("/forgot-password"),className:"text-[#185e91] text-base hover:underline",children:"Forgot Password?"})}),e.jsx(m.button,{type:"submit",whileTap:{scale:.97},disabled:u||y,className:"w-full py-4 text-lg bg-[#185e91] hover:bg-[#144e7a] text-white font-semibold rounded-lg transition duration-300 shadow-lg",children:u?"Fetching Location...":y?"Logging in...":"Login"})]})]})]})]})};export{K as default};
