import{p as k,K as F,Q as L,b as _,r as p,q as A,l as C,R as S,j as e,m,T as I,U as $,J as E,V as b,W as P}from"./index.zUwyXbYQ.js";const M="/assets/loginAdmin.CUmFEuXf.jpg",q=a=>F.post("/login",a).then(s=>s.data),U=()=>k({mutationFn:q,mutationKey:["login"]}),T=()=>{let a=localStorage.getItem("device_id");return a||(a=crypto.randomUUID(),localStorage.setItem("device_id",a)),a},z=()=>new Promise(a=>{if(!navigator.geolocation)return a({latitude:null,longitude:null});navigator.geolocation.getCurrentPosition(s=>{a({latitude:s.coords.latitude,longitude:s.coords.longitude})},s=>{console.warn("Failed to get location:",s.message),a({latitude:null,longitude:null})},{enableHighAccuracy:!1,timeout:15e3,maximumAge:6e4})}),d=E(),R=I[d==null?void 0:d.reseller_name]||$,c=({delay:a=0,inside:s=!1,variant:u="small"})=>{let l=0,n=1;switch(u){case"small":l=Math.random()*6+4,n=1;break;case"medium":l=Math.random()*12+8,n=2;break;case"large":l=Math.random()*20+16,n=4;break}const f=Math.random()*100,g=Math.random()*100;return e.jsx(m.div,{initial:{opacity:0,x:"-10vw",y:0},animate:{opacity:[0,1,0],x:["-5vw","5vw","0vw"],y:["0vh","10vh","-5vh"]},transition:{duration:6,repeat:1/0,delay:a,ease:"easeInOut"},className:`absolute rounded-full shadow-lg ${s?"opacity-60":"opacity-40"}`,style:{width:l,height:l,top:`${g}%`,left:`${f}%`,background:"radial-gradient(circle, #FFD700, #FF8C00)",filter:`blur(${n}px)`}})},K=()=>{const a=L(),s=_(),[u,l]=p.useState(!1),[n,f]=p.useState(!1),{register:g,handleSubmit:w,formState:{errors:x}}=A(),{login:v}=C(),{mutateAsync:j,isPending:y}=U(),N=async i=>{var t;try{l(!0);const{latitude:h,longitude:r}=await z();if(!h||!r)return l(!1),b.error("Failed to get location.");l(!1);const o=await j({...i,device_id:T(),latitude:h,longitude:r});return v(o),P(o.token),b.success(o.message),s("/")}catch(h){l(!1);const r=h,o=(t=r.response)==null?void 0:t.data;b.error((o==null?void 0:o.message)||(r==null?void 0:r.message)||(o==null?void 0:o.error)||"Login failed.")}};return p.useEffect(()=>{S()&&s("/")},[a.pathname]),e.jsxs("div",{className:"relative min-h-screen flex items-center justify-center bg-gradient-to-b from-[#123C82] to-[#0D2B2F] px-4 overflow-hidden",children:[Array.from({length:15}).map((i,t)=>e.jsx(c,{delay:t*.6,variant:"small"},`bg-${t}`)),Array.from({length:5}).map((i,t)=>e.jsx(c,{delay:t*1.2,variant:"medium"},`bg-mid-${t}`)),Array.from({length:3}).map((i,t)=>e.jsx(c,{delay:t*2,variant:"large"},`bg-big-${t}`)),e.jsxs(m.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"relative flex flex-col md:flex-row w-full max-w-6xl rounded-3xl shadow-2xl overflow-hidden border border-gray-200 backdrop-blur-xl bg-white/80",children:[e.jsxs("div",{className:"hidden md:flex md:w-1/2 flex-col justify-between p-12 bg-gradient-to-b from-blue-50 to-gray-100 rounded-l-3xl relative overflow-hidden",children:[Array.from({length:8}).map((i,t)=>e.jsx(c,{delay:t*.5,inside:!0},`left-${t}`)),e.jsxs("div",{className:"absolute top-8 left-8 flex items-center gap-3 z-20",children:[e.jsx("img",{src:R,alt:"Company Logo",className:"w-12 h-12 rounded-lg shadow-md"}),e.jsx("span",{className:"text-2xl font-bold text-[#123C82]",children:(d==null?void 0:d.reseller_name)||""})]}),e.jsxs("div",{className:"flex flex-col items-center text-center gap-5 relative z-10 mt-12",children:[e.jsx("img",{src:M,alt:"Illustration",className:"w-full max-w-lg h-auto object-contain rounded-xl"}),e.jsx("h2",{className:"text-4xl font-bold text-[#123C82]",children:"Welcome Back!"}),e.jsx("p",{className:"text-base text-gray-700 max-w-md",children:"Securely access your dashboard and manage transactions with ease."})]})]}),e.jsxs("div",{className:"w-full md:w-1/2 p-12 rounded-r-3xl bg-white relative",children:[Array.from({length:10}).map((i,t)=>e.jsx(c,{delay:t*.4,inside:!0},`form-${t}`)),e.jsx("h2",{className:"text-5xl font-extrabold text-center text-[#123C82]",children:"Login"}),e.jsx("p",{className:"text-center text-gray-500 mb-8 text-base",children:"Enter your credentials to continue"}),e.jsxs("form",{onSubmit:w(N),className:"space-y-7",children:[e.jsxs(m.div,{whileFocus:{scale:1.02},children:[e.jsx("label",{className:"block mb-1 text-base font-medium text-gray-700",children:"Email *"}),e.jsx("input",{type:"email",placeholder:"Enter your email",...g("email",{required:"Email is required"}),className:"w-full px-5 py-3 border rounded-lg text-lg focus:ring-2 focus:ring-[#185e91] outline-none"}),x.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.email.message})]}),e.jsxs(m.div,{whileFocus:{scale:1.02},children:[e.jsx("label",{className:"block mb-1 text-base font-medium text-gray-700",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:n?"text":"password",placeholder:"Enter your password",...g("password",{required:"Password is required"}),className:"w-full px-5 py-3 border rounded-lg text-lg focus:ring-2 focus:ring-[#185e91] outline-none"}),e.jsx("span",{onClick:()=>f(!n),className:"material-symbols-outlined absolute right-4 top-3 text-gray-500 cursor-pointer text-xl",children:n?"visibility_off":"visibility"})]}),x.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.password.message})]}),e.jsx("div",{className:"text-right",children:e.jsx("button",{type:"button",onClick:()=>s("/forgot-password"),className:"text-[#185e91] text-base hover:underline",children:"Forgot Password?"})}),e.jsx(m.button,{type:"submit",whileTap:{scale:.97},disabled:u||y,className:"w-full py-4 text-lg bg-[#185e91] hover:bg-[#144e7a] text-white font-semibold rounded-lg transition duration-300 shadow-lg",children:u?"Fetching Location...":y?"Logging in...":"Login"})]})]})]})]})};export{K as default};
