import{f as P,g as b,u as S,a as v,b as w,l as f,j as s,m as u,c as m,P as C,S as R,L as U,N as A,d as _}from"./index.DsbNlJU-.js";const z=async n=>(await b.get("/userwise-report/",{params:n})).data,E=(n,l=!0)=>P({queryKey:["userWisePayinPayoutReport",n],queryFn:()=>z(n),enabled:l}),W=({type:n})=>{var x,p,h;const{handlePageChange:l,handlePageSizeChange:o,pageNumber:c,pageSizeValue:t}=S(),{setSearchQuery:y,searchQuery:j}=v(),g=w(),{data:a,isLoading:i,isError:d}=E({pageNumber:c,pageSize:t,status:"SUCCESS",type:n,searchQuery:j}),{user:r}=f();return r?s.jsxs(u.div,{className:"bg-white shadow-lg rounded-2xl",variants:m,initial:"hidden",animate:"visible",children:[s.jsx(C,{title:`Userwise ${n==="WITHDRAW"?"Payout":"Payin"} Report`,searchComponent:s.jsx(R,{handlePageSizeChange:o,pageSizeOptions:[10,20,30],pageSize:t,setSearchQuery:y})}),s.jsxs("div",{className:"custom-scroll h-[72vh] overflow-auto",children:[s.jsxs("table",{className:"min-w-full text-sm text-left text-gray-700",children:[s.jsx("thead",{className:"bg-gray-100 border-b text-xs uppercase text-gray-500 sticky top-0 z-40",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3",children:"S.N"}),s.jsx("th",{className:"px-4 py-3",children:"Full Name"}),s.jsx("th",{className:"px-4 py-3",children:"Mobile"}),s.jsx("th",{className:"px-4 py-3",children:"Email"}),(r==null?void 0:r.role)==="SUPERADMIN"&&s.jsx("th",{className:"px-4 py-3",children:"Reseller"}),s.jsx("th",{className:"px-4 py-3",children:"Settled Amount"}),s.jsx("th",{className:"px-4 py-3",children:"Unsettled Amount"}),s.jsx("th",{className:"px-4 py-3",children:"Transaction Count"}),s.jsx("th",{className:"px-4 py-3",children:"Action"})]})}),s.jsx("tbody",{children:!d&&!i&&((x=a==null?void 0:a.results)==null?void 0:x.length)>0&&a.results.map((e,N)=>s.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3",children:(c-1)*t+N+1}),s.jsx("td",{className:"px-4 py-3",children:(e==null?void 0:e.full_name)||"N/A"}),s.jsx("td",{className:"px-4 py-3",children:e==null?void 0:e.mobile}),s.jsx("td",{className:"px-4 py-3",children:e==null?void 0:e.email}),(r==null?void 0:r.role)==="SUPERADMIN"&&s.jsx("td",{className:"px-4 py-3",children:e==null?void 0:e.reseller_name}),s.jsx("td",{className:"px-4 py-3",children:e==null?void 0:e.settled_amount.toFixed(2)}),s.jsx("td",{className:"px-4 py-3",children:e==null?void 0:e.un_settled_amount.toFixed(2)}),s.jsx("td",{className:"px-4 py-3",children:e==null?void 0:e.transaction_count}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("button",{className:"text-gray-600 hover:text-blue-600 hover:cursor-pointer",onClick:()=>g(`/userwise-datewise/${n}/${e==null?void 0:e.user_id}`),children:s.jsx("span",{className:"material-symbols-outlined",children:"visibility"})})})]},e.user_id))})]}),i?s.jsx(U,{}):(!((p=a==null?void 0:a.results)!=null&&p.length)||d)&&s.jsx(A,{})]}),s.jsx(u.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.3},children:s.jsx(_,{currentPage:c,handlePageChange:l,pageSize:t,handlePageSizeChange:o,totalCount:((h=a==null?void 0:a.pagination)==null?void 0:h.total)||1})})]}):null};export{W as default};
