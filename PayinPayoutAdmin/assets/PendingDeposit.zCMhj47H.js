import{u as D,a as C,h as b,r as v,V as h,j as e,m,c as z,P as E,S as M,L,N as V,C as A,d as B}from"./index.Da7InqlT.js";import{D as O}from"./DateWiseTableBody.BsFTW4MZ.js";import{u as k,a as F}from"./useDeposit._rqXxrup.js";import"./permission.BxkFSEB9.js";const G=()=>{var p;const{handlePageChange:u,handlePageSizeChange:i,pageNumber:o,pageSizeValue:n}=D(),{setSearchQuery:g,searchQuery:y}=C(),{isModalOpen:j,openModal:f,closeModal:r,data:N}=b(),{data:s,isError:c,isLoading:l,refetch:S}=k({searchQuery:y,pageNumber:o,pageSize:n,status:"PENDING"}),{updateDepositMutation:a}=F(),P=t=>{a.mutate(t)};return v.useEffect(()=>{var t,x;if(a.isSuccess)r({confirm:!1}),a.reset(),S(),h.success("Successfully Done");else if(a.isError){const d=a.error,w=((x=(t=d.response)==null?void 0:t.data)==null?void 0:x.message)||d.message||"Failed to accept";h.error(w),a.reset()}},[a.isSuccess,a.isError,r,a]),e.jsxs(m.div,{className:"bg-white shadow-lg rounded-2xl",variants:z,initial:"hidden",animate:"visible",children:[e.jsx(E,{title:"Pending Deposit List",searchComponent:e.jsx(M,{handlePageSizeChange:i,pageSizeOptions:[10,20,30],pageSize:n,setSearchQuery:g})}),e.jsxs("div",{className:"custom-scroll h-[72vh] overflow-auto",children:[e.jsxs("table",{className:"min-w-full text-sm text-left text-gray-700",children:[e.jsx("thead",{className:"bg-gray-100 border-b text-xs uppercase text-gray-500 sticky top-0 z-40",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"S.N"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Transaction ID"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"User"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Payment Mode"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Closing Balance"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Created At"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Remark"}),e.jsx("th",{className:"px-4 py-3 text-center text-nowrap",children:"Actions"})]})}),!c&&((p=s==null?void 0:s.results)==null?void 0:p.length)!=0&&!l&&e.jsx(O,{data:(s==null?void 0:s.results)||[],isPending:!0,openModal:f})]}),l?e.jsx(L,{}):(c||(s==null?void 0:s.results.length)===0)&&e.jsx(V,{})]}),e.jsx(A,{isOpen:j.confirm||!1,onClose:()=>r({confirm:!1}),onConfirm:()=>P(N),disabled:a.isPending}),e.jsx(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.3},children:e.jsx(B,{currentPage:o,handlePageChange:u,pageSize:n,handlePageSizeChange:i,totalCount:(s==null?void 0:s.pagination.total)||1})})]})};export{G as default};
