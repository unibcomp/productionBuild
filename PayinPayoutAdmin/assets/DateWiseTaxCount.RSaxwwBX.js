import{a as p,d as h,r as u,j as e,b as m,c as y,m as c,f as g,P as j,S as N,L as w,N as C,g as b}from"./index.0M3KEVIp.js";import{u as v}from"./useCompanyResellerTaxCount.Clfj67fX.js";import{d as f}from"./DownloadFile.DKytvTbd.js";const S=async(r,o)=>{const n=await p.get("/export-tax-list-datewise/",{params:{date:r,type:o}});if(!n.data.success)throw new Error(n.data.message||"Failed to fetch export data");return n.data.results},A=({data:r,type:o})=>{const n=h(),[x,l]=u.useState(null),t=async a=>{try{l(a);const s=await S(a,o);if(s.length===0){alert("No export data found for selected date.");return}f(s,`tax-export-${a}`)}catch(s){alert("Failed to export data."),console.error(s)}finally{l(null)}};return e.jsx("tbody",{className:"divide-y divide-gray-200",children:r.map((a,s)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition duration-150",children:[e.jsx("td",{className:"px-4 py-3 text-nowrap",children:s+1}),e.jsx("td",{className:"px-4 py-3 text-nowrap",children:a.date}),e.jsx("td",{className:"px-4 py-3 text-nowrap",children:a.count}),e.jsxs("td",{className:"px-4 py-3 text-nowrap",children:["₹",a.totalAmount.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-nowrap",children:["₹",a.totalCharges.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-nowrap",children:["₹",a.companyTaxAmount.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-nowrap",children:["₹",a.gstAmount.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-nowrap",children:["₹",a.resellerTaxAmount.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-nowrap",children:["₹",a.resellerGstAmount.toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-nowrap",children:e.jsx("button",{className:"text-blue-600 hover:underline text-xs hover:cursor-pointer",onClick:()=>n(`/tax-list/${a.date}/${o}`),children:e.jsx("span",{className:"material-symbols-outlined",children:"visibility"})})}),e.jsx("td",{className:"px-4 py-3 text-end",children:e.jsx("td",{className:"px-4 py-3 text-end",children:e.jsx("button",{className:"text-blue-600 hover:underline text-xs text-2xl hover:cursor-pointer",onClick:()=>t(a.date),disabled:x===a.date,children:e.jsx("span",{className:"material-symbols-outlined",children:x===a.date?"hourglass_top":"cloud_download"})})})})]},a.date))})},T=({type:r})=>{var i;const{handlePageChange:o,handlePageSizeChange:n,pageNumber:x,pageSizeValue:l}=m(),{data:t,isError:a,isLoading:s}=v({type:r}),{setSearchQuery:d}=y();return e.jsxs(c.div,{className:"bg-white shadow-lg rounded-2xl",variants:g,initial:"hidden",animate:"visible",children:[e.jsx(j,{title:"Reseller And Company Count List",searchComponent:e.jsx(e.Fragment,{children:e.jsx(N,{handlePageSizeChange:n,pageSizeOptions:[10,20,30],pageSize:l,setSearchQuery:d})})}),e.jsxs("div",{className:"custom-scroll h-[72vh] overflow-auto",children:[e.jsxs("table",{className:"min-w-full text-sm text-left text-gray-700",children:[e.jsx("thead",{className:"bg-gray-100 border-b text-xs uppercase text-gray-500 sticky top-0 z-40",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"S.N"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Count"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Action Amount"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Total Charges"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Gateway Charges"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Gateway Gst"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Company Charges"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Company Gst"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Action"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Download"})]})}),!a&&(t==null?void 0:t.results)&&((i=t==null?void 0:t.results)==null?void 0:i.length)!=0&&!s&&e.jsx(A,{data:t.results,type:r})]}),s?e.jsx(w,{}):(a||(t==null?void 0:t.results.length)===0)&&e.jsx(C,{})]}),e.jsx(c.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.3},children:e.jsx(b,{currentPage:x,handlePageChange:o,pageSize:l,handlePageSizeChange:n,totalCount:(t==null?void 0:t.pagination.total)||1})})]})};export{T as default};
