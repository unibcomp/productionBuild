import{g as p,r as h,j as e,F as u,A as m,e as y,G as j,f as g,m as c,i as N,P as w,S as C,L as b,N as v,k as S}from"./index.Mkiy1plC.js";const A=({data:l,type:o})=>{const x=p(),[r,n]=h.useState(null),t=async a=>{try{n(a);const s=await u({date:a,type:o});if(s.length===0){alert("No export data found for selected date.");return}m(s,`tax-export-${a}`)}catch(s){alert("Failed to export data."),console.error(s)}finally{n(null)}};return e.jsx("tbody",{className:"divide-y divide-gray-200",children:l.map((a,s)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition duration-150",children:[e.jsx("td",{className:"px-4 py-3 text-nowrap",children:s+1}),e.jsx("td",{className:"px-4 py-3 text-nowrap",children:a.date}),e.jsx("td",{className:"px-4 py-3 text-nowrap",children:a.count}),e.jsxs("td",{className:"px-4 py-3 text-nowrap",children:["₹",a.totalAmount.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-nowrap",children:["₹",a.totalCharges.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-nowrap",children:["₹",a.companyTaxAmount.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-nowrap",children:["₹",a.gstAmount.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-nowrap",children:["₹",a.resellerTaxAmount.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-nowrap",children:["₹",a.resellerGstAmount.toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-nowrap",children:e.jsx("button",{className:"text-blue-600 hover:underline text-xs hover:cursor-pointer",onClick:()=>x(`/tax-list/${a.date}/${o}`),children:e.jsx("span",{className:"material-symbols-outlined",children:"visibility"})})}),e.jsx("td",{className:"px-4 py-3 text-end",children:e.jsx("td",{className:"px-4 py-3 text-end",children:e.jsx("button",{className:"text-blue-600 hover:underline text-xs text-2xl hover:cursor-pointer",onClick:()=>t(a.date),disabled:r===a.date,children:e.jsx("span",{className:"material-symbols-outlined",children:r===a.date?"hourglass_top":"cloud_download"})})})})]},a.date))})},F=({type:l})=>{var i;const{handlePageChange:o,handlePageSizeChange:x,pageNumber:r,pageSizeValue:n}=y(),{data:t,isError:a,isLoading:s}=j({type:l,pageNumber:r,pageSize:n}),{setSearchQuery:d}=g();return e.jsxs(c.div,{className:"bg-white shadow-lg rounded-2xl",variants:N,initial:"hidden",animate:"visible",children:[e.jsx(w,{title:"Reseller And Company Count List",searchComponent:e.jsx(e.Fragment,{children:e.jsx(C,{handlePageSizeChange:x,pageSizeOptions:[10,20,30],pageSize:n,setSearchQuery:d})})}),e.jsxs("div",{className:"custom-scroll h-[72vh] overflow-auto",children:[e.jsxs("table",{className:"min-w-full text-sm text-left text-gray-700",children:[e.jsx("thead",{className:"bg-gray-100 border-b text-xs uppercase text-gray-500 sticky top-0 z-40",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"S.N"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Count"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Action Amount"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Total Charges"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Gateway Charges"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Gateway Gst"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Company Charges"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Company Gst"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Action"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Download"})]})}),!a&&(t==null?void 0:t.results)&&((i=t==null?void 0:t.results)==null?void 0:i.length)!=0&&!s&&e.jsx(A,{data:t.results,type:l})]}),s?e.jsx(b,{}):(a||(t==null?void 0:t.results.length)===0)&&e.jsx(v,{})]}),e.jsx(c.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.3},children:e.jsx(S,{currentPage:r,handlePageChange:o,pageSize:n,handlePageSizeChange:x,totalCount:(t==null?void 0:t.pagination.total)||1})})]})};export{F as default};
