import{x as y,j as e,m as d,e as j,u as N,s as w,a as b,c as f,P as v,L as P,N as R,d as A}from"./index.BvmzF7-c.js";import{a as D}from"./useHoldRelease.DmOYWD_U.js";import{D as L}from"./DepWithModal.CP_rju6x.js";import"./useManualPayin.By_Jgnej.js";import"./useTransaction.B4F90Z49.js";const S=({data:r,start_number:i,openModal:l})=>{const{holdRelease:o}=y();return e.jsx("tbody",{className:"custom-scroll",children:r.map((s,n)=>e.jsxs(d.tr,{className:"hover:bg-gray-50 transition-all duration-150",variants:j,initial:"hidden",animate:"visible",custom:n,children:[e.jsx("td",{className:"px-4 py-3 font-bold",children:n+i}),e.jsx("td",{className:"px-4 py-3",children:s.transaction_id}),e.jsx("td",{className:"px-4 py-3",children:s.transactionType}),e.jsx("td",{className:"px-4 py-3",children:s.status}),e.jsx("td",{className:"px-4 py-3",children:s.actionType}),e.jsx("td",{className:"px-4 py-3",children:s.amount}),e.jsx("td",{className:"px-4 py-3",children:s.reason}),e.jsx("td",{className:"px-4 py-3",children:s.gstPercentage}),e.jsx("td",{className:"px-4 py-3",children:s.createdAt?new Date(s.createdAt).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"â€”"}),s.transactionType==="HOLD"&&o.write&&e.jsx("td",{className:"px-4 py-3 flex items-center gap-2",children:e.jsxs("button",{className:"flex items-center gap-1 px-2 py-1 text-xs bg-green-100 text-green-800 rounded hover:bg-green-200 transition whitespace-nowrap cursor-pointer",onClick:()=>l({isRealesed:!0},{transaction_id:s.transaction_id}),children:[e.jsx("span",{className:"material-symbols-outlined text-blue-600 text-sm",children:"arrow_top_right"}),"release"]})})]},n))})},z=()=>{var h;const{handlePageChange:r,handlePageSizeChange:i,pageNumber:l,pageSizeValue:o,startItem:s}=N(),{date:n}=w(),{openModal:m,closeModal:u,isModalOpen:c,data:t}=b(),{data:a,isLoading:x,isError:p,refetch:g}=D({date:n});return e.jsxs(d.div,{className:"bg-white shadow-lg rounded-2xl",variants:f,initial:"hidden",animate:"visible",children:[e.jsx(v,{title:"Hold And Release List"}),e.jsxs("div",{className:"custom-scroll h-[72vh] overflow-auto",children:[e.jsxs("table",{className:"min-w-full text-sm text-left text-gray-700",children:[e.jsx("thead",{className:"bg-gray-100 border-b text-xs uppercase text-gray-500 sticky top-0 z-40",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"S.N"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Transaction_id"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"TransactionType"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"ActionType"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Reason"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"gstPercentage"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-center text-nowrap",children:"Actions"})]})}),!p&&((h=a==null?void 0:a.results)==null?void 0:h.length)!=0&&!x&&e.jsx(S,{data:(a==null?void 0:a.results)||[],start_number:s,openModal:m})]}),x?e.jsx(P,{}):(p||(a==null?void 0:a.results.length)===0)&&e.jsx(R,{})]}),e.jsxs(d.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.3},children:[e.jsx(A,{currentPage:l,handlePageChange:r,pageSize:o,handlePageSizeChange:i,totalCount:(a==null?void 0:a.pagination.total)||1}),e.jsx(L,{isOpen:(c==null?void 0:c.isRealesed)||!1,isRealesed:!0,onClose:()=>u({isRealesed:!1}),transaction_id:t==null?void 0:t.transaction_id,user_id:t==null?void 0:t.user_id,refetch:g})]})]})};export{z as default};
