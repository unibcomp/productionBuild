import{j as e,m as y,p as w,V as o,q as v,d as _,z as b,r as j,n as f,P as E,B as C}from"./index.BMza66u8.js";import{u as A}from"./useDeleteAndSuspendUser.Es0YkoQK.js";const D=({openModal:s,data:l,unVerified:i,unVerifiedTye:r,isAll:x,role:h})=>{const{mutate:m}=A();return e.jsx("tbody",{className:"custom-scroll",children:l.map((t,a)=>e.jsxs(y.tr,{className:"hover:bg-gray-50 transition-all duration-150",variants:w,initial:"hidden",animate:"visible",custom:a,children:[e.jsx("td",{className:"px-4 py-3 font-bold",children:a+1}),e.jsx("td",{className:"px-4 py-3 font-medium",children:t!=null&&t.full_name?`${t==null?void 0:t.full_name}`:"N/A"}),e.jsx("td",{className:"px-4 py-3",children:t.mobile||"N/A"}),h==="SUPERADMIN"&&e.jsx("th",{className:"px-4 py-3 text-nowrap",children:t.reseller_name}),e.jsx("td",{className:"px-4 py-3",children:t.email||"N/A"}),e.jsx("td",{className:"px-4 py-3",children:t.accountNumber||"N/A"}),e.jsx("td",{className:"px-4 py-3",children:t.aadharNumber||"N/A"}),e.jsx("td",{className:"px-4 py-3",children:t.panNumber||"N/A"}),x?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-sm font-medium ${t.kycStatus==="APPROVED"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:t.kycStatus})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"px-2 py-1 rounded text-sm font-medium bg-indigo-100 text-indigo-600",children:t==null?void 0:t.role})}),e.jsx("td",{className:"px-4 py-3",children:t.createdAt}),e.jsx("td",{className:"px-4 py-3",children:t.un_settled_amount}),e.jsx("td",{className:"px-4 py-3",children:t.holdAmount}),e.jsx("td",{className:"px-4 py-3",children:t.settled_amount}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("button",{onClick:()=>m({user_id:t.user_id,isFrozen:!t.fronzen},{onSuccess:n=>o.success(n.message||"Wallet status updated"),onError:n=>{var c,d;return o.error(((d=(c=n==null?void 0:n.response)==null?void 0:c.data)==null?void 0:d.message)||"Failed to update wallet status")}}),className:`flex items-center gap-1 px-2 py-1 text-xs rounded transition whitespace-nowrap
    ${t.fronzen?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}
  `,"aria-label":`Toggle wallet freeze for ${t.full_name}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] leading-none",children:t.fronzen?"toggle_off":"toggle_on"}),t.fronzen?"Off":"on"]})}),e.jsx("td",{className:"px-4 py-7",children:e.jsxs("div",{className:"flex gap-3 flex-wrap w-[300px]",children:[e.jsxs("button",{onClick:()=>s==null?void 0:s({confirm:!0},{user_id:t.user_id}),className:"flex items-center gap-1 px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 transition whitespace-nowrap",children:[e.jsx("span",{className:"material-symbols-outlined text-[12px] leading-none",children:"delete"}),"Delete"]}),e.jsxs("button",{onClick:()=>m({user_id:t==null?void 0:t.user_id,accountStatus:(t==null?void 0:t.accountStatus)==="SUSPENDED"?"ACTIVE":"SUSPENDED"},{onSuccess:n=>{o.success(n.message||"Account status updated successfully")},onError:n=>{var c,d;o.error(((d=(c=n==null?void 0:n.response)==null?void 0:c.data)==null?void 0:d.message)||"Something went wrong while updating status")}}),className:`flex items-center gap-1 px-2 py-1 text-xs rounded transition whitespace-nowrap
                    ${(t==null?void 0:t.accountStatus)==="ACTIVE"?"bg-green-100 text-green-700 hover:bg-green-200":"bg-red-100 text-red-700 hover:bg-red-200"}
                      `,"aria-label":`Toggle account status for ${t.full_name}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[18px] leading-none",children:(t==null?void 0:t.accountStatus)==="ACTIVE"?"toggle_on":"toggle_off"}),(t==null?void 0:t.accountStatus)==="ACTIVE"?"On":"Off"]}),e.jsxs("button",{className:"flex items-center gap-1 px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition whitespace-nowrap",onClick:()=>s==null?void 0:s({editUser:!0},t),children:[e.jsx("span",{className:"material-symbols-outlined text-[12px] leading-none",children:"edit"}),"Edit"]}),e.jsxs("button",{className:"flex items-center gap-1 px-2 py-1 text-xs bg-green-100 text-green-800 rounded hover:bg-green-200 transition whitespace-nowrap",onClick:()=>s==null?void 0:s({isDeposit:!0},t),children:[e.jsx("span",{className:"material-symbols-outlined text-[12px] leading-none",children:"payments"}),"Deposit"]}),e.jsxs("button",{className:"flex items-center gap-1 px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 transition whitespace-nowrap",onClick:()=>s==null?void 0:s({isWithdraw:!0},t),children:[e.jsx("span",{className:"material-symbols-outlined text-[12px] leading-none",children:"undo"}),"Reverse"]}),e.jsxs("button",{className:"flex items-center gap-1 px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 transition whitespace-nowrap",onClick:()=>s==null?void 0:s({isHold:!0},t),children:[e.jsx("span",{className:"material-symbols-outlined text-[12px] leading-none",children:"hand_package"}),"Hold"]}),e.jsxs(v,{className:"flex items-center gap-1 px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 transition whitespace-nowrap",to:`/transaction/${t==null?void 0:t.user_id}`,children:[e.jsx("span",{className:"material-symbols-outlined text-[12px] leading-none",children:"receipt_long"}),"Transaction"]}),e.jsxs("button",{className:"cursor-pointer flex items-center gap-1 text-blue-600 hover:text-blue-700 transition-colors font-medium","aria-label":"Edit User",onClick:()=>s==null?void 0:s({isAdminSetting:!0},{user_id:t.user_id,role:t==null?void 0:t.role}),children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:"settings_photo_camera"}),e.jsx("span",{className:"text-sm",children:"Setting"})]})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-4 py-3",children:t==null?void 0:t.createdAt}),i&&e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Personal :"})," ",e.jsx("span",{className:"font-semibold text-gray-800",children:(t==null?void 0:t.personalInformationStatus)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Aadhaar :"})," ",e.jsx("span",{className:"font-semibold text-gray-800",children:(t==null?void 0:t.aadharStatus)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-500",children:"PAN :"})," ",e.jsx("span",{className:"font-semibold text-gray-800",children:(t==null?void 0:t.panStatus)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Business :"})," ",e.jsx("span",{className:"font-semibold text-gray-800",children:(t==null?void 0:t.businessStatus)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Bank :"})," ",e.jsx("span",{className:"font-semibold text-gray-800",children:(t==null?void 0:t.bankStatus)||"N/A"})]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex justify-center gap-2 items-center",children:[" ",r==="UNDER_REVIEW"&&e.jsx("button",{className:"text-green-600 hover:underline cursor-pointer",onClick:()=>s==null?void 0:s({confirm:!0},{user_id:t.user_id,status:"APPROVED"}),"aria-label":`Approve KYC for ${t.full_name}`,children:e.jsx("span",{className:"material-symbols-outlined",children:"check"})}),r!=="REJECTED"&&e.jsx("button",{className:"text-red-600 hover:underline cursor-pointer",onClick:()=>s==null?void 0:s({decline:!0},{user_id:t.user_id,status:"rejected"}),"aria-label":`Reject KYC for ${t.full_name}`,children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})}),r==="REJECTED"&&e.jsx("button",{className:"text-blue-600 hover:underline cursor-pointer",onClick:()=>s==null?void 0:s({confirm:!0},{user_id:t.user_id,status:"REVERSE"}),"aria-label":`Undo reject for ${t.full_name}`,children:e.jsx("span",{className:"material-symbols-outlined",children:"settings_backup_restore "})})]})})]})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{className:"text-blue-600 hover:underline cursor-pointer",onClick:()=>s==null?void 0:s({view:!0},t),"aria-label":"view",children:e.jsx("span",{className:"material-symbols-outlined",children:"visibility "})})})]},t.user_id))})},p=s=>/\.(jpeg|jpg|png|gif|bmp|webp)$/i.test(s),g=s=>/\.(mp4|webm|ogg|mov)$/i.test(s),N=s=>/\.pdf$/i.test(s),u=s=>s.replace(/([A-Z])/g," $1").replace(/_/g," ").replace(/\b\w/g,l=>l.toUpperCase());function P({isOpen:s,onClose:l,data:i}){if(!i)return null;const r=Object.entries(i).filter(([t])=>t!=="kycActionById"),x=r.filter(([,t])=>typeof t=="string"&&t.startsWith("http")&&(p(t)||g(t)||N(t))),h=r.filter(([,t])=>!(typeof t=="string"&&t.startsWith("http")&&(p(t)||g(t)))),m=_();return e.jsx(b,{appear:!0,show:s,as:j.Fragment,children:e.jsxs(f,{as:"div",className:"relative z-50",onClose:l,children:[e.jsx(b.Child,{as:j.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-6",children:e.jsx(f.Panel,{className:"w-full max-w-6xl transform overflow-hidden rounded-2xl bg-white shadow-2xl transition-all border border-blue-100",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsx(E,{title:"\\uD83D\\uDC64 User Full KYC Information",searchComponent:e.jsx(C,{buttons:[{label:"Close",onClick:()=>l(),variant:"danger"}]})}),e.jsxs("div",{className:"flex justify-center",children:[e.jsx("style",{children:`
                                    @keyframes gentleBounce {
                                    0%, 100% { transform: translateY(0); }
                                    50% { transform: translateY(-4px); }
                                        }
                                    .gentle-bounce {
                                    animation: gentleBounce 2s infinite;
                                    }
                                    `}),e.jsx("button",{className:`w-80 px-6 py-3 rounded-xl bg-white border border-blue-600 text-blue-700 font-semibold text-sm shadow-md\r
                                        hover:bg-slate-600 hover:text-white hover:shadow-lg transition-all duration-300 ease-in-out\r
                                        gentle-bounce hover:cursor-pointer`,onClick:()=>{(i==null?void 0:i.businessStatus)==="PENDING"?o.loading("Business status is pending. Please wait for the user to complete the KYC."):m(`/business/${i==null?void 0:i.user_id}`)},children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:"business_center"}),"View Business Information"]})})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5 max-h-[55vh] overflow-y-auto pr-1",children:h.map(([t,a])=>{const n=a??"â€”";return e.jsxs("div",{className:"bg-white/30 border border-gray-200 p-4 rounded-2xl shadow-md hover:shadow-lg transition-all duration-300",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 mb-1 uppercase tracking-wide",children:u(t)}),e.jsx("p",{className:"text-sm text-gray-800 break-words leading-snug",children:String(n)})]},t)})}),x.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xl font-semibold text-blue-800 mt-10 mb-4",children:"\\uD83D\\uDCC1 Uploaded Media"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:x.map(([t,a])=>e.jsxs("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"group rounded-2xl overflow-hidden border border-gray-200 shadow-md hover:shadow-xl transition-all",children:[e.jsx("div",{className:"bg-gray-100 text-gray-800 font-medium px-4 py-2 text-sm border-b",children:u(t)}),e.jsx("div",{className:"bg-white",children:p(a)?e.jsx("img",{src:a,alt:t,className:"w-full h-48 object-cover transition-transform duration-200 group-hover:scale-105"}):g(a)?e.jsx("video",{src:a,controls:!0,className:"w-full h-48 object-cover"}):N(a)?e.jsxs("div",{className:"relative w-full h-48 border rounded-lg overflow-hidden",children:[e.jsx("iframe",{src:a,title:t,className:"w-full h-full"}),e.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"absolute top-2 right-2 bg-white bg-opacity-80 text-blue-600 text-sm font-semibold px-3 py-1 rounded shadow hover:underline",children:"Open PDF"})]}):null})]},t))})]}),e.jsx("div",{className:"flex justify-end pt-10",children:e.jsx("button",{onClick:l,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-md shadow-sm text-sm font-medium transition",children:"Close"})})]})})})})]})})}export{D as K,P as V};
