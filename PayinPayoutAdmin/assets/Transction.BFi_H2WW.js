import{b as g,c as u,o as m,j as s,m as c,f as j,P as N,S as b,L as S,N as f,g as w,p as v}from"./index.CVrkjPml.js";import{a as C}from"./useTransaction.B0hdir-U.js";import{d as P}from"./DownloadFile.DnsZ18Lo.js";const z=()=>{var x,d,p;const{handlePageChange:l,handlePageSizeChange:r,pageNumber:e,pageSizeValue:t,startItem:n}=g(),{setSearchQuery:h}=u(),{user_id:y}=m(),{data:a,isError:i,isLoading:o}=C({searchQuery:y,pageNumber:e,pageSize:t});return s.jsxs(c.div,{className:"bg-gradient-to-br from-slate-100 to-indigo-100 shadow-lg rounded-2xl p-2",variants:j,initial:"hidden",animate:"visible",children:[s.jsx(N,{title:"Recent Transactions",searchComponent:s.jsx(b,{handlePageSizeChange:r,pageSizeOptions:[10,20,30],pageSize:t,setSearchQuery:h})}),Array.isArray(a==null?void 0:a.results)&&a.results.length>0&&s.jsx("div",{className:"flex justify-end mt-2 mr-2",children:s.jsxs("button",{className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg shadow hover:bg-green-700 transition duration-200 cursor-pointer",onClick:()=>P(a.results,"transactions"),children:[s.jsx("span",{className:"material-symbols-outlined text-lg",children:"download"}),"Export to CSV"]})}),s.jsxs("div",{className:"custom-scroll h-[67vh] overflow-auto mt-2",children:[s.jsxs("table",{className:"min-w-full text-sm text-left text-gray-700 bg-gradient-to-br from-slate-100 to-indigo-100 bg-transparent",children:[s.jsx("thead",{className:"bg-gray-100 border-b text-xs uppercase text-gray-500 sticky top-0 z-100 ",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3",children:"S.N"}),s.jsx("th",{className:"px-4 py-3",children:"Transaction ID"}),s.jsx("th",{className:"px-4 py-3",children:"User"}),s.jsx("th",{className:"px-4 py-3",children:"Prev Balance"}),s.jsx("th",{className:"px-4 py-3",children:"Amount"}),s.jsx("th",{className:"px-4 py-3",children:"Tax"}),s.jsx("th",{className:"px-4 py-3",children:"Total"}),s.jsx("th",{className:"px-4 py-3",children:"Type"}),s.jsx("th",{className:"px-4 py-3",children:"Current Balance"}),s.jsx("th",{className:"px-4 py-3",children:"Status"}),s.jsx("th",{className:"px-4 py-3",children:"Created At"}),s.jsx("th",{className:"px-4 py-3",children:"Remark"})]})}),!i&&((x=a==null?void 0:a.results)==null?void 0:x.length)!==0&&!o&&s.jsx(T,{data:(a==null?void 0:a.results)||[],startItem:n})]}),o?s.jsx(S,{}):(i||((d=a==null?void 0:a.results)==null?void 0:d.length)===0)&&s.jsx(f,{})]}),s.jsx(c.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.3},children:s.jsx(w,{currentPage:e,handlePageChange:l,pageSize:t,handlePageSizeChange:r,totalCount:((p=a==null?void 0:a.pagination)==null?void 0:p.total)||1})})]})},T=({data:l,startItem:r})=>s.jsx("tbody",{className:"custom-scroll",children:l.map((e,t)=>{var n;return s.jsxs(c.tr,{className:"hover:bg-gray-50 transition-all duration-150",variants:v,initial:"hidden",animate:"visible",custom:t,children:[s.jsx("td",{className:"px-4 py-3 font-bold",children:t+r}),s.jsx("td",{className:"px-4 py-3",children:e.transactionId}),s.jsx("td",{className:"px-4 py-3",children:e.user}),s.jsx("td",{className:"px-4 py-3",children:e.prevBalance}),s.jsx("td",{className:"px-4 py-3",children:e.amount.toFixed(2)}),s.jsx("td",{className:"px-4 py-3",children:((n=e.tax)==null?void 0:n.toFixed(2))??"0.00"}),s.jsx("td",{className:"px-4 py-3",children:e.totalAmount.toFixed(2)}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("span",{className:`px-2 py-1 rounded-sm text-xs font-semibold
    ${e.type==="DEBIT"?"bg-red-500 text-white":""}
    ${e.type==="CREDIT"?"bg-green-500 text-white":""}
    ${e.type==="HOLD"?"bg-yellow-100 text-yellow-700":""}
    ${e.type==="RELEASE"?"bg-blue-100 text-blue-700":""}
    ${e.type==="ADJUST"?"bg-purple-100 text-purple-700":""}`,children:e.type})}),s.jsx("td",{className:"px-4 py-3 ",children:e.currentBalance.toFixed(2)}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${e.status==="SUCCESS"?"text-green-600 bg-green-100":e.status==="PENDING"?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100"}`,children:e.status.toLowerCase()})}),s.jsx("td",{className:"px-4 py-3",children:e.createdAt}),s.jsx("td",{className:"px-4 py-3",children:e==null?void 0:e.description})]},e.transactionId)})});export{z as default};
