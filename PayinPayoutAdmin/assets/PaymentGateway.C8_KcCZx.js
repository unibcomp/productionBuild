import{b as f,c as P,o as v,h as A,j as a,m as w,f as G,P as C,S as L,L as z,N as M,g as k,r as B,p as V,q as _,V as j}from"./index.OtfTDJXo.js";import{B as $}from"./ActionButton.CLAA4fZU.js";import{u as D,a as E,P as O}from"./PaymentGateWayModel.B5rZOYb9.js";const Q=()=>{var m,g,y;const{handlePageChange:d,handlePageSizeChange:i,pageNumber:r,pageSizeValue:n}=f(),{setSearchQuery:l,searchQuery:p}=P(),{user_id:s,source:t}=v(),{openModal:o,closeModal:c,data:N,isModalOpen:b}=A(),{updateGateway:S}=D(),{data:e,isError:u,isLoading:x,refetch:h}=E({pageNumber:r,pageSize:n,searchQuery:p,user_id:s});return a.jsxs(w.div,{className:"bg-white shadow-lg rounded-2xl",variants:G,initial:"hidden",animate:"visible",children:[a.jsx(C,{title:`${t} Payment Gateway List`,searchComponent:a.jsxs(a.Fragment,{children:[a.jsx(L,{handlePageSizeChange:i,pageSizeOptions:[10,20,30],pageSize:n,setSearchQuery:l}),a.jsx($,{buttons:[{label:"Create",onClick:()=>o({isGateway:!0},{source:t,user_id:s}),variant:"primary"}]})]})}),a.jsxs("div",{className:"custom-scroll h-[70vh] overflow-auto",children:[a.jsxs("table",{className:"min-w-full text-sm text-left text-gray-700",children:[a.jsx("thead",{className:"bg-gray-100 border-b text-xs uppercase text-gray-500 sticky top-0 z-40",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-nowrap",children:"S.N"}),a.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Name"}),a.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Is Active"}),a.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Created At"}),a.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Updated At"}),a.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Actions"})]})}),!u&&((m=e==null?void 0:e.results)==null?void 0:m.length)!=0&&!x&&a.jsx(H,{data:(e==null?void 0:e.results)||[],updateGateway:S,refetch:h})]}),x?a.jsx(z,{}):(u||((g=e==null?void 0:e.results)==null?void 0:g.length)===0)&&a.jsx(M,{})]}),a.jsx(k,{currentPage:r,handlePageChange:d,pageSize:n,handlePageSizeChange:i,totalCount:((y=e==null?void 0:e.pagination)==null?void 0:y.total)||1}),a.jsx(O,{isOpen:b.isGateway||!1,data:N,onClose:()=>c({isGateway:!1}),refetch:h})]})},H=({data:d,updateGateway:i,refetch:r})=>{const[n,l]=B.useState(null),p=s=>{l(s.user_id),i.mutate({id:s.id,data:{isActive:!s.isActive}},{onSuccess:t=>{r(),j.success(t.message||"Account status updated successfully")},onError:t=>{var o,c;j.error(((c=(o=t==null?void 0:t.response)==null?void 0:o.data)==null?void 0:c.message)||"Something went wrong while updating status")},onSettled:()=>{l(null)}})};return a.jsx("tbody",{className:"custom-scroll",children:d.map((s,t)=>a.jsxs(w.tr,{className:"hover:bg-gray-50 transition-all duration-150",variants:V,initial:"hidden",animate:"visible",custom:t,children:[a.jsx("td",{className:"px-4 py-3 font-bold",children:t+1}),a.jsx("td",{className:"px-4 py-3",children:s.name}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("button",{onClick:()=>p(s),disabled:n===s.user_id,className:`w-10 h-5 cursor-pointer flex items-center rounded-full p-1 transition-colors duration-300
        ${s.isActive?"bg-blue-600":"bg-gray-300"}
        ${n===s.user_id?"opacity-50 cursor-not-allowed":""}
    `,children:a.jsx("div",{className:`w-4 h-4 bg-white rounded-full shadow transform transition-transform ${s.isActive?"translate-x-5":"translate-x-0"}`})})}),a.jsx("td",{className:"px-4 py-3",children:new Date(s.createdAt).toLocaleString()}),a.jsx("td",{className:"px-4 py-3",children:new Date(s.updatedAt).toLocaleString()}),a.jsx("td",{className:"px-4 py-3",children:a.jsx(_,{to:`/PaymentMethodList/${s.id}`,children:a.jsx("span",{className:"material-symbols-outlined",children:"visibility"})})})]},s.id))})};export{Q as default};
