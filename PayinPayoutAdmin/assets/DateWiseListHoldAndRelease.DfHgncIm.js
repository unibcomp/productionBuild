import{j as e,m as d,i as y,u as j,e as N,h as w,c as b,P as f,L as v,N as P,d as R}from"./index.2s6Ut4HN.js";import{a as A}from"./useHoldRelease.UIaXT0tV.js";import{u as D}from"./permission.GpEkI71r.js";import{D as L}from"./DepWithModal.UQu-ZjaA.js";import"./useManualPayin.B_dHIFtZ.js";import"./useTransaction.Cn___kFT.js";const S=({data:r,start_number:i,openModal:l})=>{const{holdRelease:o}=D();return e.jsx("tbody",{className:"custom-scroll",children:r.map((s,n)=>e.jsxs(d.tr,{className:"hover:bg-gray-50 transition-all duration-150",variants:y,initial:"hidden",animate:"visible",custom:n,children:[e.jsx("td",{className:"px-4 py-3 font-bold",children:n+i}),e.jsx("td",{className:"px-4 py-3",children:s.transaction_id}),e.jsx("td",{className:"px-4 py-3",children:s.transactionType}),e.jsx("td",{className:"px-4 py-3",children:s.status}),e.jsx("td",{className:"px-4 py-3",children:s.actionType}),e.jsx("td",{className:"px-4 py-3",children:s.amount}),e.jsx("td",{className:"px-4 py-3",children:s.reason}),e.jsx("td",{className:"px-4 py-3",children:s.gstPercentage}),e.jsx("td",{className:"px-4 py-3",children:s.createdAt?new Date(s.createdAt).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"â€”"}),s.transactionType==="HOLD"&&o.write&&e.jsx("td",{className:"px-4 py-3 flex items-center gap-2",children:e.jsxs("button",{className:"flex items-center gap-1 px-2 py-1 text-xs bg-green-100 text-green-800 rounded hover:bg-green-200 transition whitespace-nowrap cursor-pointer",onClick:()=>l({isRealesed:!0},{transaction_id:s.transaction_id}),children:[e.jsx("span",{className:"material-symbols-outlined text-blue-600 text-sm",children:"arrow_top_right"}),"release"]})})]},n))})},V=()=>{var h;const{handlePageChange:r,handlePageSizeChange:i,pageNumber:l,pageSizeValue:o,startItem:s}=j(),{date:n}=N(),{openModal:m,closeModal:u,isModalOpen:c,data:t}=w(),{data:a,isLoading:p,isError:x,refetch:g}=A({date:n});return e.jsxs(d.div,{className:"bg-white shadow-lg rounded-2xl",variants:b,initial:"hidden",animate:"visible",children:[e.jsx(f,{title:"Hold And Release List"}),e.jsxs("div",{className:"custom-scroll h-[72vh] overflow-auto",children:[e.jsxs("table",{className:"min-w-full text-sm text-left text-gray-700",children:[e.jsx("thead",{className:"bg-gray-100 border-b text-xs uppercase text-gray-500 sticky top-0 z-40",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"S.N"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Transaction_id"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"TransactionType"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"ActionType"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Reason"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"gstPercentage"}),e.jsx("th",{className:"px-4 py-3 text-nowrap",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-center text-nowrap",children:"Actions"})]})}),!x&&((h=a==null?void 0:a.results)==null?void 0:h.length)!=0&&!p&&e.jsx(S,{data:(a==null?void 0:a.results)||[],start_number:s,openModal:m})]}),p?e.jsx(v,{}):(x||(a==null?void 0:a.results.length)===0)&&e.jsx(P,{})]}),e.jsxs(d.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.3},children:[e.jsx(R,{currentPage:l,handlePageChange:r,pageSize:o,handlePageSizeChange:i,totalCount:(a==null?void 0:a.pagination.total)||1}),e.jsx(L,{isOpen:(c==null?void 0:c.isRealesed)||!1,isRealesed:!0,onClose:()=>u({isRealesed:!1}),transaction_id:t==null?void 0:t.transaction_id,user_id:t==null?void 0:t.user_id,refetch:g})]})]})};export{V as default};
