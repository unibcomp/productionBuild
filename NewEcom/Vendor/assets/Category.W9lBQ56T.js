import{o as y,n as N,c as u,j as e,a as b,s as v}from"./index.BhJFhA9E.js";import{u as w,d as C}from"./useCreateProduct.D3kK7Vpi.js";import{u as S,P as k}from"./usePagination.zxBDzV6t.js";import{h}from"./dialog.BRLV45dm.js";import{X as P}from"./x.kUAwNJ9f.js";import{K as g}from"./transition.BmUUtwzS.js";import{u as A}from"./useModal.ClNgeN1v.js";import{H as F}from"./hash.BF7gxpjA.js";import{I as T,T as E}from"./tag.CM1jRcfN.js";import{C as z}from"./circle-check-big.q5sySWM8.js";import{C as I}from"./circle-x.BKSCtoXB.js";import{S as M}from"./settings.-j2ppbJ9.js";import{m as _}from"./proxy.DN7iSgEi.js";import{P as q}from"./pencil.Ddi5r2bm.js";const $=({isOpen:d,onClose:t,isUpdate:r,initialData:a})=>{const n=y(),{register:m,handleSubmit:p,reset:c,formState:{errors:l}}=N();u.useEffect(()=>{c(r&&a?{name:a.name||""}:{name:"",image:void 0})},[r,a,c]);const x=async o=>{try{const i=new FormData;i.append("name",o.name),o.image&&o.image.length>0&&i.append("image",o.image[0]),r&&a?._id?await b.put(`/update-category/${a._id}`,i,{headers:{"Content-Type":"multipart/form-data"}}):await b.post("/create-category",i,{headers:{"Content-Type":"multipart/form-data"}}),await n.invalidateQueries({queryKey:["get-category"]}),t()}catch(i){console.error("Error saving category:",i)}};return e.jsx(g,{appear:!0,show:d,as:u.Fragment,children:e.jsxs(h,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(g.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/30"})}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsx(g.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(h.Panel,{className:"w-full max-w-md rounded-xl bg-white p-6 shadow-xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx(h.Title,{className:"text-lg font-semibold",children:r?"Edit Category":"Add Category"}),e.jsx("button",{type:"button",onClick:t,className:"rounded-full p-1 hover:bg-gray-100",children:e.jsx(P,{size:20})})]}),e.jsxs("form",{onSubmit:p(x),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...m("name",{required:"Category name is required"}),className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring focus:ring-pink-300"}),l.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Image"}),e.jsx("input",{type:"file",accept:"image/*",...m("image"),className:"w-full"}),a?.image&&r&&e.jsx("img",{src:a.image,alt:"Current",className:"mt-2 w-16 h-16 object-cover rounded border"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded bg-pink-600 text-white hover:bg-pink-700",children:r?"Update":"Create"})]})]})]})})})]})})},Z=()=>{const{pageNumber:d,pageSizeValue:t,handlePageChange:r,handlePageSizeChange:a}=S(),{data:n,isLoading:m,isError:p}=w({pageNumber:d,pageSize:t}),{data:c,isModalOpen:l,openModal:x,closeModal:o}=A(),{mutateAsync:i,isPending:j}=C();return m?e.jsx(v,{}):p?e.jsx("div",{className:"p-4 text-red-500",children:"Error loading data"}):e.jsxs("div",{className:"p-6 relative",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-md overflow-hidden border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center m-4",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"All Categories"}),e.jsx("button",{onClick:()=>x({isCreate:!0}),className:"bg-orange-200 hover:bg-orange-700 text-black px-4 py-2 rounded-lg font-medium transition",children:"+ Add Category"})]}),!n?.results||n.results.length===0?e.jsx("p",{className:"text-center py-6 text-gray-500",children:"No categories found"}):e.jsx("div",{className:"overflow-x-auto overflow-y-auto max-h-[400px] rounded-lg shadow-sm custom-scrollbar",children:e.jsxs("table",{className:"min-w-full text-sm bg-white rounded-lg",children:[e.jsx("thead",{className:"bg-orange-100 text-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(F,{className:"w-4 h-4 text-gray-700"}),e.jsx("span",{children:"S.No"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(T,{className:"w-4 h-4 text-gray-700"}),e.jsx("span",{children:"Image"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(E,{className:"w-4 h-4 text-gray-700"}),e.jsx("span",{children:"Name"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(z,{className:"w-4 h-4 text-green-600"}),e.jsx(I,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{children:"Status"})]})}),e.jsxs("th",{className:"p-3 text-center font-semibold flex items-center justify-center gap-1",children:[e.jsx(M,{className:"w-4 h-4 text-gray-700"}),e.jsx("span",{children:"Actions"})]})]})}),e.jsx("tbody",{children:n.results.map((s,f)=>e.jsxs(_.tr,{className:"border-b hover:bg-gray-50 transition text-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2,delay:f*.03},children:[e.jsx("td",{className:"p-3",children:(d-1)*t+(f+1)}),e.jsx("td",{className:"p-3",children:s.image?e.jsx("img",{src:s.image,alt:s.name,className:"w-12 h-12 object-cover rounded-md border mx-auto"}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-md flex items-center justify-center text-gray-500 text-xs mx-auto",children:"No Image"})}),e.jsx("td",{className:"p-3 font-medium text-gray-800",children:s.name}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("button",{type:"button",onClick:()=>i({id:s._id,isActive:!s.isActive}),disabled:j,className:`relative w-11 h-6 rounded-full overflow-hidden transition-all duration-500 ease-in-out
                        ${s.isActive?"bg-green-500":"bg-gray-300"}
                        ${j?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:e.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow-md transform transition-all duration-500 ease-in-out
                          ${s.isActive?"translate-x-[20px]":"translate-x-0"}`})})}),e.jsx("td",{className:"p-3",children:e.jsx("button",{onClick:()=>x({isUpdate:!0},s),className:"p-2 rounded-full transition-all duration-300 hover:bg-orange-100 hover:border hover:border-black",title:"Category",children:e.jsx(q,{className:"w-5 h-5 mx-auto"})})})]},s._id))})]})})]}),n?.pagination?.total?e.jsx(k,{currentPage:d,handlePageChange:r,pageSize:t,handlePageSizeChange:a,totalCount:n?.pagination?.total??0}):null,e.jsx($,{isOpen:l.isCreate||l.isUpdate||!1,onClose:()=>o({isCreate:!1,isUpdate:!1}),initialData:c||void 0,isUpdate:l.isUpdate||!1})]})};export{Z as default};
