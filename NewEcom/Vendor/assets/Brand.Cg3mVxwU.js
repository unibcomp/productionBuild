import{m as y,k as v,j as e,a as n,s as w,E as C}from"./index.1CbKXVec.js";import{u as B,P as S}from"./usePagination.DBnjr7Ov.js";import{b as k,u as F}from"./useCreateProduct.Bg9ggRT7.js";import{X as I}from"./x.DoIBlp4-.js";import{K as p}from"./transition.R8uNngye.js";import{h as j}from"./dialog.BPAf0H9O.js";import{H as L}from"./hash.CH7VhsAP.js";import{I as P,T}from"./tag.tCx9I-76.js";import{I as z}from"./info.su6UpbVy.js";import{C as E}from"./circle-check-big.pjSSW5R6.js";import{C as A}from"./circle-x.CDbp0yff.js";const D=async a=>{const t=new FormData;return t.append("name",a.name),t.append("category",a.category),t.append("image",a.image),(await v.post("/create-brand",t,{headers:{"Content-Type":"multipart/form-data"}})).data},O=()=>y({mutationFn:D}),M=({brands:a,startItem:t})=>a.length===0?e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center p-4 text-gray-500",children:"No Brands Found"})})}):e.jsx("tbody",{children:a.map((r,l)=>e.jsxs("tr",{className:"border-t hover:bg-gray-50 transition-colors text-center",children:[e.jsx("td",{className:"p-3 border text-sm font-medium",children:t+l}),e.jsx("td",{className:"p-3 border",children:r.image?e.jsx("img",{src:r.image,alt:r.name,className:"h-10 w-20 object-contain mx-auto"}):e.jsx("span",{className:"text-gray-400 text-sm",children:"No Image"})}),e.jsx("td",{className:"p-3 border text-sm",children:r.name}),e.jsx("td",{className:"p-3 border text-sm",children:r.description||"-"}),e.jsx("td",{className:"p-3 border text-sm",children:e.jsxs("label",{className:"inline-flex items-center justify-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r.isActive,readOnly:!0}),e.jsx("div",{className:"w-11 h-6 bg-gray-300 rounded-full peer-checked:bg-green-500 transition-all relative",children:e.jsx("div",{className:"absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow transform peer-checked:translate-x-5 transition"})})]})})]},r._id))}),R=({isOpen:a,onClose:t,categories:r,isCategoriesLoading:l,onSubmit:m})=>{const[c,x]=n.useState(""),[i,o]=n.useState(null),[d,u]=n.useState("");n.useEffect(()=>{a||(x(""),o(null),u(""))},[a]);const g=s=>{if(s.preventDefault(),!i||!d){alert("Please select category and image");return}m({name:c,category:d,image:i})};return e.jsx(p,{appear:!0,show:a,as:n.Fragment,children:e.jsxs(j,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(p.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/40"})}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsx(p.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(j.Panel,{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx(j.Title,{className:"text-lg font-semibold",children:"Add New Brand"}),e.jsx("button",{type:"button",onClick:t,className:"rounded-full p-1 hover:bg-gray-100",children:e.jsx(I,{size:20})})]}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Brand Name"}),e.jsx("input",{type:"text",value:c,onChange:s=>x(s.target.value),className:"w-full border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter brand name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category"}),l?e.jsx("p",{className:"text-gray-500 text-sm",children:"Loading categories..."}):e.jsxs("select",{value:d,onChange:s=>u(s.target.value),className:"w-full border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:"Select category"}),r.map(s=>e.jsx("option",{value:s._id,children:s.name},s._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Brand Logo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:s=>o(s.target.files?.[0]||null),className:"w-full border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-purple-500",required:!0}),i&&e.jsx("img",{src:URL.createObjectURL(i),alt:"Preview",className:"w-20 h-20 object-cover rounded-lg mt-2 border"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Add Brand"})]})]})]})})})]})})},Y=()=>{const{startItem:a,handlePageChange:t,handlePageSizeChange:r,pageNumber:l,pageSizeValue:m}=B(),{data:c,isLoading:x,error:i,refetch:o}=k({pageNumber:l,pageSize:m}),{data:d,isLoading:u}=F(),{mutate:g}=O(),[s,h]=n.useState(!1);if(x)return e.jsx(w,{});if(i)return e.jsx(C,{message:"Failed to load brands",onRetry:o});const f=c?.results??[],b=c?.pagination?.total??f.length;return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-md overflow-hidden border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center  m-4",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"Brands"}),e.jsx("button",{onClick:()=>h(!0),className:"bg-orange-200 hover:bg-orange-700 text-black px-4 py-2 rounded-lg font-medium transition",children:"+ Add Brand"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm text-gray-700",children:[e.jsx("thead",{className:"bg-orange-100 text-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(L,{className:"w-4 h-4 text-gray-700"}),e.jsx("span",{children:"S.No"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(P,{className:"w-4 h-4 text-gray-700"}),e.jsx("span",{children:"Logo"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(T,{className:"w-4 h-4 text-gray-700"}),e.jsx("span",{children:"Brand"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(z,{className:"w-4 h-4 text-gray-700"}),e.jsx("span",{children:"Description"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(E,{className:"w-4 h-4 text-green-600"}),e.jsx(A,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{children:"Status"})]})})]})}),e.jsx(M,{brands:f,startItem:a})]})})]}),e.jsx("div",{className:"mt-4",children:e.jsx(S,{currentPage:l,handlePageChange:t,pageSize:m,handlePageSizeChange:r,totalCount:b})}),e.jsx(R,{isOpen:s,onClose:()=>h(!1),categories:d?.results??[],isCategoriesLoading:u,onSubmit:N=>g(N,{onSuccess:()=>{o(),h(!1)}})})]})};export{Y as default};
