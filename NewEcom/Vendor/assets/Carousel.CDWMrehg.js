import{i as F,m as x,k as o,a as n,j as t}from"./index.1CbKXVec.js";import{u as A}from"./useCreateProduct.Bg9ggRT7.js";const E=async()=>o.get("/carousel").then(a=>a.data),_=()=>F({queryKey:["carousel"],queryFn:E}),k=async a=>o.post("/carousel",a,{headers:{"Content-Type":"multipart/form-data"}}).then(r=>r.data),T=()=>x({mutationFn:k}),M=async({id:a,formData:r})=>o.put(`/carousel/${a}`,r,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>i.data),q=()=>x({mutationFn:M}),L=async a=>o.delete(`/carousel/${a}`).then(r=>r.data),U=()=>x({mutationFn:L}),K=()=>{const{data:a,isLoading:r}=_(),{data:i}=A(),f=T(),j=q(),w=U(),[d,c]=n.useState(""),[u,p]=n.useState(""),[m,h]=n.useState(""),[g,y]=n.useState(null),[l,C]=n.useState(null),b=()=>{c(""),p(""),h(""),y(null),C(null)},v=async e=>{if(e.preventDefault(),!d||!u||!m||!g&&!l)return alert("Please fill all fields");const s=new FormData;s.append("title",d),s.append("category",u),s.append("description",m),g&&s.append("images",g);try{l?await j.mutateAsync({id:l._id,formData:s}):await f.mutateAsync(s),b()}catch(S){console.error(S)}},N=e=>{C(e),c(e.title),p(e.category),h(e.description)},D=async e=>{if(window.confirm("Are you sure you want to delete this carousel?"))try{await w.mutateAsync(e)}catch(s){console.error(s)}};return r?t.jsx("p",{className:"text-center mt-10",children:"Loading..."}):t.jsxs("div",{className:"max-w-5xl mx-auto p-4",children:[t.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Carousel Manager"}),t.jsxs("form",{onSubmit:v,className:"bg-white p-4 rounded shadow mb-8 space-y-4",children:[t.jsx("input",{type:"text",placeholder:"Title",value:d,onChange:e=>c(e.target.value),className:"border p-2 rounded w-full"}),t.jsxs("select",{value:u,onChange:e=>p(e.target.value),className:"border p-2 rounded w-full",children:[t.jsx("option",{value:"",children:"Select Category"}),i?.results.map(e=>t.jsx("option",{value:e._id,children:e.name},e._id))]}),t.jsx("textarea",{placeholder:"Description",value:m,onChange:e=>h(e.target.value),className:"border p-2 rounded w-full"}),t.jsx("input",{type:"file",onChange:e=>y(e.target.files?.[0]||null),className:"border p-2 rounded w-full"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:l?"Update Carousel":"Add Carousel"}),l&&t.jsx("button",{type:"button",onClick:b,className:"bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500",children:"Cancel"})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a?.data.map(e=>t.jsxs("div",{className:"bg-white rounded shadow overflow-hidden",children:[t.jsx("img",{src:e.image,alt:e.title,className:"h-48 w-full object-cover"}),t.jsxs("div",{className:"p-4",children:[t.jsx("h2",{className:"font-bold text-lg",children:e.title}),t.jsx("p",{className:"text-sm text-gray-600",children:e.category}),t.jsx("p",{className:"mt-2 text-gray-700",children:e.description}),t.jsxs("div",{className:"mt-4 flex gap-2",children:[t.jsx("button",{onClick:()=>N(e),className:"bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600",children:"Edit"}),t.jsx("button",{onClick:()=>D(e._id),className:"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600",children:"Delete"})]})]})]},e._id))})]})};export{K as default};
