import{h as P,a as p,n as S,j as e}from"./index.1CbKXVec.js";import{u as q,a as C}from"./useProfile.BMekuJ3R.js";import{m as g}from"./proxy.CZMjb2j_.js";const $=()=>{const{user:a}=P(),[r,l]=p.useState(1),[i,f]=p.useState("mobile"),{mutate:h,isPending:m}=q(),{mutate:b,isPending:u}=C(),{register:d,handleSubmit:w,watch:y,formState:{errors:o}}=S(),n=["Verify Identity","Set New Password"],j=()=>{a&&h({...i==="email"&&{email:a?.email},...i==="mobile"&&{email:a?.phone}},{onSuccess:()=>l(2)})},N=()=>l(1),v=s=>{a&&b({otp:s.otp,password:s?.password,confirm_password:s?.confirmPassword},{onSuccess:()=>{l(1)}})};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-r from-indigo-50 to-purple-50 p-6",children:e.jsxs(g.div,{className:"w-full max-w-md bg-white rounded-3xl shadow-2xl p-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"Change Password"}),e.jsx("div",{className:"flex items-center justify-center mb-10 w-full relative",children:n.map((s,t)=>{const c=r>t+1,x=r===t+1;return e.jsxs("div",{className:"flex-1 flex items-center",children:[e.jsxs("div",{className:"flex flex-col items-center relative w-full",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold z-10 transition-colors ${c?"bg-green-500":x?" bg-gradient-to-br from-yellow-300 to-orange-500":"bg-gray-300"}`,children:c?"âœ“":t+1}),e.jsx("span",{className:`mt-4 text-sm font-medium ${c?"text-green-500":x?"text-orange-500":"text-gray-400"}`,children:s}),t<n.length-1&&e.jsxs("div",{className:"absolute top-5 left-[60%] w-full flex flex-col gap-[2px]",children:[e.jsx("div",{className:`h-[2px] w-full rounded-full ${r>t+1?"bg-orange-400":"bg-gray-300"}`}),e.jsx("div",{className:`h-[1px] w-full rounded-full ${r>t+1?"bg-orange-300/70":"bg-gray-200"}`})]}),t<n.length-1&&e.jsx("div",{className:`absolute top-5 left-[60%] h-[3px] w-full rounded-full transition-all ${r>t+1?"bg-gradient-to-r from-orange-400 via-yellow-400 to-pink-500 shadow-[0_0_8px_rgba(168,85,247,0.5)]":"bg-gray-300"}`})]}),t<n.length-1&&e.jsx("div",{className:`h-1 flex-1 mt-5 ${r>t+1?"bg-orange-500":"bg-gray-300"}`})]},s)})}),r===1&&e.jsxs(g.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},className:"space-y-6",children:[e.jsx("p",{className:"text-gray-600 text-center",children:"Choose how you want to verify your identity:"}),e.jsx("div",{className:"space-y-4",children:["mobile","email"].map(s=>e.jsxs("label",{className:"flex items-center space-x-3 p-3 border rounded-xl cursor-pointer hover:shadow-md transition-shadow",children:[e.jsx("input",{type:"radio",name:"method",value:s,checked:i===s,onChange:()=>f(s),className:"accent-orange-400"}),e.jsxs("span",{className:"text-gray-700",children:[s==="mobile"?"Mobile":"Email",":"," ",e.jsx("span",{className:"font-medium",children:s==="mobile"?a?.phone||"Not Provided":a?.email||"Not Provided"})]})]},s))}),e.jsx("button",{onClick:j,disabled:m,className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-3 rounded-2xl  transition-colors text-lg font-medium disabled:opacity-50",children:m?"Requesting OTP...":"Next"})]},"step1"),r===2&&e.jsxs("form",{onSubmit:w(v),className:"space-y-6",children:[e.jsx("p",{className:"text-gray-600 text-center",children:"Enter the OTP and new password:"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:"OTP",...d("otp",{required:"OTP is required"}),className:"w-full border border-gray-300 rounded-2xl p-3 focus:outline-none focus:ring-2 focus:ring-orange-400"}),o.otp&&e.jsx("p",{className:"text-red-500 text-sm",children:o.otp.message}),e.jsx("input",{type:"password",placeholder:"New Password",...d("password",{required:"Password is required",minLength:{value:6,message:"Min 6 characters"}}),className:"w-full border border-gray-300 rounded-2xl p-3 focus:outline-none focus:ring-2 focus:ring-orange-400"}),o.password&&e.jsx("p",{className:"text-red-500 text-sm",children:o.password.message}),e.jsx("input",{type:"password",placeholder:"Confirm Password",...d("confirmPassword",{required:"Confirm password is required",validate:s=>s===y("password")||"Passwords do not match"}),className:"w-full border border-gray-300 rounded-2xl p-3 focus:outline-none focus:ring-2 focus:ring-orange-400"}),o.confirmPassword&&e.jsx("p",{className:"text-red-500 text-sm",children:o.confirmPassword.message})]}),e.jsxs("div",{className:"flex justify-between items-center space-x-4",children:[e.jsx("button",{type:"button",onClick:N,className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-2xl hover:bg-gray-400 transition-colors text-lg font-medium",children:"Back"}),e.jsx("button",{type:"submit",disabled:u,className:"flex-1 bg-orange-500 text-white py-3 rounded-2xl hover:bg-orange-600 transition-colors text-lg font-medium disabled:opacity-50",children:u?"Submitting...":"Submit"})]})]})]})})};export{$ as default};
