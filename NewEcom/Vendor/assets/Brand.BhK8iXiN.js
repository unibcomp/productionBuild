import{m as F,o as z,z as B,a as k,j as e,c as i,s as E,E as I}from"./index.BhJFhA9E.js";import{u as T,P as D}from"./usePagination.zxBDzV6t.js";import{b as _,u as q}from"./useCreateProduct.D3kK7Vpi.js";import{P as M}from"./pencil.Ddi5r2bm.js";import{X as U}from"./x.kUAwNJ9f.js";import{K as v}from"./transition.BmUUtwzS.js";import{h as w}from"./dialog.BRLV45dm.js";import{H as O}from"./hash.BF7gxpjA.js";import{I as R,T as $}from"./tag.CM1jRcfN.js";import{F as K}from"./folder.CU5_YDnl.js";import{C as H}from"./circle-check-big.q5sySWM8.js";import{C as Q}from"./circle-x.BKSCtoXB.js";import{S as X}from"./settings.-j2ppbJ9.js";const V=async a=>{const s=new FormData;return s.append("name",a.name),s.append("category",a.category),s.append("image",a.image),(await k.post("/create-brand",s,{headers:{"Content-Type":"multipart/form-data"}})).data},G=()=>F({mutationFn:V}),J=async({id:a,data:s})=>{const l=new FormData;return s.name&&l.append("name",s.name),s.category&&l.append("category",s.category),typeof s.isActive=="boolean"&&l.append("isActive",String(s.isActive)),s.image&&l.append("image",s.image),(await k.put(`/update-brand/${a}`,l,{headers:{"Content-Type":"multipart/form-data"}})).data},A=()=>{const a=z();return F({mutationFn:J,onSuccess:s=>{B.success(s?.message||"Brand updated successfully!"),a.invalidateQueries({queryKey:["get-brand"]})},onError:s=>{B.error(s?.message||"Failed to update brand")}})},W=({brands:a,startItem:s,refetch:l,onOpenModal:c})=>{const{mutate:m,isPending:n}=A(),d=(t,o)=>{m({id:t,data:{isActive:!o}},{onSuccess:()=>{l()}})};return a.length===0?e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center p-4 text-gray-500",children:"No Brands Found"})})}):e.jsx("tbody",{children:a.map((t,o)=>e.jsxs("tr",{className:"border-t hover:bg-gray-50 transition-colors text-center",children:[e.jsx("td",{className:"p-3 border text-sm font-medium",children:s+o}),e.jsx("td",{className:"p-3 border",children:t.image?e.jsx("img",{src:t.image,alt:t.name,className:"h-10 w-20 object-contain mx-auto"}):e.jsx("span",{className:"text-gray-400 text-sm",children:"No Image"})}),e.jsx("td",{className:"p-3 border text-sm font-medium text-blue-600 cursor-pointer hover:underline",onClick:()=>c(t),children:t.name}),e.jsx("td",{className:"p-3 border text-sm",children:t.category.name}),e.jsx("td",{className:"p-3 border text-sm text-center",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("button",{type:"button",onClick:()=>d(t._id,t.isActive),disabled:n,className:`relative w-11 h-6 rounded-full transition-colors duration-300 ${t.isActive?"bg-green-500":"bg-gray-300"} ${n?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:e.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform duration-300 ${t.isActive?"translate-x-5":""}`})})})}),e.jsx("td",{className:"p-3 border text-center",children:e.jsx("button",{onClick:()=>c(t),className:"p-2 rounded-full transition-all duration-300 hover:bg-orange-100 hover:border hover:border-black",title:"Edit Brand",children:e.jsx(M,{className:"w-5 h-5 mx-auto"})})})]},t._id))})},Y=({isOpen:a,onClose:s,categories:l,isCategoriesLoading:c,onSubmit:m,viewBrand:n,isUpdate:d=!1})=>{const[t,o]=i.useState(""),[u,g]=i.useState(null),[p,x]=i.useState("");i.useEffect(()=>{n?(o(n.name),x(n.category._id)):a||(o(""),g(null),x(""))},[n,a]);const f=r=>{r.preventDefault(),m({name:t,category:p,image:u})};return e.jsx(v,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(w,{as:"div",className:"relative z-50",onClose:s,children:[e.jsx(v.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",children:e.jsx("div",{className:"fixed inset-0 bg-black/40"})}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsx(v.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",children:e.jsxs(w.Panel,{className:"w-full max-w-md rounded-2xl bg-white p-6 shadow-xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx(w.Title,{className:"text-lg font-semibold",children:d?"Update Brand":"Add New Brand"}),e.jsx("button",{onClick:s,className:"rounded-full p-1 hover:bg-gray-100",children:e.jsx(U,{size:20})})]}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Brand Name"}),e.jsx("input",{type:"text",value:t,onChange:r=>o(r.target.value),className:"w-full border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter brand name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category"}),c?e.jsx("p",{className:"text-gray-500 text-sm",children:"Loading categories..."}):e.jsxs("select",{value:p,onChange:r=>x(r.target.value),className:"w-full border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:"Select category"}),l.map(r=>e.jsx("option",{value:r._id,children:r.name},r._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Brand Logo"}),n?.image&&!u&&e.jsx("img",{src:n.image,alt:n.name,className:"w-24 h-24 object-cover rounded-lg border mb-2"}),e.jsx("input",{type:"file",accept:"image/*",onChange:r=>g(r.target.files?.[0]||null),className:"w-full border rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-purple-500",required:!d}),u&&e.jsx("img",{src:URL.createObjectURL(u),alt:"Preview",className:"w-20 h-20 object-cover rounded-lg mt-2 border"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:d?"Update Brand":"Add Brand"})]})]})]})})})]})})},ue=()=>{const{startItem:a,handlePageChange:s,handlePageSizeChange:l,pageNumber:c,pageSizeValue:m}=T(),{data:n,isLoading:d,error:t,refetch:o}=_({pageNumber:c,pageSize:m}),{data:u,isLoading:g}=q(),{mutate:p}=G(),{mutate:x}=A(),[f,r]=i.useState(!1),[h,b]=i.useState(null),[C,y]=i.useState(!1);if(d)return e.jsx(E,{});if(t)return e.jsx(I,{message:"Failed to load brands",onRetry:o});const S=n?.results??[],P=n?.pagination?.total??S.length,N=()=>{r(!1),b(null),y(!1)},L=j=>{C&&h?x({id:h._id,data:j},{onSuccess:()=>{o(),N()}}):p(j,{onSuccess:()=>{o(),N()}})};return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-md overflow-hidden border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center m-4",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-800",children:"Brands"}),e.jsx("button",{onClick:()=>{b(null),y(!1),r(!0)},className:"bg-orange-200 hover:bg-orange-700 text-black px-4 py-2 rounded-lg font-medium transition",children:"+ Add Brand"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm text-gray-700",children:[e.jsx("thead",{className:"bg-orange-100 text-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(O,{className:"w-4 h-4 text-gray-700"}),e.jsx("span",{children:"S.No"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(R,{className:"w-4 h-4 text-gray-700"}),e.jsx("span",{children:"Logo"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx($,{className:"w-4 h-4 text-gray-700"}),e.jsx("span",{children:"Brand"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(K,{className:"w-4 h-4 text-gray-700"}),e.jsx("span",{children:"Category"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(H,{className:"w-4 h-4 text-green-600"}),e.jsx(Q,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{children:"Status"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(X,{className:"w-4 h-4 text-gray-700"}),e.jsx("span",{children:"Action "})]})})]})}),e.jsx(W,{brands:S,startItem:a,refetch:o,onOpenModal:j=>{b(j),y(!0),r(!0)}})]})})]}),e.jsx("div",{className:"mt-4",children:e.jsx(D,{currentPage:c,handlePageChange:s,pageSize:m,handlePageSizeChange:l,totalCount:P})}),e.jsx(Y,{isOpen:f,onClose:N,categories:u?.results??[],isCategoriesLoading:g,onSubmit:L,viewBrand:h,isUpdate:C})]})};export{ue as default};
