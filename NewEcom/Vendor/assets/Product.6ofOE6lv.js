import{u as A,o as O,m as M,a as C,j as e,n as U,c as j,z as v,k as R,L as T,s as V}from"./index.BhJFhA9E.js";import{u as $,P as z}from"./usePagination.zxBDzV6t.js";import{u as _}from"./useModal.ClNgeN1v.js";import{X as S}from"./x.kUAwNJ9f.js";import{m as f}from"./proxy.DN7iSgEi.js";import{C as G}from"./check.C90jUMCn.js";import{E as H}from"./eye.shg9uGzy.js";import{S as F,E as q,M as B}from"./search.CbBa4Fp0.js";import{S as w}from"./settings.-j2ppbJ9.js";import{H as L}from"./hash.BF7gxpjA.js";import{U as J}from"./user.Ct4G9QKJ.js";import{P as Q}from"./package.B8_H7m52.js";import{T as K}from"./truck.VaRTDwQ_.js";import{C as X}from"./credit-card.Wue1JkfO.js";import{D as P}from"./dollar-sign.BzEgZofX.js";import{S as W}from"./shopping-bag.B22IW5f7.js";const Y=async t=>(await C.get("get-product",{params:t})).data,Z=({pageSize:t=10,pageNumber:r=1,productStatus:a})=>A({queryKey:["products",t,r,a],queryFn:()=>Y({pageSize:t,pageNumber:r,productStatus:a}),staleTime:1e3*60}),ee=async t=>{const{_id:r,...a}=t;return(await C.put(`update-product/${r}`,a)).data},I=()=>{const t=O();return M({mutationFn:ee,onSuccess:()=>{t.invalidateQueries({queryKey:["products"],exact:!1})}})},se=({isOpen:t,onClose:r,onConfirm:a,title:n="Confirmation",message:c,confirmText:d="Confirm",cancelText:o="Cancel",confirmButtonClass:m="bg-blue-600 hover:bg-blue-700",isLoading:i=!1})=>t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:r}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6",children:[e.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",disabled:i,children:e.jsx(S,{size:20})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:n}),e.jsx("p",{className:"text-gray-600 mb-6",children:c}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:r,disabled:i,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50",children:o}),e.jsx("button",{onClick:a,disabled:i,className:`px-4 py-2 text-white rounded disabled:opacity-50 ${m}`,children:i?"Processing...":d})]})]})]}):null,te=({isOpen:t,onClose:r,product:a})=>{const{register:n,handleSubmit:c,reset:d}=U({defaultValues:a||{}}),{mutate:o,isPending:m}=I();j.useEffect(()=>{a&&d(a)},[a,d]);const i=x=>{a&&o({_id:a._id,name:x.name,description:x.description,manufacturingInfo:x.manufacturingInfo},{onSuccess:l=>{v.success("Product updated successfully!"),r()},onError:l=>v.error(l?.message||"Update failed!")})};return!t||!a?null:e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white w-full max-w-lg rounded-lg shadow-lg p-6 overflow-y-auto max-h-[90vh]",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Update Product"}),e.jsxs("form",{onSubmit:c(i),className:"grid gap-6",children:[e.jsxs("section",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-lg border-b pb-1",children:"Product Details"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium mb-1",children:"Name"}),e.jsx("input",{...n("name",{required:!0}),placeholder:"Product Name",className:"border p-2 rounded w-full"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium mb-1",children:"Description"}),e.jsx("textarea",{...n("description"),placeholder:"Product Description",className:"border p-2 rounded w-full resize-none",rows:3})]})]}),e.jsxs("section",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-lg border-b pb-1",children:"Manufacturing Info"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium mb-1",children:"Generic Name"}),e.jsx("input",{...n("manufacturingInfo.genericName"),placeholder:"Generic Name",className:"border p-2 rounded"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium mb-1",children:"Country of Origin"}),e.jsx("input",{...n("manufacturingInfo.countryOfOrigin"),placeholder:"Country of Origin",className:"border p-2 rounded"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium mb-1",children:"Manufacturer Name"}),e.jsx("input",{...n("manufacturingInfo.manufacturer.name"),placeholder:"Manufacturer Name",className:"border p-2 rounded"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium mb-1",children:"Manufacturer Contact"}),e.jsx("input",{...n("manufacturingInfo.manufacturer.contact"),placeholder:"Manufacturer Contact",className:"border p-2 rounded"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium mb-1",children:"Importer Name"}),e.jsx("input",{...n("manufacturingInfo.importer.name"),placeholder:"Importer Name",className:"border p-2 rounded"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium mb-1",children:"Importer Contact"}),e.jsx("input",{...n("manufacturingInfo.importer.contact"),placeholder:"Importer Contact",className:"border p-2 rounded"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium mb-1",children:"Packer Name"}),e.jsx("input",{...n("manufacturingInfo.packer.name"),placeholder:"Packer Name",className:"border p-2 rounded"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium mb-1",children:"Packer Contact"}),e.jsx("input",{...n("manufacturingInfo.packer.contact"),placeholder:"Packer Contact",className:"border p-2 rounded"})]})]})]}),e.jsx("button",{type:"submit",disabled:m,className:`p-3 rounded text-white w-full mt-4 ${m?"bg-yellow-400 cursor-not-allowed":"bg-yellow-500 hover:bg-yellow-600"}`,children:m?"Updating...":"Update Product"}),e.jsx("button",{type:"button",onClick:r,className:"p-3 rounded border mt-2 w-full hover:bg-gray-100 transition",children:"Cancel"})]})]})})},ae=({products:t,startItem:r,isPending:a})=>{const{mutate:n,isPending:c}=I(),{user:d,isLoading:o}=R(),{isModalOpen:m,openModal:i,closeModal:x,data:l}=_(),h=d?.role==="ADMIN"||d?.role==="VENDOR",p=(s,g)=>{i({isConfirm:!0},{productId:s,productStatus:g})},b=()=>{l?.productId&&l?.productStatus&&n({_id:l.productId,productStatus:l.productStatus},{onSuccess:()=>x({isConfirm:!1})})},N=s=>{n({_id:s._id,isActive:!s.isActive},{onSuccess:()=>{}})},y=()=>x({isConfirm:!1}),u=s=>{switch(s){case"APPROVED":return"text-green-600 font-semibold";case"REJECTED":return"text-red-600 font-semibold";default:return"text-yellow-600 font-semibold"}},E=s=>s==="APPROVED"?"Are you sure you want to approve this product?":"Are you sure you want to reject this product?";return t.length===0?e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"text-center p-4 text-gray-500",children:"No Products Found"})})}):e.jsxs(e.Fragment,{children:[e.jsx("tbody",{children:t.map((s,g)=>e.jsxs(f.tr,{className:"border-t hover:bg-orange-50 transition-colors",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:g*.05},children:[e.jsx("td",{className:"p-2 border text-center",children:g+r}),e.jsx("td",{className:"p-2 border font-semibold",children:s.name}),e.jsx("td",{className:"p-2 border",children:s.category?.name||"-"}),e.jsx("td",{className:"p-2 border",children:s.brand?.name||"-"}),e.jsx("td",{className:"p-2 border",children:s.description||"-"}),e.jsx("td",{className:`p-2 border text-center ${u(s.productStatus||"PENDING")}`,children:s.productStatus||"PENDING"}),e.jsx("td",{className:"p-2 border",children:e.jsx("div",{className:"flex space-x-2 justify-center",children:s.images?.map((k,D)=>e.jsx(f.img,{src:k,alt:s.name,className:"w-12 h-12 object-cover rounded shadow-sm",whileHover:{scale:1.1},transition:{duration:.2}},D))})}),e.jsxs("td",{className:"p-2 border text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Generic:"})," ",s.manufacturingInfo?.genericName||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Origin:"})," ",s.manufacturingInfo?.countryOfOrigin||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Manufacturer:"})," ",s.manufacturingInfo?.manufacturer?.name," (",s.manufacturingInfo?.manufacturer?.contact,")"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Importer:"})," ",s.manufacturingInfo?.importer?.name," (",s.manufacturingInfo?.importer?.contact,")"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Packer:"})," ",s.manufacturingInfo?.packer?.name," (",s.manufacturingInfo?.packer?.contact,")"]})]}),e.jsx("td",{className:"p-3 w-[40px]",children:e.jsx(re,{checked:s.isActive,onChange:()=>N(s),disabled:c})}),e.jsxs("td",{className:"p-2 border text-center flex justify-center gap-2",children:[a&&h&&!o&&e.jsxs(e.Fragment,{children:[e.jsx(f.button,{whileHover:{scale:1.1},className:"p-2 bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50",title:"Approve",disabled:c,onClick:()=>p(s._id,"APPROVED"),children:e.jsx(G,{size:18})}),e.jsx(f.button,{whileHover:{scale:1.1},className:"p-2 bg-red-500 text-white rounded hover:bg-red-600 disabled:opacity-50",title:"Reject",disabled:c,onClick:()=>p(s._id,"REJECTED"),children:e.jsx(S,{size:18})})]}),s.productStatus==="APPROVED"&&h&&!o&&e.jsx(f.button,{whileHover:{scale:1.1},whileTap:{scale:.95},className:"p-2 bg-yellow-500 text-white rounded hover:bg-yellow-600",title:"Update Product",onClick:()=>i({isUpdate:!0},{product:s}),children:"Update"}),e.jsx(f.div,{whileHover:{scale:1.1},children:e.jsx(T,{to:`/products/variant/${s._id}`,className:"inline-flex items-center justify-center p-2 bg-blue-600 hover:bg-blue-700 text-white rounded transition",children:e.jsx(H,{size:20})})})]})]},s._id))}),e.jsx(se,{isOpen:m.isConfirm||!1,onClose:y,onConfirm:b,title:l?.productStatus==="APPROVED"?"Approve Product":"Reject Product",message:E(l?.productStatus),confirmText:l?.productStatus==="APPROVED"?"Approve":"Reject",confirmButtonClass:l?.productStatus==="APPROVED"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700",isLoading:c}),e.jsx(te,{isOpen:m.isUpdate||!1,onClose:()=>x({isUpdate:!1}),product:l?.product||null})]})},re=({checked:t,onChange:r,disabled:a=!1})=>e.jsx("button",{type:"button",onClick:a?void 0:r,disabled:a,className:`relative inline-flex items-center h-6 w-11 rounded-full transition-colors duration-300
        ${t?"bg-green-500":"bg-gray-300"}
        ${a?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:e.jsx("span",{className:`inline-block h-5 w-5 bg-white rounded-full shadow-md transform transition-transform duration-300
          ${t?"translate-x-5":"translate-x-0.5"}`})}),ye=({status:t})=>{const{startItem:r,handlePageChange:a,handlePageSizeChange:n,pageNumber:c,pageSizeValue:d}=$(),{data:o,isLoading:m}=Z({pageSize:d,pageNumber:c,productStatus:t}),i=u=>u.charAt(0).toUpperCase()+u.slice(1).toLowerCase(),x=t?`${i(t)} Products`:"Products",l=t?`Manage and view all ${i(t)} products here`:"Manage and view all products here",[h,p]=j.useState(!1),[b,N]=j.useState(""),y=j.useRef(null);return m?e.jsx(V,{}):e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:x}),e.jsx("p",{className:"text-sm text-gray-500",children:l}),e.jsx("div",{className:"h-2 w-24 bg-gray-200 rounded-full mt-1 relative overflow-hidden",children:e.jsx("div",{className:`absolute left-0 top-0 h-full rounded-full transition-all duration-700 ${t==="PENDING"?"bg-yellow-400 w-1/3":t==="APPROVED"?"bg-green-500 w-full":t==="REJECTED"?"bg-red-500 w-2/5":"bg-gray-200 w-0"}`})})]}),e.jsxs("div",{className:"flex items-center gap-3 relative",children:[e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("button",{onClick:()=>p(u=>!u),className:"p-2 rounded-full hover:bg-gray-100 transition",children:h?e.jsx("span",{className:"text-gray-600 text-lg font-bold",children:"Ã—"}):e.jsx(F,{className:"w-5 h-5 text-gray-600"})}),e.jsx("div",{className:`absolute right-0 top-10 flex items-center bg-white border border-gray-300 rounded-full shadow-sm overflow-hidden transition-all duration-300 ease-in-out ${h?"w-64 px-3 opacity-100":"w-0 px-0 opacity-0"}`,children:e.jsx("input",{ref:y,type:"text",value:b,onChange:u=>N(u.target.value),placeholder:"Search products...",className:`flex-1 py-1.5 text-sm outline-none bg-transparent transition-opacity duration-300 ${h?"opacity-100":"opacity-0"}`})})]}),e.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100",children:e.jsx(w,{className:"w-5 h-5 text-gray-600"})}),e.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100",children:e.jsx(q,{className:"w-5 h-5 text-gray-600"})})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-md overflow-hidden border border-gray-200",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm text-gray-700",children:[e.jsx("thead",{className:"bg-orange-100 text-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(L,{className:"w-4 h-4 text-gray-700 mr-1"}),e.jsx("span",{children:"S.No"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(J,{className:"w-4 h-4 text-gray-700 mr-1"}),e.jsx("span",{children:"Name"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold ",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(Q,{className:"w-4 h-4 text-gray-700 mr-1"}),e.jsx("span",{children:"Category"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(K,{className:"w-4 h-4 text-gray-700 mr-1"}),e.jsx("span",{children:"Brand"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold ",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(X,{className:"w-4 h-4 text-gray-700 mr-1"}),e.jsx("span",{children:"Description"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold ",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(P,{className:"w-4 h-4 text-gray-700 mr-1"}),e.jsx("span",{children:"Status"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold ",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(W,{className:"w-4 h-4 text-gray-700 mr-1"}),e.jsx("span",{children:"Images"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold ",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(B,{className:"w-4 h-4 text-gray-700 mr-1"}),e.jsx("span",{children:"Manufacturing Info"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(P,{className:"w-4 h-4 text-gray-700 mr-1"}),e.jsx("span",{children:"Active"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold ",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(w,{className:"w-4 h-4 text-gray-700 mr-1"}),e.jsx("span",{children:"Action"})]})})]})}),e.jsx(ae,{products:o?.results||[],startItem:r,isPending:t==="PENDING"})]})})}),e.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row items-center justify-between gap-3",children:[e.jsxs("span",{className:"text-gray-600 text-sm",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:o?.results?.length||0})," of"," ",e.jsx("span",{className:"font-medium",children:o?.pagination?.total||0})," products"]}),e.jsx(z,{currentPage:c,handlePageChange:a,pageSize:d,handlePageSizeChange:n,totalCount:o?.pagination?.total||0})]})]})};export{ye as default};
