import{u as U,a as o,n as b,j as e,z as i,d as z,k as A,q as T}from"./index.1CbKXVec.js";import{u as I,A as _,U as V,a as j,b as N}from"./AuthBanner.C2oUO8Cp.js";import{F as B,a as R}from"./index.B20WMGzl.js";import"./iconBase.DrO_7amp.js";const L=()=>{const u=U(),{signup:w,isSigningUp:p,verifyOtp:v,isVerifyingOtp:g}=I(),[r,h]=o.useState(1),[S,F]=o.useState(""),[l,q]=o.useState(!1),[d,P]=o.useState(!1),{register:c,handleSubmit:f,formState:{errors:a}}=b(),{register:m,handleSubmit:k,formState:{errors:t}}=b(),C=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,E=/^[6-9]\d{9}$/,y=async n=>{await w(n,{onSuccess:s=>{i.success(s?.data?.message||"OTP sent successfully"),F(s.data._id),h(2)},onError:s=>{i.error(s?.response?.data?.error||"Something went wrong. Try again.")}})},O=async n=>{await v({...n,vendor_id:S},{onSuccess:async s=>{const x=s?.data?.token;x&&(z.set("accessToken",x,{expires:1}),A.defaults.headers.common.Authorization=`Bearer ${x}`,await T.invalidateQueries({queryKey:["admin-details"]})),i.success(s?.message||"OTP Verified Successfully"),u("/dashboard")},onError:s=>{i.error(s?.data?.message||"Internal Server Error")}})};return e.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row bg-white",children:[e.jsx(_,{}),e.jsx("div",{className:"flex w-full md:w-1/2 justify-center items-center p-8 min-h-screen md:min-h-0",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:V,alt:"Unibcomp",className:"w-10 h-10",onError:n=>n.currentTarget.src="https://via.placeholder.com/40x40/FFA500/FFFFFF?text=U"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 ml-2",children:"Unibcomp"})]})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 text-center mb-2",children:"Welcome"}),e.jsx("p",{className:"text-sm text-gray-600 text-center mb-6",children:"SignUp to access your vendor dashboard"}),e.jsxs("form",{onSubmit:r===1?f(y):k(O),className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Full Name",...c("name",{required:"Name is required"}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-400",readOnly:r===2}),a.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.name.message})]}),e.jsxs("div",{children:[e.jsx("input",{type:"email",placeholder:"Email address",...c("email",{required:"Email is required",pattern:{value:C,message:"Invalid email address"}}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-400",readOnly:r===2}),a.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.email.message})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Phone",...c("phone",{required:"Phone is required",pattern:{value:E,message:"Invalid phone number"}}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-400",readOnly:r===2}),a.phone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.phone.message})]}),r===1&&e.jsx("button",{type:"button",onClick:f(y),disabled:p,className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-3 rounded-xl font-semibold transition",children:p?"Sending OTP...":"Next"}),r===2&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Enter OTP",...m("otp",{required:"OTP is required"}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-400"}),t.otp&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.otp.message})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:l?"text":"password",placeholder:"Password",...m("password",{required:"Password is required",minLength:{value:6,message:"Min 6 characters"}}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-400 pr-10"}),e.jsx("span",{onClick:()=>q(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 cursor-pointer",children:l?e.jsx(j,{size:20}):e.jsx(N,{size:20})}),t.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.password.message})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:d?"text":"password",placeholder:"Confirm Password",...m("confirm_password",{required:"Confirm your password"}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-400 pr-10"}),e.jsx("span",{onClick:()=>P(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 cursor-pointer",children:d?e.jsx(j,{size:20}):e.jsx(N,{size:20})}),t.confirm_password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.confirm_password.message})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>h(1),className:"flex-1 bg-gray-300 hover:bg-gray-400 text-black py-3 rounded-xl font-semibold transition",children:"Back"}),e.jsx("button",{type:"submit",disabled:g,className:"flex-1 bg-orange-500 hover:bg-orange-600 text-white py-3 rounded-xl font-semibold transition",children:g?"Verifying...":"Sign Up"})]})]})]}),e.jsxs("div",{className:"flex items-center my-6",children:[e.jsx("hr",{className:"flex-grow border-gray-300"}),e.jsx("span",{className:"px-3 text-gray-500 text-sm",children:"Or Sign Up with"}),e.jsx("hr",{className:"flex-grow border-gray-300"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{className:"flex-1 flex items-center justify-center border border-gray-300 rounded-xl py-3 hover:bg-gray-50 transition",children:[e.jsx(B,{className:"text-xl mr-2"})," Google"]}),e.jsxs("button",{className:"flex-1 flex items-center justify-center border border-gray-300 rounded-xl py-3 hover:bg-gray-50 transition",children:[e.jsx(R,{className:"text-blue-600 text-xl mr-2"})," Facebook"]})]}),e.jsx("p",{className:"text-center text-gray-600 mt-6",children:e.jsx("button",{onClick:()=>u("/signin"),className:"text-sm text-orange-500 hover:underline",children:"Already have an account? Sign In"})})]})})]})};export{L as default};
