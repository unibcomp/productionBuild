import{m as E,k,u as q,a,n as h,j as e,z as o}from"./index.1CbKXVec.js";import{u as T,A as U,U as _,a as f,b as y}from"./AuthBanner.C2oUO8Cp.js";import"./iconBase.DrO_7amp.js";const z=()=>({sendOtp:E({mutationFn:async n=>(await k.post("/forget",n)).data}).mutateAsync}),M=()=>{const i=q(),[n,l]=a.useState(1),[x,b]=a.useState(null),[u,w]=a.useState(""),[c,j]=a.useState(!1),[d,N]=a.useState(!1),{sendOtp:v}=z(),{verifyOtp:P}=T(),{register:S,handleSubmit:O,formState:{errors:p}}=h(),{register:m,handleSubmit:F,formState:{errors:t}}=h(),g=async s=>{try{const r=await v(s);o.success(r.message||"OTP sent successfully!"),r?.results?.vendor?._id&&b(r.results.vendor._id),w(s.emailOrPhone),l(2)}catch(r){o.error(r?.message||"Failed to send OTP")}},C=async s=>{if(!x){o.error("Vendor ID missing!");return}if(s.password!==s.confirm_password){o.error("Passwords do not match!");return}try{await P({...s,vendor_id:x}),o.success("Password reset successfully!"),i("/signin")}catch(r){o.error(r?.message||"Failed to reset password")}};return e.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row bg-white",children:[e.jsx(U,{}),e.jsx("div",{className:"flex w-full md:w-1/2 justify-center items-center p-8 min-h-screen md:min-h-0",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:_,alt:"Unibcomp",className:"w-10 h-10",onError:s=>s.currentTarget.src="https://via.placeholder.com/40x40/FFA500/FFFFFF?text=U"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 ml-2",children:"Unibcomp"})]})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 text-center mb-2",children:"Welcome"}),e.jsx("p",{className:"text-sm text-gray-600 text-center mb-6",children:"Reset your password to access your vendor dashboard"}),n===1&&e.jsxs("form",{onSubmit:O(g),className:"space-y-5",children:[e.jsx("input",{type:"text",placeholder:"Email or Phone",...S("emailOrPhone",{required:"Email or phone is required"}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-400"}),p.emailOrPhone&&e.jsx("p",{className:"text-red-500 text-sm",children:p.emailOrPhone.message}),e.jsx("button",{type:"submit",className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-3 rounded-xl font-semibold transition",children:"Get OTP"})]}),n===2&&e.jsxs("form",{onSubmit:F(C),className:"space-y-5",children:[e.jsx("input",{type:"text",value:u,disabled:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl bg-gray-100 text-gray-500 cursor-not-allowed"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",placeholder:"Enter OTP",...m("otp",{required:"OTP is required"}),className:"flex-1 px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-400"}),e.jsx("button",{type:"button",onClick:()=>g({emailOrPhone:u}),className:"px-4 py-2 bg-orange-100 text-orange-700 rounded-xl hover:bg-orange-200 transition text-sm font-medium",children:"Resend OTP"})]}),t.otp&&e.jsx("p",{className:"text-red-500 text-sm",children:t.otp.message}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:c?"text":"password",placeholder:"New Password",...m("password",{required:"Password is required",minLength:{value:6,message:"Min 6 characters"}}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-400 pr-10"}),e.jsx("span",{onClick:()=>j(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 cursor-pointer",children:c?e.jsx(f,{size:20}):e.jsx(y,{size:20})}),t.password&&e.jsx("p",{className:"text-red-500 text-sm",children:t.password.message})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:d?"text":"password",placeholder:"Confirm Password",...m("confirm_password",{required:"Confirm your password"}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-400 pr-10"}),e.jsx("span",{onClick:()=>N(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 cursor-pointer",children:d?e.jsx(f,{size:20}):e.jsx(y,{size:20})}),t.confirm_password&&e.jsx("p",{className:"text-red-500 text-sm",children:t.confirm_password.message})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>l(1),className:"flex-1 bg-gray-300 hover:bg-gray-400 text-black py-3 rounded-xl font-semibold transition",children:"Back"}),e.jsx("button",{type:"submit",className:"flex-1 bg-orange-500 hover:bg-orange-600 text-white py-3 rounded-xl font-semibold transition",children:"Reset Password"})]})]}),e.jsxs("div",{className:"flex items-center my-6",children:[e.jsx("hr",{className:"flex-grow border-gray-300"}),e.jsx("span",{className:"px-3 text-gray-500 text-sm",children:"Or Sign Up with"}),e.jsx("hr",{className:"flex-grow border-gray-300"})]}),e.jsx("p",{className:"text-center text-gray-600 mt-6",children:e.jsx("button",{onClick:()=>i("/signin"),className:"text-sm text-orange-500 hover:underline",children:"Remembered your password? Sign In"})})]})})]})};export{M as default};
