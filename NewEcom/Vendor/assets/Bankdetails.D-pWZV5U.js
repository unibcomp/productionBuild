import{i as y,o as N,m as k,z as d,k as x,a as m,j as e,s as j}from"./index.1CbKXVec.js";import{C as v}from"./credit-card.BVGhIk5P.js";import{U as C,B as w}from"./user-pen.faOF0_WZ.js";import{U as B}from"./user.CWCoclIE.js";const D=async()=>{const{data:a}=await x.get("/bank-deatils");return a.results},S=()=>y({queryKey:["bank-details"],queryFn:D,staleTime:300*1e3,refetchInterval:300*1e3,refetchOnWindowFocus:!1}),E=()=>{const a=N();return k({mutationFn:async s=>{const{data:r}=await x.put("/bank-update",s);return r},onSuccess:async s=>{d.success(s.message||"Bank details updated successfully!"),await a.invalidateQueries({queryKey:["bank-details"]})},onError:s=>{d.error(s?.response?.data?.error||s?.response?.data?.message||"Something went wrong!")}})},c=({label:a,icon:s,disabled:r,value:o,onChange:n})=>e.jsxs("div",{className:"flex items-center border rounded-lg p-3 bg-gray-50 focus-within:ring-2 focus-within:ring-purple-500",children:[e.jsx("span",{className:"text-gray-400 mr-3",children:s}),e.jsx("input",{type:"text",placeholder:a,disabled:r,value:o,onChange:n,className:`flex-1 bg-transparent outline-none ${r?"text-gray-500 cursor-not-allowed":"text-gray-900"}`})]}),I=()=>{const{data:a,isLoading:s}=S(),{mutate:r,isPending:o}=E(),[n,u]=m.useState(!1),[l,g]=m.useState({accountNumber:"",ifscCode:"",bankName:"",UserName:""});m.useEffect(()=>{a&&g(a)},[a]);const i=(t,h)=>{g(f=>({...f,[t]:h}))},b=()=>{r(l,{onSuccess:()=>{d.success("Bank details updated successfully!"),u(!1)},onError:t=>{d.error(t?.response?.data?.message||"Failed to update bank details")}})},p=()=>{g(a||l),u(!1)};return s?e.jsx(j,{}):e.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-gradient-to-br from-purple-50 via-white to-yellow-50 rounded-3xl shadow-xl border border-purple-100/50 mt-10",children:[e.jsx("h2",{className:"text-3xl font-extrabold text-orange-500 mb-8 text-center",children:"Bank Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(c,{label:"Account Number",icon:e.jsx(v,{className:"text-orange-500",size:20}),disabled:!n,value:l.accountNumber,onChange:t=>i("accountNumber",t.target.value)}),e.jsx(c,{label:"IFSC Code",icon:e.jsx(C,{className:"text-yellow-500",size:20}),disabled:!n,value:l.ifscCode,onChange:t=>i("ifscCode",t.target.value)}),e.jsx(c,{label:"Bank Name",icon:e.jsx(w,{className:"text-orange-500",size:20}),disabled:!n,value:l.bankName,onChange:t=>i("bankName",t.target.value)}),e.jsx(c,{label:"Account Holder Name",icon:e.jsx(B,{className:"text-yellow-600",size:20}),disabled:!n,value:l.UserName,onChange:t=>i("UserName",t.target.value)}),e.jsx("div",{className:"pt-4 flex gap-2",children:n?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",disabled:o,onClick:b,className:"flex-1 py-4 rounded-lg bg-green-600 hover:bg-green-700 text-white transition",children:o?"Saving...":"Save Changes"}),e.jsx("button",{type:"button",onClick:p,className:"flex-1 py-4 rounded-lg bg-gray-300 hover:bg-gray-400 text-black transition",children:"Cancel"})]}):e.jsx("button",{type:"button",onClick:()=>u(!0),className:"flex-1 py-4 rounded-lg bg-orange-600 hover:bg-orange-700 text-white transition",children:a?"Edit Bank Details":"Add Bank Details"})})]})]})};export{I as default};
