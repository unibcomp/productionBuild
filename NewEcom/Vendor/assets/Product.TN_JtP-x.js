import{i as S,o as E,m as D,k as v,j as e,h as I,L as k,a as N,s as R}from"./index.1CbKXVec.js";import{u as A,P as O}from"./usePagination.DBnjr7Ov.js";import{u as M}from"./useModal.C9hxPH9F.js";import{X as w}from"./x.DoIBlp4-.js";import{C as V}from"./check.DNP2fh3s.js";import{E as T}from"./eye.Bq-KZRLu.js";import{S as U,E as $,M as z}from"./search.CvSdDRNp.js";import{S as y}from"./settings.CDEwKIkE.js";import{H as _}from"./hash.CH7VhsAP.js";import{U as F}from"./user.CWCoclIE.js";import{P as G}from"./package.D_1E8Z0J.js";import{T as L}from"./truck.CDWDlwck.js";import{C as q}from"./credit-card.BVGhIk5P.js";import{D as B}from"./dollar-sign.C9jOSMHM.js";import{S as J}from"./shopping-bag.Cs4_8P5G.js";const Q=async t=>(await v.get("get-product",{params:t})).data,H=({pageSize:t=10,pageNumber:a=1,productStatus:r})=>S({queryKey:["products",t,a,r],queryFn:()=>Q({pageSize:t,pageNumber:a,productStatus:r}),staleTime:1e3*60}),K=async t=>{const{_id:a,...r}=t;return(await v.put(`update-product/${a}`,r)).data},X=()=>{const t=E();return D({mutationFn:K,onSuccess:()=>{t.invalidateQueries({queryKey:["products"],exact:!1})}})},W=({isOpen:t,onClose:a,onConfirm:r,title:m="Confirmation",message:l,confirmText:d="Confirm",cancelText:c="Cancel",confirmButtonClass:x="bg-blue-600 hover:bg-blue-700",isLoading:i=!1})=>t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:a}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6",children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",disabled:i,children:e.jsx(w,{size:20})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:m}),e.jsx("p",{className:"text-gray-600 mb-6",children:l}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:a,disabled:i,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50",children:c}),e.jsx("button",{onClick:r,disabled:i,className:`px-4 py-2 text-white rounded disabled:opacity-50 ${x}`,children:i?"Processing...":d})]})]})]}):null,Y=({products:t,startItem:a,isPending:r})=>{const{mutate:m,isPending:l}=X(),{user:d,isLoading:c}=I(),{isModalOpen:x,openModal:i,closeModal:h,data:n}=M(),u=d?.role==="ADMIN"||d?.role==="VENDOR",f=(s,b)=>{i({isConfirm:!0},{productId:s,productStatus:b})},g=()=>{n?.productId&&n?.productStatus&&m({_id:n.productId,productStatus:n.productStatus},{onSuccess:()=>{h({isConfirm:!1})}})},p=()=>{h({isConfirm:!1})},j=s=>{switch(s){case"APPROVED":return"text-green-600 font-semibold";case"REJECTED":return"text-red-600 font-semibold";default:return"text-yellow-600 font-semibold"}},o=s=>s==="APPROVED"?"Are you sure you want to approve this product?":"Are you sure you want to reject this product?";return t.length===0?e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center p-4 text-gray-500",children:"No Products Found"})})}):e.jsxs(e.Fragment,{children:[e.jsx("tbody",{children:t.map((s,b)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-2 border text-center",children:b+a}),e.jsx("td",{className:"p-2 border font-semibold",children:s.name}),e.jsx("td",{className:"p-2 border",children:s.category?.name||"-"}),e.jsx("td",{className:"p-2 border",children:s.brand?.name||"-"}),e.jsx("td",{className:"p-2 border",children:s.description||"-"}),e.jsx("td",{className:`p-2 border text-center ${j(s.productStatus||"PENDING")}`,children:s.productStatus||"PENDING"}),e.jsx("td",{className:"p-2 border",children:e.jsx("div",{className:"flex space-x-2",children:s.images?.map((P,C)=>e.jsx("img",{src:P,alt:s.name,className:"w-12 h-12 object-cover rounded"},C))})}),e.jsxs("td",{className:"p-2 border text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Generic:"})," ",s.manufacturingInfo?.genericName||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Origin:"})," ",s.manufacturingInfo?.countryOfOrigin||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Manufacturer:"})," ",s.manufacturingInfo?.manufacturer?.name," (",s.manufacturingInfo?.manufacturer?.contact,")"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Importer:"})," ",s.manufacturingInfo?.importer?.name," (",s.manufacturingInfo?.importer?.contact,")"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Packer:"})," ",s.manufacturingInfo?.packer?.name," (",s.manufacturingInfo?.packer?.contact,")"]})]}),e.jsxs("td",{className:"p-2 border text-center flex justify-center gap-2",children:[r&&u&&!c&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"p-2 bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50",title:"Approve",disabled:l,onClick:()=>f(s._id,"APPROVED"),children:e.jsx(V,{size:18})}),e.jsx("button",{className:"p-2 bg-red-500 text-white rounded hover:bg-red-600 disabled:opacity-50",title:"Reject",disabled:l,onClick:()=>f(s._id,"REJECTED"),children:e.jsx(w,{size:18})})]}),e.jsx(k,{to:`/products/variant/${s._id}`,className:"inline-flex items-center justify-center p-2 bg-blue-600 hover:bg-blue-700 text-white rounded transition",children:e.jsx(T,{size:20})})]})]},s._id))}),e.jsx(W,{isOpen:x.isConfirm||!1,onClose:p,onConfirm:g,title:n?.productStatus==="APPROVED"?"Approve Product":"Reject Product",message:o(n?.productStatus),confirmText:n?.productStatus==="APPROVED"?"Approve":"Reject",confirmButtonClass:n?.productStatus==="APPROVED"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700",isLoading:l})]})},he=({status:t})=>{const{startItem:a,handlePageChange:r,handlePageSizeChange:m,pageNumber:l,pageSizeValue:d}=A(),{data:c,isLoading:x}=H({pageSize:d,pageNumber:l,productStatus:t}),i=o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase(),h=t?`${i(t)} Products`:"Products",n=t?`Manage and view all ${i(t)} products here`:"Manage and view all products here",[u,f]=N.useState(!1),[g,p]=N.useState(""),j=N.useRef(null);return x?e.jsx(R,{}):e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:h}),e.jsx("p",{className:"text-sm text-gray-500",children:n}),e.jsx("div",{className:"h-2 w-24 bg-gray-200 rounded-full mt-1 relative overflow-hidden",children:e.jsx("div",{className:`absolute left-0 top-0 h-full rounded-full transition-all duration-700 ${t==="PENDING"?"bg-yellow-400 w-1/3":t==="APPROVED"?"bg-green-500 w-full":t==="REJECTED"?"bg-red-500 w-2/5":"bg-gray-200 w-0"}`})})]}),e.jsxs("div",{className:"flex items-center gap-3 relative",children:[e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("button",{onClick:()=>f(o=>!o),className:"p-2 rounded-full hover:bg-gray-100 transition",children:u?e.jsx("span",{className:"text-gray-600 text-lg font-bold",children:"Ã—"}):e.jsx(U,{className:"w-5 h-5 text-gray-600"})}),e.jsx("div",{className:`absolute right-0 top-10 flex items-center bg-white border border-gray-300 rounded-full shadow-sm overflow-hidden transition-all duration-300 ease-in-out ${u?"w-64 px-3 opacity-100":"w-0 px-0 opacity-0"}`,children:e.jsx("input",{ref:j,type:"text",value:g,onChange:o=>p(o.target.value),placeholder:"Search products...",className:`flex-1 py-1.5 text-sm outline-none bg-transparent transition-opacity duration-300 ${u?"opacity-100":"opacity-0"}`})})]}),e.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100",children:e.jsx(y,{className:"w-5 h-5 text-gray-600"})}),e.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100",children:e.jsx($,{className:"w-5 h-5 text-gray-600"})})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-md overflow-hidden border border-gray-200",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm text-gray-700",children:[e.jsx("thead",{className:"bg-orange-100 text-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(_,{className:"w-4 h-4 text-gray-700 mr-1"}),e.jsx("span",{children:"S.No"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(F,{className:"w-4 h-4 text-gray-700 mr-1"}),e.jsx("span",{children:"Name"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold ",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(G,{className:"w-4 h-4 text-gray-700 mr-1"}),e.jsx("span",{children:"Category"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(L,{className:"w-4 h-4 text-gray-700 mr-1"}),e.jsx("span",{children:"Brand"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold ",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(q,{className:"w-4 h-4 text-gray-700 mr-1"}),e.jsx("span",{children:"Description"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold ",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(B,{className:"w-4 h-4 text-gray-700 mr-1"}),e.jsx("span",{children:"Status"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold ",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(J,{className:"w-4 h-4 text-gray-700 mr-1"}),e.jsx("span",{children:"Images"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold ",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(z,{className:"w-4 h-4 text-gray-700 mr-1"}),e.jsx("span",{children:"Manufacturing Info"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold ",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(y,{className:"w-4 h-4 text-gray-700 mr-1"}),e.jsx("span",{children:"Action"})]})})]})}),e.jsx(Y,{products:c?.results||[],startItem:a,isPending:t==="PENDING"})]})})}),e.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row items-center justify-between gap-3",children:[e.jsxs("span",{className:"text-gray-600 text-sm",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:c?.results?.length||0})," of"," ",e.jsx("span",{className:"font-medium",children:c?.pagination?.total||0})," products"]}),e.jsx(O,{currentPage:l,handlePageChange:r,pageSize:d,handlePageSizeChange:m,totalCount:c?.pagination?.total||0})]})]})};export{he as default};
