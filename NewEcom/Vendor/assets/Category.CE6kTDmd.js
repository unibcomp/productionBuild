import{o as f,n as b,a as x,j as e,k as g,s as y}from"./index.1CbKXVec.js";import{u as N}from"./useCreateProduct.Bg9ggRT7.js";import{u as v,P as w}from"./usePagination.DBnjr7Ov.js";import{h as u}from"./dialog.BPAf0H9O.js";import{X as C}from"./x.DoIBlp4-.js";import{K as p}from"./transition.R8uNngye.js";import{u as k}from"./useModal.C9hxPH9F.js";import{H as S}from"./hash.CH7VhsAP.js";import{I as E,T as F}from"./tag.tCx9I-76.js";import{C as T}from"./circle-check-big.pjSSW5R6.js";import{C as P}from"./circle-x.CDbp0yff.js";import{E as z}from"./eye.Bq-KZRLu.js";const A=({isOpen:r,onClose:l,isUpdate:t,initialData:a})=>{const c=f(),{register:d,handleSubmit:h,reset:o,formState:{errors:n}}=b();x.useEffect(()=>{o(t&&a?{name:a.name||""}:{name:"",image:void 0})},[t,a,o]);const m=async i=>{try{const s=new FormData;s.append("name",i.name),i.image&&i.image.length>0&&s.append("image",i.image[0]),t&&a?._id?await g.put(`/update-category/${a._id}`,s,{headers:{"Content-Type":"multipart/form-data"}}):await g.post("/create-category",s,{headers:{"Content-Type":"multipart/form-data"}}),await c.invalidateQueries({queryKey:["get-category"]}),l()}catch(s){console.error("Error saving category:",s)}};return e.jsx(p,{appear:!0,show:r,as:x.Fragment,children:e.jsxs(u,{as:"div",className:"relative z-50",onClose:l,children:[e.jsx(p.Child,{as:x.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/30"})}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsx(p.Child,{as:x.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(u.Panel,{className:"w-full max-w-md rounded-xl bg-white p-6 shadow-xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx(u.Title,{className:"text-lg font-semibold",children:t?"Edit Category":"Add Category"}),e.jsx("button",{type:"button",onClick:l,className:"rounded-full p-1 hover:bg-gray-100",children:e.jsx(C,{size:20})})]}),e.jsxs("form",{onSubmit:h(m),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...d("name",{required:"Category name is required"}),className:"w-full border rounded px-3 py-2 focus:outline-none focus:ring focus:ring-pink-300"}),n.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Image"}),e.jsx("input",{type:"file",accept:"image/*",...d("image"),className:"w-full"}),a?.image&&t&&e.jsx("img",{src:a.image,alt:"Current",className:"mt-2 w-16 h-16 object-cover rounded border"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded bg-pink-600 text-white hover:bg-pink-700",children:t?"Update":"Create"})]})]})]})})})]})})},U=()=>{const{data:r,isLoading:l,isError:t}=N(),{pageNumber:a,pageSizeValue:c,handlePageChange:d,handlePageSizeChange:h}=v(),{data:o,isModalOpen:n,openModal:m,closeModal:i}=k();return l?e.jsx(y,{}):t?e.jsx("div",{className:"p-4 text-red-500",children:"Error loading data"}):e.jsxs("div",{className:"p-6 relative",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-md overflow-hidden border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center m-4",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"All Categories"}),e.jsx("button",{onClick:()=>m({isCreate:!0}),className:"px-4 py-2 bg-orange-200 text-black rounded hover:bg-orange-700",children:"+ Add Category"})]}),!r?.results||r.results.length===0?e.jsx("p",{children:"No categories found"}):e.jsx("div",{className:"overflow-x-auto overflow-y-auto max-h-[400px] rounded-lg shadow-sm custom-scrollbar",children:e.jsxs("table",{className:"min-w-full text-sm bg-white rounded-lg",children:[e.jsx("thead",{className:"bg-orange-100 text-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(S,{className:"w-4 h-4 text-gray-700"}),e.jsx("span",{children:"S.No"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(E,{className:"w-4 h-4 text-gray-700"}),e.jsx("span",{children:"Image"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(F,{className:"w-4 h-4 text-gray-700"}),e.jsx("span",{children:"Name"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(T,{className:"w-4 h-4 text-green-600"}),e.jsx(P,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{children:"Status"})]})}),e.jsx("th",{className:"p-3 text-center font-semibold",children:e.jsx("div",{className:"flex items-center justify-center gap-1",children:e.jsx("span",{children:"Actions"})})})]})}),e.jsx("tbody",{children:r.results.map((s,j)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50 transition text-center",children:[e.jsx("td",{className:"p-3",children:(a-1)*c+(j+1)}),e.jsx("td",{className:"p-3",children:s.image?e.jsx("img",{src:s.image,alt:s.name,className:"w-12 h-12 object-cover rounded-md border mx-auto"}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-md flex items-center justify-center text-gray-500 text-xs mx-auto",children:"No Image"})}),e.jsx("td",{className:"p-3 font-medium text-gray-800",children:s.name}),e.jsx("td",{className:"p-3",children:e.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s.isActive,readOnly:!0}),e.jsx("div",{className:"w-11 h-6 bg-gray-300 rounded-full peer-checked:bg-green-500 transition-all relative",children:e.jsx("div",{className:"absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow transform peer-checked:translate-x-5 transition"})})]})}),e.jsx("td",{className:"p-3",children:e.jsx("button",{onClick:()=>m({isUpdate:!0},s),className:"p-2 hover:bg-gray-100 rounded-full transition",children:e.jsx(z,{className:"w-5 h-5 text-gray-600"})})})]},s._id))})]})})]}),e.jsx(w,{currentPage:a,handlePageChange:d,pageSize:c,handlePageSizeChange:h,totalCount:r?.pagination.total||0}),e.jsx(A,{isOpen:n.isCreate||n.isUpdate||!1,onClose:()=>i({isCreate:!1,isUpdate:!1}),initialData:o||void 0,isUpdate:n.isUpdate||!1})]})};export{U as default};
