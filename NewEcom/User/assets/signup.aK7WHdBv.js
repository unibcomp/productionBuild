import{r as x,e as A,j as e,L as p,z as m}from"./index.BHxc7D0m.js";import{E as y,a as w,F}from"./index.XR5Hv1wJ.js";import{u as L}from"./unbcompY.4VGBDMNV.js";import{a as O,b as V}from"./useUser.nhTURJ8n.js";import{u as T}from"./index.esm.BQqehW3V.js";import"./iconBase.rAni4LCw.js";import"./useMutation.BCQV56qk.js";const r=s=>s?typeof s=="string"?s:"message"in s&&typeof s.message=="string"?s.message:null:null,J=()=>{const[s,u]=x.useState(!1),[n,j]=x.useState(!1),[d,N]=x.useState(!1),[g,v]=x.useState(null),{register:l,handleSubmit:P,setError:c,clearErrors:h,formState:{errors:t},watch:f}=T(),b=f("password"),S=f("confirmPassword"),k=A(),E=O(),q=V(),C=async a=>{if(!a.email&&!a.mobile){c("email",{type:"manual",message:"Email or Mobile is required"}),c("mobile",{type:"manual",message:"Email or Mobile is required"});return}h(["email","mobile"]),E.mutate(a,{onSuccess:o=>{m.success(o?.message||"User created successfully!"),v(o?.result?.id||null),u(!0)},onError:o=>{m.error(o?.response?.data?.message||o?.response?.data?.error||"Something went wrong!"),u(!1)}})},U=async a=>{if(!g){m.error("User not found. Please register again.");return}if(a.password!==a.confirmPassword){c("confirmPassword",{type:"manual",message:"Passwords do not match"});return}h("confirmPassword");const o={id:g,otp:a.otp,password:a.password,confirmPassword:a.confirmPassword};try{const i=await q.mutateAsync(o);m.success(i?.message||"Account verified successfully!"),k("/login")}catch(i){m.error(i?.response?.data?.message||i?.message||"Verification failed"),c("otp",{type:"manual",message:i?.response?.data?.message||"Verification failed"})}},z=()=>console.log("Google signup clicked");return e.jsxs("div",{className:"min-h-screen h-screen w-full relative flex overflow-hidden bg-[url('https://static.vecteezy.com/ti/photos-gratuite/t1/23309285-ai-generatif-commerce-electronique-en-ligne-achats-concept-livraison-concept-photo.jpg')] bg-cover bg-center",children:[e.jsx("div",{className:"absolute inset-0 opacity-50"}),e.jsxs("div",{className:"hidden lg:flex flex-1 flex-col justify-center px-8 xl:px-16 z-10",children:[e.jsxs("h2",{className:"text-white text-3xl xl:text-5xl font-extrabold mb-4 drop-shadow-lg",children:["Join ",e.jsx("span",{className:"text-primary",children:"Unibcomp"})," Today!"]}),e.jsxs("p",{className:"text-white text-lg xl:text-xl mb-6 drop-shadow-md",children:["Sign up and discover"," ",e.jsx("span",{className:"font-semibold",children:"amazing products"})]}),e.jsx(p,{to:"/login",className:"bg-primary text-white font-semibold py-3 px-6 rounded-lg hover:bg-primary-dark hover:text-white transition transform hover:scale-105 w-max",children:"Already a member? Login"})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-4 sm:p-6 lg:p-8 z-10 overflow-y-auto",children:e.jsxs("div",{className:"bg-white shadow-2xl rounded-2xl sm:rounded-3xl p-6 sm:p-8 lg:p-9 w-full max-w-md lg:max-w-lg xl:max-w-xl my-auto",children:[e.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[e.jsx("img",{src:L,alt:"Logo",className:"w-40 sm:w-48 lg:w-56 mx-auto mb-3"}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-extrabold text-black",children:"Create Account"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-1",children:"Sign up to start shopping"})]}),e.jsxs("form",{onSubmit:P(s?U:C),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm sm:text-base",children:"Full Name"}),e.jsx("input",{type:"text",placeholder:"Enter your full name",...l("fullName",{required:"Full Name is required"}),disabled:s,className:`w-full text-sm border px-4 py-2.5 sm:py-3 rounded-lg focus:outline-none focus:ring-2 shadow-sm ${s?"bg-primary border-primary cursor-not-allowed":"border-gray-300 focus:ring-primary"}`}),r(t.fullName)&&e.jsx("p",{className:"text-red-500 text-xs sm:text-sm mt-1",children:r(t.fullName)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm sm:text-base",children:"Mobile"}),e.jsx("input",{type:"text",placeholder:"Enter your mobile number",...l("mobile"),disabled:s,className:`w-full text-sm border px-4 py-2.5 sm:py-3 rounded-lg focus:outline-none focus:ring-2 shadow-sm ${s?"bg-white border-primary cursor-not-allowed":"border-gray-300 focus:ring-primary"}`}),r(t.mobile)&&e.jsx("p",{className:"text-red-500 text-xs sm:text-sm mt-1",children:r(t.mobile)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm sm:text-base",children:"Email Address"}),e.jsx("input",{type:"email",placeholder:"Enter your email",...l("email"),disabled:s,className:`w-full text-sm border px-4 py-2.5 sm:py-3 rounded-lg focus:outline-none focus:ring-2 shadow-sm ${s?"bg-white border-primary cursor-not-allowed":"border-gray-300 focus:ring-primary"}`}),r(t.email)&&e.jsx("p",{className:"text-red-500 text-xs sm:text-sm mt-1",children:r(t.email)})]}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm sm:text-base",children:"OTP"}),e.jsx("input",{type:"text",placeholder:"Enter OTP",...l("otp",{required:"OTP is required"}),className:"w-full text-sm border border-primary px-4 py-2.5 sm:py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary shadow-sm"}),r(t.otp)&&e.jsx("p",{className:"text-red-500 text-xs sm:text-sm mt-1",children:r(t.otp)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm sm:text-base",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:n?"text":"password",placeholder:"Enter your password",...l("password",{required:"Password is required"}),className:"appearance-none w-full text-sm border border-primary px-4 py-2.5 sm:py-3 pr-12 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary shadow-sm"}),b&&e.jsx("button",{type:"button",onClick:()=>j(!n),className:"absolute right-3 top-1/2 -translate-y-1/2 text-black bg-white rounded-full p-1","aria-label":n?"Hide password":"Show password",children:n?e.jsx(y,{className:"w-5 h-5"}):e.jsx(w,{className:"w-5 h-5"})})]}),r(t.password)&&e.jsx("p",{className:"text-red-500 text-xs sm:text-sm mt-1",children:r(t.password)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm sm:text-base",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:d?"text":"password",placeholder:"Confirm your password",...l("confirmPassword",{required:"Confirm Password is required",validate:a=>a===b||"Passwords do not match"}),className:"appearance-none w-full text-sm border border-primary px-4 py-2.5 sm:py-3 pr-12 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary shadow-sm"}),S&&e.jsx("button",{type:"button",onClick:()=>N(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-black bg-white rounded-full p-1","aria-label":d?"Hide password":"Show password",children:d?e.jsx(y,{className:"w-5 h-5"}):e.jsx(w,{className:"w-5 h-5"})})]}),r(t.confirmPassword)&&e.jsx("p",{className:"text-red-500 text-xs sm:text-sm mt-1",children:r(t.confirmPassword)})]})]}),e.jsx("button",{type:"submit",className:`w-full ${s?"bg-primary hover:bg-primary-dark":"bg-primary hover:primary-dark"} text-white py-2.5 sm:py-3 rounded-lg font-semibold transition transform hover:scale-[1.02] shadow-md text-sm sm:text-base`,children:s?"Verify OTP":"Sign Up"})]}),e.jsxs("div",{className:"flex items-center gap-2 my-5",children:[e.jsx("div",{className:"flex-grow h-px bg-gray-300"}),e.jsx("span",{className:"text-gray-500 text-xs sm:text-sm",children:"OR"}),e.jsx("div",{className:"flex-grow h-px bg-gray-300"})]}),e.jsxs("button",{onClick:z,className:"w-full flex items-center justify-center gap-3 border rounded-lg py-2 sm:py-2.5 font-medium text-white hover:bg-primary-dark transition transform hover:scale-[1.02] text-sm sm:text-base",children:[e.jsx(F,{className:"text-lg sm:text-xl"}),"Continue with Google"]}),e.jsxs("div",{className:"text-center mt-4 sm:mt-5",children:[e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-2",children:"Already have an account?"}),e.jsx(p,{to:"/login",className:"text-primary hover:text-primary-dark font-medium text-sm sm:text-base",children:"Login here"})]}),e.jsx("div",{className:"text-center mt-3",children:e.jsx(p,{to:"/",className:"text-gray-600 text-xs sm:text-sm hover:text-primary",children:"‚Üê Back to Store"})})]})})]})};export{J as default};
