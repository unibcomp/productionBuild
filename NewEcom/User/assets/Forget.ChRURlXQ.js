import{r as n,e as S,j as e,L as m,z as c}from"./index.iBcEEe4E.js";import{u as q}from"./index.esm.CSPHdcmw.js";import{u as E}from"./unbcompY.4VGBDMNV.js";import{c as z,b as L}from"./useUser.W_j0GIyu.js";import{h as u}from"./queryToast.C6VuZVzt.js";import"./useMutation.GV4_nnAS.js";const M=()=>{const[r,x]=n.useState(!1),[a,i]=n.useState("mobile"),[g,p]=n.useState(""),b=S(),{register:t,handleSubmit:h,watch:w,formState:{errors:o}}=q(),{mutate:f,isPending:l}=z(),{mutate:j,isPending:d}=L(),y=s=>{const v=a==="mobile"?{mobile:s.mobile}:{email:s.email};f(v,{...u({onSuccess:P=>{p(P.data.id),x(!0)},onError:()=>{}})})},N=s=>{if(!s.otp||!s.newPassword||!s.confirmPassword){c.error("All fields are required");return}if(s.newPassword!==s.confirmPassword){c.error("Passwords do not match");return}j({id:g,otp:s.otp,password:s.newPassword,confirmPassword:s.confirmPassword},{...u({onSuccess:()=>{b("/login")},onError:()=>{}})})};return e.jsxs("div",{className:"relative min-h-screen",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:"url('https://image3.luatvietnam.vn/uploaded/665twebp/images/original/2024/11/27/state-management-of-e-commerce-to-be-tightened_2711091334.jpg')"}}),e.jsx("div",{className:"absolute inset-0 bg-black/40"}),e.jsxs("div",{className:"relative flex min-h-screen flex-col md:flex-row",children:[e.jsxs("div",{className:"hidden md:flex md:w-1/2 flex-col justify-center px-12 text-white z-10",children:[e.jsxs("h2",{className:"text-4xl md:text-5xl font-extrabold mb-4 drop-shadow-lg",children:["Reset Your ",e.jsx("span",{className:"text-orange-700",children:"Password"})]}),e.jsxs("p",{className:"text-lg md:text-xl mb-6 drop-shadow-md",children:["Secure your account with a"," ",e.jsx("span",{className:"text-orange-700 font-semibold",children:"new password"})]}),e.jsx(m,{to:"/signup",className:"bg-orange-400 text-gray-900 font-semibold py-3 px-6 rounded-lg hover:bg-orange-700 transition transform hover:scale-105",children:"Create Account"})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center z-10 p-8",children:e.jsxs("div",{className:"bg-white shadow-2xl rounded-3xl p-9 w-[60%] max-w-[600%] transform hover:scale-[1.01] transition-all duration-300",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("img",{src:E,alt:"Logo",className:"w-56 mx-auto mb-3"}),e.jsx("h1",{className:"text-3xl font-extrabold text-gray-800",children:"Forgot Password"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Choose a method to reset your password"})]}),e.jsxs("div",{className:"flex justify-center mb-4",children:[e.jsx("button",{type:"button",onClick:()=>i("mobile"),disabled:r,className:`px-4 py-2 rounded-l-lg border ${a==="mobile"?"bg-orange-400 text-white":"bg-gray-100 text-gray-600"} ${r?"opacity-50 cursor-not-allowed":""}`,children:"Phone"}),e.jsx("button",{type:"button",onClick:()=>i("email"),disabled:r,className:`px-4 py-2 rounded-r-lg border ${a==="email"?"bg-orange-500 text-white":"bg-gray-100 text-gray-600"} ${r?"opacity-50 cursor-not-allowed":""}`,children:"Email"})]}),e.jsxs("form",{onSubmit:h(r?N:y),className:"space-y-4",children:[a==="mobile"?e.jsxs("div",{children:[e.jsx("input",{type:"text",...t("mobile",{required:"Mobile number is required",minLength:{value:10,message:"Mobile must be 10 digits"},maxLength:{value:10,message:"Mobile must be 10 digits"}}),placeholder:"Mobile Number",className:`w-full border ${r?"bg-gray-100 cursor-not-allowed":""} border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-orange-400 shadow-sm`,disabled:r}),o.mobile&&e.jsx("p",{className:"text-sm text-red-500",children:o.mobile.message})]}):e.jsxs("div",{children:[e.jsx("input",{type:"email",...t("email",{required:"Email is required",pattern:{value:/^[A-Za-z][A-Za-z0-9._%+-]*@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/,message:"Email must start with a letter and be alphanumeric."}}),placeholder:"Email Address",className:`w-full border ${r?"bg-gray-100 cursor-not-allowed":""} border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-orange-400 shadow-sm`,disabled:r}),o.email&&e.jsx("p",{className:"text-sm text-red-500",children:o.email.message})]}),r&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",maxLength:6,inputMode:"numeric",...t("otp",{required:"OTP is required"}),placeholder:"Enter OTP",className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm"}),o.otp&&e.jsx("p",{className:"text-sm text-red-500",children:o.otp.message}),e.jsx("input",{type:"password",...t("newPassword",{required:"New password is required"}),placeholder:"New Password",className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm"}),o.newPassword&&e.jsx("p",{className:"text-sm text-red-500",children:o.newPassword.message}),e.jsx("input",{type:"password",...t("confirmPassword",{required:"Confirm password is required",validate:s=>s===w("newPassword")||"Passwords do not match"}),placeholder:"Confirm Password",className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm"}),o.confirmPassword&&e.jsx("p",{className:"text-sm text-red-500",children:o.confirmPassword.message})]}),e.jsx("button",{type:"submit",className:"w-full bg-orange-400 text-white py-3 rounded-lg font-semibold hover:bg-orange-600 transition transform hover:scale-[1.02] shadow-md",disabled:l||d,children:r?d?"Resetting...":"Reset Password":l?"Sending...":"Send OTP"})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs(m,{to:"/login",className:"inline-flex items-center text-orange-300 font-medium text-sm hover:text-orange-700 hover:underline transition",children:[e.jsx("span",{className:"mr-1",children:"‚Üê"})," Back to Login"]})})]})})]})]})};export{M as default};
