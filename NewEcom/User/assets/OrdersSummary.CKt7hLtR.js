import{R as o,j as e,q as b}from"./index.BHxc7D0m.js";import{a as y}from"./useOrder.DSqWR-7W.js";import"./useMutation.BCQV56qk.js";const C=()=>{const{data:i,isLoading:x,isError:u}=y(),[n,h]=o.useState([]),[r,g]=o.useState(""),p=s=>{h(t=>t.includes(s)?t.filter(a=>a!==s):[...t,s])},c=o.useMemo(()=>i?.results?i.results.filter(s=>{const t=n.length===0||n.includes(s.orderStatus),a=r.trim()===""||s.transaction_id?.toLowerCase().includes(r.toLowerCase())||s.items?.some(l=>l.name?.toLowerCase().includes(r.toLowerCase()));return t&&a}):[],[i?.results,n,r]);return x?e.jsxs("div",{className:"flex justify-center items-center min-h-screen text-orange-600",children:[e.jsx(b,{className:"animate-spin mr-2"})," Loading orders..."]}):u?e.jsx("p",{className:"text-center text-red-500 mt-10",children:"Failed to load orders. Try again later."}):e.jsx("div",{className:"min-h-screen bg-orange-50",children:e.jsx("div",{className:"max-w-7xl mx-auto p-4 md:p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("aside",{className:"w-full md:w-64",children:e.jsxs("div",{className:"sticky top-20 bg-white p-4 rounded-2xl shadow-lg border border-orange-100",children:[e.jsx("h3",{className:"font-semibold text-orange-700 mb-3",children:"Filters"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"font-medium mb-2 text-gray-800",children:"ORDER STATUS"}),["Delivered","Pending","Cancelled"].map(s=>e.jsxs("label",{className:"block cursor-pointer select-none text-gray-700 hover:text-orange-600 transition-colors",children:[e.jsx("input",{type:"checkbox",className:"mr-2 accent-orange-600",checked:n.includes(s),onChange:()=>p(s)}),s]},s))]})]})}),e.jsxs("main",{className:"flex-1",children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:"Search by product or transaction ID...",value:r,onChange:s=>g(s.target.value),className:"w-full px-4 py-2 border border-orange-200 rounded-lg focus:ring-2 focus:ring-orange-400 focus:outline-none"})}),e.jsx("div",{className:"space-y-4",children:c.length===0?e.jsx("p",{className:"text-center text-gray-500",children:"No matching orders found."}):c.map(s=>{const t=s.items?.[0]||s.item,a=Array.isArray(s.items)?s.items.reduce((j,N)=>j+(N.quantity||0),0):s.item?.quantity||0,l=encodeURIComponent(s._id),d=t?encodeURIComponent(t._id):"",m=t&&d?`/order-details?order_id=${l}&item_id=${d}`:null,f=s.orderStatus==="Delivered"?"bg-green-100 text-green-700":s.orderStatus==="Pending"?"bg-orange-100 text-orange-700":"bg-red-100 text-red-700";return e.jsx("div",{className:"bg-white p-4 rounded-xl shadow-md border border-orange-100 hover:shadow-lg hover:border-orange-300 transition-all duration-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:t?.name||"Unnamed Product"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Items: ",a]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Transaction ID:"," ",e.jsx("span",{className:"text-orange-600",children:s.transaction_id})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3",children:[e.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${f}`,children:s.orderStatus}),m&&e.jsx("a",{href:m,className:"px-4 py-2 text-sm font-medium bg-orange-500 text-white rounded-lg hover:bg-orange-600 hover:text-white transition-colors",children:"View Details"})]})]})},s._id)})})]})]})})})};export{C as default};
