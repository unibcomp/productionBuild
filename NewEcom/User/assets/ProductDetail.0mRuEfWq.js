import{k as V,a as ee,l as Q,b as T,r as b,j as e,m as te,e as U,h as O,z as q,R as se,d as ae,u as re,n as ie,L as B}from"./index.BHxc7D0m.js";import{u as Z}from"./useModal.BZCQGMde.js";import{u as le}from"./index.esm.BQqehW3V.js";import{K as E,h as D,P as G,B as de}from"./ButtonBar.wlUrCWqx.js";import{u as X}from"./useMutation.BCQV56qk.js";import{a as ne}from"./queryToast.IZiA70RY.js";import{u as oe,W as H,P as ce}from"./Product.C6Dh95zE.js";import{a as me,u as xe}from"./useCart.CrQBvVfF.js";import{g as K,O as W,o as he,p as ge,P as ue}from"./index.BFqS5zLA.js";import"./useWishlist.CgU7iN8q.js";import"./NotDataFound.CNTQj38f.js";import"./proxy.Bd0jAl89.js";import"./index.CNEXTKYg.js";import"./iconBase.rAni4LCw.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],be=V("star",pe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],fe=V("thumbs-up",ye),je=async t=>(await T.post("/add-rating",t)).data,ve=async t=>(await T.post(`/like/${t}`)).data,Ne=async({productId:t,...a})=>(await T.get(`/rating-list/${t}`,a)).data;function we({productId:t=""}){const a={...t&&{productId:t}};return ee({queryKey:["ratings",a],queryFn:()=>Ne(a),enabled:!!a?.productId})}function ke(){const t=Q();return X({mutationFn:a=>je(a),onSuccess:(a,c)=>{t.invalidateQueries({queryKey:["ratings",c.productId]}),t.invalidateQueries({queryKey:["product",c.productId]})}})}function _e(){const t=Q();return X({mutationFn:a=>ve(a),onSuccess:(a,c)=>{t.invalidateQueries({queryKey:["rating",c]}),t.invalidateQueries({queryKey:["ratings"]})}})}function Se(t){return t??(()=>{})}const ze=[1,2,3,4,5],Y=({handleClose:t,isAdd:a=!0,show:c,productId:g,refetch:s})=>{const{register:p,handleSubmit:m,setValue:x,watch:d,formState:{errors:h}}=le({defaultValues:{rating:5,comment:"",productId:g??void 0,title:"",images:null}});b.useEffect(()=>{g&&x("productId",g)},[g,x]);const j=d("rating")??5,n=ke(),r=async i=>{const u=[];await n.mutateAsync({productId:i.productId,rating:i.rating,title:i.title??void 0,description:i.comment??void 0,images:u},ne(Se(s),t))};return e.jsx(E,{appear:!0,show:c,as:b.Fragment,children:e.jsxs(D,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(E.Child,{as:b.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm transition-opacity"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(E.Child,{as:b.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(D.Panel,{className:"w-full max-w-lg transform overflow-hidden rounded-2xl bg-white p-6 shadow-xl transition-all border border-gray-200",children:[e.jsx(G,{title:a?"Add Rating":"Edit Rating"}),e.jsxs("form",{onSubmit:m(r),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating *"}),e.jsx("div",{className:"flex items-center gap-2",children:ze.map(i=>e.jsx("button",{type:"button",onClick:()=>x("rating",i),className:`p-2 rounded-md transition ${(j??0)>=i?"bg-yellow-400 text-white":"bg-gray-100 text-gray-600"}`,"aria-label":`${i} star`,children:"★"},i))}),h.rating?.message&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.rating?.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Comment"}),e.jsx("textarea",{placeholder:"Write an optional comment...",...p("comment"),className:"mt-1 block w-full rounded-lg border border-gray-300 shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500",rows:4})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title (optional)"}),e.jsx("input",{...p("title"),type:"text",placeholder:"Short title (e.g. 'Great quality')",className:"mt-1 block w-full rounded-lg border border-gray-300 shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsx("input",{type:"hidden",...p("productId")}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:a?"Submit":"Save"})]})]})]})})})})]})})},Ce=(t,a)=>{const{_id:c}=te(),{data:g,isLoading:s,refetch:p}=oe(String(c)),{addIteamMutation:m}=me(),{refetch:x}=xe({type:"through_cart"}),d=U(),[h,j]=b.useState(null),[n,r]=b.useState(!1),[i,u]=b.useState({x:0,y:0}),o=g,k=o?.productVariant??[],[C,_]=b.useState(t||"");b.useEffect(()=>{k.length>0&&_(k[0]._id)},[k]);const v=b.useMemo(()=>k.find(y=>y._id===C),[C,k]),[S,$]=b.useState(a||"");b.useEffect(()=>{v&&v?.sizes?.length>0?$(v.sizes[0]._id):$("")},[v]);const P=y=>{_(y);const w=k.find(N=>N._id===y);w?.images?.length&&j(w.images[0])},M=y=>{$(y)},A=y=>{const{left:w,top:N,width:I,height:l}=y.currentTarget.getBoundingClientRect(),f=(y.clientX-w)/I*100-20,R=(y.clientY-N)/l*100-20;u({x:f,y:R})},F=y=>{if(!O()){d("/login");return}m.mutate(y,{onSuccess:w=>{x();const{data:N}=w;if(N.type==="direct"){d(`/checkout?cart_id=${N._id}&&type=direct`);return}q.success("Item added to cart!")},onError:()=>{q.error("Failed to add item to cart.")}})},L=v?.images?.length?v.images:o?.images||["/placeholder.png"];return{product:o,isLoading:s,refetchProduct:p,selectedImg:h,setSelectedImg:j,zoom:n,setZoom:r,mousePos:i,handleMouseMove:A,selectedVariantId:C,selectedVariant:v,selectedSizeId:S,handleColorSelect:P,handleSizeSelect:M,handleAddtoCart:F,addIteamMutation:m,images:L}},z=({label:t,value:a})=>e.jsxs("div",{className:"grid grid-cols-2 gap-2 py-1 border-b border-gray-100 last:border-b-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-600",children:t}),e.jsx("div",{className:"text-sm text-gray-900 break-words",children:a??"—"})]}),$e=({manufacturingInfo:t,attributes:a=[],className:c=""})=>{const[g,s]=b.useState(!0),p=()=>!a||a.length===0?null:a.map(m=>{const x=Array.isArray(m.value)?m.value.join(", "):String(m.value);return e.jsx(z,{label:m.name,value:x},m.name)});return e.jsxs("div",{className:`mt-4 rounded-lg bg-white border border-gray-200 shadow-sm overflow-hidden ${c}`,children:[e.jsxs("button",{type:"button",onClick:()=>s(m=>!m),"aria-expanded":g,className:"w-full px-4 py-2 flex items-center justify-between text-left bg-gray-50 hover:bg-gray-100 focus:outline-none transition-all duration-200",children:[e.jsx("h3",{className:"text-md font-semibold text-gray-800",children:"Manufacturing Details"}),e.jsx("span",{className:"text-gray-600",children:g?"▾":"▸"})]}),g&&e.jsxs("div",{className:"px-4 py-3",children:[t?e.jsxs("div",{className:"bg-white p-2",children:[e.jsx(z,{label:"Generic Name",value:t.genericName}),e.jsx(z,{label:"Country of Origin",value:t.countryOfOrigin}),e.jsx(z,{label:"Manufacturer",value:t.manufacturer?`${t.manufacturer.name}${t.manufacturer.address?`, ${t.manufacturer.address}`:""}${t.manufacturer.contact?` (${t.manufacturer.contact})`:""}`:"—"}),t.importer&&e.jsx(z,{label:"Importer",value:`${t.importer.name}${t.importer.address?`, ${t.importer.address}`:""}${t.importer.contact?` (${t.importer.contact})`:""}`}),t.packer&&e.jsx(z,{label:"Packer",value:`${t.packer.name}${t.packer.address?`, ${t.packer.address}`:""}${t.packer.contact?` (${t.packer.contact})`:""}`})]}):null,a&&a.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Technical Specifications"}),e.jsx("div",{className:"bg-white p-2",children:p()})]}),!t&&(!a||a.length===0)&&e.jsx("div",{className:"text-sm text-gray-500 text-center py-2",children:"No specifications available for this product."})]})]})},Ae=({label:t,value:a})=>e.jsxs("div",{className:"grid grid-cols-2 gap-2 py-1 border-b border-gray-100 last:border-b-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-600",children:t}),e.jsx("div",{className:"text-sm text-gray-900 break-words",children:a??"—"})]}),Re=({attributes:t=[],productVariants:a=[],selectedVariantId:c,selectedSizeId:g,className:s=""})=>{const[p,m]=b.useState(!0),x=b.useMemo(()=>{const d=[];if(Array.isArray(t))for(const h of t)d.push({name:h.name,value:h.value});if(Array.isArray(a)&&a.length>0){const h=a.find(n=>n._id===c)??a[0],j=h?.sizes?.find(n=>n._id===g)??h?.sizes?.[0];if(j&&Array.isArray(j.attributes))for(const n of j.attributes){const r=d.find(i=>i.name===n.name);r?r.value=n.value:d.push({name:n.name,value:n.value})}}return d},[t,a,c,g]);return e.jsxs("div",{className:`mt-4 rounded-lg bg-white border border-gray-200 shadow-sm overflow-hidden ${s}`,children:[e.jsxs("button",{type:"button",onClick:()=>m(d=>!d),"aria-expanded":p,className:"w-full px-4 py-2 flex items-center justify-between text-left bg-gray-50 hover:bg-gray-100 focus:outline-none transition-all duration-200",children:[e.jsx("h3",{className:"text-md font-semibold text-gray-800",children:"Specifications"}),e.jsx("span",{className:"text-gray-600",children:p?"▾":"▸"})]}),p&&e.jsx("div",{className:"px-4 py-3",children:x&&x.length>0?e.jsx("div",{className:"bg-white p-2",children:x.map(d=>{const h=Array.isArray(d.value)?d.value.join(", "):String(d.value);return e.jsx(Ae,{label:d.name,value:h},d.name)})}):e.jsx("div",{className:"text-sm text-gray-500 text-center py-2",children:"No specifications available for this product."})})]})},Pe=({data:t,isError:a,isLoading:c,product_id:g})=>{const{openModal:s,closeModal:p,isModalOpen:m}=Z(),x=U(),[d,h]=se.useState(null),{mutate:j}=_e(),n=r=>{r&&d!==r&&(h(r),j(r,{onSettled:()=>{h(null)},onError:i=>{console.error("Failed to like rating:",i),alert("Failed to like the rating. Please try again.")}}))};return e.jsxs("div",{className:"mt-6",children:[e.jsx(G,{title:"Review",component:e.jsx(de,{buttons:[{label:"Add",colorClass:"bg-secondary",onClick:()=>O()?s({isRating:!0}):x("/login")}]})}),c?e.jsx("p",{children:"Loading ratings..."}):a?e.jsx("p",{className:"text-red-500",children:"Failed to load ratings"}):t?.ratings?.length?e.jsx("div",{className:"space-y-4 mt-4 max-h-[60vh] overflow-y-auto custom-scroll pr-2",children:t.ratings.map(r=>{const i=(r.likes?.length??0)>0;return e.jsxs("div",{className:"bg-white border-2 border-slate-200 rounded-2xl p-5 shadow-sm hover:shadow-md transition",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-full flex items-center justify-center text-white font-bold text-base shadow",children:(r.user?.name??"A").charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-800 text-base",children:r.user?.name??"Anonymous"}),e.jsx("p",{className:"text-xs text-slate-500",children:r.createdAt?new Date(r.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""})]})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gradient-to-r from-orange-500 to-orange-600 px-2 py-1.5 rounded-lg shadow-sm",children:[Array.from({length:5}).map((u,o)=>e.jsx(be,{size:14,className:o<(r.rating??0)?"text-white":"text-white/40",fill:o<(r.rating??0)?"currentColor":"none"},o)),e.jsxs("span",{className:"text-white font-bold text-xs ml-1",children:[r.rating??0,".0"]})]})]}),r.title&&e.jsx("h3",{className:"text-base font-semibold text-slate-800 mb-2",children:r.title}),e.jsx("p",{className:"text-slate-600 text-sm leading-relaxed mb-4",children:r.description??r.comment??""}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-slate-200",children:[e.jsx("div",{className:"text-xs text-slate-500",children:r.createdAt?new Date(r.createdAt).toLocaleString():""}),e.jsxs("button",{onClick:()=>n(r._id),disabled:d===r._id,"aria-pressed":i,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-semibold transition-all shadow-sm
                      disabled:opacity-50 disabled:cursor-not-allowed
                      ${i?"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white":"bg-white border border-slate-200 text-emerald-600 hover:bg-emerald-50 hover:text-primary"}`,children:[e.jsx(fe,{size:14,className:i?"text-white":"text-emerald-500",fill:i?"currentColor":"none"}),e.jsx("span",{children:i?"Helpful":"Mark Helpful"}),(r.likes?.length??0)>0&&e.jsxs("span",{className:`font-bold ${i?"text-white":"text-slate-700"}`,children:["(",r.likes?.length,")"]})]})]})]},r._id)})}):e.jsx("p",{className:"text-gray-500",children:"No ratings yet. Be the first to review!"}),e.jsx("div",{className:"md:hidden mt-4",children:e.jsx("button",{onClick:()=>O()?s({isRating:!0}):x("/login"),className:"w-full bg-gradient-to-r from-emerald-500 to-emerald-600 text-white px-4 py-3 rounded-xl font-semibold shadow-md transition",children:"Write Review"})}),e.jsx(Y,{show:m?.isRating||!1,handleClose:()=>p({isRating:!1}),isAdd:!0,productId:g})]})},Qe=()=>{const[t]=ae(),a=t.get("variant"),c=t.get("size"),{user:g}=re(),{product:s,isLoading:p,refetchProduct:m,selectedImg:x,setSelectedImg:d,zoom:h,setZoom:j,mousePos:n,handleMouseMove:r,selectedVariantId:i,selectedVariant:u,selectedSizeId:o,handleColorSelect:k,handleSizeSelect:C,handleAddtoCart:_,addIteamMutation:v,images:S}=Ce(a||"",c||""),{openModal:$,closeModal:P,isModalOpen:M}=Z(),{data:A,isLoading:F,isError:L}=we({productId:s?._id||""}),y=A?.ratings&&A?.ratings.length>0;if(p)return e.jsx(ie,{});if(!s)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-6xl text-gray-300 mb-4",children:"inventory_2"}),e.jsx("p",{className:"text-xl text-text-muted",children:"Product not found"})]})});const w=u?.sizes.find(l=>l._id===o)?.sell_price||0,N=u?.sizes.find(l=>l._id===o)?.original_price||0,I=N?Math.round((N-w)/N*100):0;return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 md:py-8 mt-9 md:mt-0",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8",children:[e.jsx("div",{className:"lg:col-span-4",children:e.jsxs("div",{className:"lg:sticky lg:top-24",children:[e.jsx("div",{className:"lg:hidden",children:e.jsxs("div",{className:"relative bg-surface rounded-xl border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"flex overflow-x-auto snap-x snap-mandatory scrollbar-hide",children:S.map((l,f)=>e.jsx("div",{className:"relative min-w-full snap-center",children:e.jsx("img",{src:l,alt:`${s.name} ${f+1}`,className:"w-full h-64 object-contain bg-white p-3"})},f))}),e.jsx(H,{productId:s._id,variantId:i,isInWishlist:s.isInWishlist,className:"absolute top-3 right-3 z-10"}),e.jsxs("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 bg-black/60 backdrop-blur-sm text-white px-2.5 py-1 rounded-full text-xs font-medium",children:["1 / ",S.length]})]})}),e.jsxs("div",{className:"hidden lg:block space-y-3",children:[e.jsxs("div",{className:"relative bg-surface rounded-xl border border-gray-200 overflow-hidden group",children:[e.jsx("div",{className:"w-full h-80 p-4",children:e.jsx("img",{src:x||S[0],alt:s.name,className:"w-full h-full object-contain",onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),onMouseMove:r})}),e.jsx(H,{productId:s._id,variantId:i,isInWishlist:s.isInWishlist,className:"absolute top-3 right-3 z-10"}),h&&e.jsxs("div",{className:"absolute top-3 left-3 bg-black/60 backdrop-blur-sm text-white px-2.5 py-1 rounded-lg text-xs font-medium",children:[e.jsx("span",{className:"material-symbols-outlined text-sm mr-1 align-middle",children:"zoom_in"}),"Hover to zoom"]})]}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:S.map((l,f)=>e.jsx("button",{onClick:()=>d(l),className:`bg-white relative aspect-square rounded-lg border-2 overflow-hidden transition-all hover:scale-105 ${x===l?"border-secondary shadow-md ring-2 ring-primary/20":"border-gray-200 hover:border-gray-300"}`,children:e.jsx("img",{src:l,alt:`Thumbnail ${f+1}`,className:"w-full h-full object-cover p-1"})},f))})]}),o&&u&&e.jsxs("div",{className:"hidden lg:grid grid-cols-2 gap-3 mt-4",children:[e.jsxs("button",{disabled:v.isPending,onClick:()=>_({product_id:s._id,size_Id:o,variant_id:i,type:"through_cart"}),className:"flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-secondary to-secondary-dark hover:from-secondary-dark hover:to-secondary text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(K,{size:18}),e.jsx("span",{className:"text-sm",children:"Add to Cart"})]}),e.jsxs("button",{disabled:v.isPending,onClick:()=>_({product_id:s._id,size_Id:o,variant_id:i,type:"direct"}),className:"flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-primary to-primary-dark hover:from-primary-dark hover:to-primary text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(W,{size:18}),e.jsx("span",{className:"text-sm",children:"Buy Now"})]})]})]})}),e.jsxs("div",{className:"lg:col-span-8 space-y-0 lg:space-y-6",children:[e.jsxs("nav",{className:"hidden lg:flex items-center gap-2 text-sm text-text-muted mb-2 overflow-x-auto whitespace-nowrap pb-2",children:[e.jsx(B,{to:"/",className:"hover:text-primary transition-colors",children:"Home"}),e.jsx("span",{className:"material-symbols-outlined text-xs",children:"chevron_right"}),e.jsx(B,{to:"/product",className:"hover:text-primary transition-colors",children:"Products"}),s.category?.name&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-symbols-outlined text-xs",children:"chevron_right"}),e.jsx(B,{to:`/products?category_id=${s.category._id}`,className:"hover:text-primary transition-colors",children:s.category.name})]}),e.jsx("span",{className:"material-symbols-outlined text-xs",children:"chevron_right"}),e.jsx("span",{className:"text-text font-medium truncate",children:s.name})]}),e.jsxs("div",{className:"bg-surface rounded-2xl border-2 border-gray-100 p-4 md:p-6 space-y-4",children:[s.brand?.name&&e.jsxs("div",{className:"inline-flex items-center gap-2 bg-primary/10 text-primary px-3 py-1 rounded-full text-xs md:text-sm font-medium",children:[e.jsx("span",{className:"material-symbols-outlined text-sm md:text-base",children:"verified"}),s.brand.name]}),e.jsx("h1",{className:"text-xl md:text-2xl lg:text-3xl font-bold text-text leading-tight",children:s.name}),s.category?.name&&e.jsxs("p",{className:"text-text-muted text-xs md:text-sm",children:["Category: ",e.jsx("span",{className:"font-medium text-text",children:s.category.name})]}),e.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2 bg-secondary px-2 md:px-3 py-1 md:py-1.5 rounded-lg",children:[e.jsx("span",{className:"text-white font-bold text-sm md:text-base",children:s?.ratings?.average.toFixed(1)}),e.jsx("span",{className:"material-symbols-outlined text-white text-xs md:text-sm",children:"star"})]}),e.jsxs("span",{className:"text-text-muted text-xs md:text-sm font-medium",children:[s?.ratings?.count," ",s?.ratings?.count===1?"Rating":"Ratings"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-4 pt-2",children:[e.jsxs("span",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-secondary",children:["₹",w.toLocaleString("en-IN")]}),N>w&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-base md:text-xl lg:text-2xl line-through text-text-muted",children:["₹",N.toLocaleString("en-IN")]}),e.jsxs("span",{className:"bg-red-500 text-white text-xs md:text-sm font-bold px-2 md:px-3 py-0.5 md:py-1 rounded-full whitespace-nowrap",children:[I,"% OFF"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-3 pt-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2 text-xs",children:[e.jsx(he,{className:"text-primary flex-shrink-0",size:14}),e.jsx("span",{className:"text-text-muted",children:"Free Delivery"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2 text-xs",children:[e.jsx(ge,{className:"text-primary flex-shrink-0",size:14}),e.jsx("span",{className:"text-text-muted",children:"Secure Payment"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2 text-xs",children:[e.jsx("span",{className:"material-symbols-outlined text-primary flex-shrink-0",style:{fontSize:"14px"},children:"verified_user"}),e.jsx("span",{className:"text-text-muted",children:"Authentic"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2 text-xs",children:[e.jsx("span",{className:"material-symbols-outlined text-primary flex-shrink-0",style:{fontSize:"14px"},children:"local_offer"}),e.jsx("span",{className:"text-text-muted",children:"Best Price"})]})]})]}),s.offers&&s.offers.length>0&&e.jsxs("div",{className:"bg-surface rounded-2xl border-2 border-gray-100 p-4 md:p-6",children:[e.jsxs("h3",{className:"text-base md:text-lg font-bold text-text mb-3 md:mb-4 flex items-center gap-2",children:[e.jsx(ue,{className:"text-primary",size:18}),"Available Offers"]}),e.jsx("ul",{className:"space-y-2 md:space-y-3",children:s.offers.slice(0,3).map((l,f)=>e.jsxs("li",{className:"flex items-start gap-2 md:gap-3 text-xs md:text-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-secondary text-base md:text-lg flex-shrink-0",children:"check_circle"}),e.jsx("span",{className:"text-text-muted",children:l})]},f))}),s.offers.length>3&&e.jsxs("button",{className:"text-primary font-medium text-xs md:text-sm mt-2 md:mt-3 hover:underline",children:["+ ",s.offers.length-3," more offers"]})]}),e.jsxs("div",{className:"bg-surface rounded-lg border border-gray-200 p-4 md:p-6",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-text mb-3 md:mb-4",children:"Select Color"}),e.jsx("div",{className:"flex flex-wrap gap-2 md:gap-3",children:s.productVariant.map(l=>e.jsx("button",{onClick:()=>k(l._id),className:`px-3 md:px-5 py-2 md:py-3 rounded-lg border-2 font-medium text-xs md:text-sm transition-all ${i===l._id?"border-secondary bg-secondary/10 text-secondary":"border-gray-300 text-text hover:border-gray-400"}`,children:l.color},l._id))})]}),u&&u.sizes.length>0&&e.jsxs("div",{className:"bg-surface rounded-lg border border-gray-200 p-4 md:p-6",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-text mb-3 md:mb-4",children:"Select Size"}),e.jsx("div",{className:"flex flex-wrap gap-2 md:gap-3",children:u.sizes.map(l=>{const f=l.attributes.find(J=>J.name==="Storage"),R=f?f.value:null;return e.jsxs("button",{onClick:()=>C(l._id),className:`px-3 md:px-5 py-2 md:py-3 rounded-lg border-2 font-medium text-xs md:text-sm transition-all ${o===l._id?"border-secondary bg-secondary/10 text-secondary":"border-gray-300 text-text hover:border-gray-400"}`,children:[l.size," ",R&&`/ ${R}`]},l._id)})})]}),u&&u.sizes.length>0&&u.sizes[0].highlights&&u.sizes[0].highlights.length>0&&e.jsxs("div",{className:"bg-surface rounded-lg border border-gray-200 p-4 md:p-6",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-text mb-3 md:mb-4",children:"Key Highlights"}),e.jsx("ul",{className:"space-y-2 md:space-y-3",children:u.sizes[0].highlights.map((l,f)=>e.jsxs("li",{className:"flex items-start gap-2 md:gap-3",children:[e.jsx("span",{className:"material-symbols-outlined text-secondary text-base md:text-lg flex-shrink-0 mt-0.5",children:"check_circle"}),e.jsx("span",{className:"text-text-muted text-xs md:text-sm leading-relaxed flex-1",children:l})]},f))})]}),e.jsxs("div",{className:"bg-surface rounded-lg border border-gray-200 p-4 md:p-6",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-text mb-3 md:mb-4",children:"Specifications"}),e.jsx(Re,{attributes:s.attributes,productVariants:s.productVariant,selectedVariantId:i,selectedSizeId:o})]}),e.jsxs("div",{className:"bg-surface rounded-lg border border-gray-200 p-4 md:p-6",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-text mb-3 md:mb-4",children:"Manufacturing Details"}),e.jsx($e,{manufacturingInfo:s.manufacturingInfo,attributes:s.attributes})]}),g&&!y&&e.jsxs("button",{onClick:()=>$({isRating:!0}),className:"w-full py-3 md:py-4 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all flex items-center justify-center gap-2 text-sm md:text-base",children:[e.jsx("span",{className:"material-symbols-outlined",children:"star"}),"Rate this Product"]}),e.jsx(Pe,{data:A,isError:L,isLoading:F,product_id:s._id})]})]}),h&&e.jsx("div",{className:"hidden lg:block fixed right-8 top-24 z-50 w-96 h-96 rounded-xl border-4 border-primary shadow-2xl bg-white overflow-hidden",children:e.jsx("img",{src:x||S[0],alt:"Zoomed view",className:"w-full h-full object-contain",style:{transform:`scale(2.5) translate(-${n.x}%, -${n.y}%)`,transformOrigin:`${n.x}% ${n.y}%`}})}),e.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-surface border-t-2 border-gray-200 shadow-2xl z-50",children:e.jsx("div",{className:"container mx-auto px-4 py-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{disabled:v.isPending||!o,onClick:()=>_({product_id:s._id,type:"through_cart",size_Id:o,variant_id:i}),className:"flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-secondary to-secondary-dark text-white rounded-xl font-semibold shadow-lg active:scale-95 transition-all disabled:opacity-50 text-sm",children:[e.jsx(K,{size:16}),e.jsx("span",{children:"Add to Cart"})]}),e.jsxs("button",{disabled:v.isPending||!o,onClick:()=>_({product_id:s._id,type:"direct",size_Id:o,variant_id:i}),className:"flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl font-semibold shadow-lg active:scale-95 transition-all disabled:opacity-50 text-sm",children:[e.jsx(W,{size:16}),e.jsx("span",{children:"Buy Now"})]})]})})}),e.jsx(ce,{category:s.category?._id,title:"Related Products",exclude:s._id,horizontal:!0}),e.jsx(Y,{show:M?.isRating||!1,handleClose:()=>P({isRating:!1}),isAdd:!0,productId:s._id,refetch:m})]})})};export{Qe as default};
