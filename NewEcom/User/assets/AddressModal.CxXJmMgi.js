import{a as x,l as b,b as d,p as q,j as e,r as i,z as m}from"./index.iBcEEe4E.js";import{u as k}from"./index.esm.CSPHdcmw.js";import{u}from"./useMutation.GV4_nnAS.js";import{K as c,h as p,P as A}from"./dialog.Dole23pQ.js";import{B as F}from"./ButtonBar.BCVNhBr3.js";const P=async s=>(await d.get("/get-address",{params:s})).data,S=async s=>(await d.post("/create-address",s)).data,$=async s=>(await d.delete(`/delete-address/${s}`)).data,M=({pageNumber:s=1,pageSize:t=10}={})=>{const o={pageNumber:s,pageSize:t};return x({queryKey:["address",o],queryFn:()=>P(o)})},L=()=>{const s=b();return u({mutationFn:S,onSuccess:()=>s.invalidateQueries({queryKey:["address"],exact:!1})})},I=()=>{const s=b();return u({mutationFn:$,onSuccess:()=>s.invalidateQueries({queryKey:["address"],exact:!1})})},V=()=>u({mutationFn:async s=>(await d.put("/update-profile",s,{})).data}),K=async s=>(await q.get(`https://pinlookup.in/api/pincode?pincode=${s}`)).data,E=s=>x({queryKey:["pincodeData",s],queryFn:()=>K(s),enabled:!!s,staleTime:1e3*60*5}),_=({show:s,handleClose:t,isAdd:o,data:g,refetch:h})=>{const{register:a,handleSubmit:y,reset:f,watch:j,setValue:n,formState:{errors:r}}=k({defaultValues:g||{}}),N=j("postalCode"),{data:l}=E(N||"");l?.data&&(n("city",l.data.district_name),n("state",l.data.state_name),n("country","India"));const w=L(),v=C=>{o&&w.mutate(C,{onSuccess:()=>{m.success("Address added successfully"),h?.(),f(),t()},onError:()=>{m.error("Failed to add address")}})};return e.jsx(c,{appear:!0,show:s,as:i.Fragment,children:e.jsxs(p,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(c.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-orange-900 bg-opacity-40 backdrop-blur-sm transition-opacity"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(c.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(p.Panel,{className:"w-full max-w-2xl transform overflow-hidden rounded-2xl bg-white p-6 shadow-xl transition-all border border-orange-300",children:[e.jsx(A,{title:o?"Add New Address":"Edit Address",component:e.jsx(F,{buttons:[{label:"X",onClick:t,colorClass:"bg-orange-600 hover:bg-orange-700 text-white"}]})}),e.jsxs("form",{onSubmit:y(v),className:"space-y-6 max-h-[60vh] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-orange-800",children:"Full Name *"}),e.jsx("input",{type:"text",placeholder:"Enter full name",...a("name",{required:"Name is required"}),className:`mt-1 block w-full rounded-lg border border-orange-300 shadow-sm p-3 focus:ring-orange-500 focus:border-orange-500 ${r.name?"border-red-500":""}`}),r.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-orange-800",children:"Address Line 1 *"}),e.jsx("input",{type:"text",placeholder:"Street address",...a("addressLine1",{required:"Address Line 1 is required"}),className:`mt-1 block w-full rounded-lg border border-orange-300 shadow-sm p-3 focus:ring-orange-500 focus:border-orange-500 ${r.addressLine1?"border-red-500":""}`}),r.addressLine1&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.addressLine1.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-orange-800",children:"Address Line 2"}),e.jsx("input",{type:"text",placeholder:"Apartment, suite, etc. (optional)",...a("addressLine2"),className:"mt-1 block w-full rounded-lg border border-orange-300 shadow-sm p-3 focus:ring-orange-500 focus:border-orange-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-orange-800",children:"Postal Code *"}),e.jsx("input",{type:"text",placeholder:"ZIP / Postal Code",...a("postalCode",{required:"Postal Code is required"}),className:`mt-1 block w-full rounded-lg border border-orange-300 shadow-sm p-3 focus:ring-orange-500 focus:border-orange-500 ${r.postalCode?"border-red-500":""}`}),r.postalCode&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.postalCode.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-orange-800",children:"City *"}),e.jsx("input",{type:"text",placeholder:"City",...a("city",{required:"City is required"}),className:`mt-1 block w-full rounded-lg border border-orange-300 shadow-sm p-3 bg-orange-50 ${r.city?"border-red-500":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-orange-800",children:"State *"}),e.jsx("input",{type:"text",placeholder:"State",...a("state",{required:"State is required"}),className:`mt-1 block w-full rounded-lg border border-orange-300 shadow-sm p-3 bg-orange-50 ${r.state?"border-red-500":""}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-orange-800",children:"Country *"}),e.jsx("input",{type:"text",placeholder:"Country",...a("country",{required:"Country is required"}),className:`mt-1 block w-full rounded-lg border border-orange-300 shadow-sm p-3 bg-orange-50 ${r.country?"border-red-500":""}`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-orange-800",children:"Phone *"}),e.jsx("input",{type:"text",placeholder:"Phone number",...a("phone",{required:"Phone is required"}),className:`mt-1 block w-full rounded-lg border border-orange-300 shadow-sm p-3 focus:ring-orange-500 focus:border-orange-500 ${r.phone?"border-red-500":""}`}),r.phone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.phone.message})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:t,className:"px-5 py-2 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-5 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition",children:"Save"})]})]})]})})})})]})})};export{_ as A,V as a,I as b,M as u};
