import{k as V,a as ee,l as Q,b as T,r as b,j as e,m as te,e as U,h as P,z as q,R as se,d as ae,u as re,n as ie,L as z}from"./index.iBcEEe4E.js";import{u as Z}from"./useModal.CYjSKKl-.js";import{u as le}from"./index.esm.CSPHdcmw.js";import{K as O,h as W,P as G}from"./dialog.Dole23pQ.js";import{u as X}from"./useMutation.GV4_nnAS.js";import{a as de}from"./queryToast.C6VuZVzt.js";import{u as ne,W as H,P as oe}from"./Product.MFqaddzm.js";import{a as ce,u as me}from"./useCart.D6g7wMx8.js";import{B as xe}from"./ButtonBar.BCVNhBr3.js";import{g as D,O as K,o as he,p as pe,P as ge}from"./index.DoxR8w4p.js";import"./useWishlist.lSxLkZ9Y.js";import"./NotDataFound.od_pjo5P.js";import"./proxy.ehZYG1RB.js";import"./index.USpG9VB8.js";import"./iconBase.CNvNnBMr.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],be=V("star",ue);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],je=V("thumbs-up",ye),fe=async t=>(await T.post("/add-rating",t)).data,ve=async t=>(await T.post(`/like/${t}`)).data,Ne=async({productId:t,...a})=>(await T.get(`/rating-list/${t}`,a)).data;function we({productId:t=""}){const a={...t&&{productId:t}};return ee({queryKey:["ratings",a],queryFn:()=>Ne(a),enabled:!!a?.productId})}function ke(){const t=Q();return X({mutationFn:a=>fe(a),onSuccess:(a,m)=>{t.invalidateQueries({queryKey:["ratings",m.productId]}),t.invalidateQueries({queryKey:["product",m.productId]})}})}function _e(){const t=Q();return X({mutationFn:a=>ve(a),onSuccess:(a,m)=>{t.invalidateQueries({queryKey:["rating",m]}),t.invalidateQueries({queryKey:["ratings"]})}})}function Se(t){return t??(()=>{})}const ze=[1,2,3,4,5],Y=({handleClose:t,isAdd:a=!0,show:m,productId:p,refetch:s})=>{const{register:u,handleSubmit:x,setValue:n,watch:d,formState:{errors:h}}=le({defaultValues:{rating:5,comment:"",productId:p??void 0,title:"",images:null}});b.useEffect(()=>{p&&n("productId",p)},[p,n]);const f=d("rating")??5,o=ke(),r=async i=>{const g=[];await o.mutateAsync({productId:i.productId,rating:i.rating,title:i.title??void 0,description:i.comment??void 0,images:g},de(Se(s),t))};return e.jsx(O,{appear:!0,show:m,as:b.Fragment,children:e.jsxs(W,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(O.Child,{as:b.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm transition-opacity"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(O.Child,{as:b.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(W.Panel,{className:"w-full max-w-lg transform overflow-hidden rounded-2xl bg-white p-6 shadow-xl transition-all border border-gray-200",children:[e.jsx(G,{title:a?"Add Rating":"Edit Rating"}),e.jsxs("form",{onSubmit:x(r),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating *"}),e.jsx("div",{className:"flex items-center gap-2",children:ze.map(i=>e.jsx("button",{type:"button",onClick:()=>n("rating",i),className:`p-2 rounded-md transition ${(f??0)>=i?"bg-yellow-400 text-white":"bg-gray-100 text-gray-600"}`,"aria-label":`${i} star`,children:"★"},i))}),h.rating?.message&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.rating?.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Comment"}),e.jsx("textarea",{placeholder:"Write an optional comment...",...u("comment"),className:"mt-1 block w-full rounded-lg border border-gray-300 shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500",rows:4})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title (optional)"}),e.jsx("input",{...u("title"),type:"text",placeholder:"Short title (e.g. 'Great quality')",className:"mt-1 block w-full rounded-lg border border-gray-300 shadow-sm p-3 focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsx("input",{type:"hidden",...u("productId")}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:a?"Submit":"Save"})]})]})]})})})})]})})},Ce=(t,a)=>{const{_id:m}=te(),{data:p,isLoading:s,refetch:u}=ne(String(m)),{addIteamMutation:x}=ce(),{refetch:n}=me({type:"through_cart"}),d=U(),[h,f]=b.useState(null),[o,r]=b.useState(!1),[i,g]=b.useState({x:0,y:0}),c=p,k=c?.productVariant??[],[R,_]=b.useState(t||"");b.useEffect(()=>{k.length>0&&_(k[0]._id)},[k]);const v=b.useMemo(()=>k.find(y=>y._id===R),[R,k]),[S,$]=b.useState(a||"");b.useEffect(()=>{v&&v?.sizes?.length>0?$(v.sizes[0]._id):$("")},[v]);const F=y=>{_(y);const w=k.find(N=>N._id===y);w?.images?.length&&f(w.images[0])},L=y=>{$(y)},A=y=>{const{left:w,top:N,width:E,height:l}=y.currentTarget.getBoundingClientRect(),j=(y.clientX-w)/E*100-20,M=(y.clientY-N)/l*100-20;g({x:j,y:M})},I=y=>{if(!P()){d("/login");return}x.mutate(y,{onSuccess:w=>{n();const{data:N}=w;if(N.type==="direct"){d(`/checkout?cart_id=${N._id}&&type=direct`);return}q.success("Item added to cart!")},onError:()=>{q.error("Failed to add item to cart.")}})},B=v?.images?.length?v.images:c?.images||["/placeholder.png"];return{product:c,isLoading:s,refetchProduct:u,selectedImg:h,setSelectedImg:f,zoom:o,setZoom:r,mousePos:i,handleMouseMove:A,selectedVariantId:R,selectedVariant:v,selectedSizeId:S,handleColorSelect:F,handleSizeSelect:L,handleAddtoCart:I,addIteamMutation:x,images:B}},C=({label:t,value:a})=>e.jsxs("div",{className:"grid grid-cols-2 gap-2 py-1 border-b border-gray-100 last:border-b-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-600",children:t}),e.jsx("div",{className:"text-sm text-gray-900 break-words",children:a??"—"})]}),Re=({manufacturingInfo:t,attributes:a=[],className:m=""})=>{const[p,s]=b.useState(!0),u=()=>!a||a.length===0?null:a.map(x=>{const n=Array.isArray(x.value)?x.value.join(", "):String(x.value);return e.jsx(C,{label:x.name,value:n},x.name)});return e.jsxs("div",{className:`mt-4 rounded-lg bg-white border border-gray-200 shadow-sm overflow-hidden ${m}`,children:[e.jsxs("button",{type:"button",onClick:()=>s(x=>!x),"aria-expanded":p,className:"w-full px-4 py-2 flex items-center justify-between text-left bg-gray-50 hover:bg-gray-100 focus:outline-none transition-all duration-200",children:[e.jsx("h3",{className:"text-md font-semibold text-gray-800",children:"Manufacturing Details"}),e.jsx("span",{className:"text-gray-600",children:p?"▾":"▸"})]}),p&&e.jsxs("div",{className:"px-4 py-3",children:[t?e.jsxs("div",{className:"bg-white p-2",children:[e.jsx(C,{label:"Generic Name",value:t.genericName}),e.jsx(C,{label:"Country of Origin",value:t.countryOfOrigin}),e.jsx(C,{label:"Manufacturer",value:t.manufacturer?`${t.manufacturer.name}${t.manufacturer.address?`, ${t.manufacturer.address}`:""}${t.manufacturer.contact?` (${t.manufacturer.contact})`:""}`:"—"}),t.importer&&e.jsx(C,{label:"Importer",value:`${t.importer.name}${t.importer.address?`, ${t.importer.address}`:""}${t.importer.contact?` (${t.importer.contact})`:""}`}),t.packer&&e.jsx(C,{label:"Packer",value:`${t.packer.name}${t.packer.address?`, ${t.packer.address}`:""}${t.packer.contact?` (${t.packer.contact})`:""}`})]}):null,a&&a.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Technical Specifications"}),e.jsx("div",{className:"bg-white p-2",children:u()})]}),!t&&(!a||a.length===0)&&e.jsx("div",{className:"text-sm text-gray-500 text-center py-2",children:"No specifications available for this product."})]})]})},$e=({label:t,value:a})=>e.jsxs("div",{className:"grid grid-cols-2 gap-2 py-1 border-b border-gray-100 last:border-b-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-600",children:t}),e.jsx("div",{className:"text-sm text-gray-900 break-words",children:a??"—"})]}),Ae=({attributes:t=[],productVariants:a=[],selectedVariantId:m,selectedSizeId:p,className:s=""})=>{const[u,x]=b.useState(!0),n=b.useMemo(()=>{const d=[];if(Array.isArray(t))for(const h of t)d.push({name:h.name,value:h.value});if(Array.isArray(a)&&a.length>0){const h=a.find(o=>o._id===m)??a[0],f=h?.sizes?.find(o=>o._id===p)??h?.sizes?.[0];if(f&&Array.isArray(f.attributes))for(const o of f.attributes){const r=d.find(i=>i.name===o.name);r?r.value=o.value:d.push({name:o.name,value:o.value})}}return d},[t,a,m,p]);return e.jsxs("div",{className:`mt-4 rounded-lg bg-white border border-gray-200 shadow-sm overflow-hidden ${s}`,children:[e.jsxs("button",{type:"button",onClick:()=>x(d=>!d),"aria-expanded":u,className:"w-full px-4 py-2 flex items-center justify-between text-left bg-gray-50 hover:bg-gray-100 focus:outline-none transition-all duration-200",children:[e.jsx("h3",{className:"text-md font-semibold text-gray-800",children:"Specifications"}),e.jsx("span",{className:"text-gray-600",children:u?"▾":"▸"})]}),u&&e.jsx("div",{className:"px-4 py-3",children:n&&n.length>0?e.jsx("div",{className:"bg-white p-2",children:n.map(d=>{const h=Array.isArray(d.value)?d.value.join(", "):String(d.value);return e.jsx($e,{label:d.name,value:h},d.name)})}):e.jsx("div",{className:"text-sm text-gray-500 text-center py-2",children:"No specifications available for this product."})})]})},Pe=({data:t,isError:a,isLoading:m,product_id:p})=>{const{openModal:s,closeModal:u,isModalOpen:x}=Z(),n=U(),[d,h]=se.useState(null),{mutate:f}=_e(),o=r=>{r&&d!==r&&(h(r),f(r,{onSettled:()=>{h(null)},onError:i=>{console.error("Failed to like rating:",i),alert("Failed to like the rating. Please try again.")}}))};return e.jsxs("div",{className:"mt-6",children:[e.jsx(G,{title:"Review",component:e.jsx(xe,{buttons:[{label:"Add",colorClass:"bg-secondary",onClick:()=>P()?s({isRating:!0}):n("/login")}]})}),e.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-emerald-600 rounded-2xl p-4 mb-6 mt-4 shadow-md",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-white/20 backdrop-blur-sm p-2 rounded-md",children:e.jsx("span",{className:"material-symbols-outlined text-white text-xl",children:"rate_review"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Customer Reviews"}),e.jsxs("p",{className:"text-white/90 text-sm",children:[t?.ratings?.length||0," ",t?.ratings?.length===1?"Review":"Reviews"]})]})]}),e.jsx("div",{className:"hidden md:block",children:e.jsx("button",{onClick:()=>P()?s({isRating:!0}):n("/login"),className:"bg-white text-emerald-600 px-3 py-1.5 rounded-lg font-semibold text-sm shadow-sm hover:shadow-md transition",children:"Write Review"})})]})}),m?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-emerald-200 border-t-emerald-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading reviews..."})]})}):a?e.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-6 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-red-500 text-4xl mb-2",children:"error"}),e.jsx("p",{className:"text-red-600 font-medium",children:"Failed to load reviews"})]}):t?.ratings?.length?e.jsx("div",{className:"space-y-4 mt-4 max-h-[60vh] overflow-y-auto custom-scroll pr-2",children:t.ratings.map(r=>{const i=(r.likes?.length??0)>0;return e.jsxs("div",{className:"bg-white border-2 border-slate-200 rounded-2xl p-5 shadow-sm hover:shadow-md transition",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-full flex items-center justify-center text-white font-bold text-base shadow",children:(r.user?.name??"A").charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-800 text-base",children:r.user?.name??"Anonymous"}),e.jsx("p",{className:"text-xs text-slate-500",children:r.createdAt?new Date(r.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):""})]})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-gradient-to-r from-orange-500 to-orange-600 px-2 py-1.5 rounded-lg shadow-sm",children:[Array.from({length:5}).map((g,c)=>e.jsx(be,{size:14,className:c<(r.rating??0)?"text-white":"text-white/40",fill:c<(r.rating??0)?"currentColor":"none"},c)),e.jsxs("span",{className:"text-white font-bold text-xs ml-1",children:[r.rating??0,".0"]})]})]}),r.title&&e.jsx("h3",{className:"text-base font-semibold text-slate-800 mb-2",children:r.title}),e.jsx("p",{className:"text-slate-600 text-sm leading-relaxed mb-4",children:r.description??r.comment??""}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-slate-200",children:[e.jsx("div",{className:"text-xs text-slate-500",children:r.createdAt?new Date(r.createdAt).toLocaleString():""}),e.jsxs("button",{onClick:()=>o(r._id),disabled:d===r._id,"aria-pressed":i,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-semibold transition-all shadow-sm
                      disabled:opacity-50 disabled:cursor-not-allowed
                      ${i?"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white":"bg-white border border-slate-200 text-emerald-600 hover:bg-emerald-50 hover:text-primary"}`,children:[e.jsx(je,{size:14,className:i?"text-white":"text-emerald-500",fill:i?"currentColor":"none"}),e.jsx("span",{children:i?"Helpful":"Mark Helpful"}),(r.likes?.length??0)>0&&e.jsxs("span",{className:`font-bold ${i?"text-white":"text-slate-700"}`,children:["(",r.likes?.length,")"]})]})]})]},r._id)})}):e.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-emerald-50/20 border-2 border-slate-200 rounded-2xl p-8 text-center",children:[e.jsx("div",{className:"bg-white rounded-full p-4 w-20 h-20 mx-auto mb-3 shadow-md",children:e.jsx("span",{className:"material-symbols-outlined text-emerald-500 text-4xl",children:"reviews"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:"No reviews yet"}),e.jsx("p",{className:"text-slate-600 mb-4",children:"Be the first to share your experience!"}),e.jsx("button",{onClick:()=>P()?s({isRating:!0}):n("/login"),className:"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white px-4 py-2 rounded-lg font-semibold shadow-sm transition",children:"Write First Review"})]}),e.jsx("div",{className:"md:hidden mt-4",children:e.jsx("button",{onClick:()=>P()?s({isRating:!0}):n("/login"),className:"w-full bg-gradient-to-r from-emerald-500 to-emerald-600 text-white px-4 py-3 rounded-xl font-semibold shadow-md transition",children:"Write Review"})}),e.jsx(Y,{show:x?.isRating||!1,handleClose:()=>u({isRating:!1}),isAdd:!0,productId:p})]})},Ue=()=>{const[t]=ae(),a=t.get("variant"),m=t.get("size"),{user:p}=re(),{product:s,isLoading:u,refetchProduct:x,selectedImg:n,setSelectedImg:d,zoom:h,setZoom:f,mousePos:o,handleMouseMove:r,selectedVariantId:i,selectedVariant:g,selectedSizeId:c,handleColorSelect:k,handleSizeSelect:R,handleAddtoCart:_,addIteamMutation:v,images:S}=Ce(a||"",m||""),{openModal:$,closeModal:F,isModalOpen:L}=Z(),{data:A,isLoading:I,isError:B}=we({productId:s?._id||""}),y=A?.ratings&&A?.ratings.length>0;if(u)return e.jsx(ie,{});if(!s)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-6xl text-gray-300 mb-4",children:"inventory_2"}),e.jsx("p",{className:"text-xl text-text-muted",children:"Product not found"})]})});const w=g?.sizes.find(l=>l._id===c)?.sell_price||0,N=g?.sizes.find(l=>l._id===c)?.original_price||0,E=N?Math.round((N-w)/N*100):0;return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto px-4 py-4 md:py-8 mt-9 md:mt-0",children:[e.jsx("div",{className:"block lg:hidden mb-3",children:e.jsxs("nav",{className:"flex items-center gap-1.5 text-xs text-text-muted overflow-x-auto whitespace-nowrap pb-1 px-1",children:[e.jsx(z,{to:"/",className:"hover:text-primary transition-colors",children:"Home"}),e.jsx("span",{className:"material-symbols-outlined text-xs",children:"chevron_right"}),e.jsx(z,{to:"/product",className:"hover:text-primary transition-colors",children:"Products"}),s.category?.name&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-symbols-outlined text-xs",children:"chevron_right"}),e.jsx(z,{to:"/product",className:"hover:text-primary transition-colors",children:s.category.name})]}),e.jsx("span",{className:"material-symbols-outlined text-xs",children:"chevron_right"}),e.jsx("span",{className:"text-text font-medium truncate",children:s.name})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8",children:[e.jsx("div",{className:"lg:col-span-4",children:e.jsxs("div",{className:"lg:sticky lg:top-24",children:[e.jsx("div",{className:"lg:hidden",children:e.jsxs("div",{className:"relative bg-surface rounded-xl border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"flex overflow-x-auto snap-x snap-mandatory scrollbar-hide",children:S.map((l,j)=>e.jsx("div",{className:"relative min-w-full snap-center",children:e.jsx("img",{src:l,alt:`${s.name} ${j+1}`,className:"w-full h-64 object-contain bg-white p-3"})},j))}),e.jsx(H,{productId:s._id,variantId:i,isInWishlist:s.isInWishlist,className:"absolute top-3 right-3 z-10"}),e.jsxs("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 bg-black/60 backdrop-blur-sm text-white px-2.5 py-1 rounded-full text-xs font-medium",children:["1 / ",S.length]})]})}),e.jsxs("div",{className:"hidden lg:block space-y-3",children:[e.jsxs("div",{className:"relative bg-surface rounded-xl border border-gray-200 overflow-hidden group",children:[e.jsx("div",{className:"w-full h-80 p-4",children:e.jsx("img",{src:n||S[0],alt:s.name,className:"w-full h-full object-contain",onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),onMouseMove:r})}),e.jsx(H,{productId:s._id,variantId:i,isInWishlist:s.isInWishlist,className:"absolute top-3 right-3 z-10"}),h&&e.jsxs("div",{className:"absolute top-3 left-3 bg-black/60 backdrop-blur-sm text-white px-2.5 py-1 rounded-lg text-xs font-medium",children:[e.jsx("span",{className:"material-symbols-outlined text-sm mr-1 align-middle",children:"zoom_in"}),"Hover to zoom"]})]}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:S.map((l,j)=>e.jsx("button",{onClick:()=>d(l),className:`bg-white relative aspect-square rounded-lg border-2 overflow-hidden transition-all hover:scale-105 ${n===l?"border-secondary shadow-md ring-2 ring-primary/20":"border-gray-200 hover:border-gray-300"}`,children:e.jsx("img",{src:l,alt:`Thumbnail ${j+1}`,className:"w-full h-full object-cover p-1"})},j))})]}),c&&g&&e.jsxs("div",{className:"hidden lg:grid grid-cols-2 gap-3 mt-4",children:[e.jsxs("button",{disabled:v.isPending,onClick:()=>_({product_id:s._id,size_Id:c,variant_id:i,type:"through_cart"}),className:"flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-secondary to-secondary-dark hover:from-secondary-dark hover:to-secondary text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(D,{size:18}),e.jsx("span",{className:"text-sm",children:"Add to Cart"})]}),e.jsxs("button",{disabled:v.isPending,onClick:()=>_({product_id:s._id,size_Id:c,variant_id:i,type:"direct"}),className:"flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-primary to-primary-dark hover:from-primary-dark hover:to-primary text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(K,{size:18}),e.jsx("span",{className:"text-sm",children:"Buy Now"})]})]})]})}),e.jsxs("div",{className:"lg:col-span-8 space-y-0 lg:space-y-6",children:[e.jsxs("nav",{className:"hidden lg:flex items-center gap-2 text-sm text-text-muted mb-2 overflow-x-auto whitespace-nowrap pb-2",children:[e.jsx(z,{to:"/",className:"hover:text-primary transition-colors",children:"Home"}),e.jsx("span",{className:"material-symbols-outlined text-xs",children:"chevron_right"}),e.jsx(z,{to:"/product",className:"hover:text-primary transition-colors",children:"Products"}),s.category?.name&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-symbols-outlined text-xs",children:"chevron_right"}),e.jsx(z,{to:`/products?category_id=${s.category._id}`,className:"hover:text-primary transition-colors",children:s.category.name})]}),e.jsx("span",{className:"material-symbols-outlined text-xs",children:"chevron_right"}),e.jsx("span",{className:"text-text font-medium truncate",children:s.name})]}),e.jsxs("div",{className:"bg-surface rounded-2xl border-2 border-gray-100 p-4 md:p-6 space-y-4",children:[s.brand?.name&&e.jsxs("div",{className:"inline-flex items-center gap-2 bg-primary/10 text-primary px-3 py-1 rounded-full text-xs md:text-sm font-medium",children:[e.jsx("span",{className:"material-symbols-outlined text-sm md:text-base",children:"verified"}),s.brand.name]}),e.jsx("h1",{className:"text-xl md:text-2xl lg:text-3xl font-bold text-text leading-tight",children:s.name}),s.category?.name&&e.jsxs("p",{className:"text-text-muted text-xs md:text-sm",children:["Category: ",e.jsx("span",{className:"font-medium text-text",children:s.category.name})]}),e.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2 bg-secondary px-2 md:px-3 py-1 md:py-1.5 rounded-lg",children:[e.jsx("span",{className:"text-white font-bold text-sm md:text-base",children:s?.ratings?.average.toFixed(1)}),e.jsx("span",{className:"material-symbols-outlined text-white text-xs md:text-sm",children:"star"})]}),e.jsxs("span",{className:"text-text-muted text-xs md:text-sm font-medium",children:[s?.ratings?.count," ",s?.ratings?.count===1?"Rating":"Ratings"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-4 pt-2",children:[e.jsxs("span",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-secondary",children:["₹",w.toLocaleString("en-IN")]}),N>w&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-base md:text-xl lg:text-2xl line-through text-text-muted",children:["₹",N.toLocaleString("en-IN")]}),e.jsxs("span",{className:"bg-red-500 text-white text-xs md:text-sm font-bold px-2 md:px-3 py-0.5 md:py-1 rounded-full whitespace-nowrap",children:[E,"% OFF"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-3 pt-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2 text-xs",children:[e.jsx(he,{className:"text-primary flex-shrink-0",size:14}),e.jsx("span",{className:"text-text-muted",children:"Free Delivery"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2 text-xs",children:[e.jsx(pe,{className:"text-primary flex-shrink-0",size:14}),e.jsx("span",{className:"text-text-muted",children:"Secure Payment"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2 text-xs",children:[e.jsx("span",{className:"material-symbols-outlined text-primary flex-shrink-0",style:{fontSize:"14px"},children:"verified_user"}),e.jsx("span",{className:"text-text-muted",children:"Authentic"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2 text-xs",children:[e.jsx("span",{className:"material-symbols-outlined text-primary flex-shrink-0",style:{fontSize:"14px"},children:"local_offer"}),e.jsx("span",{className:"text-text-muted",children:"Best Price"})]})]})]}),s.offers&&s.offers.length>0&&e.jsxs("div",{className:"bg-surface rounded-2xl border-2 border-gray-100 p-4 md:p-6",children:[e.jsxs("h3",{className:"text-base md:text-lg font-bold text-text mb-3 md:mb-4 flex items-center gap-2",children:[e.jsx(ge,{className:"text-primary",size:18}),"Available Offers"]}),e.jsx("ul",{className:"space-y-2 md:space-y-3",children:s.offers.slice(0,3).map((l,j)=>e.jsxs("li",{className:"flex items-start gap-2 md:gap-3 text-xs md:text-sm",children:[e.jsx("span",{className:"material-symbols-outlined text-secondary text-base md:text-lg flex-shrink-0",children:"check_circle"}),e.jsx("span",{className:"text-text-muted",children:l})]},j))}),s.offers.length>3&&e.jsxs("button",{className:"text-primary font-medium text-xs md:text-sm mt-2 md:mt-3 hover:underline",children:["+ ",s.offers.length-3," more offers"]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-200 shadow-lg overflow-hidden !mt-3 md:mt-0",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 px-4 md:px-6 py-3 md:py-4",children:e.jsxs("h3",{className:"text-base md:text-xl font-bold text-white flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-xl md:text-2xl",children:"palette"}),"Select Color"]})}),e.jsx("div",{className:"p-4 md:p-6",children:e.jsx("div",{className:"flex flex-wrap gap-2 md:gap-3",children:s.productVariant.map(l=>e.jsx("button",{onClick:()=>k(l._id),className:`px-3 md:px-5 py-2 md:py-3 rounded-xl border-2 font-medium text-xs md:text-sm transition-all ${i===l._id?"border-secondary bg-secondary/10 text-secondary shadow-md":"border-gray-200 text-text hover:border-gray-300 hover:bg-primary-dark hover:text-white"}`,children:l.color},l._id))})})]}),g&&g.sizes.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-200 shadow-lg overflow-hidden !mt-3 md:mt-0",children:[e.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-emerald-600 px-4 md:px-6 py-3 md:py-4",children:e.jsxs("h3",{className:"text-base md:text-xl font-bold text-white flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-xl md:text-2xl",children:"straighten"}),"Select Size"]})}),e.jsx("div",{className:"p-4 md:p-6",children:e.jsx("div",{className:"flex flex-wrap gap-2 md:gap-3",children:g.sizes.map(l=>{const j=l.attributes.find(J=>J.name==="Storage"),M=j?j.value:null;return e.jsxs("button",{onClick:()=>R(l._id),className:`px-3 md:px-5 py-2 md:py-3 rounded-xl border-2 font-medium text-xs md:text-sm transition-all ${c===l._id?"border-secondary bg-secondary/10 text-secondary shadow-md":"border-gray-200 text-text hover:border-gray-300 hover:bg-secondary-dark hover:text-white"}`,children:[l.size," ",M&&`/ ${M}`]},l._id)})})})]}),g&&g.sizes.length>0&&g.sizes[0].highlights&&g.sizes[0].highlights.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-200 shadow-lg overflow-hidden !mt-3 md:mt-0",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 px-4 md:px-6 py-3 md:py-4",children:e.jsxs("h3",{className:"text-base md:text-xl font-bold text-white flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-xl md:text-2xl",children:"star"}),"Key Highlights"]})}),e.jsx("div",{className:"p-4 md:p-6",children:e.jsx("ul",{className:"space-y-2 md:space-y-3",children:g.sizes[0].highlights.map((l,j)=>e.jsxs("li",{className:"flex items-start gap-2 md:gap-3 group",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 md:w-8 md:h-8 rounded-full bg-emerald-100 flex items-center justify-center group-hover:bg-emerald-500 transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-emerald-600 group-hover:text-white text-base md:text-lg transition-colors",children:"check_circle"})}),e.jsx("span",{className:"text-slate-700 text-xs md:text-sm leading-relaxed pt-0.5 md:pt-1 flex-1",children:l})]},j))})})]}),e.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-200 shadow-lg overflow-hidden !mt-3 md:mt-0",children:[e.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-emerald-600 px-4 md:px-6 py-3 md:py-4",children:e.jsxs("h3",{className:"text-base md:text-xl font-bold text-white flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-xl md:text-2xl",children:"description"}),"Specifications"]})}),e.jsx("div",{className:"p-4 md:p-6",children:e.jsx(Ae,{attributes:s.attributes,productVariants:s.productVariant,selectedVariantId:i,selectedSizeId:c})})]}),e.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-200 shadow-lg overflow-hidden !mt-3 md:mt-0",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 px-4 md:px-6 py-3 md:py-4",children:e.jsxs("h3",{className:"text-base md:text-xl font-bold text-white flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-xl md:text-2xl",children:"factory"}),"Manufacturing Details"]})}),e.jsx("div",{className:"p-4 md:p-6",children:e.jsx(Re,{manufacturingInfo:s.manufacturingInfo,attributes:s.attributes})})]}),p&&!y&&e.jsxs("button",{onClick:()=>$({isRating:!0}),className:"w-full py-3 md:py-4 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all flex items-center justify-center gap-2 text-sm md:text-base",children:[e.jsx("span",{className:"material-symbols-outlined",children:"star"}),"Rate this Product"]}),e.jsx(Pe,{data:A,isError:B,isLoading:I,product_id:s._id})]})]}),h&&e.jsx("div",{className:"hidden lg:block fixed right-8 top-24 z-50 w-96 h-96 rounded-xl border-4 border-primary shadow-2xl bg-white overflow-hidden",children:e.jsx("img",{src:n||S[0],alt:"Zoomed view",className:"w-full h-full object-contain",style:{transform:`scale(2.5) translate(-${o.x}%, -${o.y}%)`,transformOrigin:`${o.x}% ${o.y}%`}})}),e.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-surface border-t-2 border-gray-200 shadow-2xl z-50",children:e.jsx("div",{className:"container mx-auto px-4 py-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{disabled:v.isPending||!c,onClick:()=>_({product_id:s._id,type:"through_cart",size_Id:c,variant_id:i}),className:"flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-secondary to-secondary-dark text-white rounded-xl font-semibold shadow-lg active:scale-95 transition-all disabled:opacity-50 text-sm",children:[e.jsx(D,{size:16}),e.jsx("span",{children:"Add to Cart"})]}),e.jsxs("button",{disabled:v.isPending||!c,onClick:()=>_({product_id:s._id,type:"direct",size_Id:c,variant_id:i}),className:"flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl font-semibold shadow-lg active:scale-95 transition-all disabled:opacity-50 text-sm",children:[e.jsx(K,{size:16}),e.jsx("span",{children:"Buy Now"})]})]})})}),e.jsx("div",{className:"mt-12 mb-20 lg:mb-8",children:e.jsxs("div",{className:"bg-white rounded-2xl border-2 border-slate-200 shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary to-primary-dark px-4 md:px-6 py-3 md:py-4",children:e.jsxs("h2",{className:"text-xl md:text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-2xl md:text-3xl",children:"shopping_bag"}),"Related Products"]})}),e.jsx("div",{className:"p-4 md:p-6",children:e.jsx(oe,{category:s.category?._id,title:"",exclude:s._id})})]})}),e.jsx(Y,{show:L?.isRating||!1,handleClose:()=>F({isRating:!1}),isAdd:!0,productId:s._id,refetch:x})]})})};export{Ue as default};
