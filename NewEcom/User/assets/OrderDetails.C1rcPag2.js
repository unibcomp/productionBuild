import{j as e,d as O,e as P}from"./index.iBcEEe4E.js";import{b as k}from"./useOrder.DGBVX9fE.js";import"./useMutation.GV4_nnAS.js";const i={Placed:"Placed",Shipped:"Shipped",OutForDelivery:"Out for Delivery",Delivered:"Delivered"},y=[{key:i.Placed,label:"Order Confirmed"},{key:i.Shipped,label:"Shipped"},{key:i.OutForDelivery,label:"Out For Delivery"},{key:i.Delivered,label:"Delivered"}];function z(t){if(!t)return"";try{return new Date(t).toLocaleDateString()}catch{return t}}const _=({currentStatus:t=i.Placed,timestamps:h={},size:c="normal"})=>{const g=String(t),n=y.findIndex(a=>a.key===g),p=c==="small"?"w-6 h-6":"w-8 h-8";return e.jsx("div",{className:"flex items-center w-full",children:y.map((a,d)=>{const l=d<n,o=d===n;return e.jsxs("div",{className:"flex-1 flex flex-col items-center relative",children:[e.jsxs("div",{className:"flex items-center w-full",children:[d!==0&&e.jsx("div",{className:`h-1 flex-1 ${l?"bg-orange-500":"bg-gray-200"}`}),e.jsx("div",{className:`rounded-full border-2 ${p} flex items-center justify-center z-10 ${l?"bg-orange-800 border-orange-800 text-white":o?"border-orange-500 bg-white text-orange-500":"bg-white border-gray-300 text-gray-300"}`,children:l&&e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 00-1.414-1.414L8 11.172 4.707 7.879a1 1 0 00-1.414 1.414l4 4a1 1 0 001.414 0l8-8z",clipRule:"evenodd"})})}),d!==y.length-1&&e.jsx("div",{className:`h-1 flex-1 ${d<n?"bg-orange-500":"bg-gray-200"}`})]}),e.jsxs("div",{className:"mt-1 text-center",children:[e.jsx("div",{className:`${l?"text-gray-800 font-semibold text-xs":o?"text-orange-800 font-semibold text-xs":"text-gray-400 text-xs"}`,children:a.label}),e.jsx("div",{className:"text-gray-400 text-[10px] mt-1",children:z(h[a.key])})]})]},a.key)})})},C=()=>{const[t]=O(),h=P(),c=t.get("order_id")??"",g=t.get("item_id")??"",{data:n,isLoading:p,isError:a,error:d}=k({orderId:c,item_id:g,orderStatus:""});if(!c)return e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-orange-600",children:"Missing order id"}),e.jsx("p",{className:"text-sm text-gray-600",children:"This page needs order_id in the query string."}),e.jsx("button",{onClick:()=>h("/"),className:"mt-3 px-3 py-2 bg-orange-500 hover:bg-orange-800 text-white rounded transition",children:"Back to orders"})]});if(p)return e.jsx("div",{className:"flex justify-center items-center h-40 text-gray-500",children:"Loading order details..."});if(a)return e.jsxs("div",{className:"p-4 bg-red-100 text-red-700 rounded-lg",children:["Failed to load order: ",d?.message??"Unknown error"]});const l=n?.result,{_id:o,orderStatus:u,paymentStatus:S,paymentMethod:N,transaction_id:D,totalAmount:f,shippingAddress:r,item:b=[],refundAmount:v,refundStatus:w,priceDetails:j={},timeline:x=[]}=l;return e.jsxs("div",{className:"max-w-5xl mx-auto bg-gray-50 p-6 space-y-6",children:[v&&e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 border border-orange-200",children:[e.jsxs("h2",{className:"text-lg font-semibold text-orange-600",children:["Total refund - â‚¹",v]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Refund was added to your ",N," account."," ",e.jsx("span",{className:`font-medium ${w==="Completed"?"text-green-600":"text-yellow-600"}`,children:w})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 border border-orange-200 space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-orange-600",children:"Order Details"}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-800",children:"Order ID:"})," ",o]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-800",children:"Status:"})," ",e.jsx("span",{className:`px-2 py-1 rounded text-sm ${u==="Cancelled"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:u})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-800",children:"Payment:"})," ",S," (",N,")"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-800",children:"Transaction ID:"})," ",D]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-gray-800",children:"Total:"})," â‚¹",f]})]}),e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 border border-orange-200 space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-orange-600",children:"Items"}),b.length?b.map(s=>e.jsxs("div",{className:"flex gap-4 border border-orange-100 rounded-lg p-3 hover:border-orange-500 transition",children:[e.jsx("img",{src:s.image||"/placeholder.png",alt:s.name,className:"w-20 h-20 object-cover rounded"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium text-gray-800",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.color?`${s.color} - `:"",s.size?.size," ",s.size?.sizeName]}),e.jsxs("p",{className:"text-sm",children:["Price:"," ",e.jsxs("span",{className:"line-through text-gray-500",children:["â‚¹",s.size?.original_price]})," ",e.jsxs("span",{className:"font-medium text-orange-600 ml-1",children:["â‚¹",s.size?.sell_price]})]}),e.jsxs("p",{className:"text-sm text-gray-700",children:["Quantity: ",s.quantity??1]}),e.jsxs("p",{className:"font-medium text-orange-600",children:["Total: â‚¹",s.total]})]})]},s._id)):e.jsx("p",{children:"No items found in this order."}),x.length>0&&e.jsx("div",{className:"mt-6",children:e.jsx(_,{currentStatus:u,timestamps:x.reduce((s,m)=>(s[m.status]=m.date,s),{}),size:"normal"})})]}),x.length>0&&e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 border border-orange-200 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-orange-600",children:"Order Updates"}),e.jsx("div",{className:"space-y-3",children:x.map((s,m)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-4 h-4 mt-1 rounded-full ${s.status==="Cancelled"?"bg-red-500":"bg-orange-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:s.status}),e.jsx("p",{className:"text-sm text-gray-600",children:s.date})]})]},m))})]})]}),e.jsxs("div",{className:"space-y-6",children:[r&&e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 border border-orange-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-orange-600",children:"Delivery details"}),e.jsx("p",{className:"font-medium text-gray-800",children:r.name}),e.jsxs("p",{children:[r.addressLine1,", ",r.addressLine2]}),e.jsxs("p",{children:[r.city,", ",r.state," -"," ",r.postalCode]}),e.jsx("p",{children:r.country}),e.jsxs("p",{className:"text-sm mt-2 text-gray-700",children:["ðŸ“ž ",r.phone]})]}),e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 border border-orange-200 space-y-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-orange-600",children:"Price details"}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-700",children:[e.jsx("span",{children:"Listing price"}),e.jsxs("span",{children:["â‚¹",j?.listingPrice||0]})]}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-700",children:[e.jsx("span",{children:"Selling price"}),e.jsxs("span",{children:["â‚¹",j?.sellingPrice||0]})]}),e.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{children:["-â‚¹",j?.discount||0]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between font-medium text-gray-800",children:[e.jsx("span",{children:"Total amount"}),e.jsxs("span",{className:"text-orange-600",children:["â‚¹",f]})]})]})]})]})]})};export{C as default};
